(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{"1A98":function(l,n,u){"use strict";var e=u("8Y7J"),t=u("SVse");u("vLYz"),u.d(n,"a",(function(){return i})),u.d(n,"b",(function(){return b}));var i=e.qb({encapsulation:0,styles:[[".uploader-zone[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}.uploader-zone[_ngcontent-%COMP%]{font-weight:400;-webkit-box-align:center;align-items:center;background-color:rgba(0,0,0,.02);cursor:pointer;display:-webkit-box;display:flex;height:100px;-webkit-box-pack:center;justify-content:center;outline:#ccc dashed 3px}div.fileitem[_ngcontent-%COMP%]{margin:2px;padding:2px;border:1px solid #efefef;border-radius:4px}"]],data:{}});function r(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,4,"div",[["class","float-left fileitem"]],null,null,null,null,null)),(l()(),e.Mb(1,null,[" "," "])),(l()(),e.sb(2,0,null,null,2,"button",[["aria-label","Close"],["class","close"],["style","margin-left: 0.5em;"],["type","button"]],null,[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.remove(l.context.$implicit)&&e),e}),null,null)),(l()(),e.sb(3,0,null,null,1,"span",[["aria-hidden","true"]],null,null,null,null,null)),(l()(),e.Mb(-1,null,["\xd7"]))],null,(function(l,n){l(n,1,0,n.context.$implicit.name)}))}function s(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,5,"div",[["class","clearfix"],["style","margin-bottom: 1em;"]],null,null,null,null,null)),(l()(),e.sb(1,0,null,null,2,"div",[["class",""]],null,null,null,null,null)),(l()(),e.sb(2,0,null,null,1,"label",[],null,null,null,null,null)),(l()(),e.Mb(-1,null,["Files:"])),(l()(),e.hb(16777216,null,null,1,null,r)),e.rb(5,278528,null,0,t.l,[e.O,e.L,e.r],{ngForOf:[0,"ngForOf"]},null)],(function(l,n){l(n,5,0,n.component.files)}),null)}function o(l){return e.Ob(0,[(l()(),e.sb(0,0,[["inputField",1]],null,0,"input",[["multiple",""],["name","inputField"],["type","file"]],null,[[null,"change"]],(function(l,n,u){var e=!0;return"change"===n&&(e=!1!==l.component.handleFileSelect(u)&&e),e}),null,null))],null,null)}function a(l){return e.Ob(0,[(l()(),e.sb(0,0,[["inputField",1]],null,0,"input",[["name","inputField"],["type","file"]],null,[[null,"change"]],(function(l,n,u){var e=!0;return"change"===n&&(e=!1!==l.component.handleFileSelect(u)&&e),e}),null,null))],null,null)}function c(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,1,"div",[["class","alert alert-danger"]],null,null,null,null,null)),(l()(),e.Mb(1,null,[" Maximum upload size is ","MB "]))],null,(function(l,n){l(n,1,0,n.component.sizeLimit)}))}function b(l){return e.Ob(0,[e.Kb(671088640,1,{inputField:0}),(l()(),e.sb(1,0,null,null,16,"div",[],null,null,null,null,null)),(l()(),e.hb(16777216,null,null,1,null,s)),e.rb(3,16384,null,0,t.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.sb(4,0,null,null,9,"div",[["style","margin-bottom: 1em;"]],null,null,null,null,null)),(l()(),e.sb(5,0,null,null,8,"label",[["class","uploader-zone"],["ondragover","return false;"]],[[2,"loaded",null],[4,"outlineColor",null]],[[null,"dragenter"],[null,"dragleave"],[null,"drop"]],(function(l,n,u){var e=!0,t=l.component;return"dragenter"===n&&(e=!1!==t.handleDragEnter()&&e),"dragleave"===n&&(e=!1!==t.handleDragLeave()&&e),"drop"===n&&(e=!1!==t.handleDrop(u)&&e),e}),null,null)),(l()(),e.sb(6,0,null,null,1,"i",[["class","material-icons bd-icon bd-primary"],["style","font-size: 400%;"]],null,null,null,null,null)),(l()(),e.Mb(-1,null,["cloud_upload"])),(l()(),e.sb(8,0,null,null,1,"p",[],null,null,null,null,null)),(l()(),e.Mb(-1,null,[" Drag file(s) or click to select"])),(l()(),e.hb(16777216,null,null,1,null,o)),e.rb(11,16384,null,0,t.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.hb(16777216,null,null,1,null,a)),e.rb(13,16384,null,0,t.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.hb(16777216,null,null,1,null,c)),e.rb(15,16384,null,0,t.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.sb(16,0,null,null,1,"button",[["class","btn btn-primary btn-sm"],["type","button"]],[[8,"disabled",0]],[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.upload()&&e),e}),null,null)),(l()(),e.Mb(-1,null,["Upload selected "]))],(function(l,n){var u=n.component;l(n,3,0,u.files.length>0),l(n,11,0,u.multiple),l(n,13,0,!u.multiple),l(n,15,0,u.sizeError)}),(function(l,n){var u=n.component;l(n,5,0,u.loaded,u.dragging?u.activeColor:u.baseColor),l(n,16,0,u.blocked||u.files.length<1||u.sizeError)}))}},"9+85":function(l,n,u){"use strict";u.d(n,"a",(function(){return r}));var e=u("W8w2"),t=u("8Y7J"),i=u("s6ns");let r=(()=>{class l{constructor(l){this.dialogs=l}confirm(l,n,u="Cancel",t="OK"){const i=new e.b(l,n,u,t);return this.dialogs.open(e.a,{data:i,autoFocus:!1}).afterClosed()}}return l.ngInjectableDef=t.Sb({factory:function(){return new l(t.Tb(i.e))},token:l,providedIn:"root"}),l})()},GVyA:function(l,n,u){"use strict";u.d(n,"a",(function(){return e}));class e{constructor(l,n,u,e,t){this.experimentService=l,this.currentExperiment=n,this.feedback=u,this.titleSetter=e,this.router=t}}},YiFe:function(l,n,u){"use strict";u.d(n,"a",(function(){return e}));class e{}},fSIb:function(l,n,u){"use strict";u.r(n);var e=u("8Y7J");class t{}var i=u("t68o"),r=u("zbXB"),s=u("pMnS"),o=u("SVse");class a{}var c=e.qb({encapsulation:2,styles:[],data:{}});function b(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,6,"div",[["class","item"]],null,null,null,null,null)),(l()(),e.sb(1,0,null,null,1,"strong",[],null,null,null,null,null)),(l()(),e.Mb(-1,null,["Open Access: "])),(l()(),e.Mb(-1,null,[" under "])),(l()(),e.sb(4,0,null,null,1,"strong",[],null,null,null,null,null)),(l()(),e.Mb(5,null,["",""])),(l()(),e.Mb(-1,null,[" license "]))],null,(function(l,n){l(n,5,0,n.component.model.features.licence)}))}function d(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),e.Mb(1,null,["",", "]))],null,(function(l,n){l(n,1,0,n.context.$implicit.name)}))}function h(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,4,"div",[["class","item"]],null,null,null,null,null)),(l()(),e.sb(1,0,null,null,1,"strong",[],null,null,null,null,null)),(l()(),e.Mb(-1,null,["Authors: "])),(l()(),e.hb(16777216,null,null,1,null,d)),e.rb(4,278528,null,0,o.l,[e.O,e.L,e.r],{ngForOf:[0,"ngForOf"]},null)],(function(l,n){l(n,4,0,n.component.model.contributionDesc.authors)}),null)}function m(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,12,"div",[["class","summary-box"]],null,null,null,null,null)),(l()(),e.sb(1,0,null,null,3,"div",[["class","item"]],null,null,null,null,null)),(l()(),e.sb(2,0,null,null,1,"strong",[],null,null,null,null,null)),(l()(),e.Mb(-1,null,["Purpose: "])),(l()(),e.Mb(4,null,[" "," "])),(l()(),e.hb(16777216,null,null,1,null,b)),e.rb(6,16384,null,0,o.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.hb(16777216,null,null,1,null,h)),e.rb(8,16384,null,0,o.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.sb(9,0,null,null,3,"div",[["class","item item-last"]],null,null,null,null,null)),(l()(),e.sb(10,0,null,null,1,"strong",[],null,null,null,null,null)),(l()(),e.Mb(-1,null,["Data category: "])),(l()(),e.Mb(12,null,[" "," "]))],(function(l,n){var u=n.component;l(n,6,0,u.model.features.isOpenAccess),l(n,8,0,u.model.contributionDesc.authors)}),(function(l,n){var u=n.component;l(n,4,0,u.model.generalDesc.purpose),l(n,12,0,null==u.model.dataCategory?null:u.model.dataCategory.longName)}))}function f(l){return e.Ob(0,[(l()(),e.hb(16777216,null,null,1,null,m)),e.rb(1,16384,null,0,o.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null)],(function(l,n){l(n,1,0,n.component.model)}),null)}var p=u("iInd");class g{constructor(){this.onRefresh=new e.m}refresh(){this.onRefresh.emit(!0)}back(){window.history.back()}}var v=e.qb({encapsulation:2,styles:[],data:{}});function k(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,7,"a",[["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(l,n,u){var t=!0;return"click"===n&&(t=!1!==e.Eb(l,1).onClick(u.button,u.ctrlKey,u.metaKey,u.shiftKey)&&t),t}),null,null)),e.rb(1,671744,[[4,4]],0,p.o,[p.l,p.a,o.j],{routerLink:[0,"routerLink"]},null),e.Fb(2,1),e.rb(3,1720320,null,2,p.n,[p.l,e.k,e.D,[2,p.m],[2,p.o]],{routerLinkActiveOptions:[0,"routerLinkActiveOptions"],routerLinkActive:[1,"routerLinkActive"]},null),e.Kb(603979776,3,{links:1}),e.Kb(603979776,4,{linksWithHrefs:1}),e.Hb(6,{exact:0}),(l()(),e.Mb(-1,null,["Edit"]))],(function(l,n){var u=l(n,2,0,"edit");l(n,1,0,u);var e=l(n,6,0,!0);l(n,3,0,e,"active")}),(function(l,n){l(n,0,0,e.Eb(n,1).target,e.Eb(n,1).href)}))}function O(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,7,"a",[["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(l,n,u){var t=!0;return"click"===n&&(t=!1!==e.Eb(l,1).onClick(u.button,u.ctrlKey,u.metaKey,u.shiftKey)&&t),t}),null,null)),e.rb(1,671744,[[6,4]],0,p.o,[p.l,p.a,o.j],{routerLink:[0,"routerLink"]},null),e.Fb(2,4),e.rb(3,1720320,null,2,p.n,[p.l,e.k,e.D,[2,p.m],[2,p.o]],{routerLinkActiveOptions:[0,"routerLinkActiveOptions"],routerLinkActive:[1,"routerLinkActive"]},null),e.Kb(603979776,5,{links:1}),e.Kb(603979776,6,{linksWithHrefs:1}),e.Hb(6,{exact:0}),(l()(),e.Mb(-1,null,["Show data"]))],(function(l,n){var u=l(n,2,0,".","data","view","ts");l(n,1,0,u);var e=l(n,6,0,!0);l(n,3,0,e,"active")}),(function(l,n){l(n,0,0,e.Eb(n,1).target,e.Eb(n,1).href)}))}function y(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,7,"a",[["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(l,n,u){var t=!0;return"click"===n&&(t=!1!==e.Eb(l,1).onClick(u.button,u.ctrlKey,u.metaKey,u.shiftKey)&&t),t}),null,null)),e.rb(1,671744,[[8,4]],0,p.o,[p.l,p.a,o.j],{routerLink:[0,"routerLink"]},null),e.Fb(2,1),e.rb(3,1720320,null,2,p.n,[p.l,e.k,e.D,[2,p.m],[2,p.o]],{routerLinkActiveOptions:[0,"routerLinkActiveOptions"],routerLinkActive:[1,"routerLinkActive"]},null),e.Kb(603979776,7,{links:1}),e.Kb(603979776,8,{linksWithHrefs:1}),e.Hb(6,{exact:0}),(l()(),e.Mb(-1,null,["Period analysis"]))],(function(l,n){var u=l(n,2,0,"ppa/new");l(n,1,0,u);var e=l(n,6,0,!0);l(n,3,0,e,"active")}),(function(l,n){l(n,0,0,e.Eb(n,1).target,e.Eb(n,1).href)}))}function M(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,7,"a",[["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(l,n,u){var t=!0;return"click"===n&&(t=!1!==e.Eb(l,1).onClick(u.button,u.ctrlKey,u.metaKey,u.shiftKey)&&t),t}),null,null)),e.rb(1,671744,[[10,4]],0,p.o,[p.l,p.a,o.j],{routerLink:[0,"routerLink"]},null),e.Fb(2,1),e.rb(3,1720320,null,2,p.n,[p.l,e.k,e.D,[2,p.m],[2,p.o]],{routerLinkActiveOptions:[0,"routerLinkActiveOptions"],routerLinkActive:[1,"routerLinkActive"]},null),e.Kb(603979776,9,{links:1}),e.Kb(603979776,10,{linksWithHrefs:1}),e.Hb(6,{exact:0}),(l()(),e.Mb(-1,null,["Period analysis"]))],(function(l,n){var u=l(n,2,0,"ppa");l(n,1,0,u);var e=l(n,6,0,!1);l(n,3,0,e,"active")}),(function(l,n){l(n,0,0,e.Eb(n,1).target,e.Eb(n,1).href)}))}function C(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,7,"a",[["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(l,n,u){var t=!0;return"click"===n&&(t=!1!==e.Eb(l,1).onClick(u.button,u.ctrlKey,u.metaKey,u.shiftKey)&&t),t}),null,null)),e.rb(1,671744,[[12,4]],0,p.o,[p.l,p.a,o.j],{routerLink:[0,"routerLink"]},null),e.Fb(2,1),e.rb(3,1720320,null,2,p.n,[p.l,e.k,e.D,[2,p.m],[2,p.o]],{routerLinkActiveOptions:[0,"routerLinkActiveOptions"],routerLinkActive:[1,"routerLinkActive"]},null),e.Kb(603979776,11,{links:1}),e.Kb(603979776,12,{linksWithHrefs:1}),e.Hb(6,{exact:0}),(l()(),e.Mb(-1,null,["Rhythmicity"]))],(function(l,n){var u=l(n,2,0,"rhythmicity");l(n,1,0,u);var e=l(n,6,0,!1);l(n,3,0,e,"active")}),(function(l,n){l(n,0,0,e.Eb(n,1).target,e.Eb(n,1).href)}))}function L(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,7,"a",[["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(l,n,u){var t=!0;return"click"===n&&(t=!1!==e.Eb(l,1).onClick(u.button,u.ctrlKey,u.metaKey,u.shiftKey)&&t),t}),null,null)),e.rb(1,671744,[[14,4]],0,p.o,[p.l,p.a,o.j],{routerLink:[0,"routerLink"]},null),e.Fb(2,3),e.rb(3,1720320,null,2,p.n,[p.l,e.k,e.D,[2,p.m],[2,p.o]],{routerLinkActiveOptions:[0,"routerLinkActiveOptions"],routerLinkActive:[1,"routerLinkActive"]},null),e.Kb(603979776,13,{links:1}),e.Kb(603979776,14,{linksWithHrefs:1}),e.Hb(6,{exact:0}),(l()(),e.Mb(7,null,[" ",""]))],(function(l,n){var u=l(n,2,0,".","data","ts-import");l(n,1,0,u);var e=l(n,6,0,!0);l(n,3,0,e,"active")}),(function(l,n){var u=n.component;l(n,0,0,e.Eb(n,1).target,e.Eb(n,1).href),l(n,7,0,u.experiment.features.hasTSData?"Replace data":"Import data")}))}function I(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,8,"a",[["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(l,n,u){var t=!0;return"click"===n&&(t=!1!==e.Eb(l,1).onClick(u.button,u.ctrlKey,u.metaKey,u.shiftKey)&&t),t}),null,null)),e.rb(1,671744,[[18,4]],0,p.o,[p.l,p.a,o.j],{routerLink:[0,"routerLink"]},null),e.Fb(2,1),e.rb(3,1720320,null,2,p.n,[p.l,e.k,e.D,[2,p.m],[2,p.o]],{routerLinkActiveOptions:[0,"routerLinkActiveOptions"],routerLinkActive:[1,"routerLinkActive"]},null),e.Kb(603979776,17,{links:1}),e.Kb(603979776,18,{linksWithHrefs:1}),e.Hb(6,{exact:0}),(l()(),e.sb(7,0,null,null,1,"i",[["class","material-icons bd-icon"],["style","color: green"]],null,null,null,null,null)),(l()(),e.Mb(-1,null,["lock_open"]))],(function(l,n){var u=l(n,2,0,"publish");l(n,1,0,u);var e=l(n,6,0,!0);l(n,3,0,e,"active")}),(function(l,n){l(n,0,0,e.Eb(n,1).target,e.Eb(n,1).href)}))}function x(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,42,"div",[["style","margin-bottom: 2em;"]],null,null,null,null,null)),(l()(),e.sb(1,0,null,null,41,"nav",[["class","secondary"]],null,null,null,null,null)),(l()(),e.sb(2,0,null,null,4,"a",[],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(l,n,u){var t=!0;return"click"===n&&(t=!1!==e.Eb(l,3).onClick(u.button,u.ctrlKey,u.metaKey,u.shiftKey)&&t),t}),null,null)),e.rb(3,671744,null,0,p.o,[p.l,p.a,o.j],{routerLink:[0,"routerLink"]},null),e.Fb(4,1),(l()(),e.sb(5,0,null,null,1,"i",[["class","material-icons bd-icon"]],null,null,null,null,null)),(l()(),e.Mb(-1,null,["fast_rewind"])),(l()(),e.sb(7,0,null,null,2,"a",[["class","shade"],["role","button"]],null,[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.back()&&e),e}),null,null)),(l()(),e.sb(8,0,null,null,1,"i",[["class","material-icons bd-icon"]],null,null,null,null,null)),(l()(),e.Mb(-1,null,["arrow_left"])),(l()(),e.sb(10,0,null,null,2,"a",[["class","shade"],["role","button"]],null,[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.refresh()&&e),e}),null,null)),(l()(),e.sb(11,0,null,null,1,"i",[["class","material-icons bd-icon"]],null,null,null,null,null)),(l()(),e.Mb(-1,null,["refresh"])),(l()(),e.sb(13,0,null,null,7,"a",[["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(l,n,u){var t=!0;return"click"===n&&(t=!1!==e.Eb(l,14).onClick(u.button,u.ctrlKey,u.metaKey,u.shiftKey)&&t),t}),null,null)),e.rb(14,671744,[[2,4]],0,p.o,[p.l,p.a,o.j],{routerLink:[0,"routerLink"]},null),e.Fb(15,1),e.rb(16,1720320,null,2,p.n,[p.l,e.k,e.D,[2,p.m],[2,p.o]],{routerLinkActiveOptions:[0,"routerLinkActiveOptions"],routerLinkActive:[1,"routerLinkActive"]},null),e.Kb(603979776,1,{links:1}),e.Kb(603979776,2,{linksWithHrefs:1}),e.Hb(19,{exact:0}),(l()(),e.Mb(-1,null,["Overview"])),(l()(),e.hb(16777216,null,null,1,null,k)),e.rb(22,16384,null,0,o.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.hb(16777216,null,null,1,null,O)),e.rb(24,16384,null,0,o.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.hb(16777216,null,null,1,null,y)),e.rb(26,16384,null,0,o.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.hb(16777216,null,null,1,null,M)),e.rb(28,16384,null,0,o.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.hb(16777216,null,null,1,null,C)),e.rb(30,16384,null,0,o.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.hb(16777216,null,null,1,null,L)),e.rb(32,16384,null,0,o.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.sb(33,0,null,null,7,"a",[["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(l,n,u){var t=!0;return"click"===n&&(t=!1!==e.Eb(l,34).onClick(u.button,u.ctrlKey,u.metaKey,u.shiftKey)&&t),t}),null,null)),e.rb(34,671744,[[16,4]],0,p.o,[p.l,p.a,o.j],{routerLink:[0,"routerLink"]},null),e.Fb(35,1),e.rb(36,1720320,null,2,p.n,[p.l,e.k,e.D,[2,p.m],[2,p.o]],{routerLinkActiveOptions:[0,"routerLinkActiveOptions"],routerLinkActive:[1,"routerLinkActive"]},null),e.Kb(603979776,15,{links:1}),e.Kb(603979776,16,{linksWithHrefs:1}),e.Hb(39,{exact:0}),(l()(),e.Mb(-1,null,["Files"])),(l()(),e.hb(16777216,null,null,1,null,I)),e.rb(42,16384,null,0,o.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null)],(function(l,n){var u=n.component,e=l(n,4,0,"/experiments");l(n,3,0,e);var t=l(n,15,0,".");l(n,14,0,t);var i=l(n,19,0,!0);l(n,16,0,i,"active"),l(n,22,0,u.experiment.security.canWrite),l(n,24,0,u.experiment.features.hasTSData),l(n,26,0,u.experiment.security.canWrite&&u.experiment.features.hasTSData&&!u.experiment.features.hasPPAJobs),l(n,28,0,u.experiment.features.hasPPAJobs),l(n,30,0,u.experiment.security.canWrite&&u.experiment.features.hasTSData||u.experiment.features.hasRhythmicityJobs),l(n,32,0,u.experiment.security.canWrite);var r=l(n,35,0,"file");l(n,34,0,r);var s=l(n,39,0,!0);l(n,36,0,s,"active"),l(n,42,0,u.experiment.security.isOwner||u.experiment.security.isSuperOwner)}),(function(l,n){l(n,2,0,e.Eb(n,3).target,e.Eb(n,3).href),l(n,13,0,e.Eb(n,14).target,e.Eb(n,14).href),l(n,33,0,e.Eb(n,34).target,e.Eb(n,34).href)}))}function E(l){return e.Ob(0,[(l()(),e.hb(16777216,null,null,1,null,x)),e.rb(1,16384,null,0,o.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null)],(function(l,n){l(n,1,0,n.component.experiment)}),null)}var D=u("GVyA"),A=u("RtrU"),F=u("2Vo4");let w=1;class S{constructor(){this.experimentStream=new F.a(null),this.id=w++}close(){this.experimentStream.complete()}experiment(){return this.experimentStream}push(l){this.experimentStream.next(l)}}var T=u("6tuW"),K=u("BMm9"),q=u("pLZG"),z=u("lJxs");class P{constructor(l,n,u,e,t,i,r,s){this.experimentService=l,this.RDMSocial=n,this.currentExperiment=u,this.feedback=e,this.analytics=t,this.route=i,this.router=r,this.dialogs=s,this.isUnauthorised=!1}ngOnInit(){this.expSubscription=this.currentExperiment.experiment().pipe(Object(q.a)(l=>!!l)).subscribe(l=>{this.model=l,this.analytics.experimentView(l.id),this.RDMSocial.shouldShowMeasurementWarning(l).then(l=>{l&&this.showMetadataWarning()})},l=>this.feedback.error(l),()=>console.log("currentExperimentStream completed")),this.paramsSubscription=this.route.paramMap.pipe(Object(z.a)(l=>l.get("id")),Object(q.a)(l=>!!l)).subscribe(l=>this.loadExperiment(+l))}ngOnDestroy(){this.paramsSubscription&&this.paramsSubscription.unsubscribe(),this.expSubscription&&this.expSubscription.unsubscribe(),this.currentExperiment&&this.currentExperiment.close()}refresh(){this.model&&this.loadExperiment(this.model.id)}loadExperiment(l){this.experimentService.getExperiment(l).then(l=>{this.currentExperiment.push(l),this.isUnauthorised=!1}).catch(l=>{this.isUnauthorised=l.isUnauthorised,this.feedback.error(l)})}handleWarningResponse(l){console.log("Dialog: "+l)}showMetadataWarning(){this.dialogs.confirm("Metadata reminder","\n        <p>\n        Please add measurements details, like technique, equipment and short description.\n        </p>\n        <p>\n        It will improve the metadata quality and it will help you when searching for the data.\n        </p>\n","Not now").subscribe(l=>{this.RDMSocial.registerMeasurementWarning(this.model),l&&this.router.navigate(["edit"],{relativeTo:this.route,fragment:"MeasurementSection"})})}}var j=u("vejM"),N=u("ZMwR"),R=u("9+85"),W=e.qb({encapsulation:2,styles:[],data:{}});function H(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,1,"i",[["class","material-icons bd-icon"],["style","color: green; font-size: 1.5em;"]],null,null,null,null,null)),(l()(),e.Mb(-1,null,["lock_open"]))],null,null)}function B(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,14,"div",[],null,null,null,null,null)),(l()(),e.sb(1,0,null,null,11,"div",[["class","card asset-card"]],null,null,null,null,null)),(l()(),e.sb(2,0,null,null,7,"div",[["class","card-header"]],null,null,null,null,null)),(l()(),e.sb(3,0,null,null,6,"h3",[],null,null,null,null,null)),(l()(),e.hb(16777216,null,null,1,null,H)),e.rb(5,16384,null,0,o.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.Mb(6,null,[" Experiment: ",""])),(l()(),e.sb(7,0,null,null,0,"br",[],null,null,null,null,null)),(l()(),e.sb(8,0,null,null,1,"small",[],null,null,null,null,null)),(l()(),e.Mb(9,null,["",""])),(l()(),e.sb(10,0,null,null,2,"div",[["class","card-body"]],null,null,null,null,null)),(l()(),e.sb(11,0,null,null,1,"bd2-experiment-basic-info-view",[],null,null,null,f,c)),e.rb(12,49152,null,0,a,[],{model:[0,"model"]},null),(l()(),e.sb(13,0,null,null,1,"bd2-experiment-navigation",[],null,[[null,"onRefresh"]],(function(l,n,u){var e=!0;return"onRefresh"===n&&(e=!1!==l.component.refresh()&&e),e}),E,v)),e.rb(14,49152,null,0,g,[],{experiment:[0,"experiment"]},{onRefresh:"onRefresh"})],(function(l,n){var u=n.component;l(n,5,0,u.model.features.isOpenAccess),l(n,12,0,u.model),l(n,14,0,u.model)}),(function(l,n){var u=n.component;l(n,6,0,u.model.id),l(n,9,0,u.model.name)}))}function U(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,3,"div",[],null,null,null,null,null)),(l()(),e.Mb(-1,null,[" ... loading experiment "])),(l()(),e.sb(2,0,null,null,1,"p",[],null,null,null,null,null)),(l()(),e.Mb(-1,null,["If just logged in try to refresh the window if the experiment is not loading."]))],null,null)}function J(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,4,"div",[],null,null,null,null,null)),(l()(),e.sb(1,0,null,null,1,"h4",[],null,null,null,null,null)),(l()(),e.Mb(-1,null,["You don't have sufficient permissions to see the experiment"])),(l()(),e.sb(3,0,null,null,1,"p",[],null,null,null,null,null)),(l()(),e.Mb(-1,null,["Try to login"]))],null,null)}function V(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,8,"div",[],null,null,null,null,null)),(l()(),e.hb(16777216,null,null,1,null,B)),e.rb(2,16384,null,0,o.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.hb(16777216,null,null,1,null,U)),e.rb(4,16384,null,0,o.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.hb(16777216,null,null,1,null,J)),e.rb(6,16384,null,0,o.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.sb(7,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),e.rb(8,212992,null,0,p.q,[p.b,e.O,e.j,[8,null],e.h],null,null)],(function(l,n){var u=n.component;l(n,2,0,u.model),l(n,4,0,!u.model&&!u.isUnauthorised),l(n,6,0,!u.model&&u.isUnauthorised),l(n,8,0)}),null)}function G(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,3,"ng-component",[],null,null,null,V,W)),e.Jb(4608,null,D.a,D.a,[A.a,S,T.a,K.a,p.l]),e.Jb(512,null,S,S,[]),e.rb(3,245760,null,0,P,[A.a,j.a,S,T.a,N.a,p.a,p.l,R.a],null,null)],(function(l,n){l(n,3,0)}),null)}var _=e.ob("ng-component",P,G,{},{},[]),$=u("P8p1"),Y=u("bAp0"),X=u("y25b"),Z=u("9tkb"),Q=u("8j0n"),ll=u("adRK"),nl=u("oW74"),ul=u("3rK8"),el=u("yYXI");class tl extends el.a{constructor(l){super(l)}}var il=e.qb({encapsulation:2,styles:[],data:{}});function rl(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,26,"div",[],null,null,null,null,null)),(l()(),e.sb(1,0,null,null,1,"h3",[],null,null,null,null,null)),(l()(),e.Mb(-1,null,["Overview of experimental details"])),(l()(),e.sb(3,0,null,null,5,"div",[["class","card mb-2"]],null,null,null,null,null)),(l()(),e.sb(4,0,null,null,1,"div",[["class","card-header"]],null,null,null,null,null)),(l()(),e.Mb(-1,null,["General description"])),(l()(),e.sb(6,0,null,null,2,"div",[["class","card-body"]],null,null,null,null,null)),(l()(),e.sb(7,0,null,null,1,"bd2-general-desc-view",[],null,null,null,$.b,$.a)),e.rb(8,49152,null,0,Y.a,[],{model:[0,"model"]},null),(l()(),e.sb(9,0,null,null,5,"div",[["class","card mb-2"]],null,null,null,null,null)),(l()(),e.sb(10,0,null,null,1,"div",[["class","card-header"]],null,null,null,null,null)),(l()(),e.Mb(-1,null,["Contributions"])),(l()(),e.sb(12,0,null,null,2,"div",[["class","card-body"]],null,null,null,null,null)),(l()(),e.sb(13,0,null,null,1,"bd2-contr-desc-view",[],null,null,null,X.b,X.a)),e.rb(14,49152,null,0,Z.a,[],{model:[0,"model"]},null),(l()(),e.sb(15,0,null,null,5,"div",[["class","card mb-2"]],null,null,null,null,null)),(l()(),e.sb(16,0,null,null,1,"div",[["class","card-header"]],null,null,null,null,null)),(l()(),e.Mb(-1,null,["Biological details"])),(l()(),e.sb(18,0,null,null,2,"div",[["class","card-body"]],null,null,null,null,null)),(l()(),e.sb(19,0,null,null,1,"bd2-simple-bio-desc-view",[],null,null,null,Q.b,Q.a)),e.rb(20,49152,null,0,ll.a,[],{model:[0,"model"]},null),(l()(),e.sb(21,0,null,null,5,"div",[["class","card mb-2"]],null,null,null,null,null)),(l()(),e.sb(22,0,null,null,1,"div",[["class","card-header"]],null,null,null,null,null)),(l()(),e.Mb(-1,null,["Measurement details"])),(l()(),e.sb(24,0,null,null,2,"div",[["class","card-body"]],null,null,null,null,null)),(l()(),e.sb(25,0,null,null,1,"bd2-measurement-desc-view",[],null,null,null,nl.b,nl.a)),e.rb(26,114688,null,0,ul.a,[],{model:[0,"model"]},null)],(function(l,n){var u=n.component;l(n,8,0,u.assay.generalDesc),l(n,14,0,u.assay.contributionDesc),l(n,20,0,u.assay),l(n,26,0,u.assay.experimentalDetails.measurementDesc)}),null)}function sl(l){return e.Ob(0,[(l()(),e.hb(16777216,null,null,1,null,rl)),e.rb(1,16384,null,0,o.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null)],(function(l,n){l(n,1,0,n.component.assay)}),null)}function ol(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,1,"ng-component",[],null,null,null,sl,il)),e.rb(1,245760,null,0,tl,[D.a],null,null)],(function(l,n){l(n,1,0)}),null)}var al=e.ob("ng-component",tl,ol,{},{},[]),cl=u("wbka"),bl=u("YJ2U"),dl=u("sj70"),hl=u("MhKU"),ml=u("q9OF"),fl=u("W3Xw"),pl=u("7+nn"),gl=u("Je4T"),vl=u("oFzb"),kl=u("XvzH"),Ol=u("s7LF"),yl=u("qDIc");class Ml extends el.a{constructor(l,n){super(n),this.route=l,this.blocked=!1,this.activeGeneralDescForm=!1,this.activeContributionDescForm=!1,this.activeSimpleBioDescForm=!1,this.activeMeasurementDescForm=!1,this.titlePart=" Edit",this.validator=yl.a.INSTANCE}ngOnInit(){super.ngOnInit(),this.route.fragment.subscribe(l=>{this.requestedSection=l,this.focusOnSection(l)})}ngAfterViewInit(){this.focusOnSection(this.requestedSection)}focusOnSection(l){if(!l)return;const n=document.getElementById(l);n&&n.scrollIntoView(),"MeasurementSection"===l&&(this.activeMeasurementDescForm=!0)}saveEdits(l){this.assay&&l&&this.triggerValidation()&&(this.blocked=!0,this.experimentService.save(this.assay).then(l=>(this.feedback.success('Experiment: "'+l.name+'" updated.'),l)).then(l=>(this.currentExperiment.push(l),l)).then(n=>{this.blocked=!1,this.hideEdits(l)}).catch(l=>{this.blocked=!1,this.feedback.error(l)}))}hideEdits(l){this.activeGeneralDescForm=!1,this.activeContributionDescForm=!1,this.activeSimpleBioDescForm=!1,this.activeMeasurementDescForm=!1,this.triggerValidation()}cancel(){this.clearErrors(),this.router.navigate(["/experiment",this.assay.id])}updateModel(l){this._orgModel=l,this.assay=l?l.clone():null,this.setTitle()}}var Cl=e.qb({encapsulation:2,styles:[],data:{}});function Ll(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,1,"li",[],null,null,null,null,null)),(l()(),e.Mb(1,null,["",""]))],null,(function(l,n){l(n,1,0,n.context.$implicit)}))}function Il(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,3,"div",[["class","alert alert-danger"]],null,null,null,null,null)),(l()(),e.sb(1,0,null,null,2,"ul",[],null,null,null,null,null)),(l()(),e.hb(16777216,null,null,1,null,Ll)),e.rb(3,278528,null,0,o.l,[e.O,e.L,e.r],{ngForOf:[0,"ngForOf"]},null)],(function(l,n){l(n,3,0,n.component.errors)}),null)}function xl(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,1,"bd2-general-desc-form",[],null,[[null,"onAccepted"],[null,"onCancelled"]],(function(l,n,u){var e=!0,t=l.component;return"onAccepted"===n&&(e=!1!==t.saveEdits(u)&&e),"onCancelled"===n&&(e=!1!==t.hideEdits(u)&&e),e}),cl.b,cl.a)),e.rb(1,49152,null,0,bl.a,[],{blocked:[0,"blocked"],model:[1,"model"]},{onAccepted:"onAccepted",onCancelled:"onCancelled"})],(function(l,n){var u=n.component;l(n,1,0,u.blocked,u.assay.generalDesc)}),null)}function El(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,1,"bd2-general-desc-view",[],null,null,null,$.b,$.a)),e.rb(1,49152,null,0,Y.a,[],{model:[0,"model"]},null)],(function(l,n){l(n,1,0,n.component.assay.generalDesc)}),null)}function Dl(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,3,"div",[],null,null,null,null,null)),(l()(),e.sb(1,0,null,null,0,"hr",[],null,null,null,null,null)),(l()(),e.sb(2,0,null,null,1,"button",[["class","btn btn-primary"],["type","button"]],[[8,"disabled",0]],[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=0!=(l.component.activeGeneralDescForm=!0)&&e),e}),null,null)),(l()(),e.Mb(-1,null,["Modify "]))],null,(function(l,n){l(n,2,0,n.component.activeGeneralDescForm)}))}function Al(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,1,"bd2-contr-desc-form",[],null,[[null,"onAccepted"],[null,"onCancelled"]],(function(l,n,u){var e=!0,t=l.component;return"onAccepted"===n&&(e=!1!==t.saveEdits(u)&&e),"onCancelled"===n&&(e=!1!==t.hideEdits(u)&&e),e}),dl.b,dl.a)),e.rb(1,49152,null,0,hl.a,[],{blocked:[0,"blocked"],model:[1,"model"]},{onAccepted:"onAccepted",onCancelled:"onCancelled"})],(function(l,n){var u=n.component;l(n,1,0,u.blocked,u.assay.contributionDesc)}),null)}function Fl(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,1,"bd2-contr-desc-view",[],null,null,null,X.b,X.a)),e.rb(1,49152,null,0,Z.a,[],{model:[0,"model"]},null)],(function(l,n){l(n,1,0,n.component.assay.contributionDesc)}),null)}function wl(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,3,"div",[],null,null,null,null,null)),(l()(),e.sb(1,0,null,null,0,"hr",[],null,null,null,null,null)),(l()(),e.sb(2,0,null,null,1,"button",[["class","btn btn-primary"],["type","button"]],[[8,"disabled",0]],[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=0!=(l.component.activeContributionDescForm=!0)&&e),e}),null,null)),(l()(),e.Mb(-1,null,["Modify "]))],null,(function(l,n){l(n,2,0,n.component.activeContributionDescForm)}))}function Sl(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,1,"bd2-simple-bio-desc-form",[],null,[[null,"onAccepted"],[null,"onCancelled"]],(function(l,n,u){var e=!0,t=l.component;return"onAccepted"===n&&(e=!1!==t.saveEdits(u)&&e),"onCancelled"===n&&(e=!1!==t.hideEdits(u)&&e),e}),ml.b,ml.a)),e.rb(1,114688,null,0,fl.a,[pl.a],{blocked:[0,"blocked"],model:[1,"model"]},{onAccepted:"onAccepted",onCancelled:"onCancelled"})],(function(l,n){var u=n.component;l(n,1,0,u.blocked,u.assay)}),null)}function Tl(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,1,"bd2-simple-bio-desc-view",[],null,null,null,Q.b,Q.a)),e.rb(1,49152,null,0,ll.a,[],{model:[0,"model"]},null)],(function(l,n){l(n,1,0,n.component.assay)}),null)}function Kl(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,3,"div",[],null,null,null,null,null)),(l()(),e.sb(1,0,null,null,0,"hr",[],null,null,null,null,null)),(l()(),e.sb(2,0,null,null,1,"button",[["class","btn btn-primary"],["type","button"]],[[8,"disabled",0]],[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=0!=(l.component.activeSimpleBioDescForm=!0)&&e),e}),null,null)),(l()(),e.Mb(-1,null,["Modify "]))],null,(function(l,n){l(n,2,0,n.component.activeSimpleBioDescForm)}))}function ql(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,1,"bd2-measurement-desc-rform",[],null,[[null,"onAccepted"],[null,"onCancelled"]],(function(l,n,u){var e=!0,t=l.component;return"onAccepted"===n&&(e=!1!==t.saveEdits(u)&&e),"onCancelled"===n&&(e=!1!==t.hideEdits(u)&&e),e}),gl.b,gl.a)),e.rb(1,114688,null,0,vl.a,[kl.a,T.a,Ol.f],{blocked:[0,"blocked"],model:[1,"model"]},{onAccepted:"onAccepted",onCancelled:"onCancelled"})],(function(l,n){var u=n.component;l(n,1,0,u.blocked,u.assay.experimentalDetails.measurementDesc)}),null)}function zl(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,1,"bd2-measurement-desc-view",[],null,null,null,nl.b,nl.a)),e.rb(1,114688,null,0,ul.a,[],{model:[0,"model"]},null)],(function(l,n){l(n,1,0,n.component.assay.experimentalDetails.measurementDesc)}),null)}function Pl(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,3,"div",[],null,null,null,null,null)),(l()(),e.sb(1,0,null,null,0,"hr",[],null,null,null,null,null)),(l()(),e.sb(2,0,null,null,1,"button",[["class","btn btn-primary"],["type","button"]],[[8,"disabled",0]],[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=0!=(l.component.activeMeasurementDescForm=!0)&&e),e}),null,null)),(l()(),e.Mb(-1,null,["Modify "]))],null,(function(l,n){l(n,2,0,n.component.activeMeasurementDescForm)}))}function jl(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,1,"li",[],null,null,null,null,null)),(l()(),e.Mb(1,null,["",""]))],null,(function(l,n){l(n,1,0,n.context.$implicit)}))}function Nl(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,3,"div",[["class","alert alert-danger"]],null,null,null,null,null)),(l()(),e.sb(1,0,null,null,2,"ul",[],null,null,null,null,null)),(l()(),e.hb(16777216,null,null,1,null,jl)),e.rb(3,278528,null,0,o.l,[e.O,e.L,e.r],{ngForOf:[0,"ngForOf"]},null)],(function(l,n){l(n,3,0,n.component.errors)}),null)}function Rl(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,46,"div",[],null,null,null,null,null)),(l()(),e.sb(1,0,null,null,1,"h3",[],null,null,null,null,null)),(l()(),e.Mb(-1,null,["Modify experiment description"])),(l()(),e.hb(16777216,null,null,1,null,Il)),e.rb(4,16384,null,0,o.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.sb(5,0,null,null,9,"div",[["class","card mb-2"]],null,null,null,null,null)),(l()(),e.sb(6,0,null,null,1,"div",[["class","card-header"]],null,null,null,null,null)),(l()(),e.Mb(-1,null,["General description"])),(l()(),e.sb(8,0,null,null,6,"div",[["class","card-body"]],null,null,null,null,null)),(l()(),e.hb(16777216,null,null,1,null,xl)),e.rb(10,16384,null,0,o.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.hb(16777216,null,null,1,null,El)),e.rb(12,16384,null,0,o.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.hb(16777216,null,null,1,null,Dl)),e.rb(14,16384,null,0,o.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.sb(15,0,null,null,9,"div",[["class","card mb-2"]],null,null,null,null,null)),(l()(),e.sb(16,0,null,null,1,"div",[["class","card-header"]],null,null,null,null,null)),(l()(),e.Mb(-1,null,["Contributions"])),(l()(),e.sb(18,0,null,null,6,"div",[["class","card-body"]],null,null,null,null,null)),(l()(),e.hb(16777216,null,null,1,null,Al)),e.rb(20,16384,null,0,o.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.hb(16777216,null,null,1,null,Fl)),e.rb(22,16384,null,0,o.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.hb(16777216,null,null,1,null,wl)),e.rb(24,16384,null,0,o.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.sb(25,0,null,null,9,"div",[["class","card mb-2"]],null,null,null,null,null)),(l()(),e.sb(26,0,null,null,1,"div",[["class","card-header"]],null,null,null,null,null)),(l()(),e.Mb(-1,null,["Biological details"])),(l()(),e.sb(28,0,null,null,6,"div",[["class","card-body"]],null,null,null,null,null)),(l()(),e.hb(16777216,null,null,1,null,Sl)),e.rb(30,16384,null,0,o.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.hb(16777216,null,null,1,null,Tl)),e.rb(32,16384,null,0,o.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.hb(16777216,null,null,1,null,Kl)),e.rb(34,16384,null,0,o.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.sb(35,0,null,null,9,"div",[["class","card mb-2"],["id","MeasurementSection"]],null,null,null,null,null)),(l()(),e.sb(36,0,null,null,1,"div",[["class","card-header"]],null,null,null,null,null)),(l()(),e.Mb(-1,null,["Measurement details"])),(l()(),e.sb(38,0,null,null,6,"div",[["class","card-body"]],null,null,null,null,null)),(l()(),e.hb(16777216,null,null,1,null,ql)),e.rb(40,16384,null,0,o.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.hb(16777216,null,null,1,null,zl)),e.rb(42,16384,null,0,o.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.hb(16777216,null,null,1,null,Pl)),e.rb(44,16384,null,0,o.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.hb(16777216,null,null,1,null,Nl)),e.rb(46,16384,null,0,o.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null)],(function(l,n){var u=n.component;l(n,4,0,u.errors),l(n,10,0,u.activeGeneralDescForm),l(n,12,0,!u.activeGeneralDescForm),l(n,14,0,!u.activeGeneralDescForm),l(n,20,0,u.activeContributionDescForm),l(n,22,0,!u.activeContributionDescForm),l(n,24,0,!u.activeContributionDescForm),l(n,30,0,u.activeSimpleBioDescForm),l(n,32,0,!u.activeSimpleBioDescForm),l(n,34,0,!u.activeSimpleBioDescForm),l(n,40,0,u.activeMeasurementDescForm),l(n,42,0,!u.activeMeasurementDescForm),l(n,44,0,!u.activeMeasurementDescForm),l(n,46,0,u.errors)}),null)}function Wl(l){return e.Ob(0,[(l()(),e.hb(16777216,null,null,1,null,Rl)),e.rb(1,16384,null,0,o.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null)],(function(l,n){l(n,1,0,n.component.assay)}),null)}function Hl(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,1,"ng-component",[],null,null,null,Wl,Cl)),e.rb(1,4440064,null,0,Ml,[p.a,D.a],null,null)],(function(l,n){l(n,1,0)}),null)}var Bl=e.ob("ng-component",Ml,Hl,{},{},[]),Ul=u("1A98"),Jl=u("vLYz");let Vl=(()=>{class l{constructor(l){this.name=l}static deserialize(n){if(null==n)return null;const u=l.valuesMap.get(n);if(u)return u;const e=+n;if(e<0||e>=l.values.length||Number.isNaN(e))throw new RangeError("Uknown AssetType "+n);return l.values[e]}static initValuesMap(){const n=new Map;return l.values.forEach(l=>n.set(l.name,l)),n}equals(l){return this.name===l.name}toJSON(){return this.name}}return l.NONE=new l("NONE"),l.FILE=new l("FILE"),l.MEDIA=new l("MEDIA"),l.DATA=new l("DATA"),l.TS_DATA=new l("TS_DATA"),l.values=[l.NONE,l.FILE,l.MEDIA,l.DATA,l.TS_DATA],l.valuesMap=l.initValuesMap(),l})();var Gl=u("B9cw");class _l{static deserialize(l){return l.created=Gl.a.deserialize(l.created),l}}class $l{constructor(){this.assetType=Vl.NONE,this.versions=[]}get last(){return this.versions[0]}static deserialize(l){const n=new $l;return n.id=l.id,n.originalName=l.originalName,n.url=l.url,n.assetType=Vl.deserialize(l.assetType),l.versions&&(n.versions=l.versions.map(l=>_l.deserialize(l))),n}setAll(l){this.id=l.id,this.originalName=l.originalName,this.assetType=l.assetType,this.url=l.url,this.versions=l.versions}}class Yl{constructor(l){this.analytics=l,this.canEdit=!0,this.showVersions=!1,this.edit=!1,this.model=this.fakeFileAsset()}set model(l){this.file=l}ngOnInit(){}fakeFileAsset(){const l=JSON.parse('{\n      "id" : 2,\n      "originalName" : "f2",\n      "assetType" : "TS_DATA",\n      "versions" : [ {\n        "versionId" : 2,\n        "localFile" : "cos2",\n        "originalName" : "f2",\n        "contentType" : "txt",\n        "description" : "Some description",\n        "created" : [ 2016, 12, 8 ]\n      }, {\n        "versionId" : 1,\n        "localFile" : "cos2",\n        "originalName" : "f2",\n        "contentType" : "txt",\n        "description" : null,\n        "created" : [ 2016, 12, 8 ]\n      } ]\n    }');return $l.deserialize(l)}recordDownload(){this.analytics.fileDownload(this.parentId,this.file.id)}}var Xl=e.qb({encapsulation:2,styles:[],data:{}});function Zl(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,1,"div",[],null,null,null,null,null)),(l()(),e.Mb(1,null,["",""]))],null,(function(l,n){l(n,1,0,n.component.file.last.description)}))}function Ql(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,7,"li",[],null,null,null,null,null)),(l()(),e.Mb(1,null,[" Version ",". "," "])),e.Ib(2,2),(l()(),e.sb(3,0,null,null,2,"strong",[],null,null,null,null,null)),(l()(),e.sb(4,0,null,null,1,"a",[],[[8,"href",4],[8,"download",0]],[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.recordDownload()&&e),e}),null,null)),(l()(),e.Mb(5,null,["",""])),(l()(),e.sb(6,0,null,null,0,"br",[],null,null,null,null,null)),(l()(),e.Mb(7,null,[""," "]))],null,(function(l,n){var u=n.context.$implicit.versionId,t=e.Nb(n,1,1,l(n,2,0,e.Eb(n.parent.parent.parent,0),n.context.$implicit.created.date,"shortDate"));l(n,1,0,u,t),l(n,4,0,e.wb(1,"",n.context.$implicit.url,""),e.wb(1,"",n.context.$implicit.originalName,"")),l(n,5,0,n.context.$implicit.originalName),l(n,7,0,n.context.$implicit.description)}))}function ln(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,3,"div",[],null,null,null,null,null)),(l()(),e.sb(1,0,null,null,2,"ul",[["class","list-unstyled"]],null,null,null,null,null)),(l()(),e.hb(16777216,null,null,1,null,Ql)),e.rb(3,278528,null,0,o.l,[e.O,e.L,e.r],{ngForOf:[0,"ngForOf"]},null)],(function(l,n){l(n,3,0,n.component.file.versions)}),null)}function nn(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,12,"div",[],null,null,null,null,null)),(l()(),e.sb(1,0,null,null,4,"div",[["class","float-right"]],null,null,null,null,null)),(l()(),e.Mb(2,null,[" "," versions "])),(l()(),e.sb(3,0,null,null,2,"a",[["aria-label","expand"],["role","button"]],null,[[null,"click"]],(function(l,n,u){var e=!0,t=l.component;return"click"===n&&(e=0!=(t.showVersions=!t.showVersions)&&e),e}),null,null)),(l()(),e.sb(4,0,null,null,1,"i",[["class","material-icons bd-icon"]],null,null,null,null,null)),(l()(),e.Mb(-1,null,["expand_more"])),(l()(),e.sb(6,0,null,null,2,"h5",[],null,null,null,null,null)),(l()(),e.sb(7,0,null,null,1,"a",[],[[8,"href",4],[8,"download",0]],[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.recordDownload()&&e),e}),null,null)),(l()(),e.Mb(8,null,["",""])),(l()(),e.hb(16777216,null,null,1,null,Zl)),e.rb(10,16384,null,0,o.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.hb(16777216,null,null,1,null,ln)),e.rb(12,16384,null,0,o.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null)],(function(l,n){var u=n.component;l(n,10,0,u.file.last.description),l(n,12,0,u.showVersions)}),(function(l,n){var u=n.component;l(n,2,0,u.file.versions.length),l(n,7,0,e.wb(1,"",u.file.url,""),e.wb(1,"",u.file.last.originalName,"")),l(n,8,0,u.file.last.originalName)}))}function un(l){return e.Ob(0,[e.Gb(0,o.e,[e.t]),(l()(),e.hb(16777216,null,null,1,null,nn)),e.rb(2,16384,null,0,o.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null)],(function(l,n){var u=n.component;l(n,2,0,u.file&&u.file.last)}),null)}class en extends el.a{constructor(l,n){super(n),this.attachmentsService=l,this.attachments=[],this.tsData=[],this.blocked=!1,this.titlePart=" Files"}updateModel(l){super.updateModel(l),this.refreshAttachments()}refreshAttachments(){this.attachmentsService.getFiles(this.assay).then(l=>this.setFiles(l)).catch(l=>{this.feedback.error(l)})}setFiles(l){this.tsData=l.filter(l=>l.assetType.equals(Vl.TS_DATA)),this.attachments=l.filter(l=>!l.assetType.equals(Vl.TS_DATA))}upload(l){console.log("Uploading "+l.length),l&&0!==l.length&&(this.blocked=!0,this.attachmentsService.upload(this.assay,l).then(l=>{this.uploadWidget.reset(),this.blocked=!1,this.feedback.success(l.length+" files uploaded")}).then(()=>this.refreshModel()).catch(l=>{this.blocked=!1,this.feedback.error(l)}))}}var tn=u("UsWK");let rn=(()=>{class l{constructor(l){this.BD2REST=l}upload(l,n){const u=new FormData;for(let e=0;e<n.length;e++)u.append("file",n[e],n[e].name);return this.BD2REST.expFileUpload(l.id,u).then(l=>l.data)}getFiles(l){return this.BD2REST.files(l.id).then(l=>l.data).then(l=>this.json2AssetsList(l)).then(n=>this.fillURLs(n,l))}fillURLs(l,n){return l.map(l=>this.fillURL(l,n))}fillURL(l,n){const u=this.BD2REST.fileURL(n.id,l.id);return l.url=u,l.versions.forEach(l=>{l.url=u+"/"+l.versionId}),l}json2AssetsList(l){return l.map(l=>$l.deserialize(l))}}return l.ngInjectableDef=e.Sb({factory:function(){return new l(e.Tb(tn.a))},token:l,providedIn:"root"}),l})();var sn=e.qb({encapsulation:0,styles:[[""]],data:{}});function on(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,3,"div",[],null,null,null,null,null)),(l()(),e.sb(1,0,null,null,1,"bd2-file-upload-widget",[],null,[[null,"uploadFiles"]],(function(l,n,u){var e=!0;return"uploadFiles"===n&&(e=!1!==l.component.upload(u)&&e),e}),Ul.b,Ul.a)),e.rb(2,114688,[[1,4],["uploadWidget",4]],0,Jl.a,[],{blocked:[0,"blocked"],autoReset:[1,"autoReset"]},{uploadFiles:"uploadFiles"}),(l()(),e.sb(3,0,null,null,0,"hr",[],null,null,null,null,null))],(function(l,n){l(n,2,0,n.component.blocked,!1)}),null)}function an(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,1,"bd2-file-asset-view",[],null,null,null,un,Xl)),e.rb(1,114688,null,0,Yl,[N.a],{parentId:[0,"parentId"],model:[1,"model"]},null)],(function(l,n){l(n,1,0,n.component.assay.id,n.context.$implicit)}),null)}function cn(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,1,"div",[["class","alert alert-info"],["role","alert"],["type","info"]],null,null,null,null,null)),(l()(),e.Mb(-1,null,[' Use "Replace data" to change timeseries files. ']))],null,null)}function bn(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,7,"div",[],null,null,null,null,null)),(l()(),e.sb(1,0,null,null,1,"h4",[],null,null,null,null,null)),(l()(),e.Mb(-1,null,["Timeseries files"])),(l()(),e.hb(16777216,null,null,1,null,an)),e.rb(4,278528,null,0,o.l,[e.O,e.L,e.r],{ngForOf:[0,"ngForOf"]},null),(l()(),e.hb(16777216,null,null,1,null,cn)),e.rb(6,16384,null,0,o.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.sb(7,0,null,null,0,"hr",[],null,null,null,null,null))],(function(l,n){var u=n.component;l(n,4,0,u.tsData),l(n,6,0,u.assay.security.canWrite)}),null)}function dn(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,1,"div",[["class","alert alert-info"],["role","alert"],["type","info"]],null,null,null,null,null)),(l()(),e.Mb(-1,null,[' Use "Import data" to add timeseries files. ']))],null,null)}function hn(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,1,"bd2-file-asset-view",[],null,null,null,un,Xl)),e.rb(1,114688,null,0,Yl,[N.a],{parentId:[0,"parentId"],model:[1,"model"]},null)],(function(l,n){l(n,1,0,n.component.assay.id,n.context.$implicit)}),null)}function mn(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,4,"div",[],null,null,null,null,null)),(l()(),e.sb(1,0,null,null,1,"h4",[],null,null,null,null,null)),(l()(),e.Mb(-1,null,["Attachments"])),(l()(),e.hb(16777216,null,null,1,null,hn)),e.rb(4,278528,null,0,o.l,[e.O,e.L,e.r],{ngForOf:[0,"ngForOf"]},null)],(function(l,n){l(n,4,0,n.component.attachments)}),null)}function fn(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,1,"div",[["class","alert alert-info"],["role","alert"],["type","info"]],null,null,null,null,null)),(l()(),e.Mb(-1,null,[" Drag and upload files using the upload area in order to update the attachments. "]))],null,null)}function pn(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,10,"div",[],null,null,null,null,null)),(l()(),e.hb(16777216,null,null,1,null,on)),e.rb(2,16384,null,0,o.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.hb(16777216,null,null,1,null,bn)),e.rb(4,16384,null,0,o.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.hb(16777216,null,null,1,null,dn)),e.rb(6,16384,null,0,o.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.hb(16777216,null,null,1,null,mn)),e.rb(8,16384,null,0,o.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.hb(16777216,null,null,1,null,fn)),e.rb(10,16384,null,0,o.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null)],(function(l,n){var u=n.component;l(n,2,0,u.assay.security.canWrite),l(n,4,0,u.tsData&&u.tsData.length>0),l(n,6,0,!u.tsData||0===u.tsData.length),l(n,8,0,u.attachments&&u.attachments.length>0),l(n,10,0,u.assay.security.canWrite)}),null)}function gn(l){return e.Ob(0,[e.Kb(671088640,1,{uploadWidget:0}),(l()(),e.sb(1,0,null,null,1,"h3",[],null,null,null,null,null)),(l()(),e.Mb(-1,null,["Attached files"])),(l()(),e.sb(3,0,null,null,0,"hr",[],null,null,null,null,null)),(l()(),e.hb(16777216,null,null,1,null,pn)),e.rb(5,16384,null,0,o.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null)],(function(l,n){l(n,5,0,n.component.assay)}),null)}function vn(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,1,"ng-component",[],null,null,null,gn,sn)),e.rb(1,245760,null,0,en,[rn,D.a],null,null)],(function(l,n){l(n,1,0)}),null)}var kn=e.ob("ng-component",en,vn,{},{},[]);class On extends el.a{constructor(l){super(l),this.licences=["CC_BY"]}ngOnInit(){super.ngOnInit(),this.licence=this.licences[0]}publish(){this.terms&&this.licence&&this.experimentService.publish(this.assay,this.licence).then(l=>(this.feedback.success('Experiment: "'+l.name+'" published.'),l)).then(l=>(this.currentExperiment.push(l),l)).then(l=>{this.goToExpHome(l.id)}).catch(l=>{this.feedback.error(l)})}}var yn=e.qb({encapsulation:2,styles:[],data:{}});function Mn(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,5,"div",[],null,null,null,null,null)),(l()(),e.sb(1,0,null,null,4,"div",[["class","alert alert-info"],["role","alert"],["type","info"]],null,null,null,null,null)),(l()(),e.Mb(-1,null,[" Experiment is already publicly available under "])),(l()(),e.sb(3,0,null,null,1,"strong",[],null,null,null,null,null)),(l()(),e.Mb(4,null,["",""])),(l()(),e.Mb(-1,null,[" licence. "]))],null,(function(l,n){l(n,4,0,n.component.assay.features.licence)}))}function Cn(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,3,"option",[],null,null,null,null,null)),e.rb(1,147456,null,0,Ol.v,[e.k,e.D,[2,Ol.B]],{value:[0,"value"]},null),e.rb(2,147456,null,0,Ol.G,[e.k,e.D,[8,null]],{value:[0,"value"]},null),(l()(),e.Mb(3,null,[""," "]))],(function(l,n){l(n,1,0,n.context.$implicit),l(n,2,0,n.context.$implicit)}),(function(l,n){l(n,3,0,n.context.$implicit)}))}function Ln(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,40,"div",[],null,null,null,null,null)),(l()(),e.sb(1,0,null,null,8,"div",[["class","alert alert-danger"],["role","alert"],["type","danger"]],null,null,null,null,null)),(l()(),e.Mb(-1,null,[" You are about to make the data public. Once they are public they cannot be made private again. "])),(l()(),e.sb(3,0,null,null,6,"ul",[],null,null,null,null,null)),(l()(),e.sb(4,0,null,null,1,"li",[],null,null,null,null,null)),(l()(),e.Mb(-1,null,["make sure you know what you are doing"])),(l()(),e.sb(6,0,null,null,1,"li",[],null,null,null,null,null)),(l()(),e.Mb(-1,null,["make sure all contributors agree to public sharing"])),(l()(),e.sb(8,0,null,null,1,"li",[],null,null,null,null,null)),(l()(),e.Mb(-1,null,["double check the description is correct, not all changes will be possible after the publishing"])),(l()(),e.sb(10,0,null,null,30,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],(function(l,n,u){var t=!0;return"submit"===n&&(t=!1!==e.Eb(l,12).onSubmit(u)&&t),"reset"===n&&(t=!1!==e.Eb(l,12).onReset()&&t),t}),null,null)),e.rb(11,16384,null,0,Ol.H,[],null,null),e.rb(12,4210688,[["publishForm",4]],0,Ol.t,[[8,null],[8,null]],null,null),e.Jb(2048,null,Ol.d,null,[Ol.t]),e.rb(14,16384,null,0,Ol.s,[[4,Ol.d]],null,null),(l()(),e.sb(15,0,null,null,12,"div",[["class","form-group"]],null,null,null,null,null)),(l()(),e.sb(16,0,null,null,1,"label",[["for","licence"]],null,null,null,null,null)),(l()(),e.Mb(-1,null,["Licence"])),(l()(),e.sb(18,0,null,null,9,"select",[["class","form-control"],["id","licence"],["name","licence"],["placeholder","Select licence"],["required",""]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],(function(l,n,u){var t=!0,i=l.component;return"change"===n&&(t=!1!==e.Eb(l,19).onChange(u.target.value)&&t),"blur"===n&&(t=!1!==e.Eb(l,19).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.licence=u)&&t),t}),null,null)),e.rb(19,16384,null,0,Ol.B,[e.D,e.k],null,null),e.rb(20,16384,null,0,Ol.A,[],{required:[0,"required"]},null),e.Jb(1024,null,Ol.o,(function(l){return[l]}),[Ol.A]),e.Jb(1024,null,Ol.p,(function(l){return[l]}),[Ol.B]),e.rb(23,671744,[["licenceF",4]],0,Ol.u,[[2,Ol.d],[6,Ol.o],[8,null],[6,Ol.p]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),e.Jb(2048,null,Ol.q,null,[Ol.u]),e.rb(25,16384,null,0,Ol.r,[[4,Ol.q]],null,null),(l()(),e.hb(16777216,null,null,1,null,Cn)),e.rb(27,278528,null,0,o.l,[e.O,e.L,e.r],{ngForOf:[0,"ngForOf"]},null),(l()(),e.sb(28,0,null,null,10,"div",[["class","form-group"]],null,null,null,null,null)),(l()(),e.sb(29,0,null,null,9,"label",[],null,null,null,null,null)),(l()(),e.sb(30,0,null,null,7,"input",[["id","terms"],["name","fTerms"],["required",""],["type","checkbox"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],(function(l,n,u){var t=!0,i=l.component;return"change"===n&&(t=!1!==e.Eb(l,31).onChange(u.target.checked)&&t),"blur"===n&&(t=!1!==e.Eb(l,31).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.terms=u)&&t),t}),null,null)),e.rb(31,16384,null,0,Ol.b,[e.D,e.k],null,null),e.rb(32,16384,null,0,Ol.c,[],{required:[0,"required"]},null),e.Jb(1024,null,Ol.o,(function(l){return[l]}),[Ol.c]),e.Jb(1024,null,Ol.p,(function(l){return[l]}),[Ol.b]),e.rb(35,671744,[["fTerms",4]],0,Ol.u,[[2,Ol.d],[6,Ol.o],[8,null],[6,Ol.p]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),e.Jb(2048,null,Ol.q,null,[Ol.u]),e.rb(37,16384,null,0,Ol.r,[[4,Ol.q]],null,null),(l()(),e.Mb(-1,null,[" I understand that I cannot undo this operation "])),(l()(),e.sb(39,0,null,null,1,"button",[["class","btn btn-primary"],["type","submit"]],[[8,"disabled",0]],[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.publish()&&e),e}),null,null)),(l()(),e.Mb(-1,null,[" Publish "]))],(function(l,n){var u=n.component;l(n,20,0,""),l(n,23,0,"licence",u.licence),l(n,27,0,u.licences),l(n,32,0,""),l(n,35,0,"fTerms",u.terms)}),(function(l,n){l(n,10,0,e.Eb(n,14).ngClassUntouched,e.Eb(n,14).ngClassTouched,e.Eb(n,14).ngClassPristine,e.Eb(n,14).ngClassDirty,e.Eb(n,14).ngClassValid,e.Eb(n,14).ngClassInvalid,e.Eb(n,14).ngClassPending),l(n,18,0,e.Eb(n,20).required?"":null,e.Eb(n,25).ngClassUntouched,e.Eb(n,25).ngClassTouched,e.Eb(n,25).ngClassPristine,e.Eb(n,25).ngClassDirty,e.Eb(n,25).ngClassValid,e.Eb(n,25).ngClassInvalid,e.Eb(n,25).ngClassPending),l(n,30,0,e.Eb(n,32).required?"":null,e.Eb(n,37).ngClassUntouched,e.Eb(n,37).ngClassTouched,e.Eb(n,37).ngClassPristine,e.Eb(n,37).ngClassDirty,e.Eb(n,37).ngClassValid,e.Eb(n,37).ngClassInvalid,e.Eb(n,37).ngClassPending),l(n,39,0,!e.Eb(n,12).form.valid)}))}function In(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,6,"div",[],null,null,null,null,null)),(l()(),e.sb(1,0,null,null,1,"h3",[],null,null,null,null,null)),(l()(),e.Mb(-1,null,["Publish experiment"])),(l()(),e.hb(16777216,null,null,1,null,Mn)),e.rb(4,16384,null,0,o.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.hb(16777216,null,null,1,null,Ln)),e.rb(6,16384,null,0,o.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null)],(function(l,n){var u=n.component;l(n,4,0,u.assay.features.isOpenAccess),l(n,6,0,!u.assay.features.isOpenAccess)}),null)}function xn(l){return e.Ob(0,[(l()(),e.hb(16777216,null,null,1,null,In)),e.rb(1,16384,null,0,o.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null)],(function(l,n){l(n,1,0,n.component.assay)}),null)}function En(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,1,"bd2-publish-form",[],null,null,null,xn,yn)),e.rb(1,245760,null,0,On,[D.a],null,null)],(function(l,n){l(n,1,0)}),null)}var Dn=e.ob("bd2-publish-form",On,En,{},{},[]),An=u("QQfA"),Fn=u("IP0z"),wn=u("s6ns"),Sn=u("POq0"),Tn=u("821u"),Kn=u("Xd0L"),qn=u("/HVE"),zn=u("JjoW"),Pn=u("/Co4"),jn=u("cUpR"),Nn=u("Fwaw"),Rn=u("zMNK"),Wn=u("hOhj"),Hn=u("5GAg"),Bn=u("HsOI"),Un=u("oapL"),Jn=u("ZwOa"),Vn=u("kNGD"),Gn=u("Gi4r"),_n=u("02hT"),$n=u("igqZ"),Yn=u("DkMi"),Xn=u("YiFe");class Zn{}class Qn{}const lu=()=>Promise.all([u.e(2),u.e(18)]).then(u.bind(null,"cXDc")).then(l=>l.TsDataModuleNgFactory),nu=()=>Promise.all([u.e(2),u.e(5),u.e(0),u.e(15)]).then(u.bind(null,"/qf6")).then(l=>l.PPAModuleNgFactory),uu=()=>Promise.all([u.e(2),u.e(5),u.e(0),u.e(16)]).then(u.bind(null,"Sypl")).then(l=>l.RhythmicityModuleNgFactory);class eu{}var tu=u("dvZr");u.d(n,"ExperimentModuleNgFactory",(function(){return iu}));var iu=e.pb(t,[],(function(l){return e.Bb([e.Cb(512,e.j,e.ab,[[8,[i.a,r.b,r.a,s.a,_,al,Bl,kn,Dn]],[3,e.j],e.w]),e.Cb(4608,o.o,o.n,[e.t,[2,o.E]]),e.Cb(4608,Ol.E,Ol.E,[]),e.Cb(4608,Ol.f,Ol.f,[]),e.Cb(4608,An.c,An.c,[An.i,An.e,e.j,An.h,An.f,e.q,e.y,o.d,Fn.b,[2,o.i]]),e.Cb(5120,An.j,An.k,[An.c]),e.Cb(5120,wn.c,wn.d,[An.c]),e.Cb(135680,wn.e,wn.e,[An.c,e.q,[2,o.i],[2,wn.b],wn.c,[3,wn.e],An.e]),e.Cb(4608,Sn.c,Sn.c,[]),e.Cb(4608,Tn.i,Tn.i,[]),e.Cb(5120,Tn.a,Tn.b,[An.c]),e.Cb(4608,Kn.c,Kn.y,[[2,Kn.h],qn.a]),e.Cb(4608,Kn.d,Kn.d,[]),e.Cb(5120,zn.a,zn.b,[An.c]),e.Cb(5120,Pn.b,Pn.c,[An.c]),e.Cb(1073742336,o.c,o.c,[]),e.Cb(1073742336,Ol.D,Ol.D,[]),e.Cb(1073742336,Ol.l,Ol.l,[]),e.Cb(1073742336,Ol.z,Ol.z,[]),e.Cb(1073742336,Fn.a,Fn.a,[]),e.Cb(1073742336,Kn.n,Kn.n,[[2,Kn.f],[2,jn.f]]),e.Cb(1073742336,qn.b,qn.b,[]),e.Cb(1073742336,Kn.x,Kn.x,[]),e.Cb(1073742336,Nn.c,Nn.c,[]),e.Cb(1073742336,Rn.f,Rn.f,[]),e.Cb(1073742336,Wn.c,Wn.c,[]),e.Cb(1073742336,An.g,An.g,[]),e.Cb(1073742336,wn.k,wn.k,[]),e.Cb(1073742336,Sn.d,Sn.d,[]),e.Cb(1073742336,Hn.a,Hn.a,[]),e.Cb(1073742336,Tn.j,Tn.j,[]),e.Cb(1073742336,Bn.e,Bn.e,[]),e.Cb(1073742336,Kn.z,Kn.z,[]),e.Cb(1073742336,Kn.p,Kn.p,[]),e.Cb(1073742336,Un.c,Un.c,[]),e.Cb(1073742336,Jn.c,Jn.c,[]),e.Cb(1073742336,Vn.f,Vn.f,[]),e.Cb(1073742336,Gn.c,Gn.c,[]),e.Cb(1073742336,_n.b,_n.b,[]),e.Cb(1073742336,$n.e,$n.e,[]),e.Cb(1073742336,Kn.v,Kn.v,[]),e.Cb(1073742336,Kn.s,Kn.s,[]),e.Cb(1073742336,zn.d,zn.d,[]),e.Cb(1073742336,Pn.e,Pn.e,[]),e.Cb(1073742336,Yn.a,Yn.a,[]),e.Cb(1073742336,Xn.a,Xn.a,[]),e.Cb(1073742336,Zn,Zn,[]),e.Cb(1073742336,Qn,Qn,[]),e.Cb(1073742336,p.p,p.p,[[2,p.u],[2,p.l]]),e.Cb(1073742336,eu,eu,[]),e.Cb(1073742336,t,t,[]),e.Cb(256,Kn.h,"en-GB",[]),e.Cb(256,Kn.g,Kn.k,[]),e.Cb(256,Vn.a,{separatorKeyCodes:[tu.g]},[]),e.Cb(1024,p.j,(function(){return[[{path:":id",component:P,children:[{path:"",pathMatch:"full",component:tl},{path:"edit",component:Ml},{path:"file",component:en},{path:"publish",component:On},{path:"data",loadChildren:lu},{path:"ppa",loadChildren:nu},{path:"rhythmicity",loadChildren:uu}]}]]}),[])])}))},vLYz:function(l,n,u){"use strict";u.d(n,"a",(function(){return i}));var e=u("8Y7J"),t=u("BOp5");class i{constructor(){this.activeColor="green",this.baseColor="#ccc",this.overlayColor="rgba(255,255,255,0.5)",this.blocked=!1,this.multiple=!0,this.noDuplicates=!0,this.autoReset=!1,this.sizeLimit=50,this.uploadFiles=new e.m,this.selectedFiles=new e.m,this.dragging=!1,this.loaded=!1,this.sizeError=!1,this.files=[]}ngOnInit(){}reset(){this.files=[],this.inputField&&this.inputField.nativeElement&&(this.inputField.nativeElement.value="")}handleDragEnter(){this.dragging=!0}handleDragLeave(){this.dragging=!1}handleDrop(l){l.preventDefault(),this.dragging=!1,l.dataTransfer&&this.handleFileChange(l.dataTransfer.files)}handleFileSelect(l){l.target&&this.handleFileChange(l.target.files)}handleFileChange(l){const n=this.multiple?l.length:Math.min(1,l.length);this.multiple||(this.files=[]);for(let u=0;u<n;u++){const n=l[u];this.noDuplicates&&this.removeDuplicate(n),this.files.push(n)}this.checkSize(),this.selectedFiles.next(this.files)}remove(l){Object(t.b)(l,this.files),this.checkSize()}removeDuplicate(l){const n=this.files.find(n=>n.name===l.name);this.remove(n)}checkSize(){let l=0;this.files.map(l=>l.size).forEach(n=>l+=n),this.sizeError=(l/=1048576)>this.sizeLimit}upload(){this.uploadFiles.next(this.files),this.autoReset&&this.reset()}}},yYXI:function(l,n,u){"use strict";u.d(n,"a",(function(){return i}));var e=u("TPWj"),t=u("pLZG");class i extends e.a{constructor(l){super(),this.serviceDependencies=l,this.experimentService=l.experimentService,this.currentExperiment=l.currentExperiment,this.feedback=l.feedback,this.router=l.router,this.titleSetter=l.titleSetter,this.titlePart=""}ngOnInit(){this.subscribeToExperiment()}ngOnDestroy(){this.unsubscribeFromExperiment()}getModel(){return this.assay}updateModel(l){this.assay=l,this.setTitle()}setTitle(){this.titleSetter.setTitle("Exp "+this.assay.id+this.titlePart)}subscribeToExperiment(){this.expSubscription=this.currentExperiment.experiment().pipe(Object(t.a)(l=>!!l)).subscribe(l=>{this.updateModel(l)},l=>this.feedback.error(l),()=>console.log(this.constructor.name+" expSubscription completed"))}refreshModel(){return this.experimentService.getExperiment(this.assay.id).then(l=>(this.currentExperiment.push(l),l))}unsubscribeFromExperiment(){this.expSubscription&&this.expSubscription.unsubscribe()}expHomePath(l){return["/experiment",l=l||this.assay.id]}goToExpHome(l){this.router.navigate(this.expHomePath(l))}goToExpEdit(l,n){const u=this.expHomePath(l);u.push("edit"),n?this.router.navigate(u,{fragment:n}):this.router.navigate(u)}}}}]);