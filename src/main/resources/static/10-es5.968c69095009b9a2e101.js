function _get(l,n,u){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(l,n,u){var e=_superPropBase(l,n);if(e){var t=Object.getOwnPropertyDescriptor(e,n);return t.get?t.get.call(u):t.value}})(l,n,u||l)}function _superPropBase(l,n){for(;!Object.prototype.hasOwnProperty.call(l,n)&&null!==(l=_getPrototypeOf(l)););return l}function _possibleConstructorReturn(l,n){return!n||"object"!=typeof n&&"function"!=typeof n?_assertThisInitialized(l):n}function _assertThisInitialized(l){if(void 0===l)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}function _getPrototypeOf(l){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(l){return l.__proto__||Object.getPrototypeOf(l)})(l)}function _inherits(l,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(n&&n.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),n&&_setPrototypeOf(l,n)}function _setPrototypeOf(l,n){return(_setPrototypeOf=Object.setPrototypeOf||function(l,n){return l.__proto__=n,l})(l,n)}function _classCallCheck(l,n){if(!(l instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(l,n){for(var u=0;u<n.length;u++){var e=n[u];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(l,e.key,e)}}function _createClass(l,n,u){return n&&_defineProperties(l.prototype,n),u&&_defineProperties(l,u),l}(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{"1A98":function(l,n,u){"use strict";var e=u("8Y7J"),t=u("SVse");u("vLYz"),u.d(n,"a",(function(){return i})),u.d(n,"b",(function(){return b}));var i=e.qb({encapsulation:0,styles:[[".uploader-zone[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}.uploader-zone[_ngcontent-%COMP%]{font-weight:400;-webkit-box-align:center;align-items:center;background-color:rgba(0,0,0,.02);cursor:pointer;display:-webkit-box;display:flex;height:100px;-webkit-box-pack:center;justify-content:center;outline:#ccc dashed 3px}div.fileitem[_ngcontent-%COMP%]{margin:2px;padding:2px;border:1px solid #efefef;border-radius:4px}"]],data:{}});function r(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,4,"div",[["class","float-left fileitem"]],null,null,null,null,null)),(l()(),e.Mb(1,null,[" "," "])),(l()(),e.sb(2,0,null,null,2,"button",[["aria-label","Close"],["class","close"],["style","margin-left: 0.5em;"],["type","button"]],null,[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.remove(l.context.$implicit)&&e),e}),null,null)),(l()(),e.sb(3,0,null,null,1,"span",[["aria-hidden","true"]],null,null,null,null,null)),(l()(),e.Mb(-1,null,["\xd7"]))],null,(function(l,n){l(n,1,0,n.context.$implicit.name)}))}function o(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,5,"div",[["class","clearfix"],["style","margin-bottom: 1em;"]],null,null,null,null,null)),(l()(),e.sb(1,0,null,null,2,"div",[["class",""]],null,null,null,null,null)),(l()(),e.sb(2,0,null,null,1,"label",[],null,null,null,null,null)),(l()(),e.Mb(-1,null,["Files:"])),(l()(),e.hb(16777216,null,null,1,null,r)),e.rb(5,278528,null,0,t.l,[e.O,e.L,e.r],{ngForOf:[0,"ngForOf"]},null)],(function(l,n){l(n,5,0,n.component.files)}),null)}function s(l){return e.Ob(0,[(l()(),e.sb(0,0,[["inputField",1]],null,0,"input",[["multiple",""],["name","inputField"],["type","file"]],null,[[null,"change"]],(function(l,n,u){var e=!0;return"change"===n&&(e=!1!==l.component.handleFileSelect(u)&&e),e}),null,null))],null,null)}function a(l){return e.Ob(0,[(l()(),e.sb(0,0,[["inputField",1]],null,0,"input",[["name","inputField"],["type","file"]],null,[[null,"change"]],(function(l,n,u){var e=!0;return"change"===n&&(e=!1!==l.component.handleFileSelect(u)&&e),e}),null,null))],null,null)}function c(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,1,"div",[["class","alert alert-danger"]],null,null,null,null,null)),(l()(),e.Mb(1,null,[" Maximum upload size is ","MB "]))],null,(function(l,n){l(n,1,0,n.component.sizeLimit)}))}function b(l){return e.Ob(0,[e.Kb(671088640,1,{inputField:0}),(l()(),e.sb(1,0,null,null,16,"div",[],null,null,null,null,null)),(l()(),e.hb(16777216,null,null,1,null,o)),e.rb(3,16384,null,0,t.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.sb(4,0,null,null,9,"div",[["style","margin-bottom: 1em;"]],null,null,null,null,null)),(l()(),e.sb(5,0,null,null,8,"label",[["class","uploader-zone"],["ondragover","return false;"]],[[2,"loaded",null],[4,"outlineColor",null]],[[null,"dragenter"],[null,"dragleave"],[null,"drop"]],(function(l,n,u){var e=!0,t=l.component;return"dragenter"===n&&(e=!1!==t.handleDragEnter()&&e),"dragleave"===n&&(e=!1!==t.handleDragLeave()&&e),"drop"===n&&(e=!1!==t.handleDrop(u)&&e),e}),null,null)),(l()(),e.sb(6,0,null,null,1,"i",[["class","material-icons bd-icon bd-primary"],["style","font-size: 400%;"]],null,null,null,null,null)),(l()(),e.Mb(-1,null,["cloud_upload"])),(l()(),e.sb(8,0,null,null,1,"p",[],null,null,null,null,null)),(l()(),e.Mb(-1,null,[" Drag file(s) or click to select"])),(l()(),e.hb(16777216,null,null,1,null,s)),e.rb(11,16384,null,0,t.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.hb(16777216,null,null,1,null,a)),e.rb(13,16384,null,0,t.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.hb(16777216,null,null,1,null,c)),e.rb(15,16384,null,0,t.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.sb(16,0,null,null,1,"button",[["class","btn btn-primary btn-sm"],["type","button"]],[[8,"disabled",0]],[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.upload()&&e),e}),null,null)),(l()(),e.Mb(-1,null,["Upload selected "]))],(function(l,n){var u=n.component;l(n,3,0,u.files.length>0),l(n,11,0,u.multiple),l(n,13,0,!u.multiple),l(n,15,0,u.sizeError)}),(function(l,n){var u=n.component;l(n,5,0,u.loaded,u.dragging?u.activeColor:u.baseColor),l(n,16,0,u.blocked||u.files.length<1||u.sizeError)}))}},"9+85":function(l,n,u){"use strict";u.d(n,"a",(function(){return r}));var e=u("W8w2"),t=u("8Y7J"),i=u("s6ns"),r=function(){var l=function(){function l(n){_classCallCheck(this,l),this.dialogs=n}return _createClass(l,[{key:"confirm",value:function(l,n){var u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Cancel",t=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"OK",i=new e.b(l,n,u,t);return this.dialogs.open(e.a,{data:i,autoFocus:!1}).afterClosed()}}]),l}();return l.ngInjectableDef=t.Sb({factory:function(){return new l(t.Tb(i.e))},token:l,providedIn:"root"}),l}()},GVyA:function(l,n,u){"use strict";u.d(n,"a",(function(){return e}));var e=function l(n,u,e,t,i){_classCallCheck(this,l),this.experimentService=n,this.currentExperiment=u,this.feedback=e,this.titleSetter=t,this.router=i}},YiFe:function(l,n,u){"use strict";u.d(n,"a",(function(){return e}));var e=function l(){_classCallCheck(this,l)}},fSIb:function(l,n,u){"use strict";u.r(n);var e=u("8Y7J"),t=function l(){_classCallCheck(this,l)},i=u("t68o"),r=u("zbXB"),o=u("pMnS"),s=u("SVse"),a=function l(){_classCallCheck(this,l)},c=e.qb({encapsulation:2,styles:[],data:{}});function b(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,6,"div",[["class","item"]],null,null,null,null,null)),(l()(),e.sb(1,0,null,null,1,"strong",[],null,null,null,null,null)),(l()(),e.Mb(-1,null,["Open Access: "])),(l()(),e.Mb(-1,null,[" under "])),(l()(),e.sb(4,0,null,null,1,"strong",[],null,null,null,null,null)),(l()(),e.Mb(5,null,["",""])),(l()(),e.Mb(-1,null,[" license "]))],null,(function(l,n){l(n,5,0,n.component.model.features.licence)}))}function f(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),e.Mb(1,null,["",", "]))],null,(function(l,n){l(n,1,0,n.context.$implicit.name)}))}function d(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,4,"div",[["class","item"]],null,null,null,null,null)),(l()(),e.sb(1,0,null,null,1,"strong",[],null,null,null,null,null)),(l()(),e.Mb(-1,null,["Authors: "])),(l()(),e.hb(16777216,null,null,1,null,f)),e.rb(4,278528,null,0,s.l,[e.O,e.L,e.r],{ngForOf:[0,"ngForOf"]},null)],(function(l,n){l(n,4,0,n.component.model.contributionDesc.authors)}),null)}function h(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,12,"div",[["class","summary-box"]],null,null,null,null,null)),(l()(),e.sb(1,0,null,null,3,"div",[["class","item"]],null,null,null,null,null)),(l()(),e.sb(2,0,null,null,1,"strong",[],null,null,null,null,null)),(l()(),e.Mb(-1,null,["Purpose: "])),(l()(),e.Mb(4,null,[" "," "])),(l()(),e.hb(16777216,null,null,1,null,b)),e.rb(6,16384,null,0,s.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.hb(16777216,null,null,1,null,d)),e.rb(8,16384,null,0,s.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.sb(9,0,null,null,3,"div",[["class","item item-last"]],null,null,null,null,null)),(l()(),e.sb(10,0,null,null,1,"strong",[],null,null,null,null,null)),(l()(),e.Mb(-1,null,["Data category: "])),(l()(),e.Mb(12,null,[" "," "]))],(function(l,n){var u=n.component;l(n,6,0,u.model.features.isOpenAccess),l(n,8,0,u.model.contributionDesc.authors)}),(function(l,n){var u=n.component;l(n,4,0,u.model.generalDesc.purpose),l(n,12,0,null==u.model.dataCategory?null:u.model.dataCategory.longName)}))}function p(l){return e.Ob(0,[(l()(),e.hb(16777216,null,null,1,null,h)),e.rb(1,16384,null,0,s.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null)],(function(l,n){l(n,1,0,n.component.model)}),null)}var m=u("iInd"),v=function(){function l(){_classCallCheck(this,l),this.onRefresh=new e.m}return _createClass(l,[{key:"refresh",value:function(){this.onRefresh.emit(!0)}},{key:"back",value:function(){window.history.back()}}]),l}(),g=e.qb({encapsulation:2,styles:[],data:{}});function k(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,7,"a",[["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(l,n,u){var t=!0;return"click"===n&&(t=!1!==e.Eb(l,1).onClick(u.button,u.ctrlKey,u.metaKey,u.shiftKey)&&t),t}),null,null)),e.rb(1,671744,[[4,4]],0,m.o,[m.l,m.a,s.j],{routerLink:[0,"routerLink"]},null),e.Fb(2,1),e.rb(3,1720320,null,2,m.n,[m.l,e.k,e.D,[2,m.m],[2,m.o]],{routerLinkActiveOptions:[0,"routerLinkActiveOptions"],routerLinkActive:[1,"routerLinkActive"]},null),e.Kb(603979776,3,{links:1}),e.Kb(603979776,4,{linksWithHrefs:1}),e.Hb(6,{exact:0}),(l()(),e.Mb(-1,null,["Edit"]))],(function(l,n){var u=l(n,2,0,"edit");l(n,1,0,u);var e=l(n,6,0,!0);l(n,3,0,e,"active")}),(function(l,n){l(n,0,0,e.Eb(n,1).target,e.Eb(n,1).href)}))}function y(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,7,"a",[["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(l,n,u){var t=!0;return"click"===n&&(t=!1!==e.Eb(l,1).onClick(u.button,u.ctrlKey,u.metaKey,u.shiftKey)&&t),t}),null,null)),e.rb(1,671744,[[6,4]],0,m.o,[m.l,m.a,s.j],{routerLink:[0,"routerLink"]},null),e.Fb(2,4),e.rb(3,1720320,null,2,m.n,[m.l,e.k,e.D,[2,m.m],[2,m.o]],{routerLinkActiveOptions:[0,"routerLinkActiveOptions"],routerLinkActive:[1,"routerLinkActive"]},null),e.Kb(603979776,5,{links:1}),e.Kb(603979776,6,{linksWithHrefs:1}),e.Hb(6,{exact:0}),(l()(),e.Mb(-1,null,["Show data"]))],(function(l,n){var u=l(n,2,0,".","data","view","ts");l(n,1,0,u);var e=l(n,6,0,!0);l(n,3,0,e,"active")}),(function(l,n){l(n,0,0,e.Eb(n,1).target,e.Eb(n,1).href)}))}function O(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,7,"a",[["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(l,n,u){var t=!0;return"click"===n&&(t=!1!==e.Eb(l,1).onClick(u.button,u.ctrlKey,u.metaKey,u.shiftKey)&&t),t}),null,null)),e.rb(1,671744,[[8,4]],0,m.o,[m.l,m.a,s.j],{routerLink:[0,"routerLink"]},null),e.Fb(2,1),e.rb(3,1720320,null,2,m.n,[m.l,e.k,e.D,[2,m.m],[2,m.o]],{routerLinkActiveOptions:[0,"routerLinkActiveOptions"],routerLinkActive:[1,"routerLinkActive"]},null),e.Kb(603979776,7,{links:1}),e.Kb(603979776,8,{linksWithHrefs:1}),e.Hb(6,{exact:0}),(l()(),e.Mb(-1,null,["Period analysis"]))],(function(l,n){var u=l(n,2,0,"ppa/new");l(n,1,0,u);var e=l(n,6,0,!0);l(n,3,0,e,"active")}),(function(l,n){l(n,0,0,e.Eb(n,1).target,e.Eb(n,1).href)}))}function C(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,7,"a",[["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(l,n,u){var t=!0;return"click"===n&&(t=!1!==e.Eb(l,1).onClick(u.button,u.ctrlKey,u.metaKey,u.shiftKey)&&t),t}),null,null)),e.rb(1,671744,[[10,4]],0,m.o,[m.l,m.a,s.j],{routerLink:[0,"routerLink"]},null),e.Fb(2,1),e.rb(3,1720320,null,2,m.n,[m.l,e.k,e.D,[2,m.m],[2,m.o]],{routerLinkActiveOptions:[0,"routerLinkActiveOptions"],routerLinkActive:[1,"routerLinkActive"]},null),e.Kb(603979776,9,{links:1}),e.Kb(603979776,10,{linksWithHrefs:1}),e.Hb(6,{exact:0}),(l()(),e.Mb(-1,null,["Period analysis"]))],(function(l,n){var u=l(n,2,0,"ppa");l(n,1,0,u);var e=l(n,6,0,!1);l(n,3,0,e,"active")}),(function(l,n){l(n,0,0,e.Eb(n,1).target,e.Eb(n,1).href)}))}function I(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,7,"a",[["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(l,n,u){var t=!0;return"click"===n&&(t=!1!==e.Eb(l,1).onClick(u.button,u.ctrlKey,u.metaKey,u.shiftKey)&&t),t}),null,null)),e.rb(1,671744,[[12,4]],0,m.o,[m.l,m.a,s.j],{routerLink:[0,"routerLink"]},null),e.Fb(2,1),e.rb(3,1720320,null,2,m.n,[m.l,e.k,e.D,[2,m.m],[2,m.o]],{routerLinkActiveOptions:[0,"routerLinkActiveOptions"],routerLinkActive:[1,"routerLinkActive"]},null),e.Kb(603979776,11,{links:1}),e.Kb(603979776,12,{linksWithHrefs:1}),e.Hb(6,{exact:0}),(l()(),e.Mb(-1,null,["Rhythmicity"]))],(function(l,n){var u=l(n,2,0,"rhythmicity");l(n,1,0,u);var e=l(n,6,0,!1);l(n,3,0,e,"active")}),(function(l,n){l(n,0,0,e.Eb(n,1).target,e.Eb(n,1).href)}))}function M(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,7,"a",[["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(l,n,u){var t=!0;return"click"===n&&(t=!1!==e.Eb(l,1).onClick(u.button,u.ctrlKey,u.metaKey,u.shiftKey)&&t),t}),null,null)),e.rb(1,671744,[[14,4]],0,m.o,[m.l,m.a,s.j],{routerLink:[0,"routerLink"]},null),e.Fb(2,3),e.rb(3,1720320,null,2,m.n,[m.l,e.k,e.D,[2,m.m],[2,m.o]],{routerLinkActiveOptions:[0,"routerLinkActiveOptions"],routerLinkActive:[1,"routerLinkActive"]},null),e.Kb(603979776,13,{links:1}),e.Kb(603979776,14,{linksWithHrefs:1}),e.Hb(6,{exact:0}),(l()(),e.Mb(7,null,[" ",""]))],(function(l,n){var u=l(n,2,0,".","data","ts-import");l(n,1,0,u);var e=l(n,6,0,!0);l(n,3,0,e,"active")}),(function(l,n){var u=n.component;l(n,0,0,e.Eb(n,1).target,e.Eb(n,1).href),l(n,7,0,u.experiment.features.hasTSData?"Replace data":"Import data")}))}function L(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,8,"a",[["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(l,n,u){var t=!0;return"click"===n&&(t=!1!==e.Eb(l,1).onClick(u.button,u.ctrlKey,u.metaKey,u.shiftKey)&&t),t}),null,null)),e.rb(1,671744,[[18,4]],0,m.o,[m.l,m.a,s.j],{routerLink:[0,"routerLink"]},null),e.Fb(2,1),e.rb(3,1720320,null,2,m.n,[m.l,e.k,e.D,[2,m.m],[2,m.o]],{routerLinkActiveOptions:[0,"routerLinkActiveOptions"],routerLinkActive:[1,"routerLinkActive"]},null),e.Kb(603979776,17,{links:1}),e.Kb(603979776,18,{linksWithHrefs:1}),e.Hb(6,{exact:0}),(l()(),e.sb(7,0,null,null,1,"i",[["class","material-icons bd-icon"],["style","color: green"]],null,null,null,null,null)),(l()(),e.Mb(-1,null,["lock_open"]))],(function(l,n){var u=l(n,2,0,"publish");l(n,1,0,u);var e=l(n,6,0,!0);l(n,3,0,e,"active")}),(function(l,n){l(n,0,0,e.Eb(n,1).target,e.Eb(n,1).href)}))}function E(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,42,"div",[["style","margin-bottom: 2em;"]],null,null,null,null,null)),(l()(),e.sb(1,0,null,null,41,"nav",[["class","secondary"]],null,null,null,null,null)),(l()(),e.sb(2,0,null,null,4,"a",[],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(l,n,u){var t=!0;return"click"===n&&(t=!1!==e.Eb(l,3).onClick(u.button,u.ctrlKey,u.metaKey,u.shiftKey)&&t),t}),null,null)),e.rb(3,671744,null,0,m.o,[m.l,m.a,s.j],{routerLink:[0,"routerLink"]},null),e.Fb(4,1),(l()(),e.sb(5,0,null,null,1,"i",[["class","material-icons bd-icon"]],null,null,null,null,null)),(l()(),e.Mb(-1,null,["fast_rewind"])),(l()(),e.sb(7,0,null,null,2,"a",[["class","shade"],["role","button"]],null,[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.back()&&e),e}),null,null)),(l()(),e.sb(8,0,null,null,1,"i",[["class","material-icons bd-icon"]],null,null,null,null,null)),(l()(),e.Mb(-1,null,["arrow_left"])),(l()(),e.sb(10,0,null,null,2,"a",[["class","shade"],["role","button"]],null,[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.refresh()&&e),e}),null,null)),(l()(),e.sb(11,0,null,null,1,"i",[["class","material-icons bd-icon"]],null,null,null,null,null)),(l()(),e.Mb(-1,null,["refresh"])),(l()(),e.sb(13,0,null,null,7,"a",[["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(l,n,u){var t=!0;return"click"===n&&(t=!1!==e.Eb(l,14).onClick(u.button,u.ctrlKey,u.metaKey,u.shiftKey)&&t),t}),null,null)),e.rb(14,671744,[[2,4]],0,m.o,[m.l,m.a,s.j],{routerLink:[0,"routerLink"]},null),e.Fb(15,1),e.rb(16,1720320,null,2,m.n,[m.l,e.k,e.D,[2,m.m],[2,m.o]],{routerLinkActiveOptions:[0,"routerLinkActiveOptions"],routerLinkActive:[1,"routerLinkActive"]},null),e.Kb(603979776,1,{links:1}),e.Kb(603979776,2,{linksWithHrefs:1}),e.Hb(19,{exact:0}),(l()(),e.Mb(-1,null,["Overview"])),(l()(),e.hb(16777216,null,null,1,null,k)),e.rb(22,16384,null,0,s.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.hb(16777216,null,null,1,null,y)),e.rb(24,16384,null,0,s.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.hb(16777216,null,null,1,null,O)),e.rb(26,16384,null,0,s.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.hb(16777216,null,null,1,null,C)),e.rb(28,16384,null,0,s.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.hb(16777216,null,null,1,null,I)),e.rb(30,16384,null,0,s.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.hb(16777216,null,null,1,null,M)),e.rb(32,16384,null,0,s.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.sb(33,0,null,null,7,"a",[["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(l,n,u){var t=!0;return"click"===n&&(t=!1!==e.Eb(l,34).onClick(u.button,u.ctrlKey,u.metaKey,u.shiftKey)&&t),t}),null,null)),e.rb(34,671744,[[16,4]],0,m.o,[m.l,m.a,s.j],{routerLink:[0,"routerLink"]},null),e.Fb(35,1),e.rb(36,1720320,null,2,m.n,[m.l,e.k,e.D,[2,m.m],[2,m.o]],{routerLinkActiveOptions:[0,"routerLinkActiveOptions"],routerLinkActive:[1,"routerLinkActive"]},null),e.Kb(603979776,15,{links:1}),e.Kb(603979776,16,{linksWithHrefs:1}),e.Hb(39,{exact:0}),(l()(),e.Mb(-1,null,["Files"])),(l()(),e.hb(16777216,null,null,1,null,L)),e.rb(42,16384,null,0,s.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null)],(function(l,n){var u=n.component,e=l(n,4,0,"/experiments");l(n,3,0,e);var t=l(n,15,0,".");l(n,14,0,t);var i=l(n,19,0,!0);l(n,16,0,i,"active"),l(n,22,0,u.experiment.security.canWrite),l(n,24,0,u.experiment.features.hasTSData),l(n,26,0,u.experiment.security.canWrite&&u.experiment.features.hasTSData&&!u.experiment.features.hasPPAJobs),l(n,28,0,u.experiment.features.hasPPAJobs),l(n,30,0,u.experiment.security.canWrite&&u.experiment.features.hasTSData||u.experiment.features.hasRhythmicityJobs),l(n,32,0,u.experiment.security.canWrite);var r=l(n,35,0,"file");l(n,34,0,r);var o=l(n,39,0,!0);l(n,36,0,o,"active"),l(n,42,0,u.experiment.security.isOwner||u.experiment.security.isSuperOwner)}),(function(l,n){l(n,2,0,e.Eb(n,3).target,e.Eb(n,3).href),l(n,13,0,e.Eb(n,14).target,e.Eb(n,14).href),l(n,33,0,e.Eb(n,34).target,e.Eb(n,34).href)}))}function x(l){return e.Ob(0,[(l()(),e.hb(16777216,null,null,1,null,E)),e.rb(1,16384,null,0,s.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null)],(function(l,n){l(n,1,0,n.component.experiment)}),null)}var D=u("GVyA"),A=u("RtrU"),F=u("2Vo4"),_=1,w=function(){function l(){_classCallCheck(this,l),this.experimentStream=new F.a(null),this.id=_++}return _createClass(l,[{key:"close",value:function(){this.experimentStream.complete()}},{key:"experiment",value:function(){return this.experimentStream}},{key:"push",value:function(l){this.experimentStream.next(l)}}]),l}(),S=u("6tuW"),T=u("BMm9"),P=u("pLZG"),K=u("lJxs"),j=function(){function l(n,u,e,t,i,r,o,s){_classCallCheck(this,l),this.experimentService=n,this.RDMSocial=u,this.currentExperiment=e,this.feedback=t,this.analytics=i,this.route=r,this.router=o,this.dialogs=s,this.isUnauthorised=!1}return _createClass(l,[{key:"ngOnInit",value:function(){var l=this;this.expSubscription=this.currentExperiment.experiment().pipe(Object(P.a)((function(l){return!!l}))).subscribe((function(n){l.model=n,l.analytics.experimentView(n.id),l.RDMSocial.shouldShowMeasurementWarning(n).then((function(n){n&&l.showMetadataWarning()}))}),(function(n){return l.feedback.error(n)}),(function(){return console.log("currentExperimentStream completed")})),this.paramsSubscription=this.route.paramMap.pipe(Object(K.a)((function(l){return l.get("id")})),Object(P.a)((function(l){return!!l}))).subscribe((function(n){return l.loadExperiment(+n)}))}},{key:"ngOnDestroy",value:function(){this.paramsSubscription&&this.paramsSubscription.unsubscribe(),this.expSubscription&&this.expSubscription.unsubscribe(),this.currentExperiment&&this.currentExperiment.close()}},{key:"refresh",value:function(){this.model&&this.loadExperiment(this.model.id)}},{key:"loadExperiment",value:function(l){var n=this;this.experimentService.getExperiment(l).then((function(l){n.currentExperiment.push(l),n.isUnauthorised=!1})).catch((function(l){n.isUnauthorised=l.isUnauthorised,n.feedback.error(l)}))}},{key:"handleWarningResponse",value:function(l){console.log("Dialog: "+l)}},{key:"showMetadataWarning",value:function(){var l=this;this.dialogs.confirm("Metadata reminder","\n        <p>\n        Please add measurements details, like technique, equipment and short description.\n        </p>\n        <p>\n        It will improve the metadata quality and it will help you when searching for the data.\n        </p>\n","Not now").subscribe((function(n){l.RDMSocial.registerMeasurementWarning(l.model),n&&l.router.navigate(["edit"],{relativeTo:l.route,fragment:"MeasurementSection"})}))}}]),l}(),R=u("vejM"),q=u("ZMwR"),z=u("9+85"),N=e.qb({encapsulation:2,styles:[],data:{}});function W(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,1,"i",[["class","material-icons bd-icon"],["style","color: green; font-size: 1.5em;"]],null,null,null,null,null)),(l()(),e.Mb(-1,null,["lock_open"]))],null,null)}function B(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,14,"div",[],null,null,null,null,null)),(l()(),e.sb(1,0,null,null,11,"div",[["class","card asset-card"]],null,null,null,null,null)),(l()(),e.sb(2,0,null,null,7,"div",[["class","card-header"]],null,null,null,null,null)),(l()(),e.sb(3,0,null,null,6,"h3",[],null,null,null,null,null)),(l()(),e.hb(16777216,null,null,1,null,W)),e.rb(5,16384,null,0,s.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.Mb(6,null,[" Experiment: ",""])),(l()(),e.sb(7,0,null,null,0,"br",[],null,null,null,null,null)),(l()(),e.sb(8,0,null,null,1,"small",[],null,null,null,null,null)),(l()(),e.Mb(9,null,["",""])),(l()(),e.sb(10,0,null,null,2,"div",[["class","card-body"]],null,null,null,null,null)),(l()(),e.sb(11,0,null,null,1,"bd2-experiment-basic-info-view",[],null,null,null,p,c)),e.rb(12,49152,null,0,a,[],{model:[0,"model"]},null),(l()(),e.sb(13,0,null,null,1,"bd2-experiment-navigation",[],null,[[null,"onRefresh"]],(function(l,n,u){var e=!0;return"onRefresh"===n&&(e=!1!==l.component.refresh()&&e),e}),x,g)),e.rb(14,49152,null,0,v,[],{experiment:[0,"experiment"]},{onRefresh:"onRefresh"})],(function(l,n){var u=n.component;l(n,5,0,u.model.features.isOpenAccess),l(n,12,0,u.model),l(n,14,0,u.model)}),(function(l,n){var u=n.component;l(n,6,0,u.model.id),l(n,9,0,u.model.name)}))}function H(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,3,"div",[],null,null,null,null,null)),(l()(),e.Mb(-1,null,[" ... loading experiment "])),(l()(),e.sb(2,0,null,null,1,"p",[],null,null,null,null,null)),(l()(),e.Mb(-1,null,["If just logged in try to refresh the window if the experiment is not loading."]))],null,null)}function U(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,4,"div",[],null,null,null,null,null)),(l()(),e.sb(1,0,null,null,1,"h4",[],null,null,null,null,null)),(l()(),e.Mb(-1,null,["You don't have sufficient permissions to see the experiment"])),(l()(),e.sb(3,0,null,null,1,"p",[],null,null,null,null,null)),(l()(),e.Mb(-1,null,["Try to login"]))],null,null)}function J(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,8,"div",[],null,null,null,null,null)),(l()(),e.hb(16777216,null,null,1,null,B)),e.rb(2,16384,null,0,s.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.hb(16777216,null,null,1,null,H)),e.rb(4,16384,null,0,s.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.hb(16777216,null,null,1,null,U)),e.rb(6,16384,null,0,s.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.sb(7,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),e.rb(8,212992,null,0,m.q,[m.b,e.O,e.j,[8,null],e.h],null,null)],(function(l,n){var u=n.component;l(n,2,0,u.model),l(n,4,0,!u.model&&!u.isUnauthorised),l(n,6,0,!u.model&&u.isUnauthorised),l(n,8,0)}),null)}var V=e.ob("ng-component",j,(function(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,3,"ng-component",[],null,null,null,J,N)),e.Jb(4608,null,D.a,D.a,[A.a,w,S.a,T.a,m.l]),e.Jb(512,null,w,w,[]),e.rb(3,245760,null,0,j,[A.a,R.a,w,S.a,q.a,m.a,m.l,z.a],null,null)],(function(l,n){l(n,3,0)}),null)}),{},{},[]),G=u("P8p1"),$=u("bAp0"),Y=u("y25b"),X=u("9tkb"),Z=u("8j0n"),Q=u("adRK"),ll=u("oW74"),nl=u("3rK8"),ul=u("yYXI"),el=function(l){function n(l){return _classCallCheck(this,n),_possibleConstructorReturn(this,_getPrototypeOf(n).call(this,l))}return _inherits(n,l),n}(ul.a),tl=e.qb({encapsulation:2,styles:[],data:{}});function il(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,26,"div",[],null,null,null,null,null)),(l()(),e.sb(1,0,null,null,1,"h3",[],null,null,null,null,null)),(l()(),e.Mb(-1,null,["Overview of experimental details"])),(l()(),e.sb(3,0,null,null,5,"div",[["class","card mb-2"]],null,null,null,null,null)),(l()(),e.sb(4,0,null,null,1,"div",[["class","card-header"]],null,null,null,null,null)),(l()(),e.Mb(-1,null,["General description"])),(l()(),e.sb(6,0,null,null,2,"div",[["class","card-body"]],null,null,null,null,null)),(l()(),e.sb(7,0,null,null,1,"bd2-general-desc-view",[],null,null,null,G.b,G.a)),e.rb(8,49152,null,0,$.a,[],{model:[0,"model"]},null),(l()(),e.sb(9,0,null,null,5,"div",[["class","card mb-2"]],null,null,null,null,null)),(l()(),e.sb(10,0,null,null,1,"div",[["class","card-header"]],null,null,null,null,null)),(l()(),e.Mb(-1,null,["Contributions"])),(l()(),e.sb(12,0,null,null,2,"div",[["class","card-body"]],null,null,null,null,null)),(l()(),e.sb(13,0,null,null,1,"bd2-contr-desc-view",[],null,null,null,Y.b,Y.a)),e.rb(14,49152,null,0,X.a,[],{model:[0,"model"]},null),(l()(),e.sb(15,0,null,null,5,"div",[["class","card mb-2"]],null,null,null,null,null)),(l()(),e.sb(16,0,null,null,1,"div",[["class","card-header"]],null,null,null,null,null)),(l()(),e.Mb(-1,null,["Biological details"])),(l()(),e.sb(18,0,null,null,2,"div",[["class","card-body"]],null,null,null,null,null)),(l()(),e.sb(19,0,null,null,1,"bd2-simple-bio-desc-view",[],null,null,null,Z.b,Z.a)),e.rb(20,49152,null,0,Q.a,[],{model:[0,"model"]},null),(l()(),e.sb(21,0,null,null,5,"div",[["class","card mb-2"]],null,null,null,null,null)),(l()(),e.sb(22,0,null,null,1,"div",[["class","card-header"]],null,null,null,null,null)),(l()(),e.Mb(-1,null,["Measurement details"])),(l()(),e.sb(24,0,null,null,2,"div",[["class","card-body"]],null,null,null,null,null)),(l()(),e.sb(25,0,null,null,1,"bd2-measurement-desc-view",[],null,null,null,ll.b,ll.a)),e.rb(26,114688,null,0,nl.a,[],{model:[0,"model"]},null)],(function(l,n){var u=n.component;l(n,8,0,u.assay.generalDesc),l(n,14,0,u.assay.contributionDesc),l(n,20,0,u.assay),l(n,26,0,u.assay.experimentalDetails.measurementDesc)}),null)}function rl(l){return e.Ob(0,[(l()(),e.hb(16777216,null,null,1,null,il)),e.rb(1,16384,null,0,s.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null)],(function(l,n){l(n,1,0,n.component.assay)}),null)}var ol=e.ob("ng-component",el,(function(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,1,"ng-component",[],null,null,null,rl,tl)),e.rb(1,245760,null,0,el,[D.a],null,null)],(function(l,n){l(n,1,0)}),null)}),{},{},[]),sl=u("wbka"),al=u("YJ2U"),cl=u("sj70"),bl=u("MhKU"),fl=u("q9OF"),dl=u("W3Xw"),hl=u("7+nn"),pl=u("Je4T"),ml=u("oFzb"),vl=u("XvzH"),gl=u("s7LF"),kl=u("qDIc"),yl=function(l){function n(l,u){var e;return _classCallCheck(this,n),(e=_possibleConstructorReturn(this,_getPrototypeOf(n).call(this,u))).route=l,e.blocked=!1,e.activeGeneralDescForm=!1,e.activeContributionDescForm=!1,e.activeSimpleBioDescForm=!1,e.activeMeasurementDescForm=!1,e.titlePart=" Edit",e.validator=kl.a.INSTANCE,e}return _inherits(n,l),_createClass(n,[{key:"ngOnInit",value:function(){var l=this;_get(_getPrototypeOf(n.prototype),"ngOnInit",this).call(this),this.route.fragment.subscribe((function(n){l.requestedSection=n,l.focusOnSection(n)}))}},{key:"ngAfterViewInit",value:function(){this.focusOnSection(this.requestedSection)}},{key:"focusOnSection",value:function(l){if(l){var n=document.getElementById(l);n&&n.scrollIntoView(),"MeasurementSection"===l&&(this.activeMeasurementDescForm=!0)}}},{key:"saveEdits",value:function(l){var n=this;this.assay&&l&&this.triggerValidation()&&(this.blocked=!0,this.experimentService.save(this.assay).then((function(l){return n.feedback.success('Experiment: "'+l.name+'" updated.'),l})).then((function(l){return n.currentExperiment.push(l),l})).then((function(u){n.blocked=!1,n.hideEdits(l)})).catch((function(l){n.blocked=!1,n.feedback.error(l)})))}},{key:"hideEdits",value:function(l){this.activeGeneralDescForm=!1,this.activeContributionDescForm=!1,this.activeSimpleBioDescForm=!1,this.activeMeasurementDescForm=!1,this.triggerValidation()}},{key:"cancel",value:function(){this.clearErrors(),this.router.navigate(["/experiment",this.assay.id])}},{key:"updateModel",value:function(l){this._orgModel=l,this.assay=l?l.clone():null,this.setTitle()}}]),n}(ul.a),Ol=e.qb({encapsulation:2,styles:[],data:{}});function Cl(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,1,"li",[],null,null,null,null,null)),(l()(),e.Mb(1,null,["",""]))],null,(function(l,n){l(n,1,0,n.context.$implicit)}))}function Il(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,3,"div",[["class","alert alert-danger"]],null,null,null,null,null)),(l()(),e.sb(1,0,null,null,2,"ul",[],null,null,null,null,null)),(l()(),e.hb(16777216,null,null,1,null,Cl)),e.rb(3,278528,null,0,s.l,[e.O,e.L,e.r],{ngForOf:[0,"ngForOf"]},null)],(function(l,n){l(n,3,0,n.component.errors)}),null)}function Ml(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,1,"bd2-general-desc-form",[],null,[[null,"onAccepted"],[null,"onCancelled"]],(function(l,n,u){var e=!0,t=l.component;return"onAccepted"===n&&(e=!1!==t.saveEdits(u)&&e),"onCancelled"===n&&(e=!1!==t.hideEdits(u)&&e),e}),sl.b,sl.a)),e.rb(1,49152,null,0,al.a,[],{blocked:[0,"blocked"],model:[1,"model"]},{onAccepted:"onAccepted",onCancelled:"onCancelled"})],(function(l,n){var u=n.component;l(n,1,0,u.blocked,u.assay.generalDesc)}),null)}function Ll(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,1,"bd2-general-desc-view",[],null,null,null,G.b,G.a)),e.rb(1,49152,null,0,$.a,[],{model:[0,"model"]},null)],(function(l,n){l(n,1,0,n.component.assay.generalDesc)}),null)}function El(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,3,"div",[],null,null,null,null,null)),(l()(),e.sb(1,0,null,null,0,"hr",[],null,null,null,null,null)),(l()(),e.sb(2,0,null,null,1,"button",[["class","btn btn-primary"],["type","button"]],[[8,"disabled",0]],[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=0!=(l.component.activeGeneralDescForm=!0)&&e),e}),null,null)),(l()(),e.Mb(-1,null,["Modify "]))],null,(function(l,n){l(n,2,0,n.component.activeGeneralDescForm)}))}function xl(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,1,"bd2-contr-desc-form",[],null,[[null,"onAccepted"],[null,"onCancelled"]],(function(l,n,u){var e=!0,t=l.component;return"onAccepted"===n&&(e=!1!==t.saveEdits(u)&&e),"onCancelled"===n&&(e=!1!==t.hideEdits(u)&&e),e}),cl.b,cl.a)),e.rb(1,49152,null,0,bl.a,[],{blocked:[0,"blocked"],model:[1,"model"]},{onAccepted:"onAccepted",onCancelled:"onCancelled"})],(function(l,n){var u=n.component;l(n,1,0,u.blocked,u.assay.contributionDesc)}),null)}function Dl(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,1,"bd2-contr-desc-view",[],null,null,null,Y.b,Y.a)),e.rb(1,49152,null,0,X.a,[],{model:[0,"model"]},null)],(function(l,n){l(n,1,0,n.component.assay.contributionDesc)}),null)}function Al(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,3,"div",[],null,null,null,null,null)),(l()(),e.sb(1,0,null,null,0,"hr",[],null,null,null,null,null)),(l()(),e.sb(2,0,null,null,1,"button",[["class","btn btn-primary"],["type","button"]],[[8,"disabled",0]],[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=0!=(l.component.activeContributionDescForm=!0)&&e),e}),null,null)),(l()(),e.Mb(-1,null,["Modify "]))],null,(function(l,n){l(n,2,0,n.component.activeContributionDescForm)}))}function Fl(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,1,"bd2-simple-bio-desc-form",[],null,[[null,"onAccepted"],[null,"onCancelled"]],(function(l,n,u){var e=!0,t=l.component;return"onAccepted"===n&&(e=!1!==t.saveEdits(u)&&e),"onCancelled"===n&&(e=!1!==t.hideEdits(u)&&e),e}),fl.b,fl.a)),e.rb(1,114688,null,0,dl.a,[hl.a],{blocked:[0,"blocked"],model:[1,"model"]},{onAccepted:"onAccepted",onCancelled:"onCancelled"})],(function(l,n){var u=n.component;l(n,1,0,u.blocked,u.assay)}),null)}function _l(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,1,"bd2-simple-bio-desc-view",[],null,null,null,Z.b,Z.a)),e.rb(1,49152,null,0,Q.a,[],{model:[0,"model"]},null)],(function(l,n){l(n,1,0,n.component.assay)}),null)}function wl(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,3,"div",[],null,null,null,null,null)),(l()(),e.sb(1,0,null,null,0,"hr",[],null,null,null,null,null)),(l()(),e.sb(2,0,null,null,1,"button",[["class","btn btn-primary"],["type","button"]],[[8,"disabled",0]],[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=0!=(l.component.activeSimpleBioDescForm=!0)&&e),e}),null,null)),(l()(),e.Mb(-1,null,["Modify "]))],null,(function(l,n){l(n,2,0,n.component.activeSimpleBioDescForm)}))}function Sl(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,1,"bd2-measurement-desc-rform",[],null,[[null,"onAccepted"],[null,"onCancelled"]],(function(l,n,u){var e=!0,t=l.component;return"onAccepted"===n&&(e=!1!==t.saveEdits(u)&&e),"onCancelled"===n&&(e=!1!==t.hideEdits(u)&&e),e}),pl.b,pl.a)),e.rb(1,114688,null,0,ml.a,[vl.a,S.a,gl.f],{blocked:[0,"blocked"],model:[1,"model"]},{onAccepted:"onAccepted",onCancelled:"onCancelled"})],(function(l,n){var u=n.component;l(n,1,0,u.blocked,u.assay.experimentalDetails.measurementDesc)}),null)}function Tl(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,1,"bd2-measurement-desc-view",[],null,null,null,ll.b,ll.a)),e.rb(1,114688,null,0,nl.a,[],{model:[0,"model"]},null)],(function(l,n){l(n,1,0,n.component.assay.experimentalDetails.measurementDesc)}),null)}function Pl(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,3,"div",[],null,null,null,null,null)),(l()(),e.sb(1,0,null,null,0,"hr",[],null,null,null,null,null)),(l()(),e.sb(2,0,null,null,1,"button",[["class","btn btn-primary"],["type","button"]],[[8,"disabled",0]],[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=0!=(l.component.activeMeasurementDescForm=!0)&&e),e}),null,null)),(l()(),e.Mb(-1,null,["Modify "]))],null,(function(l,n){l(n,2,0,n.component.activeMeasurementDescForm)}))}function Kl(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,1,"li",[],null,null,null,null,null)),(l()(),e.Mb(1,null,["",""]))],null,(function(l,n){l(n,1,0,n.context.$implicit)}))}function jl(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,3,"div",[["class","alert alert-danger"]],null,null,null,null,null)),(l()(),e.sb(1,0,null,null,2,"ul",[],null,null,null,null,null)),(l()(),e.hb(16777216,null,null,1,null,Kl)),e.rb(3,278528,null,0,s.l,[e.O,e.L,e.r],{ngForOf:[0,"ngForOf"]},null)],(function(l,n){l(n,3,0,n.component.errors)}),null)}function Rl(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,46,"div",[],null,null,null,null,null)),(l()(),e.sb(1,0,null,null,1,"h3",[],null,null,null,null,null)),(l()(),e.Mb(-1,null,["Modify experiment description"])),(l()(),e.hb(16777216,null,null,1,null,Il)),e.rb(4,16384,null,0,s.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.sb(5,0,null,null,9,"div",[["class","card mb-2"]],null,null,null,null,null)),(l()(),e.sb(6,0,null,null,1,"div",[["class","card-header"]],null,null,null,null,null)),(l()(),e.Mb(-1,null,["General description"])),(l()(),e.sb(8,0,null,null,6,"div",[["class","card-body"]],null,null,null,null,null)),(l()(),e.hb(16777216,null,null,1,null,Ml)),e.rb(10,16384,null,0,s.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.hb(16777216,null,null,1,null,Ll)),e.rb(12,16384,null,0,s.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.hb(16777216,null,null,1,null,El)),e.rb(14,16384,null,0,s.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.sb(15,0,null,null,9,"div",[["class","card mb-2"]],null,null,null,null,null)),(l()(),e.sb(16,0,null,null,1,"div",[["class","card-header"]],null,null,null,null,null)),(l()(),e.Mb(-1,null,["Contributions"])),(l()(),e.sb(18,0,null,null,6,"div",[["class","card-body"]],null,null,null,null,null)),(l()(),e.hb(16777216,null,null,1,null,xl)),e.rb(20,16384,null,0,s.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.hb(16777216,null,null,1,null,Dl)),e.rb(22,16384,null,0,s.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.hb(16777216,null,null,1,null,Al)),e.rb(24,16384,null,0,s.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.sb(25,0,null,null,9,"div",[["class","card mb-2"]],null,null,null,null,null)),(l()(),e.sb(26,0,null,null,1,"div",[["class","card-header"]],null,null,null,null,null)),(l()(),e.Mb(-1,null,["Biological details"])),(l()(),e.sb(28,0,null,null,6,"div",[["class","card-body"]],null,null,null,null,null)),(l()(),e.hb(16777216,null,null,1,null,Fl)),e.rb(30,16384,null,0,s.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.hb(16777216,null,null,1,null,_l)),e.rb(32,16384,null,0,s.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.hb(16777216,null,null,1,null,wl)),e.rb(34,16384,null,0,s.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.sb(35,0,null,null,9,"div",[["class","card mb-2"],["id","MeasurementSection"]],null,null,null,null,null)),(l()(),e.sb(36,0,null,null,1,"div",[["class","card-header"]],null,null,null,null,null)),(l()(),e.Mb(-1,null,["Measurement details"])),(l()(),e.sb(38,0,null,null,6,"div",[["class","card-body"]],null,null,null,null,null)),(l()(),e.hb(16777216,null,null,1,null,Sl)),e.rb(40,16384,null,0,s.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.hb(16777216,null,null,1,null,Tl)),e.rb(42,16384,null,0,s.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.hb(16777216,null,null,1,null,Pl)),e.rb(44,16384,null,0,s.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.hb(16777216,null,null,1,null,jl)),e.rb(46,16384,null,0,s.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null)],(function(l,n){var u=n.component;l(n,4,0,u.errors),l(n,10,0,u.activeGeneralDescForm),l(n,12,0,!u.activeGeneralDescForm),l(n,14,0,!u.activeGeneralDescForm),l(n,20,0,u.activeContributionDescForm),l(n,22,0,!u.activeContributionDescForm),l(n,24,0,!u.activeContributionDescForm),l(n,30,0,u.activeSimpleBioDescForm),l(n,32,0,!u.activeSimpleBioDescForm),l(n,34,0,!u.activeSimpleBioDescForm),l(n,40,0,u.activeMeasurementDescForm),l(n,42,0,!u.activeMeasurementDescForm),l(n,44,0,!u.activeMeasurementDescForm),l(n,46,0,u.errors)}),null)}function ql(l){return e.Ob(0,[(l()(),e.hb(16777216,null,null,1,null,Rl)),e.rb(1,16384,null,0,s.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null)],(function(l,n){l(n,1,0,n.component.assay)}),null)}var zl=e.ob("ng-component",yl,(function(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,1,"ng-component",[],null,null,null,ql,Ol)),e.rb(1,4440064,null,0,yl,[m.a,D.a],null,null)],(function(l,n){l(n,1,0)}),null)}),{},{},[]),Nl=u("1A98"),Wl=u("vLYz"),Bl=function(){var l=function(){function l(n){_classCallCheck(this,l),this.name=n}return _createClass(l,[{key:"equals",value:function(l){return this.name===l.name}},{key:"toJSON",value:function(){return this.name}}],[{key:"deserialize",value:function(n){if(null==n)return null;var u=l.valuesMap.get(n);if(u)return u;var e=+n;if(e<0||e>=l.values.length||Number.isNaN(e))throw new RangeError("Uknown AssetType "+n);return l.values[e]}},{key:"initValuesMap",value:function(){var n=new Map;return l.values.forEach((function(l){return n.set(l.name,l)})),n}}]),l}();return l.NONE=new l("NONE"),l.FILE=new l("FILE"),l.MEDIA=new l("MEDIA"),l.DATA=new l("DATA"),l.TS_DATA=new l("TS_DATA"),l.values=[l.NONE,l.FILE,l.MEDIA,l.DATA,l.TS_DATA],l.valuesMap=l.initValuesMap(),l}(),Hl=u("B9cw"),Ul=function(){function l(){_classCallCheck(this,l)}return _createClass(l,null,[{key:"deserialize",value:function(l){return l.created=Hl.a.deserialize(l.created),l}}]),l}(),Jl=function(){function l(){_classCallCheck(this,l),this.assetType=Bl.NONE,this.versions=[]}return _createClass(l,[{key:"setAll",value:function(l){this.id=l.id,this.originalName=l.originalName,this.assetType=l.assetType,this.url=l.url,this.versions=l.versions}},{key:"last",get:function(){return this.versions[0]}}],[{key:"deserialize",value:function(n){var u=new l;return u.id=n.id,u.originalName=n.originalName,u.url=n.url,u.assetType=Bl.deserialize(n.assetType),n.versions&&(u.versions=n.versions.map((function(l){return Ul.deserialize(l)}))),u}}]),l}(),Vl=function(){function l(n){_classCallCheck(this,l),this.analytics=n,this.canEdit=!0,this.showVersions=!1,this.edit=!1,this.model=this.fakeFileAsset()}return _createClass(l,[{key:"ngOnInit",value:function(){}},{key:"fakeFileAsset",value:function(){var l=JSON.parse('{\n      "id" : 2,\n      "originalName" : "f2",\n      "assetType" : "TS_DATA",\n      "versions" : [ {\n        "versionId" : 2,\n        "localFile" : "cos2",\n        "originalName" : "f2",\n        "contentType" : "txt",\n        "description" : "Some description",\n        "created" : [ 2016, 12, 8 ]\n      }, {\n        "versionId" : 1,\n        "localFile" : "cos2",\n        "originalName" : "f2",\n        "contentType" : "txt",\n        "description" : null,\n        "created" : [ 2016, 12, 8 ]\n      } ]\n    }');return Jl.deserialize(l)}},{key:"recordDownload",value:function(){this.analytics.fileDownload(this.parentId,this.file.id)}},{key:"model",set:function(l){this.file=l}}]),l}(),Gl=e.qb({encapsulation:2,styles:[],data:{}});function $l(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,1,"div",[],null,null,null,null,null)),(l()(),e.Mb(1,null,["",""]))],null,(function(l,n){l(n,1,0,n.component.file.last.description)}))}function Yl(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,7,"li",[],null,null,null,null,null)),(l()(),e.Mb(1,null,[" Version ",". "," "])),e.Ib(2,2),(l()(),e.sb(3,0,null,null,2,"strong",[],null,null,null,null,null)),(l()(),e.sb(4,0,null,null,1,"a",[],[[8,"href",4],[8,"download",0]],[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.recordDownload()&&e),e}),null,null)),(l()(),e.Mb(5,null,["",""])),(l()(),e.sb(6,0,null,null,0,"br",[],null,null,null,null,null)),(l()(),e.Mb(7,null,[""," "]))],null,(function(l,n){var u=n.context.$implicit.versionId,t=e.Nb(n,1,1,l(n,2,0,e.Eb(n.parent.parent.parent,0),n.context.$implicit.created.date,"shortDate"));l(n,1,0,u,t),l(n,4,0,e.wb(1,"",n.context.$implicit.url,""),e.wb(1,"",n.context.$implicit.originalName,"")),l(n,5,0,n.context.$implicit.originalName),l(n,7,0,n.context.$implicit.description)}))}function Xl(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,3,"div",[],null,null,null,null,null)),(l()(),e.sb(1,0,null,null,2,"ul",[["class","list-unstyled"]],null,null,null,null,null)),(l()(),e.hb(16777216,null,null,1,null,Yl)),e.rb(3,278528,null,0,s.l,[e.O,e.L,e.r],{ngForOf:[0,"ngForOf"]},null)],(function(l,n){l(n,3,0,n.component.file.versions)}),null)}function Zl(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,12,"div",[],null,null,null,null,null)),(l()(),e.sb(1,0,null,null,4,"div",[["class","float-right"]],null,null,null,null,null)),(l()(),e.Mb(2,null,[" "," versions "])),(l()(),e.sb(3,0,null,null,2,"a",[["aria-label","expand"],["role","button"]],null,[[null,"click"]],(function(l,n,u){var e=!0,t=l.component;return"click"===n&&(e=0!=(t.showVersions=!t.showVersions)&&e),e}),null,null)),(l()(),e.sb(4,0,null,null,1,"i",[["class","material-icons bd-icon"]],null,null,null,null,null)),(l()(),e.Mb(-1,null,["expand_more"])),(l()(),e.sb(6,0,null,null,2,"h5",[],null,null,null,null,null)),(l()(),e.sb(7,0,null,null,1,"a",[],[[8,"href",4],[8,"download",0]],[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.recordDownload()&&e),e}),null,null)),(l()(),e.Mb(8,null,["",""])),(l()(),e.hb(16777216,null,null,1,null,$l)),e.rb(10,16384,null,0,s.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.hb(16777216,null,null,1,null,Xl)),e.rb(12,16384,null,0,s.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null)],(function(l,n){var u=n.component;l(n,10,0,u.file.last.description),l(n,12,0,u.showVersions)}),(function(l,n){var u=n.component;l(n,2,0,u.file.versions.length),l(n,7,0,e.wb(1,"",u.file.url,""),e.wb(1,"",u.file.last.originalName,"")),l(n,8,0,u.file.last.originalName)}))}function Ql(l){return e.Ob(0,[e.Gb(0,s.e,[e.t]),(l()(),e.hb(16777216,null,null,1,null,Zl)),e.rb(2,16384,null,0,s.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null)],(function(l,n){var u=n.component;l(n,2,0,u.file&&u.file.last)}),null)}var ln,nn=function(l){function n(l,u){var e;return _classCallCheck(this,n),(e=_possibleConstructorReturn(this,_getPrototypeOf(n).call(this,u))).attachmentsService=l,e.attachments=[],e.tsData=[],e.blocked=!1,e.titlePart=" Files",e}return _inherits(n,l),_createClass(n,[{key:"updateModel",value:function(l){_get(_getPrototypeOf(n.prototype),"updateModel",this).call(this,l),this.refreshAttachments()}},{key:"refreshAttachments",value:function(){var l=this;this.attachmentsService.getFiles(this.assay).then((function(n){return l.setFiles(n)})).catch((function(n){l.feedback.error(n)}))}},{key:"setFiles",value:function(l){this.tsData=l.filter((function(l){return l.assetType.equals(Bl.TS_DATA)})),this.attachments=l.filter((function(l){return!l.assetType.equals(Bl.TS_DATA)}))}},{key:"upload",value:function(l){var n=this;console.log("Uploading "+l.length),l&&0!==l.length&&(this.blocked=!0,this.attachmentsService.upload(this.assay,l).then((function(l){n.uploadWidget.reset(),n.blocked=!1,n.feedback.success(l.length+" files uploaded")})).then((function(){return n.refreshModel()})).catch((function(l){n.blocked=!1,n.feedback.error(l)})))}}]),n}(ul.a),un=u("UsWK"),en=((ln=function(){function l(n){_classCallCheck(this,l),this.BD2REST=n}return _createClass(l,[{key:"upload",value:function(l,n){for(var u=new FormData,e=0;e<n.length;e++)u.append("file",n[e],n[e].name);return this.BD2REST.expFileUpload(l.id,u).then((function(l){return l.data}))}},{key:"getFiles",value:function(l){var n=this;return this.BD2REST.files(l.id).then((function(l){return l.data})).then((function(l){return n.json2AssetsList(l)})).then((function(u){return n.fillURLs(u,l)}))}},{key:"fillURLs",value:function(l,n){var u=this;return l.map((function(l){return u.fillURL(l,n)}))}},{key:"fillURL",value:function(l,n){var u=this.BD2REST.fileURL(n.id,l.id);return l.url=u,l.versions.forEach((function(l){l.url=u+"/"+l.versionId})),l}},{key:"json2AssetsList",value:function(l){return l.map((function(l){return Jl.deserialize(l)}))}}]),l}()).ngInjectableDef=e.Sb({factory:function(){return new ln(e.Tb(un.a))},token:ln,providedIn:"root"}),ln),tn=e.qb({encapsulation:0,styles:[[""]],data:{}});function rn(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,3,"div",[],null,null,null,null,null)),(l()(),e.sb(1,0,null,null,1,"bd2-file-upload-widget",[],null,[[null,"uploadFiles"]],(function(l,n,u){var e=!0;return"uploadFiles"===n&&(e=!1!==l.component.upload(u)&&e),e}),Nl.b,Nl.a)),e.rb(2,114688,[[1,4],["uploadWidget",4]],0,Wl.a,[],{blocked:[0,"blocked"],autoReset:[1,"autoReset"]},{uploadFiles:"uploadFiles"}),(l()(),e.sb(3,0,null,null,0,"hr",[],null,null,null,null,null))],(function(l,n){l(n,2,0,n.component.blocked,!1)}),null)}function on(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,1,"bd2-file-asset-view",[],null,null,null,Ql,Gl)),e.rb(1,114688,null,0,Vl,[q.a],{parentId:[0,"parentId"],model:[1,"model"]},null)],(function(l,n){l(n,1,0,n.component.assay.id,n.context.$implicit)}),null)}function sn(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,1,"div",[["class","alert alert-info"],["role","alert"],["type","info"]],null,null,null,null,null)),(l()(),e.Mb(-1,null,[' Use "Replace data" to change timeseries files. ']))],null,null)}function an(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,7,"div",[],null,null,null,null,null)),(l()(),e.sb(1,0,null,null,1,"h4",[],null,null,null,null,null)),(l()(),e.Mb(-1,null,["Timeseries files"])),(l()(),e.hb(16777216,null,null,1,null,on)),e.rb(4,278528,null,0,s.l,[e.O,e.L,e.r],{ngForOf:[0,"ngForOf"]},null),(l()(),e.hb(16777216,null,null,1,null,sn)),e.rb(6,16384,null,0,s.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.sb(7,0,null,null,0,"hr",[],null,null,null,null,null))],(function(l,n){var u=n.component;l(n,4,0,u.tsData),l(n,6,0,u.assay.security.canWrite)}),null)}function cn(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,1,"div",[["class","alert alert-info"],["role","alert"],["type","info"]],null,null,null,null,null)),(l()(),e.Mb(-1,null,[' Use "Import data" to add timeseries files. ']))],null,null)}function bn(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,1,"bd2-file-asset-view",[],null,null,null,Ql,Gl)),e.rb(1,114688,null,0,Vl,[q.a],{parentId:[0,"parentId"],model:[1,"model"]},null)],(function(l,n){l(n,1,0,n.component.assay.id,n.context.$implicit)}),null)}function fn(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,4,"div",[],null,null,null,null,null)),(l()(),e.sb(1,0,null,null,1,"h4",[],null,null,null,null,null)),(l()(),e.Mb(-1,null,["Attachments"])),(l()(),e.hb(16777216,null,null,1,null,bn)),e.rb(4,278528,null,0,s.l,[e.O,e.L,e.r],{ngForOf:[0,"ngForOf"]},null)],(function(l,n){l(n,4,0,n.component.attachments)}),null)}function dn(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,1,"div",[["class","alert alert-info"],["role","alert"],["type","info"]],null,null,null,null,null)),(l()(),e.Mb(-1,null,[" Drag and upload files using the upload area in order to update the attachments. "]))],null,null)}function hn(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,10,"div",[],null,null,null,null,null)),(l()(),e.hb(16777216,null,null,1,null,rn)),e.rb(2,16384,null,0,s.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.hb(16777216,null,null,1,null,an)),e.rb(4,16384,null,0,s.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.hb(16777216,null,null,1,null,cn)),e.rb(6,16384,null,0,s.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.hb(16777216,null,null,1,null,fn)),e.rb(8,16384,null,0,s.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.hb(16777216,null,null,1,null,dn)),e.rb(10,16384,null,0,s.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null)],(function(l,n){var u=n.component;l(n,2,0,u.assay.security.canWrite),l(n,4,0,u.tsData&&u.tsData.length>0),l(n,6,0,!u.tsData||0===u.tsData.length),l(n,8,0,u.attachments&&u.attachments.length>0),l(n,10,0,u.assay.security.canWrite)}),null)}function pn(l){return e.Ob(0,[e.Kb(671088640,1,{uploadWidget:0}),(l()(),e.sb(1,0,null,null,1,"h3",[],null,null,null,null,null)),(l()(),e.Mb(-1,null,["Attached files"])),(l()(),e.sb(3,0,null,null,0,"hr",[],null,null,null,null,null)),(l()(),e.hb(16777216,null,null,1,null,hn)),e.rb(5,16384,null,0,s.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null)],(function(l,n){l(n,5,0,n.component.assay)}),null)}var mn=e.ob("ng-component",nn,(function(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,1,"ng-component",[],null,null,null,pn,tn)),e.rb(1,245760,null,0,nn,[en,D.a],null,null)],(function(l,n){l(n,1,0)}),null)}),{},{},[]),vn=function(l){function n(l){var u;return _classCallCheck(this,n),(u=_possibleConstructorReturn(this,_getPrototypeOf(n).call(this,l))).licences=["CC_BY"],u}return _inherits(n,l),_createClass(n,[{key:"ngOnInit",value:function(){_get(_getPrototypeOf(n.prototype),"ngOnInit",this).call(this),this.licence=this.licences[0]}},{key:"publish",value:function(){var l=this;this.terms&&this.licence&&this.experimentService.publish(this.assay,this.licence).then((function(n){return l.feedback.success('Experiment: "'+n.name+'" published.'),n})).then((function(n){return l.currentExperiment.push(n),n})).then((function(n){l.goToExpHome(n.id)})).catch((function(n){l.feedback.error(n)}))}}]),n}(ul.a),gn=e.qb({encapsulation:2,styles:[],data:{}});function kn(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,5,"div",[],null,null,null,null,null)),(l()(),e.sb(1,0,null,null,4,"div",[["class","alert alert-info"],["role","alert"],["type","info"]],null,null,null,null,null)),(l()(),e.Mb(-1,null,[" Experiment is already publicly available under "])),(l()(),e.sb(3,0,null,null,1,"strong",[],null,null,null,null,null)),(l()(),e.Mb(4,null,["",""])),(l()(),e.Mb(-1,null,[" licence. "]))],null,(function(l,n){l(n,4,0,n.component.assay.features.licence)}))}function yn(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,3,"option",[],null,null,null,null,null)),e.rb(1,147456,null,0,gl.v,[e.k,e.D,[2,gl.B]],{value:[0,"value"]},null),e.rb(2,147456,null,0,gl.G,[e.k,e.D,[8,null]],{value:[0,"value"]},null),(l()(),e.Mb(3,null,[""," "]))],(function(l,n){l(n,1,0,n.context.$implicit),l(n,2,0,n.context.$implicit)}),(function(l,n){l(n,3,0,n.context.$implicit)}))}function On(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,40,"div",[],null,null,null,null,null)),(l()(),e.sb(1,0,null,null,8,"div",[["class","alert alert-danger"],["role","alert"],["type","danger"]],null,null,null,null,null)),(l()(),e.Mb(-1,null,[" You are about to make the data public. Once they are public they cannot be made private again. "])),(l()(),e.sb(3,0,null,null,6,"ul",[],null,null,null,null,null)),(l()(),e.sb(4,0,null,null,1,"li",[],null,null,null,null,null)),(l()(),e.Mb(-1,null,["make sure you know what you are doing"])),(l()(),e.sb(6,0,null,null,1,"li",[],null,null,null,null,null)),(l()(),e.Mb(-1,null,["make sure all contributors agree to public sharing"])),(l()(),e.sb(8,0,null,null,1,"li",[],null,null,null,null,null)),(l()(),e.Mb(-1,null,["double check the description is correct, not all changes will be possible after the publishing"])),(l()(),e.sb(10,0,null,null,30,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],(function(l,n,u){var t=!0;return"submit"===n&&(t=!1!==e.Eb(l,12).onSubmit(u)&&t),"reset"===n&&(t=!1!==e.Eb(l,12).onReset()&&t),t}),null,null)),e.rb(11,16384,null,0,gl.H,[],null,null),e.rb(12,4210688,[["publishForm",4]],0,gl.t,[[8,null],[8,null]],null,null),e.Jb(2048,null,gl.d,null,[gl.t]),e.rb(14,16384,null,0,gl.s,[[4,gl.d]],null,null),(l()(),e.sb(15,0,null,null,12,"div",[["class","form-group"]],null,null,null,null,null)),(l()(),e.sb(16,0,null,null,1,"label",[["for","licence"]],null,null,null,null,null)),(l()(),e.Mb(-1,null,["Licence"])),(l()(),e.sb(18,0,null,null,9,"select",[["class","form-control"],["id","licence"],["name","licence"],["placeholder","Select licence"],["required",""]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],(function(l,n,u){var t=!0,i=l.component;return"change"===n&&(t=!1!==e.Eb(l,19).onChange(u.target.value)&&t),"blur"===n&&(t=!1!==e.Eb(l,19).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.licence=u)&&t),t}),null,null)),e.rb(19,16384,null,0,gl.B,[e.D,e.k],null,null),e.rb(20,16384,null,0,gl.A,[],{required:[0,"required"]},null),e.Jb(1024,null,gl.o,(function(l){return[l]}),[gl.A]),e.Jb(1024,null,gl.p,(function(l){return[l]}),[gl.B]),e.rb(23,671744,[["licenceF",4]],0,gl.u,[[2,gl.d],[6,gl.o],[8,null],[6,gl.p]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),e.Jb(2048,null,gl.q,null,[gl.u]),e.rb(25,16384,null,0,gl.r,[[4,gl.q]],null,null),(l()(),e.hb(16777216,null,null,1,null,yn)),e.rb(27,278528,null,0,s.l,[e.O,e.L,e.r],{ngForOf:[0,"ngForOf"]},null),(l()(),e.sb(28,0,null,null,10,"div",[["class","form-group"]],null,null,null,null,null)),(l()(),e.sb(29,0,null,null,9,"label",[],null,null,null,null,null)),(l()(),e.sb(30,0,null,null,7,"input",[["id","terms"],["name","fTerms"],["required",""],["type","checkbox"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],(function(l,n,u){var t=!0,i=l.component;return"change"===n&&(t=!1!==e.Eb(l,31).onChange(u.target.checked)&&t),"blur"===n&&(t=!1!==e.Eb(l,31).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.terms=u)&&t),t}),null,null)),e.rb(31,16384,null,0,gl.b,[e.D,e.k],null,null),e.rb(32,16384,null,0,gl.c,[],{required:[0,"required"]},null),e.Jb(1024,null,gl.o,(function(l){return[l]}),[gl.c]),e.Jb(1024,null,gl.p,(function(l){return[l]}),[gl.b]),e.rb(35,671744,[["fTerms",4]],0,gl.u,[[2,gl.d],[6,gl.o],[8,null],[6,gl.p]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),e.Jb(2048,null,gl.q,null,[gl.u]),e.rb(37,16384,null,0,gl.r,[[4,gl.q]],null,null),(l()(),e.Mb(-1,null,[" I understand that I cannot undo this operation "])),(l()(),e.sb(39,0,null,null,1,"button",[["class","btn btn-primary"],["type","submit"]],[[8,"disabled",0]],[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.publish()&&e),e}),null,null)),(l()(),e.Mb(-1,null,[" Publish "]))],(function(l,n){var u=n.component;l(n,20,0,""),l(n,23,0,"licence",u.licence),l(n,27,0,u.licences),l(n,32,0,""),l(n,35,0,"fTerms",u.terms)}),(function(l,n){l(n,10,0,e.Eb(n,14).ngClassUntouched,e.Eb(n,14).ngClassTouched,e.Eb(n,14).ngClassPristine,e.Eb(n,14).ngClassDirty,e.Eb(n,14).ngClassValid,e.Eb(n,14).ngClassInvalid,e.Eb(n,14).ngClassPending),l(n,18,0,e.Eb(n,20).required?"":null,e.Eb(n,25).ngClassUntouched,e.Eb(n,25).ngClassTouched,e.Eb(n,25).ngClassPristine,e.Eb(n,25).ngClassDirty,e.Eb(n,25).ngClassValid,e.Eb(n,25).ngClassInvalid,e.Eb(n,25).ngClassPending),l(n,30,0,e.Eb(n,32).required?"":null,e.Eb(n,37).ngClassUntouched,e.Eb(n,37).ngClassTouched,e.Eb(n,37).ngClassPristine,e.Eb(n,37).ngClassDirty,e.Eb(n,37).ngClassValid,e.Eb(n,37).ngClassInvalid,e.Eb(n,37).ngClassPending),l(n,39,0,!e.Eb(n,12).form.valid)}))}function Cn(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,6,"div",[],null,null,null,null,null)),(l()(),e.sb(1,0,null,null,1,"h3",[],null,null,null,null,null)),(l()(),e.Mb(-1,null,["Publish experiment"])),(l()(),e.hb(16777216,null,null,1,null,kn)),e.rb(4,16384,null,0,s.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.hb(16777216,null,null,1,null,On)),e.rb(6,16384,null,0,s.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null)],(function(l,n){var u=n.component;l(n,4,0,u.assay.features.isOpenAccess),l(n,6,0,!u.assay.features.isOpenAccess)}),null)}function In(l){return e.Ob(0,[(l()(),e.hb(16777216,null,null,1,null,Cn)),e.rb(1,16384,null,0,s.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null)],(function(l,n){l(n,1,0,n.component.assay)}),null)}var Mn=e.ob("bd2-publish-form",vn,(function(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,1,"bd2-publish-form",[],null,null,null,In,gn)),e.rb(1,245760,null,0,vn,[D.a],null,null)],(function(l,n){l(n,1,0)}),null)}),{},{},[]),Ln=u("QQfA"),En=u("IP0z"),xn=u("s6ns"),Dn=u("POq0"),An=u("821u"),Fn=u("Xd0L"),_n=u("/HVE"),wn=u("JjoW"),Sn=u("/Co4"),Tn=u("cUpR"),Pn=u("Fwaw"),Kn=u("zMNK"),jn=u("hOhj"),Rn=u("5GAg"),qn=u("HsOI"),zn=u("oapL"),Nn=u("ZwOa"),Wn=u("kNGD"),Bn=u("Gi4r"),Hn=u("02hT"),Un=u("igqZ"),Jn=u("DkMi"),Vn=u("YiFe"),Gn=function l(){_classCallCheck(this,l)},$n=function l(){_classCallCheck(this,l)},Yn=function(){return Promise.all([u.e(2),u.e(18)]).then(u.bind(null,"cXDc")).then((function(l){return l.TsDataModuleNgFactory}))},Xn=function(){return Promise.all([u.e(2),u.e(5),u.e(0),u.e(15)]).then(u.bind(null,"/qf6")).then((function(l){return l.PPAModuleNgFactory}))},Zn=function(){return Promise.all([u.e(2),u.e(5),u.e(0),u.e(16)]).then(u.bind(null,"Sypl")).then((function(l){return l.RhythmicityModuleNgFactory}))},Qn=function l(){_classCallCheck(this,l)},lu=u("dvZr");u.d(n,"ExperimentModuleNgFactory",(function(){return nu}));var nu=e.pb(t,[],(function(l){return e.Bb([e.Cb(512,e.j,e.ab,[[8,[i.a,r.b,r.a,o.a,V,ol,zl,mn,Mn]],[3,e.j],e.w]),e.Cb(4608,s.o,s.n,[e.t,[2,s.E]]),e.Cb(4608,gl.E,gl.E,[]),e.Cb(4608,gl.f,gl.f,[]),e.Cb(4608,Ln.c,Ln.c,[Ln.i,Ln.e,e.j,Ln.h,Ln.f,e.q,e.y,s.d,En.b,[2,s.i]]),e.Cb(5120,Ln.j,Ln.k,[Ln.c]),e.Cb(5120,xn.c,xn.d,[Ln.c]),e.Cb(135680,xn.e,xn.e,[Ln.c,e.q,[2,s.i],[2,xn.b],xn.c,[3,xn.e],Ln.e]),e.Cb(4608,Dn.c,Dn.c,[]),e.Cb(4608,An.i,An.i,[]),e.Cb(5120,An.a,An.b,[Ln.c]),e.Cb(4608,Fn.c,Fn.y,[[2,Fn.h],_n.a]),e.Cb(4608,Fn.d,Fn.d,[]),e.Cb(5120,wn.a,wn.b,[Ln.c]),e.Cb(5120,Sn.b,Sn.c,[Ln.c]),e.Cb(1073742336,s.c,s.c,[]),e.Cb(1073742336,gl.D,gl.D,[]),e.Cb(1073742336,gl.l,gl.l,[]),e.Cb(1073742336,gl.z,gl.z,[]),e.Cb(1073742336,En.a,En.a,[]),e.Cb(1073742336,Fn.n,Fn.n,[[2,Fn.f],[2,Tn.f]]),e.Cb(1073742336,_n.b,_n.b,[]),e.Cb(1073742336,Fn.x,Fn.x,[]),e.Cb(1073742336,Pn.c,Pn.c,[]),e.Cb(1073742336,Kn.f,Kn.f,[]),e.Cb(1073742336,jn.c,jn.c,[]),e.Cb(1073742336,Ln.g,Ln.g,[]),e.Cb(1073742336,xn.k,xn.k,[]),e.Cb(1073742336,Dn.d,Dn.d,[]),e.Cb(1073742336,Rn.a,Rn.a,[]),e.Cb(1073742336,An.j,An.j,[]),e.Cb(1073742336,qn.e,qn.e,[]),e.Cb(1073742336,Fn.z,Fn.z,[]),e.Cb(1073742336,Fn.p,Fn.p,[]),e.Cb(1073742336,zn.c,zn.c,[]),e.Cb(1073742336,Nn.c,Nn.c,[]),e.Cb(1073742336,Wn.f,Wn.f,[]),e.Cb(1073742336,Bn.c,Bn.c,[]),e.Cb(1073742336,Hn.b,Hn.b,[]),e.Cb(1073742336,Un.e,Un.e,[]),e.Cb(1073742336,Fn.v,Fn.v,[]),e.Cb(1073742336,Fn.s,Fn.s,[]),e.Cb(1073742336,wn.d,wn.d,[]),e.Cb(1073742336,Sn.e,Sn.e,[]),e.Cb(1073742336,Jn.a,Jn.a,[]),e.Cb(1073742336,Vn.a,Vn.a,[]),e.Cb(1073742336,Gn,Gn,[]),e.Cb(1073742336,$n,$n,[]),e.Cb(1073742336,m.p,m.p,[[2,m.u],[2,m.l]]),e.Cb(1073742336,Qn,Qn,[]),e.Cb(1073742336,t,t,[]),e.Cb(256,Fn.h,"en-GB",[]),e.Cb(256,Fn.g,Fn.k,[]),e.Cb(256,Wn.a,{separatorKeyCodes:[lu.g]},[]),e.Cb(1024,m.j,(function(){return[[{path:":id",component:j,children:[{path:"",pathMatch:"full",component:el},{path:"edit",component:yl},{path:"file",component:nn},{path:"publish",component:vn},{path:"data",loadChildren:Yn},{path:"ppa",loadChildren:Xn},{path:"rhythmicity",loadChildren:Zn}]}]]}),[])])}))},vLYz:function(l,n,u){"use strict";u.d(n,"a",(function(){return i}));var e=u("8Y7J"),t=u("BOp5"),i=function(){function l(){_classCallCheck(this,l),this.activeColor="green",this.baseColor="#ccc",this.overlayColor="rgba(255,255,255,0.5)",this.blocked=!1,this.multiple=!0,this.noDuplicates=!0,this.autoReset=!1,this.sizeLimit=50,this.uploadFiles=new e.m,this.selectedFiles=new e.m,this.dragging=!1,this.loaded=!1,this.sizeError=!1,this.files=[]}return _createClass(l,[{key:"ngOnInit",value:function(){}},{key:"reset",value:function(){this.files=[],this.inputField&&this.inputField.nativeElement&&(this.inputField.nativeElement.value="")}},{key:"handleDragEnter",value:function(){this.dragging=!0}},{key:"handleDragLeave",value:function(){this.dragging=!1}},{key:"handleDrop",value:function(l){l.preventDefault(),this.dragging=!1,l.dataTransfer&&this.handleFileChange(l.dataTransfer.files)}},{key:"handleFileSelect",value:function(l){l.target&&this.handleFileChange(l.target.files)}},{key:"handleFileChange",value:function(l){var n=this.multiple?l.length:Math.min(1,l.length);this.multiple||(this.files=[]);for(var u=0;u<n;u++){var e=l[u];this.noDuplicates&&this.removeDuplicate(e),this.files.push(e)}this.checkSize(),this.selectedFiles.next(this.files)}},{key:"remove",value:function(l){Object(t.b)(l,this.files),this.checkSize()}},{key:"removeDuplicate",value:function(l){var n=this.files.find((function(n){return n.name===l.name}));this.remove(n)}},{key:"checkSize",value:function(){var l=0;this.files.map((function(l){return l.size})).forEach((function(n){return l+=n})),this.sizeError=(l/=1048576)>this.sizeLimit}},{key:"upload",value:function(){this.uploadFiles.next(this.files),this.autoReset&&this.reset()}}]),l}()},yYXI:function(l,n,u){"use strict";u.d(n,"a",(function(){return i}));var e=u("TPWj"),t=u("pLZG"),i=function(l){function n(l){var u;return _classCallCheck(this,n),(u=_possibleConstructorReturn(this,_getPrototypeOf(n).call(this))).serviceDependencies=l,u.experimentService=l.experimentService,u.currentExperiment=l.currentExperiment,u.feedback=l.feedback,u.router=l.router,u.titleSetter=l.titleSetter,u.titlePart="",u}return _inherits(n,l),_createClass(n,[{key:"ngOnInit",value:function(){this.subscribeToExperiment()}},{key:"ngOnDestroy",value:function(){this.unsubscribeFromExperiment()}},{key:"getModel",value:function(){return this.assay}},{key:"updateModel",value:function(l){this.assay=l,this.setTitle()}},{key:"setTitle",value:function(){this.titleSetter.setTitle("Exp "+this.assay.id+this.titlePart)}},{key:"subscribeToExperiment",value:function(){var l=this;this.expSubscription=this.currentExperiment.experiment().pipe(Object(t.a)((function(l){return!!l}))).subscribe((function(n){l.updateModel(n)}),(function(n){return l.feedback.error(n)}),(function(){return console.log(l.constructor.name+" expSubscription completed")}))}},{key:"refreshModel",value:function(){var l=this;return this.experimentService.getExperiment(this.assay.id).then((function(n){return l.currentExperiment.push(n),n}))}},{key:"unsubscribeFromExperiment",value:function(){this.expSubscription&&this.expSubscription.unsubscribe()}},{key:"expHomePath",value:function(l){return["/experiment",l=l||this.assay.id]}},{key:"goToExpHome",value:function(l){this.router.navigate(this.expHomePath(l))}},{key:"goToExpEdit",value:function(l,n){var u=this.expHomePath(l);u.push("edit"),n?this.router.navigate(u,{fragment:n}):this.router.navigate(u)}}]),n}(e.a)}}]);