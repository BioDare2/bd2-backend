(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"/qf6":function(n,l,t){"use strict";t.r(l);var e=t("8Y7J");class i{}var a=t("MdoF"),r=t("z5nN"),u=t("NcP4"),o=t("t68o"),s=t("pMnS"),c=t("b8ec"),d=t("nA4b"),h=t("s7LF"),f=t("SVse"),b=t("b1+6"),p=t("OIZN"),g=t("hwv8"),m=t("PDHu");let y=(()=>{class n{constructor(n,l){this._name=n,this._label=l}get name(){return this._name}get label(){return this._label}static get(l){return n.getValuesMap().get(l)}static getValuesMap(){return n.valuesMap||(n.valuesMap=n.initValuesMap()),n.valuesMap}static initValuesMap(){const l=new Map;return n.values.forEach(n=>l.set(n.name,n)),l}toJSON(){return this.name}}return n.NLLS=new n("NLLS","FFT NLLS"),n.MFourFit=new n("MFourFit","MFourFit"),n.MESA=new n("MESA","MESA"),n.EPR=new n("EPR","ER Periodogram"),n.EPR_ND=new n("EPR_ND","ER Periodogram (no DT)"),n.LSPR=new n("LSPR","LS Periodogram"),n.SR=new n("SR","Spectrum Resampling"),n.SR_LD=new n("SR_LD","Spectrum Resampling (lin DT)"),n.FAKE=new n("FAKE","Fake method"),n.values=[n.NLLS,n.MFourFit,n.MESA,n.EPR,n.EPR_ND,n.LSPR,n.SR,n.SR_LD,n.FAKE],n})();const v=[y.NLLS,y.MFourFit,y.MESA,y.EPR,y.LSPR,y.SR];class _{isValid(){return!(this.windowStart<0||this.windowEnd<0||this.periodMin<=0||this.periodMax<=0||this.periodMin>this.periodMax||this.windowEnd>0&&this.windowStart>=this.windowEnd||null==this.method||null==this.detrending)}}class x{static sameJob(n,l){return!(!n||!l)&&n.jobId===l.jobId&&n.parentId===l.parentId}}function w(n,l){switch(l){case"ByFit":case"f":return n.f;case"ByMethod":case"m":return n.m;case"ByFirstPeak":case"p":return n.p;case"ByAvgMax":case"a":return n.a;default:throw new Error("Unknown phase option: "+l)}}class D{static extractState(n){return n.failed?"F":n.ignored?" I":n.attention?"A":""}}function C(n,l,t){if("zero"===l&&"circ"===t)return n.ph2ZCir;if("zero"===l&&"abs"===t)return n.ph2Z;if("dw"===l&&"circ"===t)return n.ph2WCir;if("dw"===l&&"abs"===t)return n.ph2W;throw new Error("Unknown relative/unit combination: "+l+":"+t)}class k{}var M=t("Tl2h"),P=t("wcxA");class S extends P.a{constructor(n){super(n),this.methodOptions=v,this.ppaRequests=new e.m}buildMainForm(){return this.fb.group({displayParams:this.displayParamsForm,periodScale:this.fb.group({periodMin:[18,[h.C.required]],periodMax:[34,[h.C.required]]},{validator:n=>this.validPeriodScale(n.value)}),method:[y.NLLS.name,[h.C.required]]})}validPeriodScale(n){const l=n.periodMin,t=n.periodMax;return l<10?{validPeriodScale:"Period min must >= 10"}:t<10?{validPeriodScale:"Period max must >= 10"}:t>50?{validPeriodScale:"Period max must < 50"}:l>=t?{validPeriodScale:"Period min must be < max"}:null}analyse(){if(this.mainForm.invalid)return;const n=this.map2PPAReq(this.mainForm.value);n.isValid()&&this.ppaRequests.next(n)}map2PPAReq(n){const l=new _;return l.detrending=M.b.get(n.displayParams.detrending),l.method=y.get(n.method),l.periodMax=n.periodScale.periodMax,l.periodMin=n.periodScale.periodMin,l.windowEnd=n.displayParams.timeScale.timeEnd,l.windowStart=n.displayParams.timeScale.timeStart,l}}var T=e.pb({encapsulation:2,styles:[],data:{}});function I(n){return e.Nb(0,[(n()(),e.rb(0,0,null,null,3,"option",[],null,null,null,null,null)),e.qb(1,147456,null,0,h.v,[e.k,e.C,[2,h.B]],{value:[0,"value"]},null),e.qb(2,147456,null,0,h.G,[e.k,e.C,[8,null]],{value:[0,"value"]},null),(n()(),e.Lb(3,null,["",""]))],(function(n,l){n(l,1,0,l.context.$implicit.name),n(l,2,0,l.context.$implicit.name)}),(function(n,l){n(l,3,0,l.context.$implicit.label)}))}function A(n){return e.Nb(0,[(n()(),e.rb(0,0,null,null,3,"option",[],null,null,null,null,null)),e.qb(1,147456,null,0,h.v,[e.k,e.C,[2,h.B]],{value:[0,"value"]},null),e.qb(2,147456,null,0,h.G,[e.k,e.C,[8,null]],{value:[0,"value"]},null),(n()(),e.Lb(3,null,["",""]))],(function(n,l){n(l,1,0,l.context.$implicit.name),n(l,2,0,l.context.$implicit.name)}),(function(n,l){n(l,3,0,l.context.$implicit.label)}))}function q(n){return e.Nb(0,[e.Jb(402653184,1,{dataPaginator:0}),(n()(),e.rb(1,0,null,null,108,"form",[["class","form-horizontal"],["novalidate",""],["role","form"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],(function(n,l,t){var i=!0;return"submit"===l&&(i=!1!==e.Db(n,3).onSubmit(t)&&i),"reset"===l&&(i=!1!==e.Db(n,3).onReset()&&i),i}),null,null)),e.qb(2,16384,null,0,h.H,[],null,null),e.qb(3,540672,null,0,h.j,[[8,null],[8,null]],{form:[0,"form"]},null),e.Ib(2048,null,h.d,null,[h.j]),e.qb(5,16384,null,0,h.s,[[4,h.d]],null,null),(n()(),e.rb(6,0,null,null,49,"div",[["formGroupName","displayParams"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,null,null)),e.qb(7,212992,null,0,h.k,[[3,h.d],[8,null],[8,null]],{name:[0,"name"]},null),e.Ib(2048,null,h.d,null,[h.k]),e.qb(9,16384,null,0,h.s,[[4,h.d]],null,null),(n()(),e.rb(10,0,null,null,29,"div",[["class","form-group"],["formGroupName","timeScale"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,null,null)),e.qb(11,212992,null,0,h.k,[[3,h.d],[8,null],[8,null]],{name:[0,"name"]},null),e.Ib(2048,null,h.d,null,[h.k]),e.qb(13,16384,null,0,h.s,[[4,h.d]],null,null),(n()(),e.rb(14,0,null,null,1,"label",[["class","col-sm-4"]],null,null,null,null,null)),(n()(),e.Lb(-1,null,["Data window"])),(n()(),e.rb(16,0,null,null,1,"label",[["class","col-sm-1"],["for","windowStart"]],null,null,null,null,null)),(n()(),e.Lb(-1,null,["from:"])),(n()(),e.rb(18,0,null,null,9,"div",[["class","col-sm-2"]],null,null,null,null,null)),(n()(),e.rb(19,0,null,null,8,"input",[["class","form-control"],["formControlName","timeStart"],["id","windowStart"],["min","0"],["required",""],["size","5"],["step","any"],["type","number"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],(function(n,l,t){var i=!0;return"input"===l&&(i=!1!==e.Db(n,20)._handleInput(t.target.value)&&i),"blur"===l&&(i=!1!==e.Db(n,20).onTouched()&&i),"compositionstart"===l&&(i=!1!==e.Db(n,20)._compositionStart()&&i),"compositionend"===l&&(i=!1!==e.Db(n,20)._compositionEnd(t.target.value)&&i),"change"===l&&(i=!1!==e.Db(n,21).onChange(t.target.value)&&i),"input"===l&&(i=!1!==e.Db(n,21).onChange(t.target.value)&&i),"blur"===l&&(i=!1!==e.Db(n,21).onTouched()&&i),i}),null,null)),e.qb(20,16384,null,0,h.e,[e.C,e.k,[2,h.a]],null,null),e.qb(21,16384,null,0,h.w,[e.C,e.k],null,null),e.qb(22,16384,null,0,h.A,[],{required:[0,"required"]},null),e.Ib(1024,null,h.o,(function(n){return[n]}),[h.A]),e.Ib(1024,null,h.p,(function(n,l){return[n,l]}),[h.e,h.w]),e.qb(25,671744,null,0,h.i,[[3,h.d],[6,h.o],[8,null],[6,h.p],[2,h.F]],{name:[0,"name"]},null),e.Ib(2048,null,h.q,null,[h.i]),e.qb(27,16384,null,0,h.r,[[4,h.q]],null,null),(n()(),e.rb(28,0,null,null,1,"label",[["class","col-sm-1"],["for","windowEnd"]],null,null,null,null,null)),(n()(),e.Lb(-1,null,["to:"])),(n()(),e.rb(30,0,null,null,9,"div",[["class","col-sm-2"]],null,null,null,null,null)),(n()(),e.rb(31,0,null,null,8,"input",[["class","form-control"],["formControlName","timeEnd"],["id","windowEnd"],["min","0"],["placeholder",""],["required",""],["size","5"],["step","any"],["type","number"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],(function(n,l,t){var i=!0;return"input"===l&&(i=!1!==e.Db(n,32)._handleInput(t.target.value)&&i),"blur"===l&&(i=!1!==e.Db(n,32).onTouched()&&i),"compositionstart"===l&&(i=!1!==e.Db(n,32)._compositionStart()&&i),"compositionend"===l&&(i=!1!==e.Db(n,32)._compositionEnd(t.target.value)&&i),"change"===l&&(i=!1!==e.Db(n,33).onChange(t.target.value)&&i),"input"===l&&(i=!1!==e.Db(n,33).onChange(t.target.value)&&i),"blur"===l&&(i=!1!==e.Db(n,33).onTouched()&&i),i}),null,null)),e.qb(32,16384,null,0,h.e,[e.C,e.k,[2,h.a]],null,null),e.qb(33,16384,null,0,h.w,[e.C,e.k],null,null),e.qb(34,16384,null,0,h.A,[],{required:[0,"required"]},null),e.Ib(1024,null,h.o,(function(n){return[n]}),[h.A]),e.Ib(1024,null,h.p,(function(n,l){return[n,l]}),[h.e,h.w]),e.qb(37,671744,null,0,h.i,[[3,h.d],[6,h.o],[8,null],[6,h.p],[2,h.F]],{name:[0,"name"]},null),e.Ib(2048,null,h.q,null,[h.i]),e.qb(39,16384,null,0,h.r,[[4,h.q]],null,null),(n()(),e.rb(40,0,null,null,15,"div",[["class","form-group"]],null,null,null,null,null)),(n()(),e.rb(41,0,null,null,3,"label",[["class","col-sm-4"],["for","detrending"]],null,null,null,null,null)),(n()(),e.Lb(-1,null,["Input Data "])),(n()(),e.rb(43,0,null,null,1,"a",[],null,[[null,"click"]],(function(n,l,t){var i=!0;return"click"===l&&(i=!1!==e.Db(n,111).show("detrending")&&i),i}),null,null)),(n()(),e.rb(44,0,null,null,0,"span",[["aria-hidden","true"],["class","glyphicon glyphicon-question-sign"]],null,null,null,null,null)),(n()(),e.rb(45,0,null,null,10,"div",[["class","col-sm-6"]],null,null,null,null,null)),(n()(),e.rb(46,0,null,null,9,"select",[["class","form-control"],["formControlName","detrending"],["id","detrending"],["required",""]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"blur"]],(function(n,l,t){var i=!0;return"change"===l&&(i=!1!==e.Db(n,47).onChange(t.target.value)&&i),"blur"===l&&(i=!1!==e.Db(n,47).onTouched()&&i),i}),null,null)),e.qb(47,16384,null,0,h.B,[e.C,e.k],null,null),e.qb(48,16384,null,0,h.A,[],{required:[0,"required"]},null),e.Ib(1024,null,h.o,(function(n){return[n]}),[h.A]),e.Ib(1024,null,h.p,(function(n){return[n]}),[h.B]),e.qb(51,671744,null,0,h.i,[[3,h.d],[6,h.o],[8,null],[6,h.p],[2,h.F]],{name:[0,"name"]},null),e.Ib(2048,null,h.q,null,[h.i]),e.qb(53,16384,null,0,h.r,[[4,h.q]],null,null),(n()(),e.gb(16777216,null,null,1,null,I)),e.qb(55,278528,null,0,f.m,[e.N,e.K,e.q],{ngForOf:[0,"ngForOf"]},null),(n()(),e.rb(56,0,null,null,29,"div",[["class","form-group"],["formGroupName","periodScale"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,null,null)),e.qb(57,212992,null,0,h.k,[[3,h.d],[8,null],[8,null]],{name:[0,"name"]},null),e.Ib(2048,null,h.d,null,[h.k]),e.qb(59,16384,null,0,h.s,[[4,h.d]],null,null),(n()(),e.rb(60,0,null,null,1,"label",[["class","col-sm-4"]],null,null,null,null,null)),(n()(),e.Lb(-1,null,["Expected periods"])),(n()(),e.rb(62,0,null,null,1,"label",[["class","col-sm-1"],["for","periodMin"]],null,null,null,null,null)),(n()(),e.Lb(-1,null,["from:"])),(n()(),e.rb(64,0,null,null,9,"div",[["class","col-sm-2"]],null,null,null,null,null)),(n()(),e.rb(65,0,null,null,8,"input",[["class","form-control"],["formControlName","periodMin"],["id","periodMin"],["max","50"],["min","10"],["placeholder",""],["required",""],["size","5"],["step","any"],["type","number"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],(function(n,l,t){var i=!0;return"input"===l&&(i=!1!==e.Db(n,66)._handleInput(t.target.value)&&i),"blur"===l&&(i=!1!==e.Db(n,66).onTouched()&&i),"compositionstart"===l&&(i=!1!==e.Db(n,66)._compositionStart()&&i),"compositionend"===l&&(i=!1!==e.Db(n,66)._compositionEnd(t.target.value)&&i),"change"===l&&(i=!1!==e.Db(n,67).onChange(t.target.value)&&i),"input"===l&&(i=!1!==e.Db(n,67).onChange(t.target.value)&&i),"blur"===l&&(i=!1!==e.Db(n,67).onTouched()&&i),i}),null,null)),e.qb(66,16384,null,0,h.e,[e.C,e.k,[2,h.a]],null,null),e.qb(67,16384,null,0,h.w,[e.C,e.k],null,null),e.qb(68,16384,null,0,h.A,[],{required:[0,"required"]},null),e.Ib(1024,null,h.o,(function(n){return[n]}),[h.A]),e.Ib(1024,null,h.p,(function(n,l){return[n,l]}),[h.e,h.w]),e.qb(71,671744,null,0,h.i,[[3,h.d],[6,h.o],[8,null],[6,h.p],[2,h.F]],{name:[0,"name"]},null),e.Ib(2048,null,h.q,null,[h.i]),e.qb(73,16384,null,0,h.r,[[4,h.q]],null,null),(n()(),e.rb(74,0,null,null,1,"label",[["class","col-sm-1"],["for","periodMax"]],null,null,null,null,null)),(n()(),e.Lb(-1,null,["to:"])),(n()(),e.rb(76,0,null,null,9,"div",[["class","col-sm-2"]],null,null,null,null,null)),(n()(),e.rb(77,0,null,null,8,"input",[["class","form-control"],["formControlName","periodMax"],["id","periodMax"],["max","50"],["min","10"],["placeholder",""],["required",""],["size","5"],["step","any"],["type","number"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],(function(n,l,t){var i=!0;return"input"===l&&(i=!1!==e.Db(n,78)._handleInput(t.target.value)&&i),"blur"===l&&(i=!1!==e.Db(n,78).onTouched()&&i),"compositionstart"===l&&(i=!1!==e.Db(n,78)._compositionStart()&&i),"compositionend"===l&&(i=!1!==e.Db(n,78)._compositionEnd(t.target.value)&&i),"change"===l&&(i=!1!==e.Db(n,79).onChange(t.target.value)&&i),"input"===l&&(i=!1!==e.Db(n,79).onChange(t.target.value)&&i),"blur"===l&&(i=!1!==e.Db(n,79).onTouched()&&i),i}),null,null)),e.qb(78,16384,null,0,h.e,[e.C,e.k,[2,h.a]],null,null),e.qb(79,16384,null,0,h.w,[e.C,e.k],null,null),e.qb(80,16384,null,0,h.A,[],{required:[0,"required"]},null),e.Ib(1024,null,h.o,(function(n){return[n]}),[h.A]),e.Ib(1024,null,h.p,(function(n,l){return[n,l]}),[h.e,h.w]),e.qb(83,671744,null,0,h.i,[[3,h.d],[6,h.o],[8,null],[6,h.p],[2,h.F]],{name:[0,"name"]},null),e.Ib(2048,null,h.q,null,[h.i]),e.qb(85,16384,null,0,h.r,[[4,h.q]],null,null),(n()(),e.rb(86,0,null,null,15,"div",[["class","form-group"]],null,null,null,null,null)),(n()(),e.rb(87,0,null,null,3,"label",[["class","col-sm-4"],["for","method"]],null,null,null,null,null)),(n()(),e.Lb(-1,null,["Analysis Method "])),(n()(),e.rb(89,0,null,null,1,"a",[],null,[[null,"click"]],(function(n,l,t){var i=!0;return"click"===l&&(i=!1!==e.Db(n,111).show("period-methods")&&i),i}),null,null)),(n()(),e.rb(90,0,null,null,0,"span",[["aria-hidden","true"],["class","glyphicon glyphicon-question-sign"]],null,null,null,null,null)),(n()(),e.rb(91,0,null,null,10,"div",[["class","col-sm-6"]],null,null,null,null,null)),(n()(),e.rb(92,0,null,null,9,"select",[["class","form-control"],["formControlName","method"],["id","method"],["required",""]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"blur"]],(function(n,l,t){var i=!0;return"change"===l&&(i=!1!==e.Db(n,93).onChange(t.target.value)&&i),"blur"===l&&(i=!1!==e.Db(n,93).onTouched()&&i),i}),null,null)),e.qb(93,16384,null,0,h.B,[e.C,e.k],null,null),e.qb(94,16384,null,0,h.A,[],{required:[0,"required"]},null),e.Ib(1024,null,h.o,(function(n){return[n]}),[h.A]),e.Ib(1024,null,h.p,(function(n){return[n]}),[h.B]),e.qb(97,671744,null,0,h.i,[[3,h.d],[6,h.o],[8,null],[6,h.p],[2,h.F]],{name:[0,"name"]},null),e.Ib(2048,null,h.q,null,[h.i]),e.qb(99,16384,null,0,h.r,[[4,h.q]],null,null),(n()(),e.gb(16777216,null,null,1,null,A)),e.qb(101,278528,null,0,f.m,[e.N,e.K,e.q],{ngForOf:[0,"ngForOf"]},null),(n()(),e.rb(102,0,null,null,5,"div",[["class","form-group"]],null,null,null,null,null)),(n()(),e.rb(103,0,null,null,0,"label",[["class","col-sm-2"]],null,null,null,null,null)),(n()(),e.rb(104,0,null,null,3,"div",[["class","col-sm-8"]],null,null,null,null,null)),(n()(),e.rb(105,0,null,null,2,"mat-paginator",[["class","mat-paginator"]],null,[[null,"page"]],(function(n,l,t){var e=!0;return"page"===l&&(e=!1!==n.component.loadDataPage(t)&&e),e}),b.b,b.a)),e.qb(106,245760,[[1,4],["dataPaginator",4]],0,p.b,[p.c,e.h],{disabled:[0,"disabled"],pageIndex:[1,"pageIndex"],length:[2,"length"],pageSize:[3,"pageSize"],pageSizeOptions:[4,"pageSizeOptions"]},{page:"page"}),e.Eb(107,5),(n()(),e.rb(108,0,null,null,1,"button",[["class","btn btn-primary"],["type","button"]],[[8,"disabled",0]],[[null,"click"]],(function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.analyse()&&e),e}),null,null)),(n()(),e.Lb(-1,null,["Analyse "])),(n()(),e.rb(110,0,null,null,1,"bd2-static-pop-up",[],null,null,null,g.b,g.a)),e.qb(111,114688,[["help",4]],0,m.a,[],null,null)],(function(n,l){var t=l.component;n(l,3,0,t.mainForm),n(l,7,0,"displayParams"),n(l,11,0,"timeScale"),n(l,22,0,""),n(l,25,0,"timeStart"),n(l,34,0,""),n(l,37,0,"timeEnd"),n(l,48,0,""),n(l,51,0,"detrending"),n(l,55,0,t.detrendingOptions),n(l,57,0,"periodScale"),n(l,68,0,""),n(l,71,0,"periodMin"),n(l,80,0,""),n(l,83,0,"periodMax"),n(l,94,0,""),n(l,97,0,"method"),n(l,101,0,t.methodOptions);var e=t.disabledPagination,i=t.currentPage.pageIndex,a=t.totalTraces,r=t.currentPage.pageSize,u=n(l,107,0,10,25,50,100,200);n(l,106,0,e,i,a,r,u),n(l,111,0)}),(function(n,l){var t=l.component;n(l,1,0,e.Db(l,5).ngClassUntouched,e.Db(l,5).ngClassTouched,e.Db(l,5).ngClassPristine,e.Db(l,5).ngClassDirty,e.Db(l,5).ngClassValid,e.Db(l,5).ngClassInvalid,e.Db(l,5).ngClassPending),n(l,6,0,e.Db(l,9).ngClassUntouched,e.Db(l,9).ngClassTouched,e.Db(l,9).ngClassPristine,e.Db(l,9).ngClassDirty,e.Db(l,9).ngClassValid,e.Db(l,9).ngClassInvalid,e.Db(l,9).ngClassPending),n(l,10,0,e.Db(l,13).ngClassUntouched,e.Db(l,13).ngClassTouched,e.Db(l,13).ngClassPristine,e.Db(l,13).ngClassDirty,e.Db(l,13).ngClassValid,e.Db(l,13).ngClassInvalid,e.Db(l,13).ngClassPending),n(l,19,0,e.Db(l,22).required?"":null,e.Db(l,27).ngClassUntouched,e.Db(l,27).ngClassTouched,e.Db(l,27).ngClassPristine,e.Db(l,27).ngClassDirty,e.Db(l,27).ngClassValid,e.Db(l,27).ngClassInvalid,e.Db(l,27).ngClassPending),n(l,31,0,e.Db(l,34).required?"":null,e.Db(l,39).ngClassUntouched,e.Db(l,39).ngClassTouched,e.Db(l,39).ngClassPristine,e.Db(l,39).ngClassDirty,e.Db(l,39).ngClassValid,e.Db(l,39).ngClassInvalid,e.Db(l,39).ngClassPending),n(l,46,0,e.Db(l,48).required?"":null,e.Db(l,53).ngClassUntouched,e.Db(l,53).ngClassTouched,e.Db(l,53).ngClassPristine,e.Db(l,53).ngClassDirty,e.Db(l,53).ngClassValid,e.Db(l,53).ngClassInvalid,e.Db(l,53).ngClassPending),n(l,56,0,e.Db(l,59).ngClassUntouched,e.Db(l,59).ngClassTouched,e.Db(l,59).ngClassPristine,e.Db(l,59).ngClassDirty,e.Db(l,59).ngClassValid,e.Db(l,59).ngClassInvalid,e.Db(l,59).ngClassPending),n(l,65,0,e.Db(l,68).required?"":null,e.Db(l,73).ngClassUntouched,e.Db(l,73).ngClassTouched,e.Db(l,73).ngClassPristine,e.Db(l,73).ngClassDirty,e.Db(l,73).ngClassValid,e.Db(l,73).ngClassInvalid,e.Db(l,73).ngClassPending),n(l,77,0,e.Db(l,80).required?"":null,e.Db(l,85).ngClassUntouched,e.Db(l,85).ngClassTouched,e.Db(l,85).ngClassPristine,e.Db(l,85).ngClassDirty,e.Db(l,85).ngClassValid,e.Db(l,85).ngClassInvalid,e.Db(l,85).ngClassPending),n(l,92,0,e.Db(l,94).required?"":null,e.Db(l,99).ngClassUntouched,e.Db(l,99).ngClassTouched,e.Db(l,99).ngClassPristine,e.Db(l,99).ngClassDirty,e.Db(l,99).ngClassValid,e.Db(l,99).ngClassInvalid,e.Db(l,99).ngClassPending),n(l,108,0,t.disabled||t.mainForm.invalid)}))}var N=t("CNMR"),O=t("QBpm"),E=t("ZC3s"),R=t("Iurr"),L=t("yYXI");class B extends L.a{constructor(n,l){super(l),this.ppaService=n,this.titlePart=" PPA"}goToPPAHome(n){const l=this.expHomePath(n);l.push("ppa"),this.router.navigate(l)}}var F=t("vejM"),U=t("ZMwR"),j=t("GVyA"),J=t("UsWK");let W=(()=>{class n{constructor(n){this.BD2REST=n}newPPA(n,l){return this.BD2REST.ppaNew(n,l)}getPPAJobs(n){return this.BD2REST.ppaJobs(n).then(n=>n.data)}getPPAJob(n,l){return this.BD2REST.ppaJob(n,l)}downloadPPAJob(n,l,t){return this.BD2REST.ppaExportJob(n,l,t)}deletePPAJob(n,l){return this.BD2REST.ppaDeleteJob(n.id,l)}getPPAJobResultsGrouped(n,l){return this.BD2REST.ppaJobResultsGrouped(n,l)}getPPAJobSimpleResults(n,l){return this.BD2REST.ppaJobSimpleResults(n,l)}getPPAForSelect(n,l){return this.BD2REST.ppaForSelect(n,l).then(n=>n.data)}getPPAJobSimpleStats(n,l){return this.BD2REST.ppaJobSimpleStat(n,l)}getPPAResults(n){return this.BD2REST.ppaResults(n).then(n=>n.data)}doPPASelection(n,l,t){return this.BD2REST.ppaDoSelection(n,l,t)}exportURL(n){return this.BD2REST.ppaExportURL(n.id)}}return n.ngInjectableDef=e.Rb({factory:function(){return new n(e.Sb(J.a))},token:n,providedIn:"root"}),n})();var H=t("Kj3r"),z=t("bngM"),$=t("naqj");class G extends B{constructor(n,l,t,e,i,a){super(i,a),this.fetcher=n,this.RDMSocial=l,this.analytics=t,this.userService=e,this.disabled=!1,this.blocked=!1,this.tracesPerPlot=5,this.totalTraces=0,this.currentPage=z.a.firstPage(),this.titlePart=" New PPA"}ngOnInit(){super.ngOnInit(),this.timeSeriesSubsripction=this.fetcher.seriesPackStream.pipe(Object(H.a)(1e3)).subscribe(n=>{const l=n.data;this.tracesPerPlot=Math.max(5,l.length/20),this.timeseries=l,this.totalTraces=n.totalTraces,this.currentPage=n.currentPage},n=>{console.log("Error in TS subscription: "+n),this.feedback.error(n)})}ngOnDestroy(){this.timeSeriesSubsripction&&this.timeSeriesSubsripction.unsubscribe(),this.fetcher.ngOnDestroy(),super.ngOnDestroy()}emitDisplayParams(n){this.fetcher.changeDisplayParams(n)}doAnalysis(n){n.isValid()&&(this.blocked=!0,this.ppaService.newPPA(this.assay,n).then(l=>{this.feedback.success("Analysis submitted"),this.analytics.ppaNew(n.method.name,this.assay.id,this.userService.currentUser.login)}).then(()=>this.refreshModel()).then(()=>this.goToPPAHome()).catch(n=>{this.blocked=!1,this.feedback.error(n)}))}updateModel(n){this.RDMSocial.canProceedByMeasurement(n).then(n=>{this.disabled=!n}),this.fetcher.experiment(n),super.updateModel(n)}}var V=e.pb({encapsulation:2,styles:[],data:{}});function K(n){return e.Nb(0,[(n()(),e.rb(0,0,null,null,1,"bd2-ts-plots",[],null,null,null,c.b,c.a)),e.qb(1,114688,null,0,d.a,[],{tracesPerPlot:[0,"tracesPerPlot"],data:[1,"data"]},null)],(function(n,l){var t=l.component;n(l,1,0,t.tracesPerPlot,t.timeseries)}),null)}function Y(n){return e.Nb(0,[(n()(),e.rb(0,0,null,null,5,"div",[],null,null,null,null,null)),(n()(),e.rb(1,0,null,null,1,"bd2-ppajob-params-rform",[],null,[[null,"displayParams"],[null,"ppaRequests"]],(function(n,l,t){var e=!0,i=n.component;return"displayParams"===l&&(e=!1!==i.emitDisplayParams(t)&&e),"ppaRequests"===l&&(e=!1!==i.doAnalysis(t)&&e),e}),q,T)),e.qb(2,4440064,null,0,S,[h.f],{disabled:[0,"disabled"],totalTraces:[1,"totalTraces"],currentPage:[2,"currentPage"]},{displayParams:"displayParams",ppaRequests:"ppaRequests"}),(n()(),e.rb(3,0,null,null,0,"hr",[],null,null,null,null,null)),(n()(),e.gb(16777216,null,null,1,null,K)),e.qb(5,16384,null,0,f.n,[e.N,e.K],{ngIf:[0,"ngIf"]},null)],(function(n,l){var t=l.component;n(l,2,0,t.blocked,t.totalTraces,t.currentPage),n(l,5,0,t.timeseries)}),null)}function X(n){return e.Nb(0,[(n()(),e.rb(0,0,null,null,5,"alert",[["type","danger"]],null,null,null,a.c,a.b)),e.qb(1,114688,null,0,N.a,[N.b,e.h],{type:[0,"type"]},null),(n()(),e.Lb(-1,0,[" Please complete "])),(n()(),e.rb(3,0,null,0,1,"a",[],null,[[null,"click"]],(function(n,l,t){var e=!0,i=n.component;return"click"===l&&(e=!1!==i.goToExpEdit(i.assay.id,"MeasurementSection")&&e),e}),null,null)),(n()(),e.Lb(-1,null,["Measurement details"])),(n()(),e.Lb(-1,0,[" before starting a new analysis "]))],(function(n,l){n(l,1,0,"danger")}),null)}function Z(n){return e.Nb(0,[(n()(),e.rb(0,0,null,null,7,"div",[],null,null,null,null,null)),(n()(),e.rb(1,0,null,null,1,"h3",[],null,null,null,null,null)),(n()(),e.Lb(-1,null,["Start period analysis"])),(n()(),e.rb(3,0,null,null,0,"hr",[],null,null,null,null,null)),(n()(),e.gb(16777216,null,null,1,null,Y)),e.qb(5,16384,null,0,f.n,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(n()(),e.gb(16777216,null,null,1,null,X)),e.qb(7,16384,null,0,f.n,[e.N,e.K],{ngIf:[0,"ngIf"]},null)],(function(n,l){var t=l.component;n(l,5,0,!t.disabled),n(l,7,0,t.disabled)}),null)}function Q(n){return e.Nb(0,[(n()(),e.gb(16777216,null,null,1,null,Z)),e.qb(1,16384,null,0,f.n,[e.N,e.K],{ngIf:[0,"ngIf"]},null)],(function(n,l){n(l,1,0,l.component.assay)}),null)}function nn(n){return e.Nb(0,[(n()(),e.rb(0,0,null,null,2,"ng-component",[],null,null,null,Q,V)),e.Ib(131584,null,O.a,O.a,[E.a,[2,R.a]]),e.qb(2,245760,null,0,G,[O.a,F.a,U.a,$.a,W,j.a],null,null)],(function(n,l){n(l,2,0)}),null)}var ln=e.nb("ng-component",G,nn,{},{},[]),tn=t("NpPO"),en=t("xKa8"),an=t("LqlI"),rn=t("z/SZ");class un{constructor(){this.options=[]}}var on=t("ap1U");let sn=(()=>{class n{constructor(n){this.BD2REST=n}getFit(n,l,t,e){return this.BD2REST.ppaFit(n,l,t,e)}fakeFit(){const n=new un;n.traces=new on.c,n.traces.title="1. WT";let l=this.fakeTrace("WT");return n.traces.traces.push(l),l=this.fakeTrace("fit"),n.traces.traces.push(l),l=this.fakeTrace("24.23"),n.traces.traces.push(l),l=this.fakeTrace("30.15"),n.traces.traces.push(l),n.options.push({id:"2423",label:"24.23",selected:!1}),n.options.push({id:"35220",label:"35.22",selected:!1}),n}fakeTrace(n){const l=new on.b;l.label=n;const t=20+10*Math.random(),e=1+Math.random();for(let i=0;i<100;i++)l.data.push(new on.a(i,e*Math.cos(2*i*3.14/t)));return l}}return n.ngInjectableDef=e.Rb({factory:function(){return new n(e.Sb(J.a))},token:n,providedIn:"root"}),n})();var cn=t("6tuW");class dn{constructor(n,l){this.fitService=n,this.feedback=l,this.selectable=!1,this.selected=new e.m}ngOnInit(){}cancel(){this.myModal&&this.myModal.hide()}show(n,l,t,e,i){this.myModal&&(this.jobId=l,this.dataId=t,null!=e&&(this.selectable=e),this.fitPack=void 0,this.selectedPeriod=void 0,this.fitService.getFit(n,l,t,e).then(n=>{if(this.fitPack=n,this.selectedPeriod=i,!i){const l=n.options.find(n=>n.selected);l&&(this.selectedPeriod=l.id)}}).then(()=>this.myModal.show()).catch(n=>{this.feedback.error(n)}))}accepted(){if(this.selectedPeriod){const n=new k;n.jobId=this.jobId,n.dataId=this.dataId,n.selected=this.selectedPeriod,this.selected.next(n)}this.myModal&&this.myModal.hide()}}var hn=e.pb({encapsulation:2,styles:[],data:{}});function fn(n){return e.Nb(0,[(n()(),e.rb(0,0,null,null,8,"li",[],null,null,null,null,null)),(n()(),e.rb(1,0,null,null,6,"input",[["name","fPeriod"],["type","radio"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],(function(n,l,t){var i=!0,a=n.component;return"input"===l&&(i=!1!==e.Db(n,2)._handleInput(t.target.value)&&i),"blur"===l&&(i=!1!==e.Db(n,2).onTouched()&&i),"compositionstart"===l&&(i=!1!==e.Db(n,2)._compositionStart()&&i),"compositionend"===l&&(i=!1!==e.Db(n,2)._compositionEnd(t.target.value)&&i),"change"===l&&(i=!1!==e.Db(n,3).onChange()&&i),"blur"===l&&(i=!1!==e.Db(n,3).onTouched()&&i),"ngModelChange"===l&&(i=!1!==(a.selectedPeriod=t)&&i),i}),null,null)),e.qb(2,16384,null,0,h.e,[e.C,e.k,[2,h.a]],null,null),e.qb(3,212992,null,0,h.y,[e.C,e.k,h.E,e.p],{name:[0,"name"],value:[1,"value"]},null),e.Ib(1024,null,h.p,(function(n,l){return[n,l]}),[h.e,h.y]),e.qb(5,671744,[["fPeriod",4]],0,h.u,[[2,h.d],[8,null],[8,null],[6,h.p]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),e.Ib(2048,null,h.q,null,[h.u]),e.qb(7,16384,null,0,h.r,[[4,h.q]],null,null),(n()(),e.Lb(8,null,[" "," "]))],(function(n,l){var t=l.component;n(l,3,0,"fPeriod",e.vb(1,"",l.context.$implicit.id,"")),n(l,5,0,"fPeriod",t.selectedPeriod)}),(function(n,l){n(l,1,0,e.Db(l,7).ngClassUntouched,e.Db(l,7).ngClassTouched,e.Db(l,7).ngClassPristine,e.Db(l,7).ngClassDirty,e.Db(l,7).ngClassValid,e.Db(l,7).ngClassInvalid,e.Db(l,7).ngClassPending),n(l,8,0,l.context.$implicit.label)}))}function bn(n){return e.Nb(0,[(n()(),e.rb(0,0,null,null,12,"div",[],null,null,null,null,null)),(n()(),e.rb(1,0,null,null,10,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],(function(n,l,t){var i=!0;return"submit"===l&&(i=!1!==e.Db(n,3).onSubmit(t)&&i),"reset"===l&&(i=!1!==e.Db(n,3).onReset()&&i),i}),null,null)),e.qb(2,16384,null,0,h.H,[],null,null),e.qb(3,4210688,null,0,h.t,[[8,null],[8,null]],null,null),e.Ib(2048,null,h.d,null,[h.t]),e.qb(5,16384,null,0,h.s,[[4,h.d]],null,null),(n()(),e.rb(6,0,null,null,5,"div",[["class","form-group"]],null,null,null,null,null)),(n()(),e.rb(7,0,null,null,1,"label",[],null,null,null,null,null)),(n()(),e.Lb(-1,null,["Select period"])),(n()(),e.rb(9,0,null,null,2,"ul",[["class","list-inline"]],null,null,null,null,null)),(n()(),e.gb(16777216,null,null,1,null,fn)),e.qb(11,278528,null,0,f.m,[e.N,e.K,e.q],{ngForOf:[0,"ngForOf"]},null),(n()(),e.rb(12,0,null,null,0,"hr",[],null,null,null,null,null))],(function(n,l){n(l,11,0,l.component.fitPack.options)}),(function(n,l){n(l,1,0,e.Db(l,5).ngClassUntouched,e.Db(l,5).ngClassTouched,e.Db(l,5).ngClassPristine,e.Db(l,5).ngClassDirty,e.Db(l,5).ngClassValid,e.Db(l,5).ngClassInvalid,e.Db(l,5).ngClassPending)}))}function pn(n){return e.Nb(0,[(n()(),e.rb(0,0,null,null,1,"button",[["class","btn btn-primary btn-sm"]],[[8,"disabled",0]],[[null,"click"]],(function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.accepted()&&e),e}),null,null)),(n()(),e.Lb(-1,null,[" Select "]))],null,(function(n,l){n(l,0,0,!l.component.selectedPeriod)}))}function gn(n){return e.Nb(0,[(n()(),e.rb(0,0,null,null,10,"div",[],null,null,null,null,null)),(n()(),e.rb(1,0,null,null,1,"bd2-ts-plot",[],null,null,null,tn.b,tn.a)),e.qb(2,114688,null,0,en.a,[],{data:[0,"data"]},null),(n()(),e.rb(3,0,null,null,0,"hr",[],null,null,null,null,null)),(n()(),e.gb(16777216,null,null,1,null,bn)),e.qb(5,16384,null,0,f.n,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(n()(),e.rb(6,0,null,null,4,"div",[],null,null,null,null,null)),(n()(),e.gb(16777216,null,null,1,null,pn)),e.qb(8,16384,null,0,f.n,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(n()(),e.rb(9,0,null,null,1,"button",[["class","btn btn-primary btn-sm"]],null,[[null,"click"]],(function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.cancel()&&e),e}),null,null)),(n()(),e.Lb(-1,null,["Close"]))],(function(n,l){var t=l.component;n(l,2,0,t.fitPack.traces),n(l,5,0,t.selectable),n(l,8,0,t.selectable)}),null)}function mn(n){return e.Nb(0,[e.Jb(402653184,1,{myModal:0}),(n()(),e.rb(1,16777216,null,null,12,"div",[["aria-hidden","true"],["aria-labelledby","selectableFitDialog"],["bsModal",""],["class","modal fade"],["role","dialog"],["tabindex","-1"]],null,[[null,"click"],[null,"keydown.esc"]],(function(n,l,t){var i=!0;return"click"===l&&(i=!1!==e.Db(n,2).onClick(t)&&i),"keydown.esc"===l&&(i=!1!==e.Db(n,2).onEsc(t)&&i),i}),null,null)),e.qb(2,212992,[[1,4],["selectableFitDialog",4]],0,an.d,[e.k,e.N,e.C,rn.a],null,null),(n()(),e.rb(3,0,null,null,10,"div",[["class","modal-dialog modal-lg"]],null,null,null,null,null)),(n()(),e.rb(4,0,null,null,9,"div",[["class","modal-content"]],null,null,null,null,null)),(n()(),e.rb(5,0,null,null,5,"div",[["class","modal-header"]],null,null,null,null,null)),(n()(),e.rb(6,0,null,null,2,"button",[["aria-label","Close"],["class","close"],["type","button"]],null,[[null,"click"]],(function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.cancel()&&e),e}),null,null)),(n()(),e.rb(7,0,null,null,1,"span",[["aria-hidden","true"]],null,null,null,null,null)),(n()(),e.Lb(-1,null,["\xd7"])),(n()(),e.rb(9,0,null,null,1,"h4",[["class","modal-title"]],null,null,null,null,null)),(n()(),e.Lb(10,null,["Fit ",""])),(n()(),e.rb(11,0,null,null,2,"div",[["class","modal-body"]],null,null,null,null,null)),(n()(),e.gb(16777216,null,null,1,null,gn)),e.qb(13,16384,null,0,f.n,[e.N,e.K],{ngIf:[0,"ngIf"]},null)],(function(n,l){var t=l.component;n(l,2,0),n(l,13,0,t.fitPack)}),(function(n,l){var t=l.component;n(l,10,0,null==t.fitPack?null:null==t.fitPack.traces?null:t.fitPack.traces.title)}))}var yn=t("itXk"),vn=t("pLZG"),_n=t("lJxs");class xn extends B{constructor(n,l,t){super(l,t),this.route=n,this.blocked=!1}ngOnInit(){this.subscribeToExperimentAndJob()}subscribeToExperimentAndJob(){const n=this.currentExperiment.experiment().pipe(Object(vn.a)(n=>!!n)),l=this.route.params.pipe(Object(_n.a)(n=>n.jobId),Object(vn.a)(n=>!!n)),t=Object(yn.a)(n,l,(n,l)=>({assay:n,jobId:l}));this.expJobSubscription=t.subscribe(n=>{this.updateModel(n.assay),this.loadData(n.assay,n.jobId)},n=>this.feedback.error(n),()=>console.log(this.constructor.name+" expSubscription completed"))}ngOnDestroy(){this.expJobSubscription&&this.expJobSubscription.unsubscribe()}loadData(n,l){this.loadJob(n.id,l).then(t=>this.loadPPAForSelect(n.id,l)).catch(n=>this.feedback.error(n))}loadJob(n,l){return this.ppaService.getPPAJob(n,l).toPromise().then(n=>(this.job=n,n))}loadPPAForSelect(n,l){return this.ppaService.getPPAForSelect(n,l).then(n=>(this.ppaGroups=n,n))}markSelection(n){const l=this.ppaGroups.find(l=>l.dataId===n.dataId);l&&(l.selected=n.selected)}selectPPA(n){n&&(this.blocked=!0,this.ppaService.doPPASelection(this.assay.id,this.job.jobId,n).then(n=>{this.feedback.success(n.needsAttention?"Selected periods, but still "+n.needsAttention+" entries needs attention":"Selected periods, no entries needs attention")}).then(()=>this.goToPPAHome()).catch(n=>{this.blocked=!1,this.feedback.error(n)}))}showFit(n){this.fitDialog&&this.fitDialog.show(this.assay.id,this.job.jobId,n.dataId,!0,n.selected)}}var wn=t("iInd"),Dn=e.pb({encapsulation:2,styles:[],data:{}});function Cn(n){return e.Nb(0,[(n()(),e.rb(0,0,null,null,1,"span",[],null,null,null,null,null)),(n()(),e.Lb(-1,null,["(not included in statistics)"]))],null,null)}function kn(n){return e.Nb(0,[(n()(),e.rb(0,0,null,null,24,"tr",[],null,null,null,null,null)),e.Ib(512,null,f.A,f.B,[e.q,e.r,e.k,e.C]),e.qb(2,278528,null,0,f.l,[f.A],{ngClass:[0,"ngClass"]},null),e.Gb(3,{ppa_ignored:0,ppa_attention:1}),(n()(),e.rb(4,0,null,null,7,"td",[],null,null,null,null,null)),(n()(),e.rb(5,0,null,null,6,"input",[["type","radio"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],(function(n,l,t){var i=!0;return"input"===l&&(i=!1!==e.Db(n,6)._handleInput(t.target.value)&&i),"blur"===l&&(i=!1!==e.Db(n,6).onTouched()&&i),"compositionstart"===l&&(i=!1!==e.Db(n,6)._compositionStart()&&i),"compositionend"===l&&(i=!1!==e.Db(n,6)._compositionEnd(t.target.value)&&i),"change"===l&&(i=!1!==e.Db(n,7).onChange()&&i),"blur"===l&&(i=!1!==e.Db(n,7).onTouched()&&i),"ngModelChange"===l&&(i=!1!==(n.parent.context.$implicit.selected=t)&&i),i}),null,null)),e.qb(6,16384,null,0,h.e,[e.C,e.k,[2,h.a]],null,null),e.qb(7,212992,null,0,h.y,[e.C,e.k,h.E,e.p],{name:[0,"name"],value:[1,"value"]},null),e.Ib(1024,null,h.p,(function(n,l){return[n,l]}),[h.e,h.y]),e.qb(9,671744,null,0,h.u,[[2,h.d],[8,null],[8,null],[6,h.p]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),e.Ib(2048,null,h.q,null,[h.u]),e.qb(11,16384,null,0,h.r,[[4,h.q]],null,null),(n()(),e.rb(12,0,null,null,1,"td",[],null,null,null,null,null)),(n()(),e.Lb(13,null,["",""])),(n()(),e.rb(14,0,null,null,1,"td",[],null,null,null,null,null)),(n()(),e.Lb(15,null,["",""])),(n()(),e.rb(16,0,null,null,1,"td",[],null,null,null,null,null)),(n()(),e.Lb(17,null,["",""])),(n()(),e.rb(18,0,null,null,1,"td",[],null,null,null,null,null)),(n()(),e.Lb(19,null,["",""])),(n()(),e.rb(20,0,null,null,1,"td",[],null,null,null,null,null)),(n()(),e.Lb(21,null,["",""])),(n()(),e.rb(22,0,null,null,2,"td",[],null,null,null,null,null)),(n()(),e.rb(23,0,null,null,1,"a",[["role","button"]],null,[[null,"click"]],(function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.showFit(n.parent.context.$implicit)&&e),e}),null,null)),(n()(),e.Lb(-1,null,["fit"]))],(function(n,l){var t=n(l,3,0,l.parent.context.$implicit.isIgnored,l.parent.context.$implicit.needsAttention);n(l,2,0,t),n(l,7,0,e.vb(1,"","s_"+l.parent.context.$implicit.dataId,""),e.vb(1,"",l.context.$implicit.id,"")),n(l,9,0,e.vb(1,"","s_"+l.parent.context.$implicit.dataId,""),l.parent.context.$implicit.selected)}),(function(n,l){n(l,5,0,e.Db(l,11).ngClassUntouched,e.Db(l,11).ngClassTouched,e.Db(l,11).ngClassPristine,e.Db(l,11).ngClassDirty,e.Db(l,11).ngClassValid,e.Db(l,11).ngClassInvalid,e.Db(l,11).ngClassPending),n(l,13,0,l.context.$implicit.period),n(l,15,0,l.context.$implicit.phase),n(l,17,0,l.context.$implicit.amplitude),n(l,19,0,l.context.$implicit.GOF),n(l,21,0,l.context.$implicit.ERR)}))}function Mn(n){return e.Nb(0,[(n()(),e.rb(0,0,null,null,5,"tr",[],null,null,null,null,null)),(n()(),e.rb(1,0,null,null,4,"td",[["colspan","7"]],null,null,null,null,null)),(n()(),e.rb(2,0,null,null,1,"strong",[],null,null,null,null,null)),(n()(),e.Lb(3,null,[""," ",""])),(n()(),e.gb(16777216,null,null,1,null,Cn)),e.qb(5,16384,null,0,f.n,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(n()(),e.gb(16777216,null,null,1,null,kn)),e.qb(7,278528,null,0,f.m,[e.N,e.K,e.q],{ngForOf:[0,"ngForOf"]},null),(n()(),e.rb(8,0,null,null,9,"tr",[],null,null,null,null,null)),(n()(),e.rb(9,0,null,null,8,"td",[["colspan","7"]],null,null,null,null,null)),(n()(),e.rb(10,0,null,null,6,"input",[["type","radio"],["value","dismiss"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],(function(n,l,t){var i=!0;return"input"===l&&(i=!1!==e.Db(n,11)._handleInput(t.target.value)&&i),"blur"===l&&(i=!1!==e.Db(n,11).onTouched()&&i),"compositionstart"===l&&(i=!1!==e.Db(n,11)._compositionStart()&&i),"compositionend"===l&&(i=!1!==e.Db(n,11)._compositionEnd(t.target.value)&&i),"change"===l&&(i=!1!==e.Db(n,12).onChange()&&i),"blur"===l&&(i=!1!==e.Db(n,12).onTouched()&&i),"ngModelChange"===l&&(i=!1!==(n.context.$implicit.selected=t)&&i),i}),null,null)),e.qb(11,16384,null,0,h.e,[e.C,e.k,[2,h.a]],null,null),e.qb(12,212992,null,0,h.y,[e.C,e.k,h.E,e.p],{name:[0,"name"],value:[1,"value"]},null),e.Ib(1024,null,h.p,(function(n,l){return[n,l]}),[h.e,h.y]),e.qb(14,671744,null,0,h.u,[[2,h.d],[8,null],[8,null],[6,h.p]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),e.Ib(2048,null,h.q,null,[h.u]),e.qb(16,16384,null,0,h.r,[[4,h.q]],null,null),(n()(),e.Lb(-1,null,[" ignored "]))],(function(n,l){n(l,5,0,l.context.$implicit.needsAttention||l.context.$implicit.isIgnored),n(l,7,0,l.context.$implicit.periods),n(l,12,0,e.vb(1,"","s_"+l.context.$implicit.dataId,""),"dismiss"),n(l,14,0,e.vb(1,"","s_"+l.context.$implicit.dataId,""),l.context.$implicit.selected)}),(function(n,l){n(l,3,0,l.context.$implicit.dataRef,l.context.$implicit.label),n(l,10,0,e.Db(l,16).ngClassUntouched,e.Db(l,16).ngClassTouched,e.Db(l,16).ngClassPristine,e.Db(l,16).ngClassDirty,e.Db(l,16).ngClassValid,e.Db(l,16).ngClassInvalid,e.Db(l,16).ngClassPending)}))}function Pn(n){return e.Nb(0,[(n()(),e.rb(0,0,null,null,27,"form",[["novalidate",""],["role","form"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],(function(n,l,t){var i=!0,a=n.component;return"submit"===l&&(i=!1!==e.Db(n,2).onSubmit(t)&&i),"reset"===l&&(i=!1!==e.Db(n,2).onReset()&&i),"ngSubmit"===l&&(i=!1!==a.selectPPA(e.Db(n,2).value)&&i),i}),null,null)),e.qb(1,16384,null,0,h.H,[],null,null),e.qb(2,4210688,[["selectPPAForm",4]],0,h.t,[[8,null],[8,null]],null,{ngSubmit:"ngSubmit"}),e.Ib(2048,null,h.d,null,[h.t]),e.qb(4,16384,null,0,h.s,[[4,h.d]],null,null),(n()(),e.rb(5,0,null,null,1,"button",[["class","btn btn-primary"],["type","submit"]],[[8,"disabled",0]],null,null,null,null)),(n()(),e.Lb(-1,null,["Save selection"])),(n()(),e.rb(7,0,null,null,18,"table",[["class","table table-striped table-bordered"]],null,null,null,null,null)),(n()(),e.rb(8,0,null,null,14,"thead",[],null,null,null,null,null)),(n()(),e.rb(9,0,null,null,13,"tr",[],null,null,null,null,null)),(n()(),e.rb(10,0,null,null,0,"th",[],null,null,null,null,null)),(n()(),e.rb(11,0,null,null,1,"th",[],null,null,null,null,null)),(n()(),e.Lb(-1,null,["Period"])),(n()(),e.rb(13,0,null,null,1,"th",[],null,null,null,null,null)),(n()(),e.Lb(-1,null,["Phase"])),(n()(),e.rb(15,0,null,null,1,"th",[],null,null,null,null,null)),(n()(),e.Lb(-1,null,["Amp."])),(n()(),e.rb(17,0,null,null,1,"th",[],null,null,null,null,null)),(n()(),e.Lb(-1,null,["GOF"])),(n()(),e.rb(19,0,null,null,1,"th",[],null,null,null,null,null)),(n()(),e.Lb(-1,null,["ERR"])),(n()(),e.rb(21,0,null,null,1,"th",[],null,null,null,null,null)),(n()(),e.Lb(-1,null,["Fit"])),(n()(),e.rb(23,0,null,null,2,"tbody",[],null,null,null,null,null)),(n()(),e.gb(16777216,null,null,1,null,Mn)),e.qb(25,278528,null,0,f.m,[e.N,e.K,e.q],{ngForOf:[0,"ngForOf"]},null),(n()(),e.rb(26,0,null,null,1,"button",[["class","btn btn-primary"],["type","submit"]],[[8,"disabled",0]],null,null,null,null)),(n()(),e.Lb(-1,null,["Save selection"]))],(function(n,l){n(l,25,0,l.component.ppaGroups)}),(function(n,l){var t=l.component;n(l,0,0,e.Db(l,4).ngClassUntouched,e.Db(l,4).ngClassTouched,e.Db(l,4).ngClassPristine,e.Db(l,4).ngClassDirty,e.Db(l,4).ngClassValid,e.Db(l,4).ngClassInvalid,e.Db(l,4).ngClassPending),n(l,5,0,t.blocked),n(l,26,0,t.blocked)}))}function Sn(n){return e.Nb(0,[(n()(),e.rb(0,0,null,null,10,"div",[],null,null,null,null,null)),(n()(),e.rb(1,0,null,null,4,"h3",[],null,null,null,null,null)),(n()(),e.Lb(-1,null,["Select periods from job:"])),(n()(),e.rb(3,0,null,null,0,"br",[],null,null,null,null,null)),(n()(),e.rb(4,0,null,null,1,"small",[],null,null,null,null,null)),(n()(),e.Lb(5,null,[""," ",""])),(n()(),e.rb(6,0,null,null,0,"hr",[],null,null,null,null,null)),(n()(),e.rb(7,0,null,null,1,"bd2-selectable-fit-dialog",[],null,[[null,"selected"]],(function(n,l,t){var e=!0;return"selected"===l&&(e=!1!==n.component.markSelection(t)&&e),e}),mn,hn)),e.qb(8,114688,[[1,4]],0,dn,[sn,cn.a],null,{selected:"selected"}),(n()(),e.gb(16777216,null,null,1,null,Pn)),e.qb(10,16384,null,0,f.n,[e.N,e.K],{ngIf:[0,"ngIf"]},null)],(function(n,l){var t=l.component;n(l,8,0),n(l,10,0,t.ppaGroups)}),(function(n,l){var t=l.component;n(l,5,0,t.job.method,t.job.summary)}))}function Tn(n){return e.Nb(0,[e.Jb(671088640,1,{fitDialog:0}),(n()(),e.gb(16777216,null,null,1,null,Sn)),e.qb(2,16384,null,0,f.n,[e.N,e.K],{ngIf:[0,"ngIf"]},null)],(function(n,l){var t=l.component;n(l,2,0,t.assay&&t.job)}),null)}function In(n){return e.Nb(0,[(n()(),e.rb(0,0,null,null,1,"ng-component",[],null,null,null,Tn,Dn)),e.qb(1,245760,null,0,xn,[wn.a,W,j.a],null,null)],(function(n,l){n(l,1,0)}),null)}var An=e.nb("ng-component",xn,In,{},{},[]),qn=t("NvT6"),Nn=t("W5yJ"),On=t("/HVE"),En=t("omvX"),Rn=t("MBfO"),Ln=t("8P0U"),Bn=t("c9fC"),Fn=t("5Bek"),Un=t("zMNK"),jn=t("8bJo"),Jn=t("5GAg"),Wn=e.pb({encapsulation:2,styles:[".mat-expansion-panel{box-sizing:content-box;display:block;margin:0;border-radius:4px;overflow:hidden;transition:margin 225ms cubic-bezier(.4,0,.2,1),box-shadow 280ms cubic-bezier(.4,0,.2,1)}.mat-accordion .mat-expansion-panel:not(.mat-expanded),.mat-accordion .mat-expansion-panel:not(.mat-expansion-panel-spacing){border-radius:0}.mat-accordion .mat-expansion-panel:first-of-type{border-top-right-radius:4px;border-top-left-radius:4px}.mat-accordion .mat-expansion-panel:last-of-type{border-bottom-right-radius:4px;border-bottom-left-radius:4px}@media (-ms-high-contrast:active){.mat-expansion-panel{outline:solid 1px}}.mat-expansion-panel._mat-animation-noopable,.mat-expansion-panel.ng-animate-disabled,.ng-animate-disabled .mat-expansion-panel{transition:none}.mat-expansion-panel-content{display:flex;flex-direction:column;overflow:visible}.mat-expansion-panel-body{padding:0 24px 16px}.mat-expansion-panel-spacing{margin:16px 0}.mat-accordion>.mat-expansion-panel-spacing:first-child,.mat-accordion>:first-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-top:0}.mat-accordion>.mat-expansion-panel-spacing:last-child,.mat-accordion>:last-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-bottom:0}.mat-action-row{border-top-style:solid;border-top-width:1px;display:flex;flex-direction:row;justify-content:flex-end;padding:16px 8px 16px 24px}.mat-action-row button.mat-button-base{margin-left:8px}[dir=rtl] .mat-action-row button.mat-button-base{margin-left:0;margin-right:8px}"],data:{animation:[{type:7,name:"bodyExpansion",definitions:[{type:0,name:"collapsed, void",styles:{type:6,styles:{height:"0px",visibility:"hidden"},offset:null},options:void 0},{type:0,name:"expanded",styles:{type:6,styles:{height:"*",visibility:"visible"},offset:null},options:void 0},{type:1,expr:"expanded <=> collapsed, void => collapsed",animation:{type:4,styles:null,timings:"225ms cubic-bezier(0.4,0.0,0.2,1)"},options:null}],options:{}}]}});function Hn(n){return e.Nb(0,[(n()(),e.gb(0,null,null,0))],null,null)}function zn(n){return e.Nb(2,[e.Jb(671088640,1,{_body:0}),e.Cb(null,0),(n()(),e.rb(2,0,[[1,0],["body",1]],null,5,"div",[["class","mat-expansion-panel-content"],["role","region"]],[[24,"@bodyExpansion",0],[1,"aria-labelledby",0],[8,"id",0]],[[null,"@bodyExpansion.done"]],(function(n,l,t){var e=!0;return"@bodyExpansion.done"===l&&(e=!1!==n.component._bodyAnimationDone.next(t)&&e),e}),null,null)),(n()(),e.rb(3,0,null,null,3,"div",[["class","mat-expansion-panel-body"]],null,null,null,null,null)),e.Cb(null,1),(n()(),e.gb(16777216,null,null,1,null,Hn)),e.qb(6,212992,null,0,Un.b,[e.j,e.N],{portal:[0,"portal"]},null),e.Cb(null,2)],(function(n,l){n(l,6,0,l.component._portal)}),(function(n,l){var t=l.component;n(l,2,0,t._getExpandedState(),t._headerId,t.id)}))}var $n=e.pb({encapsulation:2,styles:[".mat-expansion-panel-header{display:flex;flex-direction:row;align-items:center;padding:0 24px;border-radius:inherit}.mat-expansion-panel-header:focus,.mat-expansion-panel-header:hover{outline:0}.mat-expansion-panel-header.mat-expanded:focus,.mat-expansion-panel-header.mat-expanded:hover{background:inherit}.mat-expansion-panel-header:not([aria-disabled=true]){cursor:pointer}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before{flex-direction:row-reverse}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 16px 0 0}[dir=rtl] .mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 0 0 16px}.mat-content{display:flex;flex:1;flex-direction:row;overflow:hidden}.mat-expansion-panel-header-description,.mat-expansion-panel-header-title{display:flex;flex-grow:1;margin-right:16px}[dir=rtl] .mat-expansion-panel-header-description,[dir=rtl] .mat-expansion-panel-header-title{margin-right:0;margin-left:16px}.mat-expansion-panel-header-description{flex-grow:2}.mat-expansion-indicator::after{border-style:solid;border-width:0 2px 2px 0;content:'';display:inline-block;padding:3px;transform:rotate(45deg);vertical-align:middle}"],data:{animation:[{type:7,name:"indicatorRotate",definitions:[{type:0,name:"collapsed, void",styles:{type:6,styles:{transform:"rotate(0deg)"},offset:null},options:void 0},{type:0,name:"expanded",styles:{type:6,styles:{transform:"rotate(180deg)"},offset:null},options:void 0},{type:1,expr:"expanded <=> collapsed, void => collapsed",animation:{type:4,styles:null,timings:"225ms cubic-bezier(0.4,0.0,0.2,1)"},options:null}],options:{}},{type:7,name:"expansionHeight",definitions:[{type:0,name:"collapsed, void",styles:{type:6,styles:{height:"{{collapsedHeight}}"},offset:null},options:{params:{collapsedHeight:"48px"}}},{type:0,name:"expanded",styles:{type:6,styles:{height:"{{expandedHeight}}"},offset:null},options:{params:{expandedHeight:"64px"}}},{type:1,expr:"expanded <=> collapsed, void => collapsed",animation:{type:3,steps:[{type:11,selector:"@indicatorRotate",animation:{type:9,options:null},options:{optional:!0}},{type:4,styles:null,timings:"225ms cubic-bezier(0.4,0.0,0.2,1)"}],options:null},options:null}],options:{}}]}});function Gn(n){return e.Nb(0,[(n()(),e.rb(0,0,null,null,0,"span",[["class","mat-expansion-indicator"]],[[24,"@indicatorRotate",0]],null,null,null,null))],null,(function(n,l){n(l,0,0,l.component._getExpandedState())}))}function Vn(n){return e.Nb(2,[(n()(),e.rb(0,0,null,null,3,"span",[["class","mat-content"]],null,null,null,null,null)),e.Cb(null,0),e.Cb(null,1),e.Cb(null,2),(n()(),e.gb(16777216,null,null,1,null,Gn)),e.qb(5,16384,null,0,f.n,[e.N,e.K],{ngIf:[0,"ngIf"]},null)],(function(n,l){n(l,5,0,l.component._showToggle())}),null)}var Kn=t("TtEo"),Yn=t("02hT");function Xn(n,l){let t;if(void 0===l)for(const e of n)null!=e&&(t<e||void 0===t&&e>=e)&&(t=e);else{let e=-1;for(let i of n)null!=(i=l(i,++e,n))&&(t<i||void 0===t&&i>=i)&&(t=i)}return t}function Zn(n,l){let t;if(void 0===l)for(const e of n)null!=e&&(t>e||void 0===t&&e>=e)&&(t=e);else{let e=-1;for(let i of n)null!=(i=l(i,++e,n))&&(t>i||void 0===t&&i>=i)&&(t=i)}return t}var Qn=function(n,l){let t,e;if(void 0===l)for(const i of n)null!=i&&(void 0===t?i>=i&&(t=e=i):(t>i&&(t=i),e<i&&(e=i)));else{let i=-1;for(let a of n)null!=(a=l(a,++i,n))&&(void 0===t?a>=a&&(t=e=a):(t>a&&(t=a),e<a&&(e=a)))}return[t,e]};function nl(n,l){let t=0,e=0;if(void 0===l)for(let i of n)null!=i&&(i=+i)>=i&&(++t,e+=i);else{let i=-1;for(let a of n)null!=(a=l(a,++i,n))&&(a=+a)>=a&&(++t,e+=a)}if(t)return e/t}var ll=function(n){return null===n?NaN:+n};function*tl(n,l){if(void 0===l)for(let t of n)null!=t&&(t=+t)>=t&&(yield t);else{let t=-1;for(let e of n)null!=(e=l(e,++t,n))&&(e=+e)>=e&&(yield e)}}var el=function(n,l){return n<l?-1:n>l?1:n>=l?0:NaN};function il(n,l,t){return function(n,l,t=ll){if(e=n.length){if((l=+l)<=0||e<2)return+t(n[0],0,n);if(l>=1)return+t(n[e-1],e-1,n);var e,i=(e-1)*l,a=Math.floor(i),r=+t(n[a],a,n);return r+(+t(n[a+1],a+1,n)-r)*(i-a)}}(Float64Array.from(tl(n,t)).sort(el),l)}function al(n,l,t=0,e=n.length-1,i=el){for(;e>t;){if(e-t>600){const a=e-t+1,r=l-t+1,u=Math.log(a),o=.5*Math.exp(2*u/3),s=.5*Math.sqrt(u*o*(a-o)/a)*(r-a/2<0?-1:1);al(n,l,Math.max(t,Math.floor(l-r*o/a+s)),Math.min(e,Math.floor(l+(a-r)*o/a+s)),i)}const a=n[l];let r=t,u=e;for(rl(n,t,l),i(n[e],a)>0&&rl(n,t,e);r<u;){for(rl(n,r,u),++r,--u;i(n[r],a)<0;)++r;for(;i(n[u],a)>0;)--u}0===i(n[t],a)?rl(n,t,u):rl(n,++u,e),u<=l&&(t=u+1),l<=u&&(e=u-1)}return n}function rl(n,l,t){const e=n[l];n[l]=n[t],n[t]=e}var ul=function(n,l){if(!(n=Float64Array.from(tl(n,l))).length)return;const t=n.length,e=t>>1;return al(n,e-1,0),0==(1&t)&&al(n,e,e),il(n,.5)};function ol(n,l){let t=0;if(void 0===l)for(let e of n)(e=+e)&&(t+=e);else{let e=-1;for(let i of n)(i=+l(i,++e,n))&&(t+=i)}return t}function sl(n,l){let t,e=0,i=0,a=0;if(void 0===l)for(let r of n)null!=r&&(r=+r)>=r&&(a+=(t=r-i)*(r-(i+=t/++e)));else{let r=-1;for(let u of n)null!=(u=l(u,++r,n))&&(u=+u)>=u&&(a+=(t=u-i)*(u-(i+=t/++e)))}if(e>1)return a/(e-1)}function cl(n,l){const t=sl(n,l);return t?Math.sqrt(t):t}function dl(n,l){const t=function(n,l=el){if(1===l.length)return function(n,l){let t,e=-1,i=-1;if(void 0===l)for(const a of n)++i,null!=a&&(t>a||void 0===t&&a>=a)&&(t=a,e=i);else for(let a of n)null!=(a=l(a,++i,n))&&(t>a||void 0===t&&a>=a)&&(t=a,e=i);return e}(n,l);let t,e=-1,i=-1;for(const a of n)++i,(e<0?0===l(a,a):l(a,t)<0)&&(t=a,e=i);return e}(n,l);return t<0?void 0:t}var hl=function(n){var l;return 1===n.length&&(l=n,n=function(n,t){return el(l(n),t)}),{left:function(l,t,e,i){for(null==e&&(e=0),null==i&&(i=l.length);e<i;){var a=e+i>>>1;n(l[a],t)<0?e=a+1:i=a}return e},right:function(l,t,e,i){for(null==e&&(e=0),null==i&&(i=l.length);e<i;){var a=e+i>>>1;n(l[a],t)>0?i=a:e=a+1}return e}}},fl=hl(el),bl=fl.right,pl=fl.left,gl=bl,ml=function(n,l){return l<n?-1:l>n?1:l>=n?0:NaN};function yl(n){return 0|n.length}function vl(n){return!(n>0)}function _l(n){return"object"!=typeof n||"length"in n?n:Array.from(n)}function xl(...n){const l="function"==typeof n[n.length-1]&&function(n){return l=>n(...l)}(n.pop()),t=(n=n.map(_l)).map(yl),e=n.length-1,i=new Array(e+1).fill(0),a=[];if(e<0||t.some(vl))return a;for(;;){a.push(i.map((l,t)=>n[t][l]));let r=e;for(;++i[r]===t[r];){if(0===r)return l?a.map(l):a;i[r--]=0}}}function wl(n){return Array.from(function*(n){for(const l of n)yield*l}(n))}function Dl(n,l=Cl){const t=[];let e,i=!1;for(const a of n)i&&t.push(l(e,a)),e=a,i=!0;return t}function Cl(n,l){return[n,l]}var kl=function(n,l){return Array.from(l,l=>n[l])},Ml=function(n,l,t){n=+n,l=+l,t=(i=arguments.length)<2?(l=n,n=0,1):i<3?1:+t;for(var e=-1,i=0|Math.max(0,Math.ceil((l-n)/t)),a=new Array(i);++e<i;)a[e]=n+e*t;return a};function Pl(n,l=0,t=n.length){for(var e,i,a=t-(l=+l);a;)i=Math.random()*a--|0,e=n[a+l],n[a+l]=n[i+l],n[i+l]=e;return n}var Sl=Math.sqrt(50),Tl=Math.sqrt(10),Il=Math.sqrt(2),Al=function(n,l,t){var e,i,a,r,u=-1;if(t=+t,(n=+n)==(l=+l)&&t>0)return[n];if((e=l<n)&&(i=n,n=l,l=i),0===(r=ql(n,l,t))||!isFinite(r))return[];if(r>0)for(n=Math.ceil(n/r),l=Math.floor(l/r),a=new Array(i=Math.ceil(l-n+1));++u<i;)a[u]=(n+u)*r;else for(n=Math.floor(n*r),l=Math.ceil(l*r),a=new Array(i=Math.ceil(n-l+1));++u<i;)a[u]=(n-u)/r;return e&&a.reverse(),a};function ql(n,l,t){var e=(l-n)/Math.max(0,t),i=Math.floor(Math.log(e)/Math.LN10),a=e/Math.pow(10,i);return i>=0?(a>=Sl?10:a>=Tl?5:a>=Il?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(a>=Sl?10:a>=Tl?5:a>=Il?2:1)}function Nl(n,l,t){var e=Math.abs(l-n)/Math.max(0,t),i=Math.pow(10,Math.floor(Math.log(e)/Math.LN10)),a=e/i;return a>=Sl?i*=10:a>=Tl?i*=5:a>=Il&&(i*=2),l<n?-i:i}var Ol=function(n){if(!(i=n.length))return[];for(var l=-1,t=Zn(n,El),e=new Array(t);++l<t;)for(var i,a=-1,r=e[l]=new Array(i);++a<i;)r[a]=n[a][l];return e};function El(n){return n.length}var Rl=function(){return Ol(arguments)},Ll=Array.prototype,Bl=Ll.slice,Fl=Ll.map,Ul=function(n){return function(){return n}},jl=function(n){return n},Jl=function(n){return Math.ceil(Math.log(n.length)/Math.LN2)+1},Wl=function(){var n=jl,l=Qn,t=Jl;function e(e){Array.isArray(e)||(e=Array.from(e));var i,a,r=e.length,u=new Array(r);for(i=0;i<r;++i)u[i]=n(e[i],i,e);var o=l(u),s=o[0],c=o[1],d=t(u,s,c);Array.isArray(d)||(d=Nl(s,c,d),d=Ml(Math.ceil(s/d)*d,c,d));for(var h=d.length;d[0]<=s;)d.shift(),--h;for(;d[h-1]>c;)d.pop(),--h;var f,b=new Array(h+1);for(i=0;i<=h;++i)(f=b[i]=[]).x0=i>0?d[i-1]:s,f.x1=i<h?d[i]:c;for(i=0;i<r;++i)s<=(a=u[i])&&a<=c&&b[gl(d,a,0,h)].push(e[i]);return b}return e.value=function(l){return arguments.length?(n="function"==typeof l?l:Ul(l),e):n},e.domain=function(n){return arguments.length?(l="function"==typeof n?n:Ul([n[0],n[1]]),e):l},e.thresholds=function(n){return arguments.length?(t="function"==typeof n?n:Array.isArray(n)?Ul(Bl.call(n)):Ul(n),e):t},e},Hl=function(n,l,t){return n=Fl.call(n,ll).sort(el),Math.ceil((t-l)/(2*(il(n,.75)-il(n,.25))*Math.pow(n.length,-1/3)))},zl=function(n,l,t){return Math.ceil((t-l)/(3.5*cl(n)*Math.pow(n.length,-1/3)))},$l=Array.prototype.slice,Gl=function(n){return n},Vl=1,Kl=2,Yl=3,Xl=4,Zl=1e-6;function Ql(n){return"translate("+(n+.5)+",0)"}function nt(n){return"translate(0,"+(n+.5)+")"}function lt(n){return function(l){return+n(l)}}function tt(n){var l=Math.max(0,n.bandwidth()-1)/2;return n.round()&&(l=Math.round(l)),function(t){return+n(t)+l}}function et(){return!this.__axis}function it(n,l){var t=[],e=null,i=null,a=6,r=6,u=3,o=n===Vl||n===Xl?-1:1,s=n===Xl||n===Kl?"x":"y",c=n===Vl||n===Yl?Ql:nt;function d(d){var h=null==e?l.ticks?l.ticks.apply(l,t):l.domain():e,f=null==i?l.tickFormat?l.tickFormat.apply(l,t):Gl:i,b=Math.max(a,0)+u,p=l.range(),g=+p[0]+.5,m=+p[p.length-1]+.5,y=(l.bandwidth?tt:lt)(l.copy()),v=d.selection?d.selection():d,_=v.selectAll(".domain").data([null]),x=v.selectAll(".tick").data(h,l).order(),w=x.exit(),D=x.enter().append("g").attr("class","tick"),C=x.select("line"),k=x.select("text");_=_.merge(_.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),x=x.merge(D),C=C.merge(D.append("line").attr("stroke","currentColor").attr(s+"2",o*a)),k=k.merge(D.append("text").attr("fill","currentColor").attr(s,o*b).attr("dy",n===Vl?"0em":n===Yl?"0.71em":"0.32em")),d!==v&&(_=_.transition(d),x=x.transition(d),C=C.transition(d),k=k.transition(d),w=w.transition(d).attr("opacity",Zl).attr("transform",(function(n){return isFinite(n=y(n))?c(n):this.getAttribute("transform")})),D.attr("opacity",Zl).attr("transform",(function(n){var l=this.parentNode.__axis;return c(l&&isFinite(l=l(n))?l:y(n))}))),w.remove(),_.attr("d",n===Xl||n==Kl?r?"M"+o*r+","+g+"H0.5V"+m+"H"+o*r:"M0.5,"+g+"V"+m:r?"M"+g+","+o*r+"V0.5H"+m+"V"+o*r:"M"+g+",0.5H"+m),x.attr("opacity",1).attr("transform",(function(n){return c(y(n))})),C.attr(s+"2",o*a),k.attr(s,o*b).text(f),v.filter(et).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",n===Kl?"start":n===Xl?"end":"middle"),v.each((function(){this.__axis=y}))}return d.scale=function(n){return arguments.length?(l=n,d):l},d.ticks=function(){return t=$l.call(arguments),d},d.tickArguments=function(n){return arguments.length?(t=null==n?[]:$l.call(n),d):t.slice()},d.tickValues=function(n){return arguments.length?(e=null==n?null:$l.call(n),d):e&&e.slice()},d.tickFormat=function(n){return arguments.length?(i=n,d):i},d.tickSize=function(n){return arguments.length?(a=r=+n,d):a},d.tickSizeInner=function(n){return arguments.length?(a=+n,d):a},d.tickSizeOuter=function(n){return arguments.length?(r=+n,d):r},d.tickPadding=function(n){return arguments.length?(u=+n,d):u},d}function at(n){return it(Vl,n)}function rt(n){return it(Kl,n)}function ut(n){return it(Yl,n)}function ot(n){return it(Xl,n)}var st=function(n,l,t){n.prototype=l.prototype=t,t.constructor=n};function ct(n,l){var t=Object.create(n.prototype);for(var e in l)t[e]=l[e];return t}function dt(){}var ht="\\s*([+-]?\\d+)\\s*",ft="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",bt="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",pt=/^#([0-9a-f]{3})$/,gt=/^#([0-9a-f]{6})$/,mt=new RegExp("^rgb\\("+[ht,ht,ht]+"\\)$"),yt=new RegExp("^rgb\\("+[bt,bt,bt]+"\\)$"),vt=new RegExp("^rgba\\("+[ht,ht,ht,ft]+"\\)$"),_t=new RegExp("^rgba\\("+[bt,bt,bt,ft]+"\\)$"),xt=new RegExp("^hsl\\("+[ft,bt,bt]+"\\)$"),wt=new RegExp("^hsla\\("+[ft,bt,bt,ft]+"\\)$"),Dt={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Ct(){return this.rgb().formatHex()}function kt(){return this.rgb().formatRgb()}function Mt(n){var l;return n=(n+"").trim().toLowerCase(),(l=pt.exec(n))?new At((l=parseInt(l[1],16))>>8&15|l>>4&240,l>>4&15|240&l,(15&l)<<4|15&l,1):(l=gt.exec(n))?Pt(parseInt(l[1],16)):(l=mt.exec(n))?new At(l[1],l[2],l[3],1):(l=yt.exec(n))?new At(255*l[1]/100,255*l[2]/100,255*l[3]/100,1):(l=vt.exec(n))?St(l[1],l[2],l[3],l[4]):(l=_t.exec(n))?St(255*l[1]/100,255*l[2]/100,255*l[3]/100,l[4]):(l=xt.exec(n))?Et(l[1],l[2]/100,l[3]/100,1):(l=wt.exec(n))?Et(l[1],l[2]/100,l[3]/100,l[4]):Dt.hasOwnProperty(n)?Pt(Dt[n]):"transparent"===n?new At(NaN,NaN,NaN,0):null}function Pt(n){return new At(n>>16&255,n>>8&255,255&n,1)}function St(n,l,t,e){return e<=0&&(n=l=t=NaN),new At(n,l,t,e)}function Tt(n){return n instanceof dt||(n=Mt(n)),n?new At((n=n.rgb()).r,n.g,n.b,n.opacity):new At}function It(n,l,t,e){return 1===arguments.length?Tt(n):new At(n,l,t,null==e?1:e)}function At(n,l,t,e){this.r=+n,this.g=+l,this.b=+t,this.opacity=+e}function qt(){return"#"+Ot(this.r)+Ot(this.g)+Ot(this.b)}function Nt(){var n=this.opacity;return(1===(n=isNaN(n)?1:Math.max(0,Math.min(1,n)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===n?")":", "+n+")")}function Ot(n){return((n=Math.max(0,Math.min(255,Math.round(n)||0)))<16?"0":"")+n.toString(16)}function Et(n,l,t,e){return e<=0?n=l=t=NaN:t<=0||t>=1?n=l=NaN:l<=0&&(n=NaN),new Bt(n,l,t,e)}function Rt(n){if(n instanceof Bt)return new Bt(n.h,n.s,n.l,n.opacity);if(n instanceof dt||(n=Mt(n)),!n)return new Bt;if(n instanceof Bt)return n;var l=(n=n.rgb()).r/255,t=n.g/255,e=n.b/255,i=Math.min(l,t,e),a=Math.max(l,t,e),r=NaN,u=a-i,o=(a+i)/2;return u?(r=l===a?(t-e)/u+6*(t<e):t===a?(e-l)/u+2:(l-t)/u+4,u/=o<.5?a+i:2-a-i,r*=60):u=o>0&&o<1?0:r,new Bt(r,u,o,n.opacity)}function Lt(n,l,t,e){return 1===arguments.length?Rt(n):new Bt(n,l,t,null==e?1:e)}function Bt(n,l,t,e){this.h=+n,this.s=+l,this.l=+t,this.opacity=+e}function Ft(n,l,t){return 255*(n<60?l+(t-l)*n/60:n<180?t:n<240?l+(t-l)*(240-n)/60:l)}st(dt,Mt,{copy:function(n){return Object.assign(new this.constructor,this,n)},displayable:function(){return this.rgb().displayable()},hex:Ct,formatHex:Ct,formatHsl:function(){return Rt(this).formatHsl()},formatRgb:kt,toString:kt}),st(At,It,ct(dt,{brighter:function(n){return n=null==n?1/.7:Math.pow(1/.7,n),new At(this.r*n,this.g*n,this.b*n,this.opacity)},darker:function(n){return n=null==n?.7:Math.pow(.7,n),new At(this.r*n,this.g*n,this.b*n,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:qt,formatHex:qt,formatRgb:Nt,toString:Nt})),st(Bt,Lt,ct(dt,{brighter:function(n){return n=null==n?1/.7:Math.pow(1/.7,n),new Bt(this.h,this.s,this.l*n,this.opacity)},darker:function(n){return n=null==n?.7:Math.pow(.7,n),new Bt(this.h,this.s,this.l*n,this.opacity)},rgb:function(){var n=this.h%360+360*(this.h<0),l=isNaN(n)||isNaN(this.s)?0:this.s,t=this.l,e=t+(t<.5?t:1-t)*l,i=2*t-e;return new At(Ft(n>=240?n-240:n+120,i,e),Ft(n,i,e),Ft(n<120?n+240:n-120,i,e),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var n=this.opacity;return(1===(n=isNaN(n)?1:Math.max(0,Math.min(1,n)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===n?")":", "+n+")")}}));var Ut=Math.PI/180,jt=180/Math.PI,Jt=.96422,Wt=1,Ht=.82521,zt=4/29,$t=6/29,Gt=3*$t*$t,Vt=$t*$t*$t;function Kt(n){if(n instanceof Yt)return new Yt(n.l,n.a,n.b,n.opacity);if(n instanceof te)return ee(n);n instanceof At||(n=Tt(n));var l,t,e=ne(n.r),i=ne(n.g),a=ne(n.b),r=Xt((.2225045*e+.7168786*i+.0606169*a)/Wt);return e===i&&i===a?l=t=r:(l=Xt((.4360747*e+.3850649*i+.1430804*a)/Jt),t=Xt((.0139322*e+.0971045*i+.7141733*a)/Ht)),new Yt(116*r-16,500*(l-r),200*(r-t),n.opacity)}function Yt(n,l,t,e){this.l=+n,this.a=+l,this.b=+t,this.opacity=+e}function Xt(n){return n>Vt?Math.pow(n,1/3):n/Gt+zt}function Zt(n){return n>$t?n*n*n:Gt*(n-zt)}function Qt(n){return 255*(n<=.0031308?12.92*n:1.055*Math.pow(n,1/2.4)-.055)}function ne(n){return(n/=255)<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function le(n,l,t,e){return 1===arguments.length?function(n){if(n instanceof te)return new te(n.h,n.c,n.l,n.opacity);if(n instanceof Yt||(n=Kt(n)),0===n.a&&0===n.b)return new te(NaN,0<n.l&&n.l<100?0:NaN,n.l,n.opacity);var l=Math.atan2(n.b,n.a)*jt;return new te(l<0?l+360:l,Math.sqrt(n.a*n.a+n.b*n.b),n.l,n.opacity)}(n):new te(n,l,t,null==e?1:e)}function te(n,l,t,e){this.h=+n,this.c=+l,this.l=+t,this.opacity=+e}function ee(n){if(isNaN(n.h))return new Yt(n.l,0,0,n.opacity);var l=n.h*Ut;return new Yt(n.l,Math.cos(l)*n.c,Math.sin(l)*n.c,n.opacity)}st(Yt,(function(n,l,t,e){return 1===arguments.length?Kt(n):new Yt(n,l,t,null==e?1:e)}),ct(dt,{brighter:function(n){return new Yt(this.l+18*(null==n?1:n),this.a,this.b,this.opacity)},darker:function(n){return new Yt(this.l-18*(null==n?1:n),this.a,this.b,this.opacity)},rgb:function(){var n=(this.l+16)/116,l=isNaN(this.a)?n:n+this.a/500,t=isNaN(this.b)?n:n-this.b/200;return new At(Qt(3.1338561*(l=Jt*Zt(l))-1.6168667*(n=Wt*Zt(n))-.4906146*(t=Ht*Zt(t))),Qt(-.9787684*l+1.9161415*n+.033454*t),Qt(.0719453*l-.2289914*n+1.4052427*t),this.opacity)}})),st(te,le,ct(dt,{brighter:function(n){return new te(this.h,this.c,this.l+18*(null==n?1:n),this.opacity)},darker:function(n){return new te(this.h,this.c,this.l-18*(null==n?1:n),this.opacity)},rgb:function(){return ee(this).rgb()}}));var ie=1.78277,ae=-.29227,re=-.90649,ue=1.97294,oe=ue*re,se=ue*ie,ce=ie*ae- -.14861*re;function de(n,l,t,e){return 1===arguments.length?function(n){if(n instanceof he)return new he(n.h,n.s,n.l,n.opacity);n instanceof At||(n=Tt(n));var l=n.g/255,t=n.b/255,e=(ce*t+oe*(n.r/255)-se*l)/(ce+oe-se),i=t-e,a=(ue*(l-e)-ae*i)/re,r=Math.sqrt(a*a+i*i)/(ue*e*(1-e)),u=r?Math.atan2(a,i)*jt-120:NaN;return new he(u<0?u+360:u,r,e,n.opacity)}(n):new he(n,l,t,null==e?1:e)}function he(n,l,t,e){this.h=+n,this.s=+l,this.l=+t,this.opacity=+e}function fe(n,l,t,e,i){var a=n*n,r=a*n;return((1-3*n+3*a-r)*l+(4-6*a+3*r)*t+(1+3*n+3*a-3*r)*e+r*i)/6}st(he,de,ct(dt,{brighter:function(n){return n=null==n?1/.7:Math.pow(1/.7,n),new he(this.h,this.s,this.l*n,this.opacity)},darker:function(n){return n=null==n?.7:Math.pow(.7,n),new he(this.h,this.s,this.l*n,this.opacity)},rgb:function(){var n=isNaN(this.h)?0:(this.h+120)*Ut,l=+this.l,t=isNaN(this.s)?0:this.s*l*(1-l),e=Math.cos(n),i=Math.sin(n);return new At(255*(l+t*(-.14861*e+ie*i)),255*(l+t*(ae*e+re*i)),255*(l+t*(ue*e)),this.opacity)}}));var be=function(n){return function(){return n}};function pe(n,l){return function(t){return n+t*l}}function ge(n,l){var t=l-n;return t?pe(n,t>180||t<-180?t-360*Math.round(t/360):t):be(isNaN(n)?l:n)}function me(n,l){var t=l-n;return t?pe(n,t):be(isNaN(n)?l:n)}var ye=function n(l){var t=function(n){return 1==(n=+n)?me:function(l,t){return t-l?function(n,l,t){return n=Math.pow(n,t),l=Math.pow(l,t)-n,t=1/t,function(e){return Math.pow(n+e*l,t)}}(l,t,n):be(isNaN(l)?t:l)}}(l);function e(n,l){var e=t((n=It(n)).r,(l=It(l)).r),i=t(n.g,l.g),a=t(n.b,l.b),r=me(n.opacity,l.opacity);return function(l){return n.r=e(l),n.g=i(l),n.b=a(l),n.opacity=r(l),n+""}}return e.gamma=n,e}(1);function ve(n){return function(l){var t,e,i=l.length,a=new Array(i),r=new Array(i),u=new Array(i);for(t=0;t<i;++t)e=It(l[t]),a[t]=e.r||0,r[t]=e.g||0,u[t]=e.b||0;return a=n(a),r=n(r),u=n(u),e.opacity=1,function(n){return e.r=a(n),e.g=r(n),e.b=u(n),e+""}}}var _e,xe,we,De,Ce=ve((function(n){var l=n.length-1;return function(t){var e=t<=0?t=0:t>=1?(t=1,l-1):Math.floor(t*l),i=n[e],a=n[e+1];return fe((t-e/l)*l,e>0?n[e-1]:2*i-a,i,a,e<l-1?n[e+2]:2*a-i)}})),ke=(ve((function(n){var l=n.length;return function(t){var e=Math.floor(((t%=1)<0?++t:t)*l);return fe((t-e/l)*l,n[(e+l-1)%l],n[e%l],n[(e+1)%l],n[(e+2)%l])}})),function(n,l){var t,e=l?l.length:0,i=n?Math.min(e,n.length):0,a=new Array(i),r=new Array(e);for(t=0;t<i;++t)a[t]=qe(n[t],l[t]);for(;t<e;++t)r[t]=l[t];return function(n){for(t=0;t<i;++t)r[t]=a[t](n);return r}}),Me=function(n,l){var t=new Date;return l-=n=+n,function(e){return t.setTime(n+l*e),t}},Pe=function(n,l){return l-=n=+n,function(t){return n+l*t}},Se=function(n,l){var t,e={},i={};for(t in null!==n&&"object"==typeof n||(n={}),null!==l&&"object"==typeof l||(l={}),l)t in n?e[t]=qe(n[t],l[t]):i[t]=l[t];return function(n){for(t in e)i[t]=e[t](n);return i}},Te=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ie=new RegExp(Te.source,"g"),Ae=function(n,l){var t,e,i,a=Te.lastIndex=Ie.lastIndex=0,r=-1,u=[],o=[];for(n+="",l+="";(t=Te.exec(n))&&(e=Ie.exec(l));)(i=e.index)>a&&(i=l.slice(a,i),u[r]?u[r]+=i:u[++r]=i),(t=t[0])===(e=e[0])?u[r]?u[r]+=e:u[++r]=e:(u[++r]=null,o.push({i:r,x:Pe(t,e)})),a=Ie.lastIndex;return a<l.length&&(i=l.slice(a),u[r]?u[r]+=i:u[++r]=i),u.length<2?o[0]?function(n){return function(l){return n(l)+""}}(o[0].x):function(n){return function(){return n}}(l):(l=o.length,function(n){for(var t,e=0;e<l;++e)u[(t=o[e]).i]=t.x(n);return u.join("")})},qe=function(n,l){var t,e=typeof l;return null==l||"boolean"===e?be(l):("number"===e?Pe:"string"===e?(t=Mt(l))?(l=t,ye):Ae:l instanceof Mt?ye:l instanceof Date?Me:Array.isArray(l)?ke:"function"!=typeof l.valueOf&&"function"!=typeof l.toString||isNaN(l)?Se:Pe)(n,l)},Ne=function(n,l){return l-=n=+n,function(t){return Math.round(n+l*t)}},Oe=180/Math.PI,Ee={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},Re=function(n,l,t,e,i,a){var r,u,o;return(r=Math.sqrt(n*n+l*l))&&(n/=r,l/=r),(o=n*t+l*e)&&(t-=n*o,e-=l*o),(u=Math.sqrt(t*t+e*e))&&(t/=u,e/=u,o/=u),n*e<l*t&&(n=-n,l=-l,o=-o,r=-r),{translateX:i,translateY:a,rotate:Math.atan2(l,n)*Oe,skewX:Math.atan(o)*Oe,scaleX:r,scaleY:u}};function Le(n,l,t,e){function i(n){return n.length?n.pop()+" ":""}return function(a,r){var u=[],o=[];return a=n(a),r=n(r),function(n,e,i,a,r,u){if(n!==i||e!==a){var o=r.push("translate(",null,l,null,t);u.push({i:o-4,x:Pe(n,i)},{i:o-2,x:Pe(e,a)})}else(i||a)&&r.push("translate("+i+l+a+t)}(a.translateX,a.translateY,r.translateX,r.translateY,u,o),function(n,l,t,a){n!==l?(n-l>180?l+=360:l-n>180&&(n+=360),a.push({i:t.push(i(t)+"rotate(",null,e)-2,x:Pe(n,l)})):l&&t.push(i(t)+"rotate("+l+e)}(a.rotate,r.rotate,u,o),function(n,l,t,a){n!==l?a.push({i:t.push(i(t)+"skewX(",null,e)-2,x:Pe(n,l)}):l&&t.push(i(t)+"skewX("+l+e)}(a.skewX,r.skewX,u,o),function(n,l,t,e,a,r){if(n!==t||l!==e){var u=a.push(i(a)+"scale(",null,",",null,")");r.push({i:u-4,x:Pe(n,t)},{i:u-2,x:Pe(l,e)})}else 1===t&&1===e||a.push(i(a)+"scale("+t+","+e+")")}(a.scaleX,a.scaleY,r.scaleX,r.scaleY,u,o),a=r=null,function(n){for(var l,t=-1,e=o.length;++t<e;)u[(l=o[t]).i]=l.x(n);return u.join("")}}}var Be=Le((function(n){return"none"===n?Ee:(_e||(_e=document.createElement("DIV"),xe=document.documentElement,we=document.defaultView),_e.style.transform=n,n=we.getComputedStyle(xe.appendChild(_e),null).getPropertyValue("transform"),xe.removeChild(_e),n=n.slice(7,-1).split(","),Re(+n[0],+n[1],+n[2],+n[3],+n[4],+n[5]))}),"px, ","px)","deg)"),Fe=Le((function(n){return null==n?Ee:(De||(De=document.createElementNS("http://www.w3.org/2000/svg","g")),De.setAttribute("transform",n),(n=De.transform.baseVal.consolidate())?Re((n=n.matrix).a,n.b,n.c,n.d,n.e,n.f):Ee)}),", ",")",")");function Ue(n){return function(l,t){var e=n((l=Lt(l)).h,(t=Lt(t)).h),i=me(l.s,t.s),a=me(l.l,t.l),r=me(l.opacity,t.opacity);return function(n){return l.h=e(n),l.s=i(n),l.l=a(n),l.opacity=r(n),l+""}}}function je(n){return function(l,t){var e=n((l=le(l)).h,(t=le(t)).h),i=me(l.c,t.c),a=me(l.l,t.l),r=me(l.opacity,t.opacity);return function(n){return l.h=e(n),l.c=i(n),l.l=a(n),l.opacity=r(n),l+""}}}function Je(n){return function l(t){function e(l,e){var i=n((l=de(l)).h,(e=de(e)).h),a=me(l.s,e.s),r=me(l.l,e.l),u=me(l.opacity,e.opacity);return function(n){return l.h=i(n),l.s=a(n),l.l=r(Math.pow(n,t)),l.opacity=u(n),l+""}}return t=+t,e.gamma=l,e}(1)}Math,Ue(ge),Ue(me),je(ge),je(me),Je(ge);var We=Je(me),He=function(n){return function(){return n}},ze=function(n){return+n},$e=[0,1];function Ge(n){return n}function Ve(n,l){return(l-=n=+n)?function(t){return(t-n)/l}:He(isNaN(l)?NaN:.5)}function Ke(n,l,t){var e=n[0],i=n[1],a=l[0],r=l[1];return i<e?(e=Ve(i,e),a=t(r,a)):(e=Ve(e,i),a=t(a,r)),function(n){return a(e(n))}}function Ye(n,l,t){var e=Math.min(n.length,l.length)-1,i=new Array(e),a=new Array(e),r=-1;for(n[e]<n[0]&&(n=n.slice().reverse(),l=l.slice().reverse());++r<e;)i[r]=Ve(n[r],n[r+1]),a[r]=t(l[r],l[r+1]);return function(l){var t=gl(n,l,1,e)-1;return a[t](i[t](l))}}function Xe(n,l){return l.domain(n.domain()).range(n.range()).interpolate(n.interpolate()).clamp(n.clamp()).unknown(n.unknown())}function Ze(){var n,l,t,e,i,a,r=$e,u=$e,o=qe,s=Ge;function c(){var n,l,t,o=Math.min(r.length,u.length);return s!==Ge&&((n=r[0])>(l=r[o-1])&&(t=n,n=l,l=t),s=function(t){return Math.max(n,Math.min(l,t))}),e=o>2?Ye:Ke,i=a=null,d}function d(l){return isNaN(l=+l)?t:(i||(i=e(r.map(n),u,o)))(n(s(l)))}return d.invert=function(t){return s(l((a||(a=e(u,r.map(n),Pe)))(t)))},d.domain=function(n){return arguments.length?(r=Array.from(n,ze),c()):r.slice()},d.range=function(n){return arguments.length?(u=Array.from(n),c()):u.slice()},d.rangeRound=function(n){return u=Array.from(n),o=Ne,c()},d.clamp=function(n){return arguments.length?(s=!!n||Ge,c()):s!==Ge},d.interpolate=function(n){return arguments.length?(o=n,c()):o},d.unknown=function(n){return arguments.length?(t=n,d):t},function(t,e){return n=t,l=e,c()}}function Qe(){return Ze()(Ge,Ge)}function ni(n,l){switch(arguments.length){case 0:break;case 1:this.range(n);break;default:this.range(l).domain(n)}return this}function li(n,l){switch(arguments.length){case 0:break;case 1:this.interpolator(n);break;default:this.interpolator(l).domain(n)}return this}var ti=function(n,l){if((t=(n=l?n.toExponential(l-1):n.toExponential()).indexOf("e"))<0)return null;var t,e=n.slice(0,t);return[e.length>1?e[0]+e.slice(2):e,+n.slice(t+1)]},ei=function(n){return(n=ti(Math.abs(n)))?n[1]:NaN},ii=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ai(n){if(!(l=ii.exec(n)))throw new Error("invalid format: "+n);var l;return new ri({fill:l[1],align:l[2],sign:l[3],symbol:l[4],zero:l[5],width:l[6],comma:l[7],precision:l[8]&&l[8].slice(1),trim:l[9],type:l[10]})}function ri(n){this.fill=void 0===n.fill?" ":n.fill+"",this.align=void 0===n.align?">":n.align+"",this.sign=void 0===n.sign?"-":n.sign+"",this.symbol=void 0===n.symbol?"":n.symbol+"",this.zero=!!n.zero,this.width=void 0===n.width?void 0:+n.width,this.comma=!!n.comma,this.precision=void 0===n.precision?void 0:+n.precision,this.trim=!!n.trim,this.type=void 0===n.type?"":n.type+""}ai.prototype=ri.prototype,ri.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var ui,oi,si,ci,di=function(n){n:for(var l,t=n.length,e=1,i=-1;e<t;++e)switch(n[e]){case".":i=l=e;break;case"0":0===i&&(i=e),l=e;break;default:if(i>0){if(!+n[e])break n;i=0}}return i>0?n.slice(0,i)+n.slice(l+1):n},hi=function(n,l){var t=ti(n,l);if(!t)return n+"";var e=t[0],i=t[1];return i<0?"0."+new Array(-i).join("0")+e:e.length>i+1?e.slice(0,i+1)+"."+e.slice(i+1):e+new Array(i-e.length+2).join("0")},fi={"%":function(n,l){return(100*n).toFixed(l)},b:function(n){return Math.round(n).toString(2)},c:function(n){return n+""},d:function(n){return Math.round(n).toString(10)},e:function(n,l){return n.toExponential(l)},f:function(n,l){return n.toFixed(l)},g:function(n,l){return n.toPrecision(l)},o:function(n){return Math.round(n).toString(8)},p:function(n,l){return hi(100*n,l)},r:hi,s:function(n,l){var t=ti(n,l);if(!t)return n+"";var e=t[0],i=t[1],a=i-(ui=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,r=e.length;return a===r?e:a>r?e+new Array(a-r+1).join("0"):a>0?e.slice(0,a)+"."+e.slice(a):"0."+new Array(1-a).join("0")+ti(n,Math.max(0,l+a-1))[0]},X:function(n){return Math.round(n).toString(16).toUpperCase()},x:function(n){return Math.round(n).toString(16)}},bi=function(n){return n},pi=Array.prototype.map,gi=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];oi=function(n){var l,t,e=void 0===n.grouping||void 0===n.thousands?bi:(l=pi.call(n.grouping,Number),t=n.thousands+"",function(n,e){for(var i=n.length,a=[],r=0,u=l[0],o=0;i>0&&u>0&&(o+u+1>e&&(u=Math.max(1,e-o)),a.push(n.substring(i-=u,i+u)),!((o+=u+1)>e));)u=l[r=(r+1)%l.length];return a.reverse().join(t)}),i=void 0===n.currency?"":n.currency[0]+"",a=void 0===n.currency?"":n.currency[1]+"",r=void 0===n.decimal?".":n.decimal+"",u=void 0===n.numerals?bi:function(n){return function(l){return l.replace(/[0-9]/g,(function(l){return n[+l]}))}}(pi.call(n.numerals,String)),o=void 0===n.percent?"%":n.percent+"",s=void 0===n.minus?"-":n.minus+"",c=void 0===n.nan?"NaN":n.nan+"";function d(n){var l=(n=ai(n)).fill,t=n.align,d=n.sign,h=n.symbol,f=n.zero,b=n.width,p=n.comma,g=n.precision,m=n.trim,y=n.type;"n"===y?(p=!0,y="g"):fi[y]||(void 0===g&&(g=12),m=!0,y="g"),(f||"0"===l&&"="===t)&&(f=!0,l="0",t="=");var v="$"===h?i:"#"===h&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",_="$"===h?a:/[%p]/.test(y)?o:"",x=fi[y],w=/[defgprs%]/.test(y);function D(n){var i,a,o,h=v,D=_;if("c"===y)D=x(n)+D,n="";else{var C=(n=+n)<0;if(n=isNaN(n)?c:x(Math.abs(n),g),m&&(n=di(n)),C&&0==+n&&(C=!1),h=(C?"("===d?d:s:"-"===d||"("===d?"":d)+h,D=("s"===y?gi[8+ui/3]:"")+D+(C&&"("===d?")":""),w)for(i=-1,a=n.length;++i<a;)if(48>(o=n.charCodeAt(i))||o>57){D=(46===o?r+n.slice(i+1):n.slice(i))+D,n=n.slice(0,i);break}}p&&!f&&(n=e(n,1/0));var k=h.length+n.length+D.length,M=k<b?new Array(b-k+1).join(l):"";switch(p&&f&&(n=e(M+n,M.length?b-D.length:1/0),M=""),t){case"<":n=h+n+D+M;break;case"=":n=h+M+n+D;break;case"^":n=M.slice(0,k=M.length>>1)+h+n+D+M.slice(k);break;default:n=M+h+n+D}return u(n)}return g=void 0===g?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),D.toString=function(){return n+""},D}return{format:d,formatPrefix:function(n,l){var t=d(((n=ai(n)).type="f",n)),e=3*Math.max(-8,Math.min(8,Math.floor(ei(l)/3))),i=Math.pow(10,-e),a=gi[8+e/3];return function(n){return t(i*n)+a}}}}({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),si=oi.format,ci=oi.formatPrefix;var mi=function(n,l,t,e){var i,a=Nl(n,l,t);switch((e=ai(null==e?",f":e)).type){case"s":var r=Math.max(Math.abs(n),Math.abs(l));return null!=e.precision||isNaN(i=function(n,l){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(ei(l)/3)))-ei(Math.abs(n)))}(a,r))||(e.precision=i),ci(e,r);case"":case"e":case"g":case"p":case"r":null!=e.precision||isNaN(i=function(n,l){return n=Math.abs(n),l=Math.abs(l)-n,Math.max(0,ei(l)-ei(n))+1}(a,Math.max(Math.abs(n),Math.abs(l))))||(e.precision=i-("e"===e.type));break;case"f":case"%":null!=e.precision||isNaN(i=function(n){return Math.max(0,-ei(Math.abs(n)))}(a))||(e.precision=i-2*("%"===e.type))}return si(e)};function yi(n){var l=n.domain;return n.ticks=function(n){var t=l();return Al(t[0],t[t.length-1],null==n?10:n)},n.tickFormat=function(n,t){var e=l();return mi(e[0],e[e.length-1],null==n?10:n,t)},n.nice=function(t){null==t&&(t=10);var e,i=l(),a=0,r=i.length-1,u=i[a],o=i[r];return o<u&&(e=u,u=o,o=e,e=a,a=r,r=e),(e=ql(u,o,t))>0?e=ql(u=Math.floor(u/e)*e,o=Math.ceil(o/e)*e,t):e<0&&(e=ql(u=Math.ceil(u*e)/e,o=Math.floor(o*e)/e,t)),e>0?(i[a]=Math.floor(u/e)*e,i[r]=Math.ceil(o/e)*e,l(i)):e<0&&(i[a]=Math.ceil(u*e)/e,i[r]=Math.floor(o*e)/e,l(i)),n},n}function vi(){var n=Qe();return n.copy=function(){return Xe(n,vi())},ni.apply(n,arguments),yi(n)}function _i(n){return function(l){return l<0?-Math.pow(-l,n):Math.pow(l,n)}}function xi(n){return n<0?-Math.sqrt(-n):Math.sqrt(n)}function wi(n){return n<0?-n*n:n*n}function Di(){var n=function(n){var l=n(Ge,Ge),t=1;function e(){return 1===t?n(Ge,Ge):.5===t?n(xi,wi):n(_i(t),_i(1/t))}return l.exponent=function(n){return arguments.length?(t=+n,e()):t},yi(l)}(Ze());return n.copy=function(){return Xe(n,Di()).exponent(n.exponent())},ni.apply(n,arguments),n}function Ci(){return Di.apply(null,arguments).exponent(.5)}var ki=function(n,l){var t,e=0,i=(n=n.slice()).length-1,a=n[e],r=n[i];return r<a&&(t=e,e=i,i=t,t=a,a=r,r=t),n[e]=l.floor(a),n[i]=l.ceil(r),n};function Mi(n){return Math.log(n)}function Pi(n){return Math.exp(n)}function Si(n){return-Math.log(-n)}function Ti(n){return-Math.exp(-n)}function Ii(n){return isFinite(n)?+("1e"+n):n<0?0:n}function Ai(n){return function(l){return-n(-l)}}function qi(){var n=function(n){var l,t,e=n(Mi,Pi),i=e.domain,a=10;function r(){return l=function(n){return n===Math.E?Math.log:10===n&&Math.log10||2===n&&Math.log2||(n=Math.log(n),function(l){return Math.log(l)/n})}(a),t=function(n){return 10===n?Ii:n===Math.E?Math.exp:function(l){return Math.pow(n,l)}}(a),i()[0]<0?(l=Ai(l),t=Ai(t),n(Si,Ti)):n(Mi,Pi),e}return e.base=function(n){return arguments.length?(a=+n,r()):a},e.domain=function(n){return arguments.length?(i(n),r()):i()},e.ticks=function(n){var e,r=i(),u=r[0],o=r[r.length-1];(e=o<u)&&(h=u,u=o,o=h);var s,c,d,h=l(u),f=l(o),b=null==n?10:+n,p=[];if(!(a%1)&&f-h<b){if(h=Math.floor(h),f=Math.ceil(f),u>0){for(;h<=f;++h)for(c=1,s=t(h);c<a;++c)if(!((d=s*c)<u)){if(d>o)break;p.push(d)}}else for(;h<=f;++h)for(c=a-1,s=t(h);c>=1;--c)if(!((d=s*c)<u)){if(d>o)break;p.push(d)}p.length||(p=Al(u,o,b))}else p=Al(h,f,Math.min(f-h,b)).map(t);return e?p.reverse():p},e.tickFormat=function(n,i){if(null==i&&(i=10===a?".0e":","),"function"!=typeof i&&(i=si(i)),n===1/0)return i;null==n&&(n=10);var r=Math.max(1,a*n/e.ticks().length);return function(n){var e=n/t(Math.round(l(n)));return e*a<a-.5&&(e*=a),e<=r?i(n):""}},e.nice=function(){return i(ki(i(),{floor:function(n){return t(Math.floor(l(n)))},ceil:function(n){return t(Math.ceil(l(n)))}}))},e}(Ze()).domain([1,10]);return n.copy=function(){return Xe(n,qi()).base(n.base())},ni.apply(n,arguments),n}function Ni(n){var l;function t(n){return isNaN(n=+n)?l:n}return t.invert=t,t.domain=t.range=function(l){return arguments.length?(n=Array.from(l,ze),t):n.slice()},t.unknown=function(n){return arguments.length?(l=n,t):l},t.copy=function(){return Ni(n).unknown(l)},n=arguments.length?Array.from(n,ze):[0,1],yi(t)}var Oi=new Date,Ei=new Date;function Ri(n,l,t,e){function i(l){return n(l=new Date(+l)),l}return i.floor=i,i.ceil=function(t){return n(t=new Date(t-1)),l(t,1),n(t),t},i.round=function(n){var l=i(n),t=i.ceil(n);return n-l<t-n?l:t},i.offset=function(n,t){return l(n=new Date(+n),null==t?1:Math.floor(t)),n},i.range=function(t,e,a){var r,u=[];if(t=i.ceil(t),a=null==a?1:Math.floor(a),!(t<e&&a>0))return u;do{u.push(r=new Date(+t)),l(t,a),n(t)}while(r<t&&t<e);return u},i.filter=function(t){return Ri((function(l){if(l>=l)for(;n(l),!t(l);)l.setTime(l-1)}),(function(n,e){if(n>=n)if(e<0)for(;++e<=0;)for(;l(n,-1),!t(n););else for(;--e>=0;)for(;l(n,1),!t(n););}))},t&&(i.count=function(l,e){return Oi.setTime(+l),Ei.setTime(+e),n(Oi),n(Ei),Math.floor(t(Oi,Ei))},i.every=function(n){return n=Math.floor(n),isFinite(n)&&n>0?n>1?i.filter(e?function(l){return e(l)%n==0}:function(l){return i.count(0,l)%n==0}):i:null}),i}var Li=Ri((function(){}),(function(n,l){n.setTime(+n+l)}),(function(n,l){return l-n}));Li.every=function(n){return n=Math.floor(n),isFinite(n)&&n>0?n>1?Ri((function(l){l.setTime(Math.floor(l/n)*n)}),(function(l,t){l.setTime(+l+t*n)}),(function(l,t){return(t-l)/n})):Li:null};var Bi=Li,Fi=6e4,Ui=6048e5,ji=Ri((function(n){n.setTime(n-n.getMilliseconds())}),(function(n,l){n.setTime(+n+1e3*l)}),(function(n,l){return(l-n)/1e3}),(function(n){return n.getUTCSeconds()})),Ji=Ri((function(n){n.setTime(n-n.getMilliseconds()-1e3*n.getSeconds())}),(function(n,l){n.setTime(+n+l*Fi)}),(function(n,l){return(l-n)/Fi}),(function(n){return n.getMinutes()})),Wi=Ri((function(n){n.setTime(n-n.getMilliseconds()-1e3*n.getSeconds()-n.getMinutes()*Fi)}),(function(n,l){n.setTime(+n+36e5*l)}),(function(n,l){return(l-n)/36e5}),(function(n){return n.getHours()})),Hi=Ri((function(n){n.setHours(0,0,0,0)}),(function(n,l){n.setDate(n.getDate()+l)}),(function(n,l){return(l-n-(l.getTimezoneOffset()-n.getTimezoneOffset())*Fi)/864e5}),(function(n){return n.getDate()-1}));function zi(n){return Ri((function(l){l.setDate(l.getDate()-(l.getDay()+7-n)%7),l.setHours(0,0,0,0)}),(function(n,l){n.setDate(n.getDate()+7*l)}),(function(n,l){return(l-n-(l.getTimezoneOffset()-n.getTimezoneOffset())*Fi)/Ui}))}var $i=zi(0),Gi=zi(1),Vi=(zi(2),zi(3),zi(4)),Ki=(zi(5),zi(6),Ri((function(n){n.setDate(1),n.setHours(0,0,0,0)}),(function(n,l){n.setMonth(n.getMonth()+l)}),(function(n,l){return l.getMonth()-n.getMonth()+12*(l.getFullYear()-n.getFullYear())}),(function(n){return n.getMonth()}))),Yi=Ri((function(n){n.setMonth(0,1),n.setHours(0,0,0,0)}),(function(n,l){n.setFullYear(n.getFullYear()+l)}),(function(n,l){return l.getFullYear()-n.getFullYear()}),(function(n){return n.getFullYear()}));Yi.every=function(n){return isFinite(n=Math.floor(n))&&n>0?Ri((function(l){l.setFullYear(Math.floor(l.getFullYear()/n)*n),l.setMonth(0,1),l.setHours(0,0,0,0)}),(function(l,t){l.setFullYear(l.getFullYear()+t*n)})):null};var Xi=Yi,Zi=Ri((function(n){n.setUTCSeconds(0,0)}),(function(n,l){n.setTime(+n+l*Fi)}),(function(n,l){return(l-n)/Fi}),(function(n){return n.getUTCMinutes()})),Qi=Ri((function(n){n.setUTCMinutes(0,0,0)}),(function(n,l){n.setTime(+n+36e5*l)}),(function(n,l){return(l-n)/36e5}),(function(n){return n.getUTCHours()})),na=Ri((function(n){n.setUTCHours(0,0,0,0)}),(function(n,l){n.setUTCDate(n.getUTCDate()+l)}),(function(n,l){return(l-n)/864e5}),(function(n){return n.getUTCDate()-1}));function la(n){return Ri((function(l){l.setUTCDate(l.getUTCDate()-(l.getUTCDay()+7-n)%7),l.setUTCHours(0,0,0,0)}),(function(n,l){n.setUTCDate(n.getUTCDate()+7*l)}),(function(n,l){return(l-n)/Ui}))}var ta=la(0),ea=la(1),ia=(la(2),la(3),la(4)),aa=(la(5),la(6),Ri((function(n){n.setUTCDate(1),n.setUTCHours(0,0,0,0)}),(function(n,l){n.setUTCMonth(n.getUTCMonth()+l)}),(function(n,l){return l.getUTCMonth()-n.getUTCMonth()+12*(l.getUTCFullYear()-n.getUTCFullYear())}),(function(n){return n.getUTCMonth()}))),ra=Ri((function(n){n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)}),(function(n,l){n.setUTCFullYear(n.getUTCFullYear()+l)}),(function(n,l){return l.getUTCFullYear()-n.getUTCFullYear()}),(function(n){return n.getUTCFullYear()}));ra.every=function(n){return isFinite(n=Math.floor(n))&&n>0?Ri((function(l){l.setUTCFullYear(Math.floor(l.getUTCFullYear()/n)*n),l.setUTCMonth(0,1),l.setUTCHours(0,0,0,0)}),(function(l,t){l.setUTCFullYear(l.getUTCFullYear()+t*n)})):null};var ua=ra;function oa(n){if(0<=n.y&&n.y<100){var l=new Date(-1,n.m,n.d,n.H,n.M,n.S,n.L);return l.setFullYear(n.y),l}return new Date(n.y,n.m,n.d,n.H,n.M,n.S,n.L)}function sa(n){if(0<=n.y&&n.y<100){var l=new Date(Date.UTC(-1,n.m,n.d,n.H,n.M,n.S,n.L));return l.setUTCFullYear(n.y),l}return new Date(Date.UTC(n.y,n.m,n.d,n.H,n.M,n.S,n.L))}function ca(n){return{y:n,m:0,d:1,H:0,M:0,S:0,L:0}}var da,ha,fa,ba,pa={"-":"",_:" ",0:"0"},ga=/^\s*\d+/,ma=/^%/,ya=/[\\^$*+?|[\]().{}]/g;function va(n,l,t){var e=n<0?"-":"",i=(e?-n:n)+"",a=i.length;return e+(a<t?new Array(t-a+1).join(l)+i:i)}function _a(n){return n.replace(ya,"\\$&")}function xa(n){return new RegExp("^(?:"+n.map(_a).join("|")+")","i")}function wa(n){for(var l={},t=-1,e=n.length;++t<e;)l[n[t].toLowerCase()]=t;return l}function Da(n,l,t){var e=ga.exec(l.slice(t,t+1));return e?(n.w=+e[0],t+e[0].length):-1}function Ca(n,l,t){var e=ga.exec(l.slice(t,t+1));return e?(n.u=+e[0],t+e[0].length):-1}function ka(n,l,t){var e=ga.exec(l.slice(t,t+2));return e?(n.U=+e[0],t+e[0].length):-1}function Ma(n,l,t){var e=ga.exec(l.slice(t,t+2));return e?(n.V=+e[0],t+e[0].length):-1}function Pa(n,l,t){var e=ga.exec(l.slice(t,t+2));return e?(n.W=+e[0],t+e[0].length):-1}function Sa(n,l,t){var e=ga.exec(l.slice(t,t+4));return e?(n.y=+e[0],t+e[0].length):-1}function Ta(n,l,t){var e=ga.exec(l.slice(t,t+2));return e?(n.y=+e[0]+(+e[0]>68?1900:2e3),t+e[0].length):-1}function Ia(n,l,t){var e=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(l.slice(t,t+6));return e?(n.Z=e[1]?0:-(e[2]+(e[3]||"00")),t+e[0].length):-1}function Aa(n,l,t){var e=ga.exec(l.slice(t,t+2));return e?(n.m=e[0]-1,t+e[0].length):-1}function qa(n,l,t){var e=ga.exec(l.slice(t,t+2));return e?(n.d=+e[0],t+e[0].length):-1}function Na(n,l,t){var e=ga.exec(l.slice(t,t+3));return e?(n.m=0,n.d=+e[0],t+e[0].length):-1}function Oa(n,l,t){var e=ga.exec(l.slice(t,t+2));return e?(n.H=+e[0],t+e[0].length):-1}function Ea(n,l,t){var e=ga.exec(l.slice(t,t+2));return e?(n.M=+e[0],t+e[0].length):-1}function Ra(n,l,t){var e=ga.exec(l.slice(t,t+2));return e?(n.S=+e[0],t+e[0].length):-1}function La(n,l,t){var e=ga.exec(l.slice(t,t+3));return e?(n.L=+e[0],t+e[0].length):-1}function Ba(n,l,t){var e=ga.exec(l.slice(t,t+6));return e?(n.L=Math.floor(e[0]/1e3),t+e[0].length):-1}function Fa(n,l,t){var e=ma.exec(l.slice(t,t+1));return e?t+e[0].length:-1}function Ua(n,l,t){var e=ga.exec(l.slice(t));return e?(n.Q=+e[0],t+e[0].length):-1}function ja(n,l,t){var e=ga.exec(l.slice(t));return e?(n.Q=1e3*+e[0],t+e[0].length):-1}function Ja(n,l){return va(n.getDate(),l,2)}function Wa(n,l){return va(n.getHours(),l,2)}function Ha(n,l){return va(n.getHours()%12||12,l,2)}function za(n,l){return va(1+Hi.count(Xi(n),n),l,3)}function $a(n,l){return va(n.getMilliseconds(),l,3)}function Ga(n,l){return $a(n,l)+"000"}function Va(n,l){return va(n.getMonth()+1,l,2)}function Ka(n,l){return va(n.getMinutes(),l,2)}function Ya(n,l){return va(n.getSeconds(),l,2)}function Xa(n){var l=n.getDay();return 0===l?7:l}function Za(n,l){return va($i.count(Xi(n),n),l,2)}function Qa(n,l){var t=n.getDay();return n=t>=4||0===t?Vi(n):Vi.ceil(n),va(Vi.count(Xi(n),n)+(4===Xi(n).getDay()),l,2)}function nr(n){return n.getDay()}function lr(n,l){return va(Gi.count(Xi(n),n),l,2)}function tr(n,l){return va(n.getFullYear()%100,l,2)}function er(n,l){return va(n.getFullYear()%1e4,l,4)}function ir(n){var l=n.getTimezoneOffset();return(l>0?"-":(l*=-1,"+"))+va(l/60|0,"0",2)+va(l%60,"0",2)}function ar(n,l){return va(n.getUTCDate(),l,2)}function rr(n,l){return va(n.getUTCHours(),l,2)}function ur(n,l){return va(n.getUTCHours()%12||12,l,2)}function or(n,l){return va(1+na.count(ua(n),n),l,3)}function sr(n,l){return va(n.getUTCMilliseconds(),l,3)}function cr(n,l){return sr(n,l)+"000"}function dr(n,l){return va(n.getUTCMonth()+1,l,2)}function hr(n,l){return va(n.getUTCMinutes(),l,2)}function fr(n,l){return va(n.getUTCSeconds(),l,2)}function br(n){var l=n.getUTCDay();return 0===l?7:l}function pr(n,l){return va(ta.count(ua(n),n),l,2)}function gr(n,l){var t=n.getUTCDay();return n=t>=4||0===t?ia(n):ia.ceil(n),va(ia.count(ua(n),n)+(4===ua(n).getUTCDay()),l,2)}function mr(n){return n.getUTCDay()}function yr(n,l){return va(ea.count(ua(n),n),l,2)}function vr(n,l){return va(n.getUTCFullYear()%100,l,2)}function _r(n,l){return va(n.getUTCFullYear()%1e4,l,4)}function xr(){return"+0000"}function wr(){return"%"}function Dr(n){return+n}function Cr(n){return Math.floor(+n/1e3)}da=function(n){var l=n.dateTime,t=n.date,e=n.time,i=n.periods,a=n.days,r=n.shortDays,u=n.months,o=n.shortMonths,s=xa(i),c=wa(i),d=xa(a),h=wa(a),f=xa(r),b=wa(r),p=xa(u),g=wa(u),m=xa(o),y=wa(o),v={a:function(n){return r[n.getDay()]},A:function(n){return a[n.getDay()]},b:function(n){return o[n.getMonth()]},B:function(n){return u[n.getMonth()]},c:null,d:Ja,e:Ja,f:Ga,H:Wa,I:Ha,j:za,L:$a,m:Va,M:Ka,p:function(n){return i[+(n.getHours()>=12)]},Q:Dr,s:Cr,S:Ya,u:Xa,U:Za,V:Qa,w:nr,W:lr,x:null,X:null,y:tr,Y:er,Z:ir,"%":wr},_={a:function(n){return r[n.getUTCDay()]},A:function(n){return a[n.getUTCDay()]},b:function(n){return o[n.getUTCMonth()]},B:function(n){return u[n.getUTCMonth()]},c:null,d:ar,e:ar,f:cr,H:rr,I:ur,j:or,L:sr,m:dr,M:hr,p:function(n){return i[+(n.getUTCHours()>=12)]},Q:Dr,s:Cr,S:fr,u:br,U:pr,V:gr,w:mr,W:yr,x:null,X:null,y:vr,Y:_r,Z:xr,"%":wr},x={a:function(n,l,t){var e=f.exec(l.slice(t));return e?(n.w=b[e[0].toLowerCase()],t+e[0].length):-1},A:function(n,l,t){var e=d.exec(l.slice(t));return e?(n.w=h[e[0].toLowerCase()],t+e[0].length):-1},b:function(n,l,t){var e=m.exec(l.slice(t));return e?(n.m=y[e[0].toLowerCase()],t+e[0].length):-1},B:function(n,l,t){var e=p.exec(l.slice(t));return e?(n.m=g[e[0].toLowerCase()],t+e[0].length):-1},c:function(n,t,e){return C(n,l,t,e)},d:qa,e:qa,f:Ba,H:Oa,I:Oa,j:Na,L:La,m:Aa,M:Ea,p:function(n,l,t){var e=s.exec(l.slice(t));return e?(n.p=c[e[0].toLowerCase()],t+e[0].length):-1},Q:Ua,s:ja,S:Ra,u:Ca,U:ka,V:Ma,w:Da,W:Pa,x:function(n,l,e){return C(n,t,l,e)},X:function(n,l,t){return C(n,e,l,t)},y:Ta,Y:Sa,Z:Ia,"%":Fa};function w(n,l){return function(t){var e,i,a,r=[],u=-1,o=0,s=n.length;for(t instanceof Date||(t=new Date(+t));++u<s;)37===n.charCodeAt(u)&&(r.push(n.slice(o,u)),null!=(i=pa[e=n.charAt(++u)])?e=n.charAt(++u):i="e"===e?" ":"0",(a=l[e])&&(e=a(t,i)),r.push(e),o=u+1);return r.push(n.slice(o,u)),r.join("")}}function D(n,l){return function(t){var e,i,a=ca(1900);if(C(a,n,t+="",0)!=t.length)return null;if("Q"in a)return new Date(a.Q);if("p"in a&&(a.H=a.H%12+12*a.p),"V"in a){if(a.V<1||a.V>53)return null;"w"in a||(a.w=1),"Z"in a?(i=(e=sa(ca(a.y))).getUTCDay(),e=i>4||0===i?ea.ceil(e):ea(e),e=na.offset(e,7*(a.V-1)),a.y=e.getUTCFullYear(),a.m=e.getUTCMonth(),a.d=e.getUTCDate()+(a.w+6)%7):(i=(e=l(ca(a.y))).getDay(),e=i>4||0===i?Gi.ceil(e):Gi(e),e=Hi.offset(e,7*(a.V-1)),a.y=e.getFullYear(),a.m=e.getMonth(),a.d=e.getDate()+(a.w+6)%7)}else("W"in a||"U"in a)&&("w"in a||(a.w="u"in a?a.u%7:"W"in a?1:0),i="Z"in a?sa(ca(a.y)).getUTCDay():l(ca(a.y)).getDay(),a.m=0,a.d="W"in a?(a.w+6)%7+7*a.W-(i+5)%7:a.w+7*a.U-(i+6)%7);return"Z"in a?(a.H+=a.Z/100|0,a.M+=a.Z%100,sa(a)):l(a)}}function C(n,l,t,e){for(var i,a,r=0,u=l.length,o=t.length;r<u;){if(e>=o)return-1;if(37===(i=l.charCodeAt(r++))){if(i=l.charAt(r++),!(a=x[i in pa?l.charAt(r++):i])||(e=a(n,t,e))<0)return-1}else if(i!=t.charCodeAt(e++))return-1}return e}return v.x=w(t,v),v.X=w(e,v),v.c=w(l,v),_.x=w(t,_),_.X=w(e,_),_.c=w(l,_),{format:function(n){var l=w(n+="",v);return l.toString=function(){return n},l},parse:function(n){var l=D(n+="",oa);return l.toString=function(){return n},l},utcFormat:function(n){var l=w(n+="",_);return l.toString=function(){return n},l},utcParse:function(n){var l=D(n,sa);return l.toString=function(){return n},l}}}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),ha=da.format,fa=da.utcFormat,ba=da.utcParse,Date.prototype.toISOString||fa("%Y-%m-%dT%H:%M:%S.%LZ"),+new Date("2000-01-01T00:00:00.000Z")||ba("%Y-%m-%dT%H:%M:%S.%LZ");var kr=1e3,Mr=60*kr,Pr=60*Mr,Sr=24*Pr,Tr=7*Sr,Ir=30*Sr,Ar=365*Sr;function qr(n){return new Date(n)}function Nr(n){return n instanceof Date?+n:+new Date(+n)}function Or(n,l,t,e,i,a,r,u,o){var s=Qe(),c=s.invert,d=s.domain,h=o(".%L"),f=o(":%S"),b=o("%I:%M"),p=o("%I %p"),g=o("%a %d"),m=o("%b %d"),y=o("%B"),v=o("%Y"),_=[[r,1,kr],[r,5,5*kr],[r,15,15*kr],[r,30,30*kr],[a,1,Mr],[a,5,5*Mr],[a,15,15*Mr],[a,30,30*Mr],[i,1,Pr],[i,3,3*Pr],[i,6,6*Pr],[i,12,12*Pr],[e,1,Sr],[e,2,2*Sr],[t,1,Tr],[l,1,Ir],[l,3,3*Ir],[n,1,Ar]];function x(u){return(r(u)<u?h:a(u)<u?f:i(u)<u?b:e(u)<u?p:l(u)<u?t(u)<u?g:m:n(u)<u?y:v)(u)}function w(l,t,e){if(null==l&&(l=10),"number"==typeof l){var i,a=Math.abs(e-t)/l,r=hl((function(n){return n[2]})).right(_,a);return r===_.length?(i=Nl(t/Ar,e/Ar,l),l=n):r?(i=(r=_[a/_[r-1][2]<_[r][2]/a?r-1:r])[1],l=r[0]):(i=Math.max(Nl(t,e,l),1),l=u),l.every(i)}return l}return s.invert=function(n){return new Date(c(n))},s.domain=function(n){return arguments.length?d(Array.from(n,Nr)):d().map(qr)},s.ticks=function(n){var l,t=d(),e=t[0],i=t[t.length-1],a=i<e;return a&&(l=e,e=i,i=l),l=(l=w(n,e,i))?l.range(e,i+1):[],a?l.reverse():l},s.tickFormat=function(n,l){return null==l?x:o(l)},s.nice=function(n){var l=d();return(n=w(n,l[0],l[l.length-1]))?d(ki(l,n)):s},s.copy=function(){return Xe(s,Or(n,l,t,e,i,a,r,u,o))},s}var Er=function(){return ni.apply(Or(Xi,Ki,$i,Hi,Wi,Ji,ji,Bi,ha).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)},Rr=function(){return ni.apply(Or(ua,aa,ta,na,Qi,Zi,ji,Bi,fa).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)};function Lr(n,l){return l.domain(n.domain()).interpolator(n.interpolator()).clamp(n.clamp()).unknown(n.unknown())}function Br(){var n=yi(function(){var n,l,t,e,i,a=0,r=1,u=Ge,o=!1;function s(l){return isNaN(l=+l)?i:u(0===t?.5:(l=(e(l)-n)*t,o?Math.max(0,Math.min(1,l)):l))}return s.domain=function(i){return arguments.length?([a,r]=i,n=e(a=+a),l=e(r=+r),t=n===l?0:1/(l-n),s):[a,r]},s.clamp=function(n){return arguments.length?(o=!!n,s):o},s.interpolator=function(n){return arguments.length?(u=n,s):u},s.range=function(){return[u(0),u(1)]},s.unknown=function(n){return arguments.length?(i=n,s):i},function(i){return e=i,n=i(a),l=i(r),t=n===l?0:1/(l-n),s}}()(Ge));return n.copy=function(){return Lr(n,Br())},li.apply(n,arguments)}function Fr(){var n=yi(function(){var n,l,t,e,i,a,r,u=0,o=.5,s=1,c=1,d=Ge,h=!1;function f(n){return isNaN(n=+n)?r:(n=.5+((n=+a(n))-l)*(c*n<c*l?e:i),d(h?Math.max(0,Math.min(1,n)):n))}return f.domain=function(r){return arguments.length?([u,o,s]=r,n=a(u=+u),l=a(o=+o),t=a(s=+s),e=n===l?0:.5/(l-n),i=l===t?0:.5/(t-l),c=l<n?-1:1,f):[u,o,s]},f.clamp=function(n){return arguments.length?(h=!!n,f):h},f.interpolator=function(n){return arguments.length?(d=n,f):d},f.range=function(){return[d(0),d(.5),d(1)]},f.unknown=function(n){return arguments.length?(r=n,f):r},function(r){return a=r,n=r(u),l=r(o),t=r(s),e=n===l?0:.5/(l-n),i=l===t?0:.5/(t-l),c=l<n?-1:1,f}}()(Ge));return n.copy=function(){return Lr(n,Fr())},li.apply(n,arguments)}function Ur(){var n,l=0,t=1,e=1,i=[.5],a=[0,1];function r(l){return l<=l?a[gl(i,l,0,e)]:n}function u(){var n=-1;for(i=new Array(e);++n<e;)i[n]=((n+1)*t-(n-e)*l)/(e+1);return r}return r.domain=function(n){return arguments.length?([l,t]=n,l=+l,t=+t,u()):[l,t]},r.range=function(n){return arguments.length?(e=(a=Array.from(n)).length-1,u()):a.slice()},r.invertExtent=function(n){var r=a.indexOf(n);return r<0?[NaN,NaN]:r<1?[l,i[0]]:r>=e?[i[e-1],t]:[i[r-1],i[r]]},r.unknown=function(l){return arguments.length?(n=l,r):r},r.thresholds=function(){return i.slice()},r.copy=function(){return Ur().domain([l,t]).range(a).unknown(n)},ni.apply(yi(r),arguments)}function jr(){var n,l=[],t=[],e=[];function i(){var n=0,i=Math.max(1,t.length);for(e=new Array(i-1);++n<i;)e[n-1]=il(l,n/i);return a}function a(l){return isNaN(l=+l)?n:t[gl(e,l)]}return a.invertExtent=function(n){var i=t.indexOf(n);return i<0?[NaN,NaN]:[i>0?e[i-1]:l[0],i<e.length?e[i]:l[l.length-1]]},a.domain=function(n){if(!arguments.length)return l.slice();l=[];for(let t of n)null==t||isNaN(t=+t)||l.push(t);return l.sort(el),i()},a.range=function(n){return arguments.length?(t=Array.from(n),i()):t.slice()},a.unknown=function(l){return arguments.length?(n=l,a):n},a.quantiles=function(){return e.slice()},a.copy=function(){return jr().domain(l).range(t).unknown(n)},ni.apply(a,arguments)}function Jr(){var n,l=[.5],t=[0,1],e=1;function i(i){return i<=i?t[gl(l,i,0,e)]:n}return i.domain=function(n){return arguments.length?(l=Array.from(n),e=Math.min(l.length,t.length-1),i):l.slice()},i.range=function(n){return arguments.length?(t=Array.from(n),e=Math.min(l.length,t.length-1),i):t.slice()},i.invertExtent=function(n){var e=t.indexOf(n);return[l[e-1],l[e]]},i.unknown=function(l){return arguments.length?(n=l,i):n},i.copy=function(){return Jr().domain(l).range(t).unknown(n)},ni.apply(i,arguments)}const Wr=Symbol("implicit");function Hr(){var n=new Map,l=[],t=[],e=Wr;function i(i){var a=i+"",r=n.get(a);if(!r){if(e!==Wr)return e;n.set(a,r=l.push(i))}return t[(r-1)%t.length]}return i.domain=function(t){if(!arguments.length)return l.slice();l=[],n=new Map;for(const e of t){const t=e+"";n.has(t)||n.set(t,l.push(e))}return i},i.range=function(n){return arguments.length?(t=Array.from(n),i):t.slice()},i.unknown=function(n){return arguments.length?(e=n,i):e},i.copy=function(){return Hr(l,t).unknown(e)},ni.apply(i,arguments),i}function zr(){var n,l,t=Hr().unknown(void 0),e=t.domain,i=t.range,a=0,r=1,u=!1,o=0,s=0,c=.5;function d(){var t=e().length,d=r<a,h=d?r:a,f=d?a:r;n=(f-h)/Math.max(1,t-o+2*s),u&&(n=Math.floor(n)),h+=(f-h-n*(t-o))*c,l=n*(1-o),u&&(h=Math.round(h),l=Math.round(l));var b=Ml(t).map((function(l){return h+n*l}));return i(d?b.reverse():b)}return delete t.unknown,t.domain=function(n){return arguments.length?(e(n),d()):e()},t.range=function(n){return arguments.length?([a,r]=n,a=+a,r=+r,d()):[a,r]},t.rangeRound=function(n){return[a,r]=n,a=+a,r=+r,u=!0,d()},t.bandwidth=function(){return l},t.step=function(){return n},t.round=function(n){return arguments.length?(u=!!n,d()):u},t.padding=function(n){return arguments.length?(o=Math.min(1,s=+n),d()):o},t.paddingInner=function(n){return arguments.length?(o=Math.min(1,n),d()):o},t.paddingOuter=function(n){return arguments.length?(s=+n,d()):s},t.align=function(n){return arguments.length?(c=Math.max(0,Math.min(1,n)),d()):c},t.copy=function(){return zr(e(),[a,r]).round(u).paddingInner(o).paddingOuter(s).align(c)},ni.apply(d(),arguments)}function $r(){return function n(l){var t=l.copy;return l.padding=l.paddingOuter,delete l.paddingInner,delete l.paddingOuter,l.copy=function(){return n(t())},l}(zr.apply(null,arguments).paddingInner(1))}var Gr=function(n){for(var l=n.length/6|0,t=new Array(l),e=0;e<l;)t[e]="#"+n.slice(6*e,6*++e);return t},Vr=function(n){return Ce(n[n.length-1])},Kr=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(Gr),Yr=Vr(Kr),Xr=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(Gr),Zr=Vr(Xr),Qr=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(Gr),nu=Vr(Qr),lu=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(Gr),tu=Vr(lu),eu=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(Gr),iu=Vr(eu),au=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(Gr),ru=Vr(au),uu=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(Gr),ou=Vr(uu),su=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(Gr),cu=Vr(su),du=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(Gr),hu=Vr(du),fu=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(Gr),bu=Vr(fu),pu=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(Gr),gu=Vr(pu),mu=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(Gr),yu=Vr(mu),vu=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(Gr),_u=Vr(vu),xu=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(Gr),wu=Vr(xu),Du=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(Gr),Cu=Vr(Du);function ku(n){var l=n.length;return function(t){return n[Math.max(0,Math.min(l-1,Math.floor(t*l)))]}}var Mu=ku(Gr("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),Pu=ku(Gr("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),Su=ku(Gr("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),Tu=ku(Gr("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921")),Iu=We(de(-100,.75,.35),de(80,1.5,.8)),Au=We(de(260,.75,.35),de(80,1.5,.8)),qu=de(),Nu=function(n){(n<0||n>1)&&(n-=Math.floor(n));var l=Math.abs(n-.5);return qu.h=360*n-100,qu.s=1.5-1.5*l,qu.l=.8-.9*l,qu+""},Ou=It(),Eu=Math.PI/3,Ru=2*Math.PI/3,Lu=function(n){var l;return n=(.5-n)*Math.PI,Ou.r=255*(l=Math.sin(n))*l,Ou.g=255*(l=Math.sin(n+Eu))*l,Ou.b=255*(l=Math.sin(n+Ru))*l,Ou+""},Bu=We(de(300,.5,0),de(-240,.5,1)),Fu=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(Gr),Uu=Vr(Fu),ju=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(Gr),Ju=Vr(ju),Wu=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(Gr),Hu=Vr(Wu),zu=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(Gr),$u=Vr(zu),Gu=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(Gr),Vu=Vr(Gu),Ku=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(Gr),Yu=Vr(Ku),Xu=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(Gr),Zu=Vr(Xu),Qu=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(Gr),no=Vr(Qu),lo=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(Gr),to=Vr(lo),eo=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(Gr),io=Vr(eo),ao=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(Gr),ro=Vr(ao),uo=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(Gr),oo=Vr(uo),so=Gr("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),co=Gr("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),ho=Gr("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),fo=Gr("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),bo=Gr("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),po=Gr("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),go=Gr("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),mo=Gr("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),yo=Gr("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),vo="http://www.w3.org/1999/xhtml",_o={svg:"http://www.w3.org/2000/svg",xhtml:vo,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},xo=function(n){var l=n+="",t=l.indexOf(":");return t>=0&&"xmlns"!==(l=n.slice(0,t))&&(n=n.slice(t+1)),_o.hasOwnProperty(l)?{space:_o[l],local:n}:n};function wo(n){return function(){var l=this.ownerDocument,t=this.namespaceURI;return t===vo&&l.documentElement.namespaceURI===vo?l.createElement(n):l.createElementNS(t,n)}}function Do(n){return function(){return this.ownerDocument.createElementNS(n.space,n.local)}}var Co=function(n){var l=xo(n);return(l.local?Do:wo)(l)};function ko(){}var Mo=function(n){return null==n?ko:function(){return this.querySelector(n)}};function Po(){return[]}var So=function(n){return null==n?Po:function(){return this.querySelectorAll(n)}},To=function(n){return function(){return this.matches(n)}},Io=function(n){return new Array(n.length)};function Ao(n,l){this.ownerDocument=n.ownerDocument,this.namespaceURI=n.namespaceURI,this._next=null,this._parent=n,this.__data__=l}Ao.prototype={constructor:Ao,appendChild:function(n){return this._parent.insertBefore(n,this._next)},insertBefore:function(n,l){return this._parent.insertBefore(n,l)},querySelector:function(n){return this._parent.querySelector(n)},querySelectorAll:function(n){return this._parent.querySelectorAll(n)}};var qo="$";function No(n,l,t,e,i,a){for(var r,u=0,o=l.length,s=a.length;u<s;++u)(r=l[u])?(r.__data__=a[u],e[u]=r):t[u]=new Ao(n,a[u]);for(;u<o;++u)(r=l[u])&&(i[u]=r)}function Oo(n,l,t,e,i,a,r){var u,o,s,c={},d=l.length,h=a.length,f=new Array(d);for(u=0;u<d;++u)(o=l[u])&&(f[u]=s=qo+r.call(o,o.__data__,u,l),s in c?i[u]=o:c[s]=o);for(u=0;u<h;++u)(o=c[s=qo+r.call(n,a[u],u,a)])?(e[u]=o,o.__data__=a[u],c[s]=null):t[u]=new Ao(n,a[u]);for(u=0;u<d;++u)(o=l[u])&&c[f[u]]===o&&(i[u]=o)}function Eo(n,l){return n<l?-1:n>l?1:n>=l?0:NaN}function Ro(n){return function(){this.removeAttribute(n)}}function Lo(n){return function(){this.removeAttributeNS(n.space,n.local)}}function Bo(n,l){return function(){this.setAttribute(n,l)}}function Fo(n,l){return function(){this.setAttributeNS(n.space,n.local,l)}}function Uo(n,l){return function(){var t=l.apply(this,arguments);null==t?this.removeAttribute(n):this.setAttribute(n,t)}}function jo(n,l){return function(){var t=l.apply(this,arguments);null==t?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,t)}}var Jo=function(n){return n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView};function Wo(n){return function(){this.style.removeProperty(n)}}function Ho(n,l,t){return function(){this.style.setProperty(n,l,t)}}function zo(n,l,t){return function(){var e=l.apply(this,arguments);null==e?this.style.removeProperty(n):this.style.setProperty(n,e,t)}}function $o(n,l){return n.style.getPropertyValue(l)||Jo(n).getComputedStyle(n,null).getPropertyValue(l)}function Go(n){return function(){delete this[n]}}function Vo(n,l){return function(){this[n]=l}}function Ko(n,l){return function(){var t=l.apply(this,arguments);null==t?delete this[n]:this[n]=t}}function Yo(n){return n.trim().split(/^|\s+/)}function Xo(n){return n.classList||new Zo(n)}function Zo(n){this._node=n,this._names=Yo(n.getAttribute("class")||"")}function Qo(n,l){for(var t=Xo(n),e=-1,i=l.length;++e<i;)t.add(l[e])}function ns(n,l){for(var t=Xo(n),e=-1,i=l.length;++e<i;)t.remove(l[e])}function ls(n){return function(){Qo(this,n)}}function ts(n){return function(){ns(this,n)}}function es(n,l){return function(){(l.apply(this,arguments)?Qo:ns)(this,n)}}function is(){this.textContent=""}function as(n){return function(){this.textContent=n}}function rs(n){return function(){var l=n.apply(this,arguments);this.textContent=null==l?"":l}}function us(){this.innerHTML=""}function os(n){return function(){this.innerHTML=n}}function ss(n){return function(){var l=n.apply(this,arguments);this.innerHTML=null==l?"":l}}function cs(){this.nextSibling&&this.parentNode.appendChild(this)}function ds(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function hs(){return null}function fs(){var n=this.parentNode;n&&n.removeChild(this)}function bs(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)}function ps(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}Zo.prototype={add:function(n){this._names.indexOf(n)<0&&(this._names.push(n),this._node.setAttribute("class",this._names.join(" ")))},remove:function(n){var l=this._names.indexOf(n);l>=0&&(this._names.splice(l,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(n){return this._names.indexOf(n)>=0}};var gs={},ms=null;function ys(n,l,t){return n=vs(n,l,t),function(l){var t=l.relatedTarget;t&&(t===this||8&t.compareDocumentPosition(this))||n.call(this,l)}}function vs(n,l,t){return function(e){var i=ms;ms=e;try{n.call(this,this.__data__,l,t)}finally{ms=i}}}function _s(n){return n.trim().split(/^|\s+/).map((function(n){var l="",t=n.indexOf(".");return t>=0&&(l=n.slice(t+1),n=n.slice(0,t)),{type:n,name:l}}))}function xs(n){return function(){var l=this.__on;if(l){for(var t,e=0,i=-1,a=l.length;e<a;++e)t=l[e],n.type&&t.type!==n.type||t.name!==n.name?l[++i]=t:this.removeEventListener(t.type,t.listener,t.capture);++i?l.length=i:delete this.__on}}}function ws(n,l,t){var e=gs.hasOwnProperty(n.type)?ys:vs;return function(i,a,r){var u,o=this.__on,s=e(l,a,r);if(o)for(var c=0,d=o.length;c<d;++c)if((u=o[c]).type===n.type&&u.name===n.name)return this.removeEventListener(u.type,u.listener,u.capture),this.addEventListener(u.type,u.listener=s,u.capture=t),void(u.value=l);this.addEventListener(n.type,s,t),u={type:n.type,name:n.name,value:l,listener:s,capture:t},o?o.push(u):this.__on=[u]}}function Ds(n,l,t,e){var i=ms;n.sourceEvent=ms,ms=n;try{return l.apply(t,e)}finally{ms=i}}function Cs(n,l,t){var e=Jo(n),i=e.CustomEvent;"function"==typeof i?i=new i(l,t):(i=e.document.createEvent("Event"),t?(i.initEvent(l,t.bubbles,t.cancelable),i.detail=t.detail):i.initEvent(l,!1,!1)),n.dispatchEvent(i)}function ks(n,l){return function(){return Cs(this,n,l)}}function Ms(n,l){return function(){return Cs(this,n,l.apply(this,arguments))}}"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(gs={mouseenter:"mouseover",mouseleave:"mouseout"}));var Ps=[null];function Ss(n,l){this._groups=n,this._parents=l}function Ts(){return new Ss([[document.documentElement]],Ps)}Ss.prototype=Ts.prototype={constructor:Ss,select:function(n){"function"!=typeof n&&(n=Mo(n));for(var l=this._groups,t=l.length,e=new Array(t),i=0;i<t;++i)for(var a,r,u=l[i],o=u.length,s=e[i]=new Array(o),c=0;c<o;++c)(a=u[c])&&(r=n.call(a,a.__data__,c,u))&&("__data__"in a&&(r.__data__=a.__data__),s[c]=r);return new Ss(e,this._parents)},selectAll:function(n){"function"!=typeof n&&(n=So(n));for(var l=this._groups,t=l.length,e=[],i=[],a=0;a<t;++a)for(var r,u=l[a],o=u.length,s=0;s<o;++s)(r=u[s])&&(e.push(n.call(r,r.__data__,s,u)),i.push(r));return new Ss(e,i)},filter:function(n){"function"!=typeof n&&(n=To(n));for(var l=this._groups,t=l.length,e=new Array(t),i=0;i<t;++i)for(var a,r=l[i],u=r.length,o=e[i]=[],s=0;s<u;++s)(a=r[s])&&n.call(a,a.__data__,s,r)&&o.push(a);return new Ss(e,this._parents)},data:function(n,l){if(!n)return b=new Array(this.size()),c=-1,this.each((function(n){b[++c]=n})),b;var t,e=l?Oo:No,i=this._parents,a=this._groups;"function"!=typeof n&&(t=n,n=function(){return t});for(var r=a.length,u=new Array(r),o=new Array(r),s=new Array(r),c=0;c<r;++c){var d=i[c],h=a[c],f=h.length,b=n.call(d,d&&d.__data__,c,i),p=b.length,g=o[c]=new Array(p),m=u[c]=new Array(p);e(d,h,g,m,s[c]=new Array(f),b,l);for(var y,v,_=0,x=0;_<p;++_)if(y=g[_]){for(_>=x&&(x=_+1);!(v=m[x])&&++x<p;);y._next=v||null}}return(u=new Ss(u,i))._enter=o,u._exit=s,u},enter:function(){return new Ss(this._enter||this._groups.map(Io),this._parents)},exit:function(){return new Ss(this._exit||this._groups.map(Io),this._parents)},join:function(n,l,t){var e=this.enter(),i=this,a=this.exit();return e="function"==typeof n?n(e):e.append(n+""),null!=l&&(i=l(i)),null==t?a.remove():t(a),e&&i?e.merge(i).order():i},merge:function(n){for(var l=this._groups,t=n._groups,e=l.length,i=Math.min(e,t.length),a=new Array(e),r=0;r<i;++r)for(var u,o=l[r],s=t[r],c=o.length,d=a[r]=new Array(c),h=0;h<c;++h)(u=o[h]||s[h])&&(d[h]=u);for(;r<e;++r)a[r]=l[r];return new Ss(a,this._parents)},order:function(){for(var n=this._groups,l=-1,t=n.length;++l<t;)for(var e,i=n[l],a=i.length-1,r=i[a];--a>=0;)(e=i[a])&&(r&&4^e.compareDocumentPosition(r)&&r.parentNode.insertBefore(e,r),r=e);return this},sort:function(n){function l(l,t){return l&&t?n(l.__data__,t.__data__):!l-!t}n||(n=Eo);for(var t=this._groups,e=t.length,i=new Array(e),a=0;a<e;++a){for(var r,u=t[a],o=u.length,s=i[a]=new Array(o),c=0;c<o;++c)(r=u[c])&&(s[c]=r);s.sort(l)}return new Ss(i,this._parents).order()},call:function(){var n=arguments[0];return arguments[0]=this,n.apply(null,arguments),this},nodes:function(){var n=new Array(this.size()),l=-1;return this.each((function(){n[++l]=this})),n},node:function(){for(var n=this._groups,l=0,t=n.length;l<t;++l)for(var e=n[l],i=0,a=e.length;i<a;++i){var r=e[i];if(r)return r}return null},size:function(){var n=0;return this.each((function(){++n})),n},empty:function(){return!this.node()},each:function(n){for(var l=this._groups,t=0,e=l.length;t<e;++t)for(var i,a=l[t],r=0,u=a.length;r<u;++r)(i=a[r])&&n.call(i,i.__data__,r,a);return this},attr:function(n,l){var t=xo(n);if(arguments.length<2){var e=this.node();return t.local?e.getAttributeNS(t.space,t.local):e.getAttribute(t)}return this.each((null==l?t.local?Lo:Ro:"function"==typeof l?t.local?jo:Uo:t.local?Fo:Bo)(t,l))},style:function(n,l,t){return arguments.length>1?this.each((null==l?Wo:"function"==typeof l?zo:Ho)(n,l,null==t?"":t)):$o(this.node(),n)},property:function(n,l){return arguments.length>1?this.each((null==l?Go:"function"==typeof l?Ko:Vo)(n,l)):this.node()[n]},classed:function(n,l){var t=Yo(n+"");if(arguments.length<2){for(var e=Xo(this.node()),i=-1,a=t.length;++i<a;)if(!e.contains(t[i]))return!1;return!0}return this.each(("function"==typeof l?es:l?ls:ts)(t,l))},text:function(n){return arguments.length?this.each(null==n?is:("function"==typeof n?rs:as)(n)):this.node().textContent},html:function(n){return arguments.length?this.each(null==n?us:("function"==typeof n?ss:os)(n)):this.node().innerHTML},raise:function(){return this.each(cs)},lower:function(){return this.each(ds)},append:function(n){var l="function"==typeof n?n:Co(n);return this.select((function(){return this.appendChild(l.apply(this,arguments))}))},insert:function(n,l){var t="function"==typeof n?n:Co(n),e=null==l?hs:"function"==typeof l?l:Mo(l);return this.select((function(){return this.insertBefore(t.apply(this,arguments),e.apply(this,arguments)||null)}))},remove:function(){return this.each(fs)},clone:function(n){return this.select(n?ps:bs)},datum:function(n){return arguments.length?this.property("__data__",n):this.node().__data__},on:function(n,l,t){var e,i,a=_s(n+""),r=a.length;if(!(arguments.length<2)){for(u=l?ws:xs,null==t&&(t=!1),e=0;e<r;++e)this.each(u(a[e],l,t));return this}var u=this.node().__on;if(u)for(var o,s=0,c=u.length;s<c;++s)for(e=0,o=u[s];e<r;++e)if((i=a[e]).type===o.type&&i.name===o.name)return o.value},dispatch:function(n,l){return this.each(("function"==typeof l?Ms:ks)(n,l))}};var Is=Ts,As=function(n){return"string"==typeof n?new Ss([[document.querySelector(n)]],[document.documentElement]):new Ss([[n]],Ps)},qs=function(n){return As(Co(n).call(document.documentElement))},Ns=0;function Os(){return new Es}function Es(){this._="@"+(++Ns).toString(36)}Es.prototype=Os.prototype={constructor:Es,get:function(n){for(var l=this._;!(l in n);)if(!(n=n.parentNode))return;return n[l]},set:function(n,l){return n[this._]=l},remove:function(n){return this._ in n&&delete n[this._]},toString:function(){return this._}};var Rs=function(){for(var n,l=ms;n=l.sourceEvent;)l=n;return l},Ls=function(n,l){var t=n.ownerSVGElement||n;if(t.createSVGPoint){var e=t.createSVGPoint();return e.x=l.clientX,e.y=l.clientY,[(e=e.matrixTransform(n.getScreenCTM().inverse())).x,e.y]}var i=n.getBoundingClientRect();return[l.clientX-i.left-n.clientLeft,l.clientY-i.top-n.clientTop]},Bs=function(n){var l=Rs();return l.changedTouches&&(l=l.changedTouches[0]),Ls(n,l)},Fs=function(n){return"string"==typeof n?new Ss([document.querySelectorAll(n)],[document.documentElement]):new Ss([null==n?[]:n],Ps)},Us=function(n,l,t){arguments.length<3&&(t=l,l=Rs().changedTouches);for(var e,i=0,a=l?l.length:0;i<a;++i)if((e=l[i]).identifier===t)return Ls(n,e);return null},js=function(n,l){null==l&&(l=Rs().touches);for(var t=0,e=l?l.length:0,i=new Array(e);t<e;++t)i[t]=Ls(n,l[t]);return i},Js={value:function(){}};function Ws(){for(var n,l=0,t=arguments.length,e={};l<t;++l){if(!(n=arguments[l]+"")||n in e)throw new Error("illegal type: "+n);e[n]=[]}return new Hs(e)}function Hs(n){this._=n}function zs(n,l){return n.trim().split(/^|\s+/).map((function(n){var t="",e=n.indexOf(".");if(e>=0&&(t=n.slice(e+1),n=n.slice(0,e)),n&&!l.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:t}}))}function $s(n,l){for(var t,e=0,i=n.length;e<i;++e)if((t=n[e]).name===l)return t.value}function Gs(n,l,t){for(var e=0,i=n.length;e<i;++e)if(n[e].name===l){n[e]=Js,n=n.slice(0,e).concat(n.slice(e+1));break}return null!=t&&n.push({name:l,value:t}),n}Hs.prototype=Ws.prototype={constructor:Hs,on:function(n,l){var t,e=this._,i=zs(n+"",e),a=-1,r=i.length;if(!(arguments.length<2)){if(null!=l&&"function"!=typeof l)throw new Error("invalid callback: "+l);for(;++a<r;)if(t=(n=i[a]).type)e[t]=Gs(e[t],n.name,l);else if(null==l)for(t in e)e[t]=Gs(e[t],n.name,null);return this}for(;++a<r;)if((t=(n=i[a]).type)&&(t=$s(e[t],n.name)))return t},copy:function(){var n={},l=this._;for(var t in l)n[t]=l[t].slice();return new Hs(n)},call:function(n,l){if((t=arguments.length-2)>0)for(var t,e,i=new Array(t),a=0;a<t;++a)i[a]=arguments[a+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(a=0,t=(e=this._[n]).length;a<t;++a)e[a].value.apply(l,i)},apply:function(n,l,t){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var e=this._[n],i=0,a=e.length;i<a;++i)e[i].value.apply(l,t)}};var Vs,Ks,Ys=Ws,Xs=0,Zs=0,Qs=0,nc=1e3,lc=0,tc=0,ec=0,ic="object"==typeof performance&&performance.now?performance:Date,ac="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function rc(){return tc||(ac(uc),tc=ic.now()+ec)}function uc(){tc=0}function oc(){this._call=this._time=this._next=null}function sc(n,l,t){var e=new oc;return e.restart(n,l,t),e}function cc(){tc=(lc=ic.now())+ec,Xs=Zs=0;try{!function(){rc(),++Xs;for(var n,l=Vs;l;)(n=tc-l._time)>=0&&l._call.call(null,n),l=l._next;--Xs}()}finally{Xs=0,function(){for(var n,l,t=Vs,e=1/0;t;)t._call?(e>t._time&&(e=t._time),n=t,t=t._next):(l=t._next,t._next=null,t=n?n._next=l:Vs=l);Ks=n,hc(e)}(),tc=0}}function dc(){var n=ic.now(),l=n-lc;l>nc&&(ec-=l,lc=n)}function hc(n){Xs||(Zs&&(Zs=clearTimeout(Zs)),n-tc>24?(n<1/0&&(Zs=setTimeout(cc,n-ic.now()-ec)),Qs&&(Qs=clearInterval(Qs))):(Qs||(lc=ic.now(),Qs=setInterval(dc,nc)),Xs=1,ac(cc)))}oc.prototype=sc.prototype={constructor:oc,restart:function(n,l,t){if("function"!=typeof n)throw new TypeError("callback is not a function");t=(null==t?rc():+t)+(null==l?0:+l),this._next||Ks===this||(Ks?Ks._next=this:Vs=this,Ks=this),this._call=n,this._time=t,hc()},stop:function(){this._call&&(this._call=null,this._time=1/0,hc())}};var fc=function(n,l,t){var e=new oc;return e.restart((function(t){e.stop(),n(t+l)}),l=null==l?0:+l,t),e},bc=Ys("start","end","cancel","interrupt"),pc=[],gc=0,mc=1,yc=2,vc=3,_c=4,xc=5,wc=6,Dc=function(n,l,t,e,i,a){var r=n.__transition;if(r){if(t in r)return}else n.__transition={};!function(n,l,t){var e,i=n.__transition;function a(o){var s,c,d,h;if(t.state!==mc)return u();for(s in i)if((h=i[s]).name===t.name){if(h.state===vc)return fc(a);h.state===_c?(h.state=wc,h.timer.stop(),h.on.call("interrupt",n,n.__data__,h.index,h.group),delete i[s]):+s<l&&(h.state=wc,h.timer.stop(),h.on.call("cancel",n,n.__data__,h.index,h.group),delete i[s])}if(fc((function(){t.state===vc&&(t.state=_c,t.timer.restart(r,t.delay,t.time),r(o))})),t.state=yc,t.on.call("start",n,n.__data__,t.index,t.group),t.state===yc){for(t.state=vc,e=new Array(d=t.tween.length),s=0,c=-1;s<d;++s)(h=t.tween[s].value.call(n,n.__data__,t.index,t.group))&&(e[++c]=h);e.length=c+1}}function r(l){for(var i=l<t.duration?t.ease.call(null,l/t.duration):(t.timer.restart(u),t.state=xc,1),a=-1,r=e.length;++a<r;)e[a].call(n,i);t.state===xc&&(t.on.call("end",n,n.__data__,t.index,t.group),u())}function u(){for(var e in t.state=wc,t.timer.stop(),delete i[l],i)return;delete n.__transition}i[l]=t,t.timer=sc((function(n){t.state=mc,t.timer.restart(a,t.delay,t.time),t.delay<=n&&a(n-t.delay)}),0,t.time)}(n,t,{name:l,index:e,group:i,on:bc,tween:pc,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:gc})};function Cc(n,l){var t=Mc(n,l);if(t.state>gc)throw new Error("too late; already scheduled");return t}function kc(n,l){var t=Mc(n,l);if(t.state>vc)throw new Error("too late; already running");return t}function Mc(n,l){var t=n.__transition;if(!t||!(t=t[l]))throw new Error("transition not found");return t}var Pc=function(n,l){var t,e,i,a=n.__transition,r=!0;if(a){for(i in l=null==l?null:l+"",a)(t=a[i]).name===l?(e=t.state>yc&&t.state<xc,t.state=wc,t.timer.stop(),t.on.call(e?"interrupt":"cancel",n,n.__data__,t.index,t.group),delete a[i]):r=!1;r&&delete n.__transition}};function Sc(n,l){var t,e;return function(){var i=kc(this,n),a=i.tween;if(a!==t)for(var r=0,u=(e=t=a).length;r<u;++r)if(e[r].name===l){(e=e.slice()).splice(r,1);break}i.tween=e}}function Tc(n,l,t){var e,i;if("function"!=typeof t)throw new Error;return function(){var a=kc(this,n),r=a.tween;if(r!==e){i=(e=r).slice();for(var u={name:l,value:t},o=0,s=i.length;o<s;++o)if(i[o].name===l){i[o]=u;break}o===s&&i.push(u)}a.tween=i}}function Ic(n,l,t){var e=n._id;return n.each((function(){var n=kc(this,e);(n.value||(n.value={}))[l]=t.apply(this,arguments)})),function(n){return Mc(n,e).value[l]}}var Ac=function(n,l){var t;return("number"==typeof l?Pe:l instanceof Mt?ye:(t=Mt(l))?(l=t,ye):Ae)(n,l)};function qc(n){return function(){this.removeAttribute(n)}}function Nc(n){return function(){this.removeAttributeNS(n.space,n.local)}}function Oc(n,l,t){var e,i,a=t+"";return function(){var r=this.getAttribute(n);return r===a?null:r===e?i:i=l(e=r,t)}}function Ec(n,l,t){var e,i,a=t+"";return function(){var r=this.getAttributeNS(n.space,n.local);return r===a?null:r===e?i:i=l(e=r,t)}}function Rc(n,l,t){var e,i,a;return function(){var r,u,o=t(this);if(null!=o)return(r=this.getAttribute(n))===(u=o+"")?null:r===e&&u===i?a:(i=u,a=l(e=r,o));this.removeAttribute(n)}}function Lc(n,l,t){var e,i,a;return function(){var r,u,o=t(this);if(null!=o)return(r=this.getAttributeNS(n.space,n.local))===(u=o+"")?null:r===e&&u===i?a:(i=u,a=l(e=r,o));this.removeAttributeNS(n.space,n.local)}}function Bc(n,l){var t,e;function i(){var i=l.apply(this,arguments);return i!==e&&(t=(e=i)&&function(n,l){return function(t){this.setAttributeNS(n.space,n.local,l(t))}}(n,i)),t}return i._value=l,i}function Fc(n,l){var t,e;function i(){var i=l.apply(this,arguments);return i!==e&&(t=(e=i)&&function(n,l){return function(t){this.setAttribute(n,l(t))}}(n,i)),t}return i._value=l,i}function Uc(n,l){return function(){Cc(this,n).delay=+l.apply(this,arguments)}}function jc(n,l){return l=+l,function(){Cc(this,n).delay=l}}function Jc(n,l){return function(){kc(this,n).duration=+l.apply(this,arguments)}}function Wc(n,l){return l=+l,function(){kc(this,n).duration=l}}function Hc(n,l){if("function"!=typeof l)throw new Error;return function(){kc(this,n).ease=l}}function zc(n,l,t){var e,i,a=function(n){return(n+"").trim().split(/^|\s+/).every((function(n){var l=n.indexOf(".");return l>=0&&(n=n.slice(0,l)),!n||"start"===n}))}(l)?Cc:kc;return function(){var r=a(this,n),u=r.on;u!==e&&(i=(e=u).copy()).on(l,t),r.on=i}}var $c=Is.prototype.constructor;function Gc(n){return function(){this.style.removeProperty(n)}}function Vc(n,l,t){var e,i;function a(){var a=l.apply(this,arguments);return a!==i&&(e=(i=a)&&function(n,l,t){return function(e){this.style.setProperty(n,l(e),t)}}(n,a,t)),e}return a._value=l,a}var Kc=0;function Yc(n,l,t,e){this._groups=n,this._parents=l,this._name=t,this._id=e}function Xc(n){return Is().transition(n)}function Zc(){return++Kc}var Qc=Is.prototype;Yc.prototype=Xc.prototype={constructor:Yc,select:function(n){var l=this._name,t=this._id;"function"!=typeof n&&(n=Mo(n));for(var e=this._groups,i=e.length,a=new Array(i),r=0;r<i;++r)for(var u,o,s=e[r],c=s.length,d=a[r]=new Array(c),h=0;h<c;++h)(u=s[h])&&(o=n.call(u,u.__data__,h,s))&&("__data__"in u&&(o.__data__=u.__data__),d[h]=o,Dc(d[h],l,t,h,d,Mc(u,t)));return new Yc(a,this._parents,l,t)},selectAll:function(n){var l=this._name,t=this._id;"function"!=typeof n&&(n=So(n));for(var e=this._groups,i=e.length,a=[],r=[],u=0;u<i;++u)for(var o,s=e[u],c=s.length,d=0;d<c;++d)if(o=s[d]){for(var h,f=n.call(o,o.__data__,d,s),b=Mc(o,t),p=0,g=f.length;p<g;++p)(h=f[p])&&Dc(h,l,t,p,f,b);a.push(f),r.push(o)}return new Yc(a,r,l,t)},filter:function(n){"function"!=typeof n&&(n=To(n));for(var l=this._groups,t=l.length,e=new Array(t),i=0;i<t;++i)for(var a,r=l[i],u=r.length,o=e[i]=[],s=0;s<u;++s)(a=r[s])&&n.call(a,a.__data__,s,r)&&o.push(a);return new Yc(e,this._parents,this._name,this._id)},merge:function(n){if(n._id!==this._id)throw new Error;for(var l=this._groups,t=n._groups,e=l.length,i=Math.min(e,t.length),a=new Array(e),r=0;r<i;++r)for(var u,o=l[r],s=t[r],c=o.length,d=a[r]=new Array(c),h=0;h<c;++h)(u=o[h]||s[h])&&(d[h]=u);for(;r<e;++r)a[r]=l[r];return new Yc(a,this._parents,this._name,this._id)},selection:function(){return new $c(this._groups,this._parents)},transition:function(){for(var n=this._name,l=this._id,t=Zc(),e=this._groups,i=e.length,a=0;a<i;++a)for(var r,u=e[a],o=u.length,s=0;s<o;++s)if(r=u[s]){var c=Mc(r,l);Dc(r,n,t,s,u,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Yc(e,this._parents,n,t)},call:Qc.call,nodes:Qc.nodes,node:Qc.node,size:Qc.size,empty:Qc.empty,each:Qc.each,on:function(n,l){var t=this._id;return arguments.length<2?Mc(this.node(),t).on.on(n):this.each(zc(t,n,l))},attr:function(n,l){var t=xo(n),e="transform"===t?Fe:Ac;return this.attrTween(n,"function"==typeof l?(t.local?Lc:Rc)(t,e,Ic(this,"attr."+n,l)):null==l?(t.local?Nc:qc)(t):(t.local?Ec:Oc)(t,e,l))},attrTween:function(n,l){var t="attr."+n;if(arguments.length<2)return(t=this.tween(t))&&t._value;if(null==l)return this.tween(t,null);if("function"!=typeof l)throw new Error;var e=xo(n);return this.tween(t,(e.local?Bc:Fc)(e,l))},style:function(n,l,t){var e="transform"==(n+="")?Be:Ac;return null==l?this.styleTween(n,function(n,l){var t,e,i;return function(){var a=$o(this,n),r=(this.style.removeProperty(n),$o(this,n));return a===r?null:a===t&&r===e?i:i=l(t=a,e=r)}}(n,e)).on("end.style."+n,Gc(n)):"function"==typeof l?this.styleTween(n,function(n,l,t){var e,i,a;return function(){var r=$o(this,n),u=t(this),o=u+"";return null==u&&(this.style.removeProperty(n),o=u=$o(this,n)),r===o?null:r===e&&o===i?a:(i=o,a=l(e=r,u))}}(n,e,Ic(this,"style."+n,l))).each(function(n,l){var t,e,i,a,r="style."+l,u="end."+r;return function(){var o=kc(this,n),s=o.on,c=null==o.value[r]?a||(a=Gc(l)):void 0;s===t&&i===c||(e=(t=s).copy()).on(u,i=c),o.on=e}}(this._id,n)):this.styleTween(n,function(n,l,t){var e,i,a=t+"";return function(){var r=$o(this,n);return r===a?null:r===e?i:i=l(e=r,t)}}(n,e,l),t).on("end.style."+n,null)},styleTween:function(n,l,t){var e="style."+(n+="");if(arguments.length<2)return(e=this.tween(e))&&e._value;if(null==l)return this.tween(e,null);if("function"!=typeof l)throw new Error;return this.tween(e,Vc(n,l,null==t?"":t))},text:function(n){return this.tween("text","function"==typeof n?function(n){return function(){var l=n(this);this.textContent=null==l?"":l}}(Ic(this,"text",n)):function(n){return function(){this.textContent=n}}(null==n?"":n+""))},remove:function(){return this.on("end.remove",(n=this._id,function(){var l=this.parentNode;for(var t in this.__transition)if(+t!==n)return;l&&l.removeChild(this)}));var n},tween:function(n,l){var t=this._id;if(n+="",arguments.length<2){for(var e,i=Mc(this.node(),t).tween,a=0,r=i.length;a<r;++a)if((e=i[a]).name===n)return e.value;return null}return this.each((null==l?Sc:Tc)(t,n,l))},delay:function(n){var l=this._id;return arguments.length?this.each(("function"==typeof n?Uc:jc)(l,n)):Mc(this.node(),l).delay},duration:function(n){var l=this._id;return arguments.length?this.each(("function"==typeof n?Jc:Wc)(l,n)):Mc(this.node(),l).duration},ease:function(n){var l=this._id;return arguments.length?this.each(Hc(l,n)):Mc(this.node(),l).ease},end:function(){var n,l,t=this,e=t._id,i=t.size();return new Promise((function(a,r){var u={value:r},o={value:function(){0==--i&&a()}};t.each((function(){var t=kc(this,e),i=t.on;i!==n&&((l=(n=i).copy())._.cancel.push(u),l._.interrupt.push(u),l._.end.push(o)),t.on=l}))}))}},function n(l){function t(n){return Math.pow(n,l)}return l=+l,t.exponent=n,t}(3),function n(l){function t(n){return 1-Math.pow(1-n,l)}return l=+l,t.exponent=n,t}(3),function n(l){function t(n){return((n*=2)<=1?Math.pow(n,l):2-Math.pow(2-n,l))/2}return l=+l,t.exponent=n,t}(3),Math,function n(l){function t(n){return n*n*((l+1)*n-l)}return l=+l,t.overshoot=n,t}(1.70158),function n(l){function t(n){return--n*n*((l+1)*n+l)+1}return l=+l,t.overshoot=n,t}(1.70158),function n(l){function t(n){return((n*=2)<1?n*n*((l+1)*n-l):(n-=2)*n*((l+1)*n+l)+2)/2}return l=+l,t.overshoot=n,t}(1.70158);var nd=2*Math.PI,ld=(function n(l,t){var e=Math.asin(1/(l=Math.max(1,l)))*(t/=nd);function i(n){return l*Math.pow(2,10*--n)*Math.sin((e-n)/t)}return i.amplitude=function(l){return n(l,t*nd)},i.period=function(t){return n(l,t)},i}(1,.3),function n(l,t){var e=Math.asin(1/(l=Math.max(1,l)))*(t/=nd);function i(n){return 1-l*Math.pow(2,-10*(n=+n))*Math.sin((n+e)/t)}return i.amplitude=function(l){return n(l,t*nd)},i.period=function(t){return n(l,t)},i}(1,.3),function n(l,t){var e=Math.asin(1/(l=Math.max(1,l)))*(t/=nd);function i(n){return((n=2*n-1)<0?l*Math.pow(2,10*n)*Math.sin((e-n)/t):2-l*Math.pow(2,-10*n)*Math.sin((e+n)/t))/2}return i.amplitude=function(l){return n(l,t*nd)},i.period=function(t){return n(l,t)},i}(1,.3),{time:null,delay:0,duration:250,ease:function(n){return((n*=2)<=1?n*n*n:(n-=2)*n*n+2)/2}});function td(n,l){for(var t;!(t=n.__transition)||!(t=t[l]);)if(!(n=n.parentNode))return ld.time=rc(),ld;return t}Is.prototype.interrupt=function(n){return this.each((function(){Pc(this,n)}))},Is.prototype.transition=function(n){var l,t;n instanceof Yc?(l=n._id,n=n._name):(l=Zc(),(t=ld).time=rc(),n=null==n?null:n+"");for(var e=this._groups,i=e.length,a=0;a<i;++a)for(var r,u=e[a],o=u.length,s=0;s<o;++s)(r=u[s])&&Dc(r,n,l,s,u,t||td(r,l));return new Yc(e,this._parents,n,l)};var ed=[null],id=function(n,l){var t,e,i=n.__transition;if(i)for(e in l=null==l?null:l+"",i)if((t=i[e]).state>mc&&t.name===l)return new Yc([[n]],ed,l,+e);return null};function ad(n,l){return n.each((function(){var n=l.apply(this,arguments),t=As(this);for(var e in n)t.attr(e,n[e])}))}function rd(n,l){for(var t in l)n.attr(t,l[t]);return n}function ud(n,l,t){return n.each((function(){var n=l.apply(this,arguments),e=As(this);for(var i in n)e.style(i,n[i],t)}))}function od(n,l,t){for(var e in l)n.style(e,l[e],t);return n}function sd(n,l){return n.each((function(){var n=l.apply(this,arguments),t=As(this);for(var e in n)t.property(e,n[e])}))}function cd(n,l){for(var t in l)n.property(t,l[t]);return n}function dd(n,l){return n.each((function(){var t=l.apply(this,arguments),e=As(this).transition(n);for(var i in t)e.attr(i,t[i])}))}function hd(n,l){for(var t in l)n.attr(t,l[t]);return n}function fd(n,l,t){return n.each((function(){var e=l.apply(this,arguments),i=As(this).transition(n);for(var a in e)i.style(a,e[a],t)}))}function bd(n,l,t){for(var e in l)n.style(e,l[e],t);return n}Is.prototype.attrs=function(n){return("function"==typeof n?ad:rd)(this,n)},Is.prototype.styles=function(n,l){return("function"==typeof n?ud:od)(this,n,null==l?"":l)},Is.prototype.properties=function(n){return("function"==typeof n?sd:cd)(this,n)},Xc.prototype.attrs=function(n){return("function"==typeof n?dd:hd)(this,n)},Xc.prototype.styles=function(n,l){return("function"==typeof n?fd:bd)(this,n,null==l?"":l)};var pd=Math.PI,gd=2*pd,md=gd-1e-6;function yd(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function vd(){return new yd}yd.prototype=vd.prototype={constructor:yd,moveTo:function(n,l){this._+="M"+(this._x0=this._x1=+n)+","+(this._y0=this._y1=+l)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(n,l){this._+="L"+(this._x1=+n)+","+(this._y1=+l)},quadraticCurveTo:function(n,l,t,e){this._+="Q"+ +n+","+ +l+","+(this._x1=+t)+","+(this._y1=+e)},bezierCurveTo:function(n,l,t,e,i,a){this._+="C"+ +n+","+ +l+","+ +t+","+ +e+","+(this._x1=+i)+","+(this._y1=+a)},arcTo:function(n,l,t,e,i){var a=this._x1,r=this._y1,u=(t=+t)-(n=+n),o=(e=+e)-(l=+l),s=a-n,c=r-l,d=s*s+c*c;if((i=+i)<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=n)+","+(this._y1=l);else if(d>1e-6)if(Math.abs(c*u-o*s)>1e-6&&i){var h=t-a,f=e-r,b=u*u+o*o,p=h*h+f*f,g=Math.sqrt(b),m=Math.sqrt(d),y=i*Math.tan((pd-Math.acos((b+d-p)/(2*g*m)))/2),v=y/m,_=y/g;Math.abs(v-1)>1e-6&&(this._+="L"+(n+v*s)+","+(l+v*c)),this._+="A"+i+","+i+",0,0,"+ +(c*h>s*f)+","+(this._x1=n+_*u)+","+(this._y1=l+_*o)}else this._+="L"+(this._x1=n)+","+(this._y1=l)},arc:function(n,l,t,e,i,a){n=+n,l=+l,a=!!a;var r=(t=+t)*Math.cos(e),u=t*Math.sin(e),o=n+r,s=l+u,c=1^a,d=a?e-i:i-e;if(t<0)throw new Error("negative radius: "+t);null===this._x1?this._+="M"+o+","+s:(Math.abs(this._x1-o)>1e-6||Math.abs(this._y1-s)>1e-6)&&(this._+="L"+o+","+s),t&&(d<0&&(d=d%gd+gd),d>md?this._+="A"+t+","+t+",0,1,"+c+","+(n-r)+","+(l-u)+"A"+t+","+t+",0,1,"+c+","+(this._x1=o)+","+(this._y1=s):d>1e-6&&(this._+="A"+t+","+t+",0,"+ +(d>=pd)+","+c+","+(this._x1=n+t*Math.cos(i))+","+(this._y1=l+t*Math.sin(i))))},rect:function(n,l,t,e){this._+="M"+(this._x0=this._x1=+n)+","+(this._y0=this._y1=+l)+"h"+ +t+"v"+ +e+"h"+-t+"Z"},toString:function(){return this._}};var _d=vd,xd=function(n){return function(){return n}},wd=Math.abs,Dd=Math.atan2,Cd=Math.cos,kd=Math.max,Md=Math.min,Pd=Math.sin,Sd=Math.sqrt,Td=1e-12,Id=Math.PI,Ad=Id/2,qd=2*Id;function Nd(n){return n>=1?Ad:n<=-1?-Ad:Math.asin(n)}function Od(n){return n.innerRadius}function Ed(n){return n.outerRadius}function Rd(n){return n.startAngle}function Ld(n){return n.endAngle}function Bd(n){return n&&n.padAngle}function Fd(n,l,t,e,i,a,r){var u=n-t,o=l-e,s=(r?a:-a)/Sd(u*u+o*o),c=s*o,d=-s*u,h=n+c,f=l+d,b=t+c,p=e+d,g=(h+b)/2,m=(f+p)/2,y=b-h,v=p-f,_=y*y+v*v,x=i-a,w=h*p-b*f,D=(v<0?-1:1)*Sd(kd(0,x*x*_-w*w)),C=(w*v-y*D)/_,k=(-w*y-v*D)/_,M=(w*v+y*D)/_,P=(-w*y+v*D)/_,S=C-g,T=k-m,I=M-g,A=P-m;return S*S+T*T>I*I+A*A&&(C=M,k=P),{cx:C,cy:k,x01:-c,y01:-d,x11:C*(i/x-1),y11:k*(i/x-1)}}var Ud=function(){var n=Od,l=Ed,t=xd(0),e=null,i=Rd,a=Ld,r=Bd,u=null;function o(){var o,s,c,d=+n.apply(this,arguments),h=+l.apply(this,arguments),f=i.apply(this,arguments)-Ad,b=a.apply(this,arguments)-Ad,p=wd(b-f),g=b>f;if(u||(u=o=_d()),h<d&&(s=h,h=d,d=s),h>Td)if(p>qd-Td)u.moveTo(h*Cd(f),h*Pd(f)),u.arc(0,0,h,f,b,!g),d>Td&&(u.moveTo(d*Cd(b),d*Pd(b)),u.arc(0,0,d,b,f,g));else{var m,y,v=f,_=b,x=f,w=b,D=p,C=p,k=r.apply(this,arguments)/2,M=k>Td&&(e?+e.apply(this,arguments):Sd(d*d+h*h)),P=Md(wd(h-d)/2,+t.apply(this,arguments)),S=P,T=P;if(M>Td){var I=Nd(M/d*Pd(k)),A=Nd(M/h*Pd(k));(D-=2*I)>Td?(x+=I*=g?1:-1,w-=I):(D=0,x=w=(f+b)/2),(C-=2*A)>Td?(v+=A*=g?1:-1,_-=A):(C=0,v=_=(f+b)/2)}var q=h*Cd(v),N=h*Pd(v),O=d*Cd(w),E=d*Pd(w);if(P>Td){var R,L=h*Cd(_),B=h*Pd(_),F=d*Cd(x),U=d*Pd(x);if(p<Id&&(R=function(n,l,t,e,i,a,r,u){var o=t-n,s=e-l,c=r-i,d=u-a,h=d*o-c*s;if(!(h*h<Td))return[n+(h=(c*(l-a)-d*(n-i))/h)*o,l+h*s]}(q,N,F,U,L,B,O,E))){var j=q-R[0],J=N-R[1],W=L-R[0],H=B-R[1],z=1/Pd(((c=(j*W+J*H)/(Sd(j*j+J*J)*Sd(W*W+H*H)))>1?0:c<-1?Id:Math.acos(c))/2),$=Sd(R[0]*R[0]+R[1]*R[1]);S=Md(P,(d-$)/(z-1)),T=Md(P,(h-$)/(z+1))}}C>Td?T>Td?(m=Fd(F,U,q,N,h,T,g),y=Fd(L,B,O,E,h,T,g),u.moveTo(m.cx+m.x01,m.cy+m.y01),T<P?u.arc(m.cx,m.cy,T,Dd(m.y01,m.x01),Dd(y.y01,y.x01),!g):(u.arc(m.cx,m.cy,T,Dd(m.y01,m.x01),Dd(m.y11,m.x11),!g),u.arc(0,0,h,Dd(m.cy+m.y11,m.cx+m.x11),Dd(y.cy+y.y11,y.cx+y.x11),!g),u.arc(y.cx,y.cy,T,Dd(y.y11,y.x11),Dd(y.y01,y.x01),!g))):(u.moveTo(q,N),u.arc(0,0,h,v,_,!g)):u.moveTo(q,N),d>Td&&D>Td?S>Td?(m=Fd(O,E,L,B,d,-S,g),y=Fd(q,N,F,U,d,-S,g),u.lineTo(m.cx+m.x01,m.cy+m.y01),S<P?u.arc(m.cx,m.cy,S,Dd(m.y01,m.x01),Dd(y.y01,y.x01),!g):(u.arc(m.cx,m.cy,S,Dd(m.y01,m.x01),Dd(m.y11,m.x11),!g),u.arc(0,0,d,Dd(m.cy+m.y11,m.cx+m.x11),Dd(y.cy+y.y11,y.cx+y.x11),g),u.arc(y.cx,y.cy,S,Dd(y.y11,y.x11),Dd(y.y01,y.x01),!g))):u.arc(0,0,d,w,x,g):u.lineTo(O,E)}else u.moveTo(0,0);if(u.closePath(),o)return u=null,o+""||null}return o.centroid=function(){var t=(+n.apply(this,arguments)+ +l.apply(this,arguments))/2,e=(+i.apply(this,arguments)+ +a.apply(this,arguments))/2-Id/2;return[Cd(e)*t,Pd(e)*t]},o.innerRadius=function(l){return arguments.length?(n="function"==typeof l?l:xd(+l),o):n},o.outerRadius=function(n){return arguments.length?(l="function"==typeof n?n:xd(+n),o):l},o.cornerRadius=function(n){return arguments.length?(t="function"==typeof n?n:xd(+n),o):t},o.padRadius=function(n){return arguments.length?(e=null==n?null:"function"==typeof n?n:xd(+n),o):e},o.startAngle=function(n){return arguments.length?(i="function"==typeof n?n:xd(+n),o):i},o.endAngle=function(n){return arguments.length?(a="function"==typeof n?n:xd(+n),o):a},o.padAngle=function(n){return arguments.length?(r="function"==typeof n?n:xd(+n),o):r},o.context=function(n){return arguments.length?(u=null==n?null:n,o):u},o};function jd(n){this._context=n}jd.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(n,l){switch(n=+n,l=+l,this._point){case 0:this._point=1,this._line?this._context.lineTo(n,l):this._context.moveTo(n,l);break;case 1:this._point=2;default:this._context.lineTo(n,l)}}};var Jd=function(n){return new jd(n)};function Wd(n){return n[0]}function Hd(n){return n[1]}var zd=function(){var n=Wd,l=Hd,t=xd(!0),e=null,i=Jd,a=null;function r(r){var u,o,s,c=r.length,d=!1;for(null==e&&(a=i(s=_d())),u=0;u<=c;++u)!(u<c&&t(o=r[u],u,r))===d&&((d=!d)?a.lineStart():a.lineEnd()),d&&a.point(+n(o,u,r),+l(o,u,r));if(s)return a=null,s+""||null}return r.x=function(l){return arguments.length?(n="function"==typeof l?l:xd(+l),r):n},r.y=function(n){return arguments.length?(l="function"==typeof n?n:xd(+n),r):l},r.defined=function(n){return arguments.length?(t="function"==typeof n?n:xd(!!n),r):t},r.curve=function(n){return arguments.length?(i=n,null!=e&&(a=i(e)),r):i},r.context=function(n){return arguments.length?(null==n?e=a=null:a=i(e=n),r):e},r},$d=function(){var n=Wd,l=null,t=xd(0),e=Hd,i=xd(!0),a=null,r=Jd,u=null;function o(o){var s,c,d,h,f,b=o.length,p=!1,g=new Array(b),m=new Array(b);for(null==a&&(u=r(f=_d())),s=0;s<=b;++s){if(!(s<b&&i(h=o[s],s,o))===p)if(p=!p)c=s,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),d=s-1;d>=c;--d)u.point(g[d],m[d]);u.lineEnd(),u.areaEnd()}p&&(g[s]=+n(h,s,o),m[s]=+t(h,s,o),u.point(l?+l(h,s,o):g[s],e?+e(h,s,o):m[s]))}if(f)return u=null,f+""||null}function s(){return zd().defined(i).curve(r).context(a)}return o.x=function(t){return arguments.length?(n="function"==typeof t?t:xd(+t),l=null,o):n},o.x0=function(l){return arguments.length?(n="function"==typeof l?l:xd(+l),o):n},o.x1=function(n){return arguments.length?(l=null==n?null:"function"==typeof n?n:xd(+n),o):l},o.y=function(n){return arguments.length?(t="function"==typeof n?n:xd(+n),e=null,o):t},o.y0=function(n){return arguments.length?(t="function"==typeof n?n:xd(+n),o):t},o.y1=function(n){return arguments.length?(e=null==n?null:"function"==typeof n?n:xd(+n),o):e},o.lineX0=o.lineY0=function(){return s().x(n).y(t)},o.lineY1=function(){return s().x(n).y(e)},o.lineX1=function(){return s().x(l).y(t)},o.defined=function(n){return arguments.length?(i="function"==typeof n?n:xd(!!n),o):i},o.curve=function(n){return arguments.length?(r=n,null!=a&&(u=r(a)),o):r},o.context=function(n){return arguments.length?(null==n?a=u=null:u=r(a=n),o):a},o},Gd=function(n,l){return l<n?-1:l>n?1:l>=n?0:NaN},Vd=function(n){return n},Kd=function(){var n=Vd,l=Gd,t=null,e=xd(0),i=xd(qd),a=xd(0);function r(r){var u,o,s,c,d,h=r.length,f=0,b=new Array(h),p=new Array(h),g=+e.apply(this,arguments),m=Math.min(qd,Math.max(-qd,i.apply(this,arguments)-g)),y=Math.min(Math.abs(m)/h,a.apply(this,arguments)),v=y*(m<0?-1:1);for(u=0;u<h;++u)(d=p[b[u]=u]=+n(r[u],u,r))>0&&(f+=d);for(null!=l?b.sort((function(n,t){return l(p[n],p[t])})):null!=t&&b.sort((function(n,l){return t(r[n],r[l])})),u=0,s=f?(m-h*v)/f:0;u<h;++u,g=c)p[o=b[u]]={data:r[o],index:u,value:d=p[o],startAngle:g,endAngle:c=g+(d>0?d*s:0)+v,padAngle:y};return p}return r.value=function(l){return arguments.length?(n="function"==typeof l?l:xd(+l),r):n},r.sortValues=function(n){return arguments.length?(l=n,t=null,r):l},r.sort=function(n){return arguments.length?(t=n,l=null,r):t},r.startAngle=function(n){return arguments.length?(e="function"==typeof n?n:xd(+n),r):e},r.endAngle=function(n){return arguments.length?(i="function"==typeof n?n:xd(+n),r):i},r.padAngle=function(n){return arguments.length?(a="function"==typeof n?n:xd(+n),r):a},r},Yd=Zd(Jd);function Xd(n){this._curve=n}function Zd(n){function l(l){return new Xd(n(l))}return l._curve=n,l}function Qd(n){var l=n.curve;return n.angle=n.x,delete n.x,n.radius=n.y,delete n.y,n.curve=function(n){return arguments.length?l(Zd(n)):l()._curve},n}Xd.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(n,l){this._curve.point(l*Math.sin(n),l*-Math.cos(n))}};var nh=function(){return Qd(zd().curve(Yd))},lh=function(){var n=$d().curve(Yd),l=n.curve,t=n.lineX0,e=n.lineX1,i=n.lineY0,a=n.lineY1;return n.angle=n.x,delete n.x,n.startAngle=n.x0,delete n.x0,n.endAngle=n.x1,delete n.x1,n.radius=n.y,delete n.y,n.innerRadius=n.y0,delete n.y0,n.outerRadius=n.y1,delete n.y1,n.lineStartAngle=function(){return Qd(t())},delete n.lineX0,n.lineEndAngle=function(){return Qd(e())},delete n.lineX1,n.lineInnerRadius=function(){return Qd(i())},delete n.lineY0,n.lineOuterRadius=function(){return Qd(a())},delete n.lineY1,n.curve=function(n){return arguments.length?l(Zd(n)):l()._curve},n},th=function(n,l){return[(l=+l)*Math.cos(n-=Math.PI/2),l*Math.sin(n)]},eh=Array.prototype.slice;function ih(n){return n.source}function ah(n){return n.target}function rh(n){var l=ih,t=ah,e=Wd,i=Hd,a=null;function r(){var r,u=eh.call(arguments),o=l.apply(this,u),s=t.apply(this,u);if(a||(a=r=_d()),n(a,+e.apply(this,(u[0]=o,u)),+i.apply(this,u),+e.apply(this,(u[0]=s,u)),+i.apply(this,u)),r)return a=null,r+""||null}return r.source=function(n){return arguments.length?(l=n,r):l},r.target=function(n){return arguments.length?(t=n,r):t},r.x=function(n){return arguments.length?(e="function"==typeof n?n:xd(+n),r):e},r.y=function(n){return arguments.length?(i="function"==typeof n?n:xd(+n),r):i},r.context=function(n){return arguments.length?(a=null==n?null:n,r):a},r}function uh(n,l,t,e,i){n.moveTo(l,t),n.bezierCurveTo(l=(l+e)/2,t,l,i,e,i)}function oh(n,l,t,e,i){n.moveTo(l,t),n.bezierCurveTo(l,t=(t+i)/2,e,t,e,i)}function sh(n,l,t,e,i){var a=th(l,t),r=th(l,t=(t+i)/2),u=th(e,t),o=th(e,i);n.moveTo(a[0],a[1]),n.bezierCurveTo(r[0],r[1],u[0],u[1],o[0],o[1])}function ch(){return rh(uh)}function dh(){return rh(oh)}function hh(){var n=rh(sh);return n.angle=n.x,delete n.x,n.radius=n.y,delete n.y,n}var fh={draw:function(n,l){var t=Math.sqrt(l/Id);n.moveTo(t,0),n.arc(0,0,t,0,qd)}},bh={draw:function(n,l){var t=Math.sqrt(l/5)/2;n.moveTo(-3*t,-t),n.lineTo(-t,-t),n.lineTo(-t,-3*t),n.lineTo(t,-3*t),n.lineTo(t,-t),n.lineTo(3*t,-t),n.lineTo(3*t,t),n.lineTo(t,t),n.lineTo(t,3*t),n.lineTo(-t,3*t),n.lineTo(-t,t),n.lineTo(-3*t,t),n.closePath()}},ph=Math.sqrt(1/3),gh=2*ph,mh={draw:function(n,l){var t=Math.sqrt(l/gh),e=t*ph;n.moveTo(0,-t),n.lineTo(e,0),n.lineTo(0,t),n.lineTo(-e,0),n.closePath()}},yh=Math.sin(Id/10)/Math.sin(7*Id/10),vh=Math.sin(qd/10)*yh,_h=-Math.cos(qd/10)*yh,xh={draw:function(n,l){var t=Math.sqrt(.8908130915292852*l),e=vh*t,i=_h*t;n.moveTo(0,-t),n.lineTo(e,i);for(var a=1;a<5;++a){var r=qd*a/5,u=Math.cos(r),o=Math.sin(r);n.lineTo(o*t,-u*t),n.lineTo(u*e-o*i,o*e+u*i)}n.closePath()}},wh={draw:function(n,l){var t=Math.sqrt(l),e=-t/2;n.rect(e,e,t,t)}},Dh=Math.sqrt(3),Ch={draw:function(n,l){var t=-Math.sqrt(l/(3*Dh));n.moveTo(0,2*t),n.lineTo(-Dh*t,-t),n.lineTo(Dh*t,-t),n.closePath()}},kh=Math.sqrt(3)/2,Mh=1/Math.sqrt(12),Ph=3*(Mh/2+1),Sh={draw:function(n,l){var t=Math.sqrt(l/Ph),e=t/2,i=t*Mh,a=e,r=t*Mh+t,u=-a,o=r;n.moveTo(e,i),n.lineTo(a,r),n.lineTo(u,o),n.lineTo(-.5*e-kh*i,kh*e+-.5*i),n.lineTo(-.5*a-kh*r,kh*a+-.5*r),n.lineTo(-.5*u-kh*o,kh*u+-.5*o),n.lineTo(-.5*e+kh*i,-.5*i-kh*e),n.lineTo(-.5*a+kh*r,-.5*r-kh*a),n.lineTo(-.5*u+kh*o,-.5*o-kh*u),n.closePath()}},Th=[fh,bh,mh,wh,xh,Ch,Sh],Ih=function(){var n=xd(fh),l=xd(64),t=null;function e(){var e;if(t||(t=e=_d()),n.apply(this,arguments).draw(t,+l.apply(this,arguments)),e)return t=null,e+""||null}return e.type=function(l){return arguments.length?(n="function"==typeof l?l:xd(l),e):n},e.size=function(n){return arguments.length?(l="function"==typeof n?n:xd(+n),e):l},e.context=function(n){return arguments.length?(t=null==n?null:n,e):t},e},Ah=function(){};function qh(n,l,t){n._context.bezierCurveTo((2*n._x0+n._x1)/3,(2*n._y0+n._y1)/3,(n._x0+2*n._x1)/3,(n._y0+2*n._y1)/3,(n._x0+4*n._x1+l)/6,(n._y0+4*n._y1+t)/6)}function Nh(n){this._context=n}Nh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:qh(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(n,l){switch(n=+n,l=+l,this._point){case 0:this._point=1,this._line?this._context.lineTo(n,l):this._context.moveTo(n,l);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:qh(this,n,l)}this._x0=this._x1,this._x1=n,this._y0=this._y1,this._y1=l}};var Oh=function(n){return new Nh(n)};function Eh(n){this._context=n}Eh.prototype={areaStart:Ah,areaEnd:Ah,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(n,l){switch(n=+n,l=+l,this._point){case 0:this._point=1,this._x2=n,this._y2=l;break;case 1:this._point=2,this._x3=n,this._y3=l;break;case 2:this._point=3,this._x4=n,this._y4=l,this._context.moveTo((this._x0+4*this._x1+n)/6,(this._y0+4*this._y1+l)/6);break;default:qh(this,n,l)}this._x0=this._x1,this._x1=n,this._y0=this._y1,this._y1=l}};var Rh=function(n){return new Eh(n)};function Lh(n){this._context=n}Lh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(n,l){switch(n=+n,l=+l,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var t=(this._x0+4*this._x1+n)/6,e=(this._y0+4*this._y1+l)/6;this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 3:this._point=4;default:qh(this,n,l)}this._x0=this._x1,this._x1=n,this._y0=this._y1,this._y1=l}};var Bh=function(n){return new Lh(n)};function Fh(n,l){this._basis=new Nh(n),this._beta=l}Fh.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var n=this._x,l=this._y,t=n.length-1;if(t>0)for(var e,i=n[0],a=l[0],r=n[t]-i,u=l[t]-a,o=-1;++o<=t;)this._basis.point(this._beta*n[o]+(1-this._beta)*(i+(e=o/t)*r),this._beta*l[o]+(1-this._beta)*(a+e*u));this._x=this._y=null,this._basis.lineEnd()},point:function(n,l){this._x.push(+n),this._y.push(+l)}};var Uh=function n(l){function t(n){return 1===l?new Nh(n):new Fh(n,l)}return t.beta=function(l){return n(+l)},t}(.85);function jh(n,l,t){n._context.bezierCurveTo(n._x1+n._k*(n._x2-n._x0),n._y1+n._k*(n._y2-n._y0),n._x2+n._k*(n._x1-l),n._y2+n._k*(n._y1-t),n._x2,n._y2)}function Jh(n,l){this._context=n,this._k=(1-l)/6}Jh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:jh(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(n,l){switch(n=+n,l=+l,this._point){case 0:this._point=1,this._line?this._context.lineTo(n,l):this._context.moveTo(n,l);break;case 1:this._point=2,this._x1=n,this._y1=l;break;case 2:this._point=3;default:jh(this,n,l)}this._x0=this._x1,this._x1=this._x2,this._x2=n,this._y0=this._y1,this._y1=this._y2,this._y2=l}};var Wh=function n(l){function t(n){return new Jh(n,l)}return t.tension=function(l){return n(+l)},t}(0);function Hh(n,l){this._context=n,this._k=(1-l)/6}Hh.prototype={areaStart:Ah,areaEnd:Ah,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(n,l){switch(n=+n,l=+l,this._point){case 0:this._point=1,this._x3=n,this._y3=l;break;case 1:this._point=2,this._context.moveTo(this._x4=n,this._y4=l);break;case 2:this._point=3,this._x5=n,this._y5=l;break;default:jh(this,n,l)}this._x0=this._x1,this._x1=this._x2,this._x2=n,this._y0=this._y1,this._y1=this._y2,this._y2=l}};var zh=function n(l){function t(n){return new Hh(n,l)}return t.tension=function(l){return n(+l)},t}(0);function $h(n,l){this._context=n,this._k=(1-l)/6}$h.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(n,l){switch(n=+n,l=+l,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:jh(this,n,l)}this._x0=this._x1,this._x1=this._x2,this._x2=n,this._y0=this._y1,this._y1=this._y2,this._y2=l}};var Gh=function n(l){function t(n){return new $h(n,l)}return t.tension=function(l){return n(+l)},t}(0);function Vh(n,l,t){var e=n._x1,i=n._y1,a=n._x2,r=n._y2;if(n._l01_a>Td){var u=2*n._l01_2a+3*n._l01_a*n._l12_a+n._l12_2a,o=3*n._l01_a*(n._l01_a+n._l12_a);e=(e*u-n._x0*n._l12_2a+n._x2*n._l01_2a)/o,i=(i*u-n._y0*n._l12_2a+n._y2*n._l01_2a)/o}if(n._l23_a>Td){var s=2*n._l23_2a+3*n._l23_a*n._l12_a+n._l12_2a,c=3*n._l23_a*(n._l23_a+n._l12_a);a=(a*s+n._x1*n._l23_2a-l*n._l12_2a)/c,r=(r*s+n._y1*n._l23_2a-t*n._l12_2a)/c}n._context.bezierCurveTo(e,i,a,r,n._x2,n._y2)}function Kh(n,l){this._context=n,this._alpha=l}Kh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(n,l){if(n=+n,l=+l,this._point){var t=this._x2-n,e=this._y2-l;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(t*t+e*e,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(n,l):this._context.moveTo(n,l);break;case 1:this._point=2;break;case 2:this._point=3;default:Vh(this,n,l)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=n,this._y0=this._y1,this._y1=this._y2,this._y2=l}};var Yh=function n(l){function t(n){return l?new Kh(n,l):new Jh(n,0)}return t.alpha=function(l){return n(+l)},t}(.5);function Xh(n,l){this._context=n,this._alpha=l}Xh.prototype={areaStart:Ah,areaEnd:Ah,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(n,l){if(n=+n,l=+l,this._point){var t=this._x2-n,e=this._y2-l;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(t*t+e*e,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=n,this._y3=l;break;case 1:this._point=2,this._context.moveTo(this._x4=n,this._y4=l);break;case 2:this._point=3,this._x5=n,this._y5=l;break;default:Vh(this,n,l)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=n,this._y0=this._y1,this._y1=this._y2,this._y2=l}};var Zh=function n(l){function t(n){return l?new Xh(n,l):new Hh(n,0)}return t.alpha=function(l){return n(+l)},t}(.5);function Qh(n,l){this._context=n,this._alpha=l}Qh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(n,l){if(n=+n,l=+l,this._point){var t=this._x2-n,e=this._y2-l;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(t*t+e*e,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Vh(this,n,l)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=n,this._y0=this._y1,this._y1=this._y2,this._y2=l}};var nf=function n(l){function t(n){return l?new Qh(n,l):new $h(n,0)}return t.alpha=function(l){return n(+l)},t}(.5);function lf(n){this._context=n}lf.prototype={areaStart:Ah,areaEnd:Ah,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(n,l){n=+n,l=+l,this._point?this._context.lineTo(n,l):(this._point=1,this._context.moveTo(n,l))}};var tf=function(n){return new lf(n)};function ef(n){return n<0?-1:1}function af(n,l,t){var e=n._x1-n._x0,i=l-n._x1,a=(n._y1-n._y0)/(e||i<0&&-0),r=(t-n._y1)/(i||e<0&&-0),u=(a*i+r*e)/(e+i);return(ef(a)+ef(r))*Math.min(Math.abs(a),Math.abs(r),.5*Math.abs(u))||0}function rf(n,l){var t=n._x1-n._x0;return t?(3*(n._y1-n._y0)/t-l)/2:l}function uf(n,l,t){var e=n._x0,i=n._x1,a=n._y1,r=(i-e)/3;n._context.bezierCurveTo(e+r,n._y0+r*l,i-r,a-r*t,i,a)}function of(n){this._context=n}function sf(n){this._context=new cf(n)}function cf(n){this._context=n}function df(n){return new of(n)}function hf(n){return new sf(n)}function ff(n){this._context=n}function bf(n){var l,t,e=n.length-1,i=new Array(e),a=new Array(e),r=new Array(e);for(i[0]=0,a[0]=2,r[0]=n[0]+2*n[1],l=1;l<e-1;++l)i[l]=1,a[l]=4,r[l]=4*n[l]+2*n[l+1];for(i[e-1]=2,a[e-1]=7,r[e-1]=8*n[e-1]+n[e],l=1;l<e;++l)a[l]-=t=i[l]/a[l-1],r[l]-=t*r[l-1];for(i[e-1]=r[e-1]/a[e-1],l=e-2;l>=0;--l)i[l]=(r[l]-i[l+1])/a[l];for(a[e-1]=(n[e]+i[e-1])/2,l=0;l<e-1;++l)a[l]=2*n[l+1]-i[l+1];return[i,a]}of.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:uf(this,this._t0,rf(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(n,l){var t=NaN;if(l=+l,(n=+n)!==this._x1||l!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(n,l):this._context.moveTo(n,l);break;case 1:this._point=2;break;case 2:this._point=3,uf(this,rf(this,t=af(this,n,l)),t);break;default:uf(this,this._t0,t=af(this,n,l))}this._x0=this._x1,this._x1=n,this._y0=this._y1,this._y1=l,this._t0=t}}},(sf.prototype=Object.create(of.prototype)).point=function(n,l){of.prototype.point.call(this,l,n)},cf.prototype={moveTo:function(n,l){this._context.moveTo(l,n)},closePath:function(){this._context.closePath()},lineTo:function(n,l){this._context.lineTo(l,n)},bezierCurveTo:function(n,l,t,e,i,a){this._context.bezierCurveTo(l,n,e,t,a,i)}},ff.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var n=this._x,l=this._y,t=n.length;if(t)if(this._line?this._context.lineTo(n[0],l[0]):this._context.moveTo(n[0],l[0]),2===t)this._context.lineTo(n[1],l[1]);else for(var e=bf(n),i=bf(l),a=0,r=1;r<t;++a,++r)this._context.bezierCurveTo(e[0][a],i[0][a],e[1][a],i[1][a],n[r],l[r]);(this._line||0!==this._line&&1===t)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(n,l){this._x.push(+n),this._y.push(+l)}};var pf=function(n){return new ff(n)};function gf(n,l){this._context=n,this._t=l}gf.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(n,l){switch(n=+n,l=+l,this._point){case 0:this._point=1,this._line?this._context.lineTo(n,l):this._context.moveTo(n,l);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,l),this._context.lineTo(n,l);else{var t=this._x*(1-this._t)+n*this._t;this._context.lineTo(t,this._y),this._context.lineTo(t,l)}}this._x=n,this._y=l}};var mf=function(n){return new gf(n,.5)};function yf(n){return new gf(n,0)}function vf(n){return new gf(n,1)}var _f=function(n,l){if((i=n.length)>1)for(var t,e,i,a=1,r=n[l[0]],u=r.length;a<i;++a)for(e=r,r=n[l[a]],t=0;t<u;++t)r[t][1]+=r[t][0]=isNaN(e[t][1])?e[t][0]:e[t][1]},xf=function(n){for(var l=n.length,t=new Array(l);--l>=0;)t[l]=l;return t};function wf(n,l){return n[l]}var Df=function(){var n=xd([]),l=xf,t=_f,e=wf;function i(i){var a,r,u=n.apply(this,arguments),o=i.length,s=u.length,c=new Array(s);for(a=0;a<s;++a){for(var d,h=u[a],f=c[a]=new Array(o),b=0;b<o;++b)f[b]=d=[0,+e(i[b],h,b,i)],d.data=i[b];f.key=h}for(a=0,r=l(c);a<s;++a)c[r[a]].index=a;return t(c,r),c}return i.keys=function(l){return arguments.length?(n="function"==typeof l?l:xd(eh.call(l)),i):n},i.value=function(n){return arguments.length?(e="function"==typeof n?n:xd(+n),i):e},i.order=function(n){return arguments.length?(l=null==n?xf:"function"==typeof n?n:xd(eh.call(n)),i):l},i.offset=function(n){return arguments.length?(t=null==n?_f:n,i):t},i},Cf=function(n,l){if((e=n.length)>0){for(var t,e,i,a=0,r=n[0].length;a<r;++a){for(i=t=0;t<e;++t)i+=n[t][a][1]||0;if(i)for(t=0;t<e;++t)n[t][a][1]/=i}_f(n,l)}},kf=function(n,l){if((u=n.length)>0)for(var t,e,i,a,r,u,o=0,s=n[l[0]].length;o<s;++o)for(a=r=0,t=0;t<u;++t)(i=(e=n[l[t]][o])[1]-e[0])>=0?(e[0]=a,e[1]=a+=i):i<0?(e[1]=r,e[0]=r+=i):e[0]=a},Mf=function(n,l){if((t=n.length)>0){for(var t,e=0,i=n[l[0]],a=i.length;e<a;++e){for(var r=0,u=0;r<t;++r)u+=n[r][e][1]||0;i[e][1]+=i[e][0]=-u/2}_f(n,l)}},Pf=function(n,l){if((i=n.length)>0&&(e=(t=n[l[0]]).length)>0){for(var t,e,i,a=0,r=1;r<e;++r){for(var u=0,o=0,s=0;u<i;++u){for(var c=n[l[u]],d=c[r][1]||0,h=(d-(c[r-1][1]||0))/2,f=0;f<u;++f){var b=n[l[f]];h+=(b[r][1]||0)-(b[r-1][1]||0)}o+=d,s+=h*d}t[r-1][1]+=t[r-1][0]=a,o&&(a-=s/o)}t[r-1][1]+=t[r-1][0]=a,_f(n,l)}},Sf=function(n){var l=n.map(Tf);return xf(n).sort((function(n,t){return l[n]-l[t]}))};function Tf(n){for(var l,t=-1,e=0,i=n.length,a=-1/0;++t<i;)(l=+n[t][1])>a&&(a=l,e=t);return e}var If=function(n){var l=n.map(Af);return xf(n).sort((function(n,t){return l[n]-l[t]}))};function Af(n){for(var l,t=0,e=-1,i=n.length;++e<i;)(l=+n[e][1])&&(t+=l);return t}var qf=function(n){return If(n).reverse()},Nf=function(n){var l,t,e=n.length,i=n.map(Af),a=Sf(n),r=0,u=0,o=[],s=[];for(l=0;l<e;++l)t=a[l],r<u?(r+=i[t],o.push(t)):(u+=i[t],s.push(t));return s.reverse().concat(o)},Of=function(n){return xf(n).reverse()};const Ef=Object.freeze({max:Xn,min:Zn,extent:Qn,mean:nl,median:ul,quantile:il,sum:ol,deviation:cl,variance:sl,scan:dl,bisectLeft:pl,bisectRight:bl,bisector:hl,ascending:el,descending:ml,cross:xl,merge:wl,pairs:Dl,permute:kl,range:Ml,shuffle:Pl,ticks:Al,tickIncrement:ql,tickStep:Nl,transpose:Ol,zip:Rl,histogram:Wl,thresholdFreedmanDiaconis:Hl,thresholdScott:zl,thresholdSturges:Jl,bisect:gl,axisTop:at,axisRight:rt,axisBottom:ut,axisLeft:ot,scaleLinear:vi,scalePow:Di,scaleSqrt:Ci,scaleLog:qi,scaleIdentity:Ni,scaleTime:Er,scaleUtc:Rr,scaleSequential:Br,scaleDiverging:Fr,scaleQuantize:Ur,scaleQuantile:jr,scaleThreshold:Jr,scaleOrdinal:Hr,scaleBand:zr,scalePoint:$r,scaleImplicit:Wr,interpolateBrBG:Yr,interpolatePRGn:Zr,interpolatePiYG:nu,interpolatePuOr:tu,interpolateRdBu:iu,interpolateRdGy:ru,interpolateRdYlBu:ou,interpolateRdYlGn:cu,interpolateSpectral:hu,interpolateBlues:bu,interpolateGreens:gu,interpolateGreys:yu,interpolateOranges:_u,interpolatePurples:wu,interpolateReds:Cu,interpolateViridis:Mu,interpolateInferno:Su,interpolateMagma:Pu,interpolatePlasma:Tu,interpolateWarm:Iu,interpolateCool:Au,interpolateRainbow:Nu,interpolateSinebow:Lu,interpolateCubehelixDefault:Bu,interpolateBuGn:Uu,interpolateBuPu:Ju,interpolateGnBu:Hu,interpolateOrRd:$u,interpolatePuBuGn:Vu,interpolatePuBu:Yu,interpolatePuRd:Zu,interpolateRdPu:no,interpolateYlGnBu:to,interpolateYlGn:io,interpolateYlOrBr:ro,interpolateYlOrRd:oo,schemeCategory10:so,schemeAccent:co,schemeDark2:ho,schemePaired:fo,schemePastel1:bo,schemePastel2:po,schemeSet1:go,schemeSet2:mo,schemeSet3:yo,schemeBrBG:Kr,schemePRGn:Xr,schemePiYG:Qr,schemePuOr:lu,schemeRdBu:eu,schemeRdGy:au,schemeRdYlBu:uu,schemeRdYlGn:su,schemeSpectral:du,schemeBlues:fu,schemeGreens:pu,schemeGreys:mu,schemeOranges:vu,schemePurples:xu,schemeReds:Du,schemeBuGn:Fu,schemeBuPu:ju,schemeGnBu:Wu,schemeOrRd:zu,schemePuBuGn:Gu,schemePuBu:Ku,schemePuRd:Xu,schemeRdPu:Qu,schemeYlGnBu:lo,schemeYlGn:eo,schemeYlOrBr:ao,schemeYlOrRd:uo,select:As,selectAll:Fs,customEvent:Ds,mouse:Bs,touch:Us,touches:js,clientPoint:Ls,style:$o,local:Os,namespace:xo,window:Jo,create:qs,creator:Co,matcher:To,selector:Mo,selectorAll:So,selection:Is,event:ms,namespaces:_o,arc:Ud,pie:Kd,line:zd,lineRadial:nh,radialLine:nh,area:$d,areaRadial:lh,radialArea:lh,linkHorizontal:ch,linkVertical:dh,linkRadial:hh,symbol:Ih,pointRadial:th,stack:Df,stackOrderAppearance:Sf,stackOrderAscending:If,stackOrderDescending:qf,stackOrderInsideOut:Nf,stackOrderNone:xf,stackOrderReverse:Of,stackOffsetExpand:Cf,stackOffsetDiverging:kf,stackOffsetNone:_f,stackOffsetSilhouette:Mf,stackOffsetWiggle:Pf,curveBasis:Oh,curveBasisClosed:Rh,curveBasisOpen:Bh,curveBundle:Uh,curveCardinal:Wh,curveCardinalClosed:zh,curveCardinalOpen:Gh,curveCatmullRom:Yh,curveCatmullRomClosed:Zh,curveCatmullRomOpen:nf,curveLinear:Jd,curveLinearClosed:tf,curveMonotoneX:df,curveMonotoneY:hf,curveNatural:pf,curveStep:mf,curveStepAfter:vf,curveStepBefore:yf,symbols:Th,symbolCircle:fh,symbolCross:bh,symbolDiamond:mh,symbolSquare:wh,symbolStar:xh,symbolTriangle:Ch,symbolWye:Sh,active:id,interrupt:Pc,transition:Xc});class Rf{constructor(){this.outliers=[]}}class Lf{dataToBoxes(n){return n?n.map((n,l)=>{const t=this.datumToBox(n);return t.ix=l,t.key=l+1+".",t}):[]}datumToBox(n){const l=new Rf;if(!n||0===n.length)return l;n=n.sort(Ef.ascending),l.mean=Ef.mean(n),l.median=Ef.median(n),l.fstQnt=Ef.quantile(n,.25),l.thrdQnt=Ef.quantile(n,.75);const t=1.5*(l.thrdQnt-l.fstQnt);l.lowWskr=l.fstQnt-t,l.highWskr=l.thrdQnt+t;for(let e=0;e<n.length;e++)if(n[e]>=l.lowWskr){l.lowWskr=n[e];break}for(let e=n.length-1;e>=0;e--)if(n[e]<=l.highWskr){l.highWskr=n[e];break}return l.outliers=n.filter(n=>n<l.lowWskr||n>l.highWskr),l}mockEmptyValues(n,l){n.forEach(n=>{null==n.mean&&(n.mean=l,n.median=l,n.fstQnt=l,n.thrdQnt=l,n.lowWskr=l,n.highWskr=l)})}}let Bf=(()=>{class n{static extendPalette(n,l){n&&0!==n.length||(n=["black"]);const t=[];for(let e=0;e<l;e++)t.push(n[e%n.length]);return t}static palette(l){return n.extendPalette(l<=n.schemeCategory10.length?n.schemeCategory10:n.schemeCategory20,l)}}return n.schemeCategory10=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],n.schemeCategory20=["#1f77b4","#aec7e8","#ff7f0e","#ffbb78","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5","#8c564b","#c49c94","#e377c2","#f7b6d2","#7f7f7f","#c7c7c7","#bcbd22","#dbdb8d","#17becf","#9edae5"],n})();class Ff{static round(n,l){return l=l||n,(l=Math.abs(l))<.01?n:l<1?Math.round(1e4*n)/1e4:l<1e3?Math.round(100*n)/100:Math.round(n)}}class Uf{constructor(){this.vMargin=25,this.hMarginL=20,this.hMarginR=15,this.rowWidth=30,this.rowGap=.2,this.transitionTime=600,this.boxStrokeWidth="2px",this.boxFillOpacity=.35,this.meanStrokeWidth="4px",this.labelFont="12px",this.labelFillOpacity=.35,this.backLabelOpacity=.3,this.backdropColor="white",this.backdropOpacity=1,this.whiskerStrokeWidth="1px",this.outliersStrokeWidth="1px",this.outliersCircleRadius=3,this.outliersFillOpacity=.4}}let jf=function(){return new Uf};class Jf{}function Wf(n,l,t){const e=t.range(),i=t(n)+l;return i<e[0]?e[0]:i>e[1]?e[1]:i}class Hf{constructor(n,l,t){this.ngZone=n,this.changeDetectorRef=l,this.hidden=!1,this.removed=[],this.domain=[17,36],this.palette=[],this.labels=[],this.labelsOn="always",this.lookAndFeel=jf(),this.sortChanged=!1,this.colors=new e.m,this.graphicContext=new Jf,this.boxUtil=new Lf,this.sortFunction=function(n,l){return n.ix-l.ix},this.d3=Ef,this.parentNativeElement=t.nativeElement}set sorted(n){this.sortFunction="median"===n?(n,l)=>n.median-l.median:"label"===n?(n,l)=>n.label===l.label?0:n.label<l.label?-1:1:(n,l)=>n.ix-l.ix}ngAfterViewInit(){this.changeDetectorRef.detach()}ngOnChanges(n){this.changeDetectorRef.detectChanges(),this.initSVG(),this.data&&(this.sortChanged=void 0!==n.sorted,this.hidden||this.updatePlot())}isDataUpdate(n){return n.data||n.removed||n.domain||n.palette||n.labels}initSVG(){if(!this.d3Svg){const n=this.d3.select(this.parentNativeElement);this.d3Svg=n.select(".hbox-plot").append("svg"),this.d3Svg.attr("width","0")}}ngOnInit(){null!==this.parentNativeElement||console.error("Missing parrent element for the component")}ngOnDestroy(){this.d3Svg&&this.d3Svg.empty&&!this.d3Svg.empty()&&this.d3Svg.selectAll("*").remove()}testGraphicContext(n){this.graphicContext=n}updatePlot(){this.lookAndFeel.transitionTime>0?(this.graphicContext.transitionOn=!0,this.ngZone.runOutsideAngular(()=>{this.graphicContext.transition=this.d3.transition().duration(this.lookAndFeel.transitionTime)})):(this.graphicContext.transitionOn=!1,this.graphicContext.transition=void 0),this.graphicContext=this.updatePalette(this.data,this.palette,this.graphicContext);let n=this.prepareDataModel(this.data,this.removed,this.labels,this.graphicContext.palette,this.domain,this.sortFunction);n=n.filter(n=>!n.hidden),this.graphicContext=this.preparePane(n,this.lookAndFeel,this.graphicContext),this.graphicContext=this.prepareScales(n,this.domain,this.lookAndFeel,this.graphicContext),this.graphicContext=this.plotAxisBox(n,this.domain,this.lookAndFeel,this.mainPane,this.graphicContext),this.graphicContext=this.plotDataBoxes(n,this.lookAndFeel,this.mainPane,this.graphicContext),this.graphicContext=this.prepareTooltip(this.mainPane,this.graphicContext),this.graphicContext=this.prepareLabels(n,this.mainPane,this.lookAndFeel,this.graphicContext,this.labelsOn)}prepareDataModel(n,l,t,e,i,a){let r=this.boxUtil.dataToBoxes(n);return this.boxUtil.mockEmptyValues(r,i[1]),this.labelBoxes(r,t),this.colorBoxes(r,e),l.forEach(n=>{r[n]&&(r[n].hidden=!0)}),r=r.sort(a)}updatePalette(n,l,t){return t.palette=l&&0!==l.length?Bf.extendPalette(l,n.length):Bf.palette(n.length),this.colors.next(t.palette.slice()),t}colorBoxes(n,l){n.forEach(n=>n.color=l[n.ix])}preparePane(n,l,t){this.mainPane||(this.d3Svg.attr("width","100%"),this.mainPane=this.d3Svg.append("g"),this.mainPane.classed("mainPane",!0));const e=this.calculateWorkspaceHeight(n,l)+2*l.vMargin;return(t.transitionOn?this.d3Svg.transition(t.transition):this.d3Svg).attr("viewBox","0 0 500 "+e),this.mainPane.attr("transform","translate("+l.hMarginL+","+l.vMargin+")"),t.workspaceWidth=500-l.hMarginL-l.hMarginR,t.workspaceHeight=e-2*l.vMargin,t}calculateWorkspaceHeight(n,l){return l.rowWidth*n.length}labelBoxes(n,l){l||(l=[]),n.forEach((n,t)=>{n.label=l[t]?l[t]:""+(t+1)})}prepareLabels(n,l,t,e,i){e.labelsWrapper||(e.labelsWrapper=l.append("g").classed("labelsWrapper",!0)),e.backLabelsWrapper||(e.backLabelsWrapper=l.insert("g","g.dataWrapper").classed("backLabelsWrapper",!0));const a="always"===i,r="always"===i||"trigger"===i,u=e.labelsWrapper.selectAll("g.yLabel").data(r?n:[],n=>n.key);u.exit().remove();const o=u.enter().append("g").classed("yLabel",!0);this.ngZone.runOutsideAngular(()=>{o.on("mouseover",(function(n,l){Ef.select(this).selectAll(".yLabel").style("display",null)})).on("mouseout",(function(){Ef.select(this).selectAll(".yLabel").style("display","none")}))}),o.append("rect").attr("class","yTrigger").style("fill-opacity",1),o.append("rect").attr("class","yLabel").style("fill-opacity",.35).style("display","none"),o.append("text").attr("class","yLabel").attr("text-anchor","left").attr("dominant-baseline","central").style("font-size",t.labelFont).style("opacity",1).attr("x",5);const s=e.backLabelsWrapper.selectAll("g.yLabel").data(a?n:[],n=>n.key);s.exit().remove();const c=s.enter().append("g").classed("yLabel",!0);c.append("text").attr("class","yLabel").attr("text-anchor","left").attr("dominant-baseline","central").style("font-size",t.labelFont).style("opacity",t.backLabelOpacity).attr("x",5);const d=o.merge(u),h=c.merge(s);return setTimeout(()=>{const n=[];d.select("text").style("display",null).attr("y",n=>e.yScale(n.key)+e.yScale.bandwidth()/2).text(n=>n.label).each((function(l){n.push(this.getBBox())})).style("display","none");let l=h.select("text");(l=e.transitionOn?l.transition(e.transition):l).attr("y",n=>e.yScale(n.key)+e.yScale.bandwidth()/2).text(n=>n.label);let i=d.select(".yTrigger").style("fill",n=>n.color).style("stroke",n=>n.color).data(n);(i=e.transitionOn?i.transition(e.transition):i).attr("x",-7).attr("y",n=>n.y-3).attr("width",n=>7).attr("height",n=>n.height+6),d.select("rect.yLabel").style("fill",n=>n.color).style("fill-opacity",t.labelFillOpacity).data(n).attr("x",0).attr("y",n=>n.y-3).attr("width",n=>n.width+10).attr("height",n=>n.height+7)},10),e}prepareTooltip(n,l){return l.tooltipWrapper?l:(l.tooltipWrapper=n.append("g").classed("tooltipWrapper",!0),l.tooltipBox=l.tooltipWrapper.append("rect").style("fill","white").style("fill-opacity",.8).style("stroke","grey"),l.tooltipText=l.tooltipWrapper.append("text").attr("class","tooltip").attr("text-anchor","middle").style("opacity",1),l.tooltipWrapper.style("display","none"),l)}showTooltip(n,l,t){if(!this.graphicContext.tooltipText)return;this.graphicContext.tooltipText.attr("x",this.graphicContext.xScale(l)).attr("y",this.graphicContext.yScale(t)).text(Ff.round(n));const e=this.graphicContext.tooltipText.node().getBBox();this.graphicContext.tooltipBox.attr("x",e.x-3).attr("y",e.y-2).attr("width",e.width+6).attr("height",e.height+4),this.graphicContext.tooltipWrapper.style("display",null)}hideTooltip(){this.graphicContext.tooltipText&&this.graphicContext.tooltipWrapper.style("display","none")}prepareScales(n,l,t,e){e.xScale||(e.xScale=Ef.scaleLinear().clamp(!0)),e.xScale.domain(l).range([0,e.workspaceWidth]),e.yScale||(e.yScale=Ef.scaleBand().padding(t.rowGap));const i=n.map(n=>n.key);return e.yScale.domain(i).range([0,e.workspaceHeight]),e}plotAxisBox(n,l,t,e,i){return i.axisWrapper||(i.axisWrapper=this.initAxisWrapper(e)),i=this.plotHorizontalScales(l,t,i),this.plotVerticalScales(n,t,i)}initAxisWrapper(n){let l=n.select(".axisWrapper");return 0===l.size()&&((l=n.append("g").attr("class","axisWrapper")).append("g").attr("class","xTopAxis"),l.append("g").attr("class","xBottomAxis"),l.append("g").attr("class","yLeftAxis"),l.append("g").attr("class","yRightAxis")),l}plotHorizontalScales(n,l,t){t.xTopAxis||(t.xTopAxis=Ef.axisTop(t.xScale)),t.xBottomAxis||(t.xBottomAxis=Ef.axisBottom(t.xScale)),t.axisWrapper.select("g.xTopAxis").call(t.xTopAxis);let e=t.axisWrapper.select("g.xBottomAxis");return(e=t.transitionOn?e.transition(t.transition):e).attr("transform","translate(0,"+t.workspaceHeight+")").call(t.xBottomAxis),t}plotVerticalScales(n,l,t){t.yLeftAxis||(t.yLeftAxis=Ef.axisLeft(t.yScale).tickFormat(()=>"")),t.yRightAxis||(t.yRightAxis=Ef.axisRight(t.yScale).tickValues([]));let e=t.axisWrapper.select("g.yLeftAxis");return(e=t.transitionOn?e.transition(t.transition):e).call(t.yLeftAxis),e=t.axisWrapper.select("g.yRightAxis").attr("transform","translate("+t.workspaceWidth+",0)"),(e=t.transitionOn?e.transition(t.transition):e).call(t.yRightAxis),t}plotDataBoxes(n,l,t,e){e.dataWrapper||(e.dataWrapper=t.append("g").attr("class","dataWrapper"));let i=e.dataWrapper.selectAll(".boxWidget");i=i.data(n,n=>n.key),this.updateBoxWidgets(i,l,e);const a=i.enter().append("g").attr("class","boxWidget");return this.createBoxWidgets(a,l,e),i.exit().remove(),e}updateBoxWidgets(n,l,t){n.select("rect.backdrop").call(this.positionBackdrop,t),this.updateWhiskers(n.select("g.whiskers"),t),n.select("g.box rect").call(this.positionBoxRectangle,t),n.select("g.box line.medianline").call(this.positionMedianLine,t),n.select("g.box line.meanline").call(this.positionMeanLine,t);const e=n.select("g.outliers").selectAll(".outlier").data(n=>n.outliers.map(l=>[l,n.key,n.color]));e.enter().call(this.createOutlier,l,t,this.positionOutlier),e.call(this.positionOutlier,t),e.exit().remove()}positionBackdrop(n,l){(n=l.transitionOn?n.transition(l.transition):n).attr("x",n=>Wf(n.lowWskr,-5,l.xScale)).attr("y",n=>l.yScale(n.key)).attr("width",n=>{const t=Wf(n.lowWskr,-5,l.xScale);return Wf(n.highWskr,5,l.xScale)-t}).attr("height",n=>l.yScale.bandwidth())}positionBoxRectangle(n,l){(n=l.transitionOn?n.transition(l.transition):n).attr("x",n=>l.xScale(n.fstQnt)).attr("y",n=>l.yScale(n.key)).attr("width",n=>l.xScale(n.thrdQnt)-l.xScale(n.fstQnt)).attr("height",n=>l.yScale.bandwidth()).style("stroke",n=>n.color).style("fill",n=>n.color)}positionMedianLine(n,l){(n=l.transitionOn?n.transition(l.transition):n).attr("x1",(n,t)=>l.xScale(n.median)).attr("y1",(n,t)=>l.yScale(n.key)).attr("x2",(n,t)=>l.xScale(n.median)).attr("y2",(n,t)=>l.yScale(n.key)+l.yScale.bandwidth()).style("stroke",n=>n.color).style("display",n=>n.mean===n.median?"none":null)}positionMeanLine(n,l){(n=l.transitionOn?n.transition(l.transition):n).attr("x1",(n,t)=>l.xScale(n.mean)).attr("y1",(n,t)=>l.yScale(n.key)).attr("x2",(n,t)=>l.xScale(n.mean)).attr("y2",(n,t)=>l.yScale(n.key)+l.yScale.bandwidth()).style("stroke",n=>n.color)}positionOutlier(n,l){(n=l.transitionOn?n.transition(l.transition):n).attr("cx",n=>l.xScale(n[0])).attr("cy",n=>l.yScale(n[1])+l.yScale.bandwidth()/2).style("stroke",n=>n[2]).style("fill",n=>n[2])}createOutlier(n,l,t,e){n.append("circle").attr("class","outlier").attr("r",l.outliersCircleRadius).style("stroke-width",l.outliersStrokeWidth).style("fill-opacity",l.outliersFillOpacity).call(e,t)}positionWhiskerLine(n,l,t){(n=t.transitionOn?n.transition(t.transition):n).attr("x1",(n,e)=>t.xScale(l?n.lowWskr:n.thrdQnt)).attr("y1",(n,l)=>t.yScale(n.key)+t.yScale.bandwidth()/2).attr("x2",(n,e)=>t.xScale(l?n.fstQnt:n.highWskr)).attr("y2",(n,l)=>t.yScale(n.key)+t.yScale.bandwidth()/2).style("stroke",n=>n.color).style("display",n=>l&&n.lowWskr===n.fstQnt||!l&&n.highWskr===n.thrdQnt?"none":null)}positionWhiskerTip(n,l,t){(n=t.transitionOn?n.transition(t.transition):n).attr("x1",(n,e)=>t.xScale(l?n.lowWskr:n.highWskr)).attr("y1",(n,l)=>t.yScale(n.key)).attr("x2",(n,e)=>t.xScale(l?n.lowWskr:n.highWskr)).attr("y2",(n,l)=>t.yScale(n.key)+t.yScale.bandwidth()).style("stroke",n=>n.color).style("display",n=>l&&n.lowWskr===n.fstQnt||!l&&n.highWskr===n.thrdQnt?"none":null)}updateWhiskers(n,l){n.select("line.whiskerlineL").call(this.positionWhiskerLine,!0,l),n.select("line.whiskerlineR").call(this.positionWhiskerLine,!1,l),n.select("line.whiskertipL").call(this.positionWhiskerTip,!0,l),n.select("line.whiskertipR").call(this.positionWhiskerTip,!1,l)}createWhiskers(n,l,t){n.append("line").attr("class","whiskerlineL").style("stroke-width",l.whiskerStrokeWidth).style("stroke-dasharray","4 3").call(this.positionWhiskerLine,!0,t),n.append("line").attr("class","whiskerlineR").style("stroke-width",l.whiskerStrokeWidth).style("stroke-dasharray","4 3").call(this.positionWhiskerLine,!1,t),n.append("line").attr("class","whiskertipL").style("stroke-width",l.whiskerStrokeWidth).call(this.positionWhiskerTip,!0,t),n.append("line").attr("class","whiskertipR").style("stroke-width",l.whiskerStrokeWidth).call(this.positionWhiskerTip,!1,t)}createBoxes(n,l,t){const e=n.append("rect").attr("class","box").style("stroke-width",l.boxStrokeWidth).style("fill-opacity",l.boxFillOpacity).call(this.positionBoxRectangle,t),i=n.append("line").attr("class","medianline").style("stroke-width",l.boxStrokeWidth).call(this.positionMedianLine,t),a=this;this.ngZone.runOutsideAngular(()=>{e.on("mouseover",(function(n,l){a.showTooltip(n.median,n.median,n.key)})).on("mouseout",(function(){a.hideTooltip()})),i.on("mouseover",(function(n,l){a.showTooltip(n.median,n.median,n.key)})).on("mouseout",(function(){a.hideTooltip()}))});const r=n.append("line").attr("class","meanline").style("stroke-width",l.meanStrokeWidth).style("stroke-dasharray","4 2").call(this.positionMeanLine,t);this.ngZone.runOutsideAngular(()=>{r.on("mouseover",(function(n,l){a.showTooltip(n.mean,n.mean,n.key)})).on("mouseout",(function(){a.hideTooltip()}))})}createBoxWidgets(n,l,t){n.append("rect").attr("class","backdrop").style("fill-opacity",l.backdropOpacity).style("fill",l.backdropColor).call(this.positionBackdrop,t);const e=n.append("g").attr("class","whiskers");this.createWhiskers(e,l,t);const i=n.append("g").attr("class","box");this.createBoxes(i,l,t),n.append("g").attr("class","outliers").selectAll(".outlier").data(n=>n.outliers.map(l=>[l,n.key,n.color])).enter().call(this.createOutlier,l,t,this.positionOutlier)}}class zf{}var $f=e.pb({encapsulation:0,styles:["[_nghost-%COMP%]     .axisWrapper path {\n        stroke: gray;\n      }\n\n      [_nghost-%COMP%]     .axisWrapper line {\n        stroke: gray;\n      }\n\n      [_nghost-%COMP%]     .axisWrapper text {\n        fill: gray;\n      }"],data:{}});function Gf(n){return e.Nb(2,[(n()(),e.rb(0,0,null,null,0,"div",[["class","hbox-plot"]],[[8,"hidden",0]],null,null,null,null))],null,(function(n,l){n(l,0,0,l.component.hidden)}))}class Vf{constructor(){this.groups=[],this.legend=[],this.palette=[],this.removed=[],this.legendOn="always",this.sorted="none",this.periodDomain=[17,35]}ngOnInit(){}ngOnChanges(n){this.updatePeriods(this.groups)}updatePeriods(n){if(!n)return;const l=n.map(n=>n.periods),t=n.length>0?[n[0].jobPeriodMin,n[0].jobPeriodMax]:[17,35];this.periods=l,this.periodDomain=t}}var Kf=e.pb({encapsulation:2,styles:[],data:{}});function Yf(n){return e.Nb(0,[(n()(),e.rb(0,0,null,null,1,"bd2-ngx-hbox-plot",[],null,null,null,Gf,$f)),e.qb(1,4964352,null,0,Hf,[e.x,e.h,e.k],{data:[0,"data"],removed:[1,"removed"],domain:[2,"domain"],palette:[3,"palette"],labels:[4,"labels"],labelsOn:[5,"labelsOn"],sorted:[6,"sorted"]},null)],(function(n,l){var t=l.component;n(l,1,0,t.periods,t.removed,t.periodDomain,t.palette,t.legend,t.legendOn,t.sorted)}),null)}var Xf=t("JEAp");class Zf{constructor(n){this.disabled=!1,this.serializer=new XMLSerializer,this.svgSelector="svg",this.fileName="graphic",this.nativeElement=n.nativeElement}ngOnInit(){this.nativeElement?this.refNode||(this.refNode=this.nativeElement.parentNode):console.error("Error missing native element")}save(){if(!this.refNode||!this.refNode.querySelector)return void console.error("The refNode misses querySelector functio, probably not a native element, got",this.refNode);const n=this.refNode.querySelector(this.svgSelector);if(n){const l=this.serializer.serializeToString(n),t=new Blob([l],{type:"image/svg+xml"});Xf.saveAs(t,this.fileName+".svg")}else console.error("Missing svg node for export, selector: "+this.svgSelector+"; ref: "+this.refNode)}}var Qf=e.pb({encapsulation:2,styles:[],data:{}});function nb(n){return e.Nb(0,[(n()(),e.rb(0,0,null,null,1,"button",[["class","btn btn-default btn-sm"]],[[8,"disabled",0]],[[null,"click"]],(function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.save()&&e),e}),null,null)),(n()(),e.rb(1,0,null,null,0,"span",[["aria-hidden","true"],["class","glyphicon glyphicon-download-alt"]],null,null,null,null,null))],null,(function(n,l){n(l,0,0,l.component.disabled)}))}var lb=t("aHM3");class tb{constructor(){this.sort=new e.m,this._sorted="none"}get sorted(){return this._sorted}set sorted(n){this._sorted=n;const l={active:this._sorted,direction:"asc"};"none"===this._sorted&&(l.active=void 0),this.sort.next(l)}ngOnInit(){}}var eb=e.pb({encapsulation:2,styles:[],data:{}});function ib(n){return e.Nb(0,[(n()(),e.rb(0,0,null,null,24,"div",[["class","btn-wrap"]],null,null,null,null,null)),(n()(),e.rb(1,0,null,null,1,"label",[],null,null,null,null,null)),(n()(),e.Lb(-1,null,["Sorting by \xa0"])),(n()(),e.rb(3,0,null,null,21,"div",[["class","btn-group wide"]],null,null,null,null,null)),(n()(),e.rb(4,0,null,null,6,"label",[["btnRadio","period"],["class","btn btn-success btn-xs wide"]],[[2,"active",null],[1,"aria-pressed",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"click"]],(function(n,l,t){var i=!0,a=n.component;return"click"===l&&(i=!1!==e.Db(n,5).onClick()&&i),"ngModelChange"===l&&(i=!1!==(a.sorted=t)&&i),i}),null,null)),e.qb(5,81920,null,0,lb.b,[e.k,e.h,[2,lb.c],e.C],{btnRadio:[0,"btnRadio"]},null),e.Ib(1024,null,h.p,(function(n){return[n]}),[lb.b]),e.qb(7,671744,null,0,h.u,[[8,null],[8,null],[8,null],[6,h.p]],{model:[0,"model"]},{update:"ngModelChange"}),e.Ib(2048,null,h.q,null,[h.u]),e.qb(9,16384,null,0,h.r,[[4,h.q]],null,null),(n()(),e.Lb(-1,null,["Period"])),(n()(),e.rb(11,0,null,null,6,"label",[["btnRadio","label"],["class","btn btn-success btn-xs wide"]],[[2,"active",null],[1,"aria-pressed",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"click"]],(function(n,l,t){var i=!0,a=n.component;return"click"===l&&(i=!1!==e.Db(n,12).onClick()&&i),"ngModelChange"===l&&(i=!1!==(a.sorted=t)&&i),i}),null,null)),e.qb(12,81920,null,0,lb.b,[e.k,e.h,[2,lb.c],e.C],{btnRadio:[0,"btnRadio"]},null),e.Ib(1024,null,h.p,(function(n){return[n]}),[lb.b]),e.qb(14,671744,null,0,h.u,[[8,null],[8,null],[8,null],[6,h.p]],{model:[0,"model"]},{update:"ngModelChange"}),e.Ib(2048,null,h.q,null,[h.u]),e.qb(16,16384,null,0,h.r,[[4,h.q]],null,null),(n()(),e.Lb(-1,null,["Labels"])),(n()(),e.rb(18,0,null,null,6,"label",[["btnRadio","none"],["class","btn btn-success btn-xs wide"]],[[2,"active",null],[1,"aria-pressed",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"click"]],(function(n,l,t){var i=!0,a=n.component;return"click"===l&&(i=!1!==e.Db(n,19).onClick()&&i),"ngModelChange"===l&&(i=!1!==(a.sorted=t)&&i),i}),null,null)),e.qb(19,81920,null,0,lb.b,[e.k,e.h,[2,lb.c],e.C],{btnRadio:[0,"btnRadio"]},null),e.Ib(1024,null,h.p,(function(n){return[n]}),[lb.b]),e.qb(21,671744,null,0,h.u,[[8,null],[8,null],[8,null],[6,h.p]],{model:[0,"model"]},{update:"ngModelChange"}),e.Ib(2048,null,h.q,null,[h.u]),e.qb(23,16384,null,0,h.r,[[4,h.q]],null,null),(n()(),e.Lb(-1,null,["None"]))],(function(n,l){var t=l.component;n(l,5,0,"period"),n(l,7,0,t.sorted),n(l,12,0,"label"),n(l,14,0,t.sorted),n(l,19,0,"none"),n(l,21,0,t.sorted)}),(function(n,l){n(l,4,0,e.Db(l,5).isActive,e.Db(l,5).isActive,e.Db(l,9).ngClassUntouched,e.Db(l,9).ngClassTouched,e.Db(l,9).ngClassPristine,e.Db(l,9).ngClassDirty,e.Db(l,9).ngClassValid,e.Db(l,9).ngClassInvalid,e.Db(l,9).ngClassPending),n(l,11,0,e.Db(l,12).isActive,e.Db(l,12).isActive,e.Db(l,16).ngClassUntouched,e.Db(l,16).ngClassTouched,e.Db(l,16).ngClassPristine,e.Db(l,16).ngClassDirty,e.Db(l,16).ngClassValid,e.Db(l,16).ngClassInvalid,e.Db(l,16).ngClassPending),n(l,18,0,e.Db(l,19).isActive,e.Db(l,19).isActive,e.Db(l,23).ngClassUntouched,e.Db(l,23).ngClassTouched,e.Db(l,23).ngClassPristine,e.Db(l,23).ngClassDirty,e.Db(l,23).ngClassValid,e.Db(l,23).ngClassInvalid,e.Db(l,23).ngClassPending)}))}const ab=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],rb=["#1f77b4","#aec7e8","#ff7f0e","#ffbb78","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5","#8c564b","#c49c94","#e377c2","#f7b6d2","#7f7f7f","#c7c7c7","#bcbd22","#dbdb8d","#17becf","#9edae5"];class ub{static extendPalette(n,l){n&&0!==n.length||(n=["black"]);const t=[];for(let e=0;e<l;e++)t.push(n[e%n.length]);return t}static palette(n){return ub.extendPalette(n<=ab.length?ab:rb,n)}static toRGBA(n,l){return"#"!==n.charAt(0)?n:`rgba(${parseInt(n.substring(1,3),16)},${parseInt(n.substring(3,5),16)},${parseInt(n.substring(5,7),16)},${l})`}}class ob{constructor(n,l,t,e,i){this.id=n,this.title=l,this.borderColor=t,this.bcgColor=e,this.marked=i}}class sb{constructor(){this.labels=[],this.palette=[],this.opacity=.35,this.marked=new e.m,this.items=[]}ngOnInit(){}ngOnChanges(n){this.items=this.buildItems(this.labels,this.palette)}buildItems(n,l){const t=[];if(!n)return t;for(let e=0;e<n.length;e++)t.push(new ob(e,n[e],l[e]?l[e]:"black",l[e]?ub.toRGBA(l[e],this.opacity):"black"));return t}toggleMark(n){n.marked=!n.marked,this.emitMarked()}emitMarked(){const n=[];this.items.forEach((l,t)=>{l.marked&&n.push(t)}),this.marked.emit(n)}}var cb=e.pb({encapsulation:0,styles:["div.marked[_ngcontent-%COMP%] {\n        text-decoration: line-through;\n      }\n\n      div.legend-item[_ngcontent-%COMP%] {\n        margin-right: 1.5em;\n      }\n\n      div.color-box[_ngcontent-%COMP%] {\n        width: 2.5em;\n        height: 1.1em;\n        margin-right: 0.5em;\n        border-width: 3px;\n        border-style: solid;\n      }\n\n      div.legend-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] {\n        word-wrap: break-word; \n        overflow-wrap: break-word; \n      }"],data:{}});function db(n){return e.Nb(0,[(n()(),e.rb(0,0,null,null,3,"div",[["class","legend-item pull-left"]],[[2,"marked",null]],[[null,"click"]],(function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.toggleMark(n.context.$implicit)&&e),e}),null,null)),(n()(),e.rb(1,0,null,null,0,"div",[["class","color-box pull-left"]],[[4,"border-color",null],[4,"background",null]],null,null,null,null)),(n()(),e.rb(2,0,null,null,1,"span",[],null,null,null,null,null)),(n()(),e.Lb(3,null,["",""]))],null,(function(n,l){n(l,0,0,l.context.$implicit.marked),n(l,1,0,l.context.$implicit.borderColor,l.context.$implicit.bcgColor),n(l,3,0,l.context.$implicit.title)}))}function hb(n){return e.Nb(2,[(n()(),e.rb(0,0,null,null,2,"div",[["class","simple-legend clearfix"]],null,null,null,null,null)),(n()(),e.gb(16777216,null,null,1,null,db)),e.qb(2,278528,null,0,f.m,[e.N,e.K,e.q],{ngForOf:[0,"ngForOf"]},null)],(function(n,l){n(l,2,0,l.component.items)}),null)}const fb=Object.freeze({max:Xn,min:Zn,extent:Qn,mean:nl,median:ul,quantile:il,sum:ol,deviation:cl,variance:sl,scan:dl,bisectLeft:pl,bisectRight:bl,bisector:hl,ascending:el,descending:ml,cross:xl,merge:wl,pairs:Dl,permute:kl,range:Ml,shuffle:Pl,ticks:Al,tickIncrement:ql,tickStep:Nl,transpose:Ol,zip:Rl,histogram:Wl,thresholdFreedmanDiaconis:Hl,thresholdScott:zl,thresholdSturges:Jl,bisect:gl,axisTop:at,axisRight:rt,axisBottom:ut,axisLeft:ot,scaleLinear:vi,scalePow:Di,scaleSqrt:Ci,scaleLog:qi,scaleIdentity:Ni,scaleTime:Er,scaleUtc:Rr,scaleSequential:Br,scaleDiverging:Fr,scaleQuantize:Ur,scaleQuantile:jr,scaleThreshold:Jr,scaleOrdinal:Hr,scaleBand:zr,scalePoint:$r,scaleImplicit:Wr,interpolateBrBG:Yr,interpolatePRGn:Zr,interpolatePiYG:nu,interpolatePuOr:tu,interpolateRdBu:iu,interpolateRdGy:ru,interpolateRdYlBu:ou,interpolateRdYlGn:cu,interpolateSpectral:hu,interpolateBlues:bu,interpolateGreens:gu,interpolateGreys:yu,interpolateOranges:_u,interpolatePurples:wu,interpolateReds:Cu,interpolateViridis:Mu,interpolateInferno:Su,interpolateMagma:Pu,interpolatePlasma:Tu,interpolateWarm:Iu,interpolateCool:Au,interpolateRainbow:Nu,interpolateSinebow:Lu,interpolateCubehelixDefault:Bu,interpolateBuGn:Uu,interpolateBuPu:Ju,interpolateGnBu:Hu,interpolateOrRd:$u,interpolatePuBuGn:Vu,interpolatePuBu:Yu,interpolatePuRd:Zu,interpolateRdPu:no,interpolateYlGnBu:to,interpolateYlGn:io,interpolateYlOrBr:ro,interpolateYlOrRd:oo,schemeCategory10:so,schemeAccent:co,schemeDark2:ho,schemePaired:fo,schemePastel1:bo,schemePastel2:po,schemeSet1:go,schemeSet2:mo,schemeSet3:yo,schemeBrBG:Kr,schemePRGn:Xr,schemePiYG:Qr,schemePuOr:lu,schemeRdBu:eu,schemeRdGy:au,schemeRdYlBu:uu,schemeRdYlGn:su,schemeSpectral:du,schemeBlues:fu,schemeGreens:pu,schemeGreys:mu,schemeOranges:vu,schemePurples:xu,schemeReds:Du,schemeBuGn:Fu,schemeBuPu:ju,schemeGnBu:Wu,schemeOrRd:zu,schemePuBuGn:Gu,schemePuBu:Ku,schemePuRd:Xu,schemeRdPu:Qu,schemeYlGnBu:lo,schemeYlGn:eo,schemeYlOrBr:ao,schemeYlOrRd:uo,select:As,selectAll:Fs,customEvent:Ds,mouse:Bs,touch:Us,touches:js,clientPoint:Ls,style:$o,local:Os,namespace:xo,window:Jo,create:qs,creator:Co,matcher:To,selector:Mo,selectorAll:So,selection:Is,event:ms,namespaces:_o,arc:Ud,pie:Kd,line:zd,lineRadial:nh,radialLine:nh,area:$d,areaRadial:lh,radialArea:lh,linkHorizontal:ch,linkVertical:dh,linkRadial:hh,symbol:Ih,pointRadial:th,stack:Df,stackOrderAppearance:Sf,stackOrderAscending:If,stackOrderDescending:qf,stackOrderInsideOut:Nf,stackOrderNone:xf,stackOrderReverse:Of,stackOffsetExpand:Cf,stackOffsetDiverging:kf,stackOffsetNone:_f,stackOffsetSilhouette:Mf,stackOffsetWiggle:Pf,curveBasis:Oh,curveBasisClosed:Rh,curveBasisOpen:Bh,curveBundle:Uh,curveCardinal:Wh,curveCardinalClosed:zh,curveCardinalOpen:Gh,curveCatmullRom:Yh,curveCatmullRomClosed:Zh,curveCatmullRomOpen:nf,curveLinear:Jd,curveLinearClosed:tf,curveMonotoneX:df,curveMonotoneY:hf,curveNatural:pf,curveStep:mf,curveStepAfter:vf,curveStepBefore:yf,symbols:Th,symbolCircle:fh,symbolCross:bh,symbolDiamond:mh,symbolSquare:wh,symbolStar:xh,symbolTriangle:Ch,symbolWye:Sh,active:id,interrupt:Pc,transition:Xc});class bb{}class pb{constructor(n,l,t){this.xy=n,this.color=l,this.hidden=t}}class gb{static round(n,l){return l=l||n,(l=Math.abs(l))<.01?n:l<1?Math.round(1e4*n)/1e4:l<1e3?Math.round(100*n)/100:Math.round(n)}}const mb=.6/24,yb=.1/24,vb=.5/24,_b=.33;class xb{dataToPetals(n,l,t,e,i){return n?(l[2]=l[1]-l[0],n.map((n,a)=>this.dataToPetal(n,l,t,e,i?i[a]:null))):[]}dataToPetal(n,l,t,e,i){const a=this.calculatePetalProperties(n,l,t,e,i);return a.polarAngle=this.calculatePolarAngle(a.peak,l),a.petalPath=this.calculatePetalPath(a.peak,a.width,a.radiusScale,l),a.polarCoordinates=this.calculatePolarCoordinate(a.peak,l),a.peak=a.peak+l[0],a}calculateCircularMeanAndDev(n,l){n=n.map(n=>this.normalize(n,l));const t=fb.mean(n),e=fb.deviation(n)||0,i=l[2]/2;n=n.map(n=>n<i?n+l[2]:n);const a=fb.mean(n)%l[2],r=fb.deviation(n)||0;return r<e?[a,r]:[t,e]}calculatePetalProperties(n,l,t,e,i){const a=new bb,r=this.calculateCircularMeanAndDev(n,l);return a.peak=r[0],a.roundedPeak=gb.round(a.peak),!t&&!e||i||(i=r[1]),a.width=e?i:mb*l[2],a.width<yb*l[2]&&(a.width=yb*l[2]),a.width>l[2]/2&&(a.width=l[2]/2),a.radiusScale=1,t&&(a.radiusScale=1-.5*(i=(i=(i/=l[2])<=vb?0:i)>_b?_b:i)/_b),a}calculatePetalPath(n,l,t,e){return[[0,0],[.5*t,this.calculatePolarAngle(n-l,e)],[1*t,this.calculatePolarAngle(n,e)],[.5*t,this.calculatePolarAngle(n+l,e)]]}normalize(n,l){return n-=l[0],(n%=l[2])<0&&(n+=l[2]),n}calculatePolarCoordinate(n,l){return n=this.normalize(n,l),this.normalizedPeakToPolar(n,l[2])}normalizedPeakToPolar(n,l){return[Math.cos(2*n*Math.PI/l-Math.PI/2),Math.sin(2*n*Math.PI/l-Math.PI/2),n]}calculatePolarAngle(n,l){return 2*(n=this.normalize(n,l))*Math.PI/l[2]}}let wb=(()=>{class n{static extendPalette(n,l){n&&0!==n.length||(n=["black"]);const t=[];for(let e=0;e<l;e++)t.push(n[e%n.length]);return t}static palette(l){return n.extendPalette(l<=n.schemeCategory10.length?n.schemeCategory10:n.schemeCategory20,l)}}return n.schemeCategory10=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],n.schemeCategory20=["#1f77b4","#aec7e8","#ff7f0e","#ffbb78","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5","#8c564b","#c49c94","#e377c2","#f7b6d2","#7f7f7f","#c7c7c7","#bcbd22","#dbdb8d","#17becf","#9edae5"],n})();class Db{}class Cb{constructor(){this.baseTransitionsTime=400,this.gridColor="#CDCDCD",this.axisColor="white",this.axisWidth="2px",this.dotsCircleRadius=4,this.dotsCircleStrokeWidth="1px",this.dotsCircleFillOpacity=.5,this.petalAreaOpacity=.35,this.petalAreaOpacityActive=.7,this.petalLineWidth="3px",this.petalCircleRadius=4,this.petalCircleOpacity=.8}}class kb{constructor(n,l,t){this.ngZone=n,this.changeDetectorRef=l,this.removed=[],this.scaleRadius=!0,this.scaleWidth=!1,this.showIndividuals="selected",this.palette=[],this.labels=[],this.labelsOn=!0,this.lookAndFeel=new Cb,this.colors=new e.m,this.showAllIndividuals=!1,this.showSelectedIndividuals=!1,this.graphicContext=new Db,this.d3=fb,this.parentNativeElement=t.nativeElement,this.polarUtil=new xb}set domain(n){this._domain=[n[0],n[1],n[1]-n[0]]}ngAfterViewInit(){this.changeDetectorRef.detach()}ngOnChanges(n){this.data&&this._domain&&(this.showSelectedIndividuals="selected"===this.showIndividuals,this.showAllIndividuals="all"===this.showIndividuals,this.updatePlot())}ngOnInit(){null!==this.parentNativeElement||console.error("Missing parrent element for the component")}ngOnDestroy(){this.d3Svg&&this.d3Svg.empty&&!this.d3Svg.empty()&&this.d3Svg.selectAll("*").remove()}initializeSvg(){const n=this.d3.select(this.parentNativeElement);this.d3Svg=n.select(".polarplot").append("svg"),this.d3Svg.attr("width","100%").attr("viewBox","0 0 500 500");const l=new Db;return l.mainPane=this.d3Svg.append("g").attr("transform","translate(250,250)"),l.radius=Math.min(500,500)/2-30,l}prepareLegendtip(n){return n.legendtip||(n.legendtip=n.mainPane.append("g").classed("legendtipWrapper",!0),n.legendtipBox=n.legendtip.append("rect").style("fill","white").style("fill-opacity",.9).style("stroke","grey"),n.legendtipText=n.legendtip.append("text").attr("class","legendtip").attr("text-anchor","middle").style("opacity",1),n.legendtip.style("display","none")),n}showLegendtip(n,l){if(!this.labelsOn)return;this.graphicContext.legendtipText.attr("x",0).attr("y",0).text(n.label);const t=this.graphicContext.legendtipText.node().getBBox();this.graphicContext.legendtipBox.attr("x",t.x-3).attr("y",t.y-2).attr("width",t.width+6).attr("height",t.height+4),this.graphicContext.legendtip.style("display",null)}hideLegendtip(){this.graphicContext.legendtip.style("display","none")}prepareTooltip(n){return n.tooltip||(n.tooltip=n.mainPane.append("g").classed("tooltipWrapper",!0),n.tooltipBox=n.tooltip.append("rect").style("fill","white").style("fill-opacity",.8).style("stroke","grey"),n.tooltipText=n.tooltip.append("text").attr("class","tooltip").attr("text-anchor","middle").attr("dy","0.35em").style("opacity",1),n.tooltip.style("display","none")),n}showTooltip(n,l){this.graphicContext.tooltipText.attr("x",(l+15)*n.polarCoordinates[0]).attr("y",(l+15)*n.polarCoordinates[1]).text(n.roundedPeak);const t=this.graphicContext.tooltipText.node().getBBox();this.graphicContext.tooltipBox.attr("x",t.x-3).attr("y",t.y-2).attr("width",t.width+6).attr("height",t.height+4),this.graphicContext.tooltip.style("display",null)}hideTooltip(){this.graphicContext.tooltip.style("display","none")}updatePlot(){this.d3Svg||(this.graphicContext=this.initializeSvg(),this.graphicContext=this.plotAxisGrid(this.graphicContext)),this.updateAxisLabels(this._domain,this.graphicContext.axisGrid),this.graphicContext=this.updatePalette(this.data,this.palette,this.graphicContext);const n=this.prepareDataModel(this.data,this._domain,this.scaleRadius,this.scaleWidth,this.errors,this.labels,this.removed,this.graphicContext.palette);this.individualPolarData=this.prepareIndividualPolarData(this.data,this._domain,this.removed,this.graphicContext.palette),this.individualPolarData=this.individualPolarData.filter(n=>0!==n.length),this.graphicContext=this.plotDataPetals(n,this.scaleRadius,this.scaleWidth,this.graphicContext),this.graphicContext=this.plotAllDataDots(this.individualPolarData,this.showAllIndividuals,this.graphicContext),this.graphicContext=this.prepareIndividualDataInset(this.graphicContext),this.graphicContext=this.prepareTooltip(this.graphicContext),this.graphicContext=this.prepareLegendtip(this.graphicContext)}prepareDataModel(n,l,t,e,i,a,r,u){let o=this.polarUtil.dataToPetals(this.data,this._domain,this.scaleRadius,this.scaleWidth,this.errors);return this.labelPetals(o,a),this.colorPetals(o,u),r.forEach(n=>{o[n]&&(o[n].hidden=!0)}),o=o.filter(n=>!isNaN(n.peak))}updatePalette(n,l,t){return l&&0!==l.length||(l=wb.palette(n.length)),l=wb.extendPalette(l,n.length),t.palette=l,this.colors.next(l.slice()),t}labelPetals(n,l){l||(l=[]),n.forEach((n,t)=>n.label=l[t]?l[t]:""+(t+1))}colorPetals(n,l){n.forEach((n,t)=>n.color=l[t])}plotDataPetals(n,l,t,e){const i=this.lookAndFeel.baseTransitionsTime,a=this.d3,r=e.radius;e.petalsWrapper||(e.petalsWrapper=e.mainPane.append("g").attr("class","petalsWrapper"));const u=e.petalsWrapper,o=n=>a.radialLine().radius((function(n){return r*n[0]})).angle((function(n){return n[1]})).curve(a.curveCardinalClosed)(n.petalPath),s=this;return this.ngZone.runOutsideAngular(()=>{const l=u.selectAll(".petal").data(n);l.select(".petalsArea").transition().duration(i).attr("d",o).on("interrupt",(function(n,l){a.select(this).attr("d",o)})),l.select(".petalsLine").transition().duration(i).attr("d",o),l.select(".petalsCircle").transition().duration(i).attr("cx",(function(n,l){return r*n.polarCoordinates[0]})).attr("cy",(function(n,l){return r*n.polarCoordinates[1]}));const t=l.enter().append("g").attr("class","petal");t.append("path").attr("class","petalsArea").attr("d",o).style("fill",n=>n.color).style("fill-opacity",0).on("mouseover",(function(n,l){a.select(this).transition().duration(i).style("fill-opacity",s.lookAndFeel.petalAreaOpacityActive),s.showTooltip(n,r),s.showLegendtip(n,r),s.showIndividualDataInset(n,l,r)})).on("mouseout",(function(){a.select(this).transition().duration(i).style("fill-opacity",s.lookAndFeel.petalAreaOpacity),s.hideTooltip(),s.hideLegendtip(),s.hideIndividualDataInset()})).transition().duration(i).style("fill-opacity",this.lookAndFeel.petalAreaOpacity),t.append("path").style("stroke-opacity",0).transition().duration(i).attr("class","petalsLine").attr("d",o).style("stroke-width",this.lookAndFeel.petalLineWidth).style("stroke",n=>n.color).style("fill","none").style("stroke-opacity",1),t.append("circle").attr("class","petalsCircle").attr("cx",(function(n,l){return r*n.polarCoordinates[0]})).attr("cy",(function(n,l){return r*n.polarCoordinates[1]})).attr("r",this.lookAndFeel.petalCircleRadius).style("fill",n=>n.color).style("fill-opacity",this.lookAndFeel.petalCircleOpacity),l.exit().transition().duration(i/2).style("opacity",0).remove()}),u.selectAll(".petal").style("display",n=>n.hidden?"none":null),e}prepareIndividualPolarData(n,l,t,e){const i=n.map((n,t)=>n.map(n=>new pb(this.polarUtil.calculatePolarCoordinate(n,l),e[t])));return t.forEach(n=>{i[n]&&i[n].forEach(n=>n.hidden=!0)}),i}prepareIndividualDataInset(n){return n.individualDotsInsetWrapper||(n.individualDotsInsetWrapper=n.mainPane.append("g").attr("class","dotsInset")),this.hideIndividualDataInset(),n}hideIndividualDataInset(){this.graphicContext.individualDotsInsetWrapper&&this.graphicContext.individualDotsInsetWrapper.style("opacity",0)}showIndividualDataInset(n,l,t){if(!this.graphicContext.individualDotsInsetWrapper||!this.individualPolarData||!this.showSelectedIndividuals)return;const e=this.lookAndFeel.baseTransitionsTime/2,i=this.individualPolarData[l],a=this.graphicContext.individualDotsInsetWrapper.selectAll(".dotsCircle").data(i);a.interrupt().style("opacity",.2).attr("cx",t*n.polarCoordinates[0]).attr("cy",t*n.polarCoordinates[1]).style("stroke",n.color).style("fill",n.color).transition().duration(e).style("opacity",1).attr("cx",n=>t*n.xy[0]).attr("cy",n=>t*n.xy[1]),a.enter().append("circle").style("opacity",.2).attr("class","dotsCircle").attr("cx",t*n.polarCoordinates[0]).attr("cy",t*n.polarCoordinates[1]).attr("r",this.lookAndFeel.dotsCircleRadius).style("stroke-width",this.lookAndFeel.dotsCircleStrokeWidth).style("stroke",n.color).style("fill",n.color).style("fill-opacity",this.lookAndFeel.dotsCircleFillOpacity).transition().duration(e).style("opacity",1).attr("cx",n=>t*n.xy[0]).attr("cy",n=>t*n.xy[1]),a.exit().remove(),this.graphicContext.individualDotsInsetWrapper.style("opacity",1)}plotAllDataDots(n,l,t){const e=this.lookAndFeel.baseTransitionsTime,i=t.radius;t.dotsWrapper||(t.dotsWrapper=t.mainPane.append("g").attr("class","dotsWrapper"));const a=t.dotsWrapper;return l?(t.dotsWrapper.style("opacity",1),this.ngZone.runOutsideAngular(()=>{const l=a.selectAll(".dotsGroup").data(n),t=l.selectAll(".dotsCircle").data(n=>n);t.transition().duration(e).attr("cx",n=>i*n.xy[0]).attr("cy",n=>i*n.xy[1]),t.enter().append("circle").attr("class","dotsCircle").transition().duration(e).attr("cx",n=>i*n.xy[0]).attr("cy",n=>i*n.xy[1]).attr("r",this.lookAndFeel.dotsCircleRadius).style("stroke-width",this.lookAndFeel.dotsCircleStrokeWidth).style("stroke",n=>n.color).style("fill",n=>n.color).style("fill-opacity",this.lookAndFeel.dotsCircleFillOpacity),t.exit().transition().duration(e/2).style("opacity",0).remove(),l.enter().append("g").attr("class","dotsGroup").selectAll(".dotsCircle").data(n=>n).enter().append("circle").attr("class","dotsCircle").transition().duration(e).attr("cx",n=>i*n.xy[0]).attr("cy",n=>i*n.xy[1]).attr("r",this.lookAndFeel.dotsCircleRadius).style("stroke-width",this.lookAndFeel.dotsCircleStrokeWidth).style("stroke",n=>n.color).style("fill",n=>n.color).style("fill-opacity",this.lookAndFeel.dotsCircleFillOpacity),l.exit().transition().duration(e/2).style("opacity",0).remove()}),a.selectAll(".dotsCircle").style("display",n=>n.hidden?"none":null),t):(t.dotsWrapper.style("opacity",0),t)}plotAxisGrid(n){if(n.axisGrid)return n;const l=n.radius,t=n.axisGrid=n.mainPane.append("g").attr("class","axisWrapper");t.selectAll(".levels").data([10,2,1]).enter().append("circle").attr("class","gridCircle").attr("r",(function(n,t){return l/n})).style("fill",this.lookAndFeel.gridColor).style("stroke",this.lookAndFeel.gridColor).style("fill-opacity",.15);const e=t.selectAll(".axis").data([0,3,6,9,12,15,18,21].map(n=>this.polarUtil.normalizedPeakToPolar(n,24))).enter().append("g").attr("class","axis");return e.append("line").attr("x1",0).attr("y1",0).attr("x2",(function(n,t){return l*n[0]})).attr("y2",(function(n,t){return l*n[1]})).attr("class","line").style("stroke",this.lookAndFeel.axisColor).style("stroke-dasharray","5 5").style("stroke-width",this.lookAndFeel.axisWidth),e.append("text").attr("class","legend").attr("text-anchor","middle").attr("dy","0.35em").attr("x",(function(n,t){return(l+15)*n[0]})).attr("y",(function(n,t){return(l+15)*n[1]})).text((function(n,l){return n[2]})),n}updateAxisLabels(n,l){const t=n[1]-n[0];l.selectAll(".axis").select("text").text((function(l,e){return 0===e?gb.round(n[1])+" / "+gb.round(n[0]):gb.round(n[0]+l[2]/24*t)}))}}class Mb{}var Pb=e.pb({encapsulation:0,styles:["[_nghost-%COMP%]     .axis .legend {\n        font-size: 15px;\n      }\n\n      [_nghost-%COMP%]     .tooltip {\n        font-size: 15px;\n      }\n\n      [_nghost-%COMP%]     .legendtip {\n        font-size: 18px;\n      }"],data:{}});function Sb(n){return e.Nb(2,[(n()(),e.rb(0,0,null,null,0,"div",[["class","polarplot"]],null,null,null,null,null))],null,null)}var Tb=t("XNiG"),Ib=t("JX91"),Ab=t("/uUt");class qb{constructor(n,l,t,e="selected"){this.phaseType=n,this.relativeTo=l,this.phaseUnit=t,this.showIndividuals=e}static same(n,l){return!n&&!l||!(n&&!l||!n&&l)&&n.phaseType===l.phaseType&&n.relativeTo===l.relativeTo&&n.phaseUnit===l.phaseUnit&&n.showIndividuals===l.showIndividuals}}class Nb{constructor(){this.change=new Tb.a,this._phaseType="ByFit",this._relativeTo="zero",this._phaseUnit="circ",this._showIndividuals="selected",this.options=this.change.pipe(Object(Ib.a)(!0),Object(H.a)(50),Object(_n.a)(()=>new qb(this.phaseType,this.relativeTo,this._phaseUnit,this._showIndividuals)),Object(Ab.a)(qb.same))}get phaseType(){return this._phaseType}set phaseType(n){this._phaseType=n,this.change.next(!0)}get relativeTo(){return this._relativeTo}set relativeTo(n){this._relativeTo=n,this.change.next(!0)}get phaseUnit(){return this._phaseUnit}set phaseUnit(n){this._phaseUnit=n,this.change.next(!0)}get showIndividuals(){return this._showIndividuals}set showIndividuals(n){this._showIndividuals=n,this.change.next(!0)}ngOnInit(){}ngOnDestroy(){this.change.complete()}}class Ob{constructor(){this.groups=[],this.legend=[],this.palette=[],this.removed=[],this.phaseDomain=[0,24]}ngOnInit(){}ngOnChanges(n){this.updatePhases(this.groups,this.phaseParams)}updatePhases(n,l){if(!n||!l)return;const t=l.phaseType;let e,i;"circ"===l.phaseUnit?(e=n.map(n=>w("zero"===l.relativeTo?n.phases2ZCir:n.phases2WCir,t)),i=[0,24]):(e=n.map(n=>w("zero"===l.relativeTo?n.phases2Z:n.phases2W,t)),i=n.length>0?[0,n[0].jobPeriodMax]:[0,24]),this.phases=e,this.phaseDomain=i,this.showIndividuals=l.showIndividuals}}var Eb=e.pb({encapsulation:2,styles:[],data:{}});function Rb(n){return e.Nb(0,[(n()(),e.rb(0,0,null,null,1,"bd2-ngx-polar-plot",[],null,null,null,Sb,Pb)),e.qb(1,4964352,null,0,kb,[e.x,e.h,e.k],{data:[0,"data"],removed:[1,"removed"],showIndividuals:[2,"showIndividuals"],domain:[3,"domain"],palette:[4,"palette"],labels:[5,"labels"]},null)],(function(n,l){var t=l.component;n(l,1,0,t.phases,t.removed,t.showIndividuals,t.phaseDomain,t.palette,t.legend)}),null)}var Lb=t("8jiw"),Bb=t("vkgz"),Fb=t("BOp5");class Ub extends Lb.a{constructor(n,l=!1){super(l),this.ppaService=n,this.results$=this.data$}sameInput(n,l){return x.sameJob(n,l)}assetToData(n){return n.groups}fetchAsset(n){return this.ppaService.getPPAJobResultsGrouped(n.parentId,n.jobId).pipe(Object(Bb.a)(n=>{const l=n.periodMin,t=n.periodMax;n.groups.forEach(n=>{n.jobPeriodMin=n.jobPeriodMin||l,n.jobPeriodMax=n.jobPeriodMax||t})}))}sortingKey(n){switch(n.active){case"id":return n=>n.memberDataId;case"label":return n=>n.label;case"period":return n=>(n.medianPeriod||(n.medianPeriod=Object(Fb.d)(n.periods)),n.medianPeriod);default:return console.error("Not implemented sorting for "+n.active),n=>0}}}class jb{constructor(n,l){this.fetcher=n,this.feedback=l,this.isOn=!1,this.disablePaginator=!1,this.legend=[],this.palette=[],this.removed=[]}set job(n){this.fetcher.input(n)}set on(n){this.isOn=n,this.fetcher.on(n)}reload(){this.fetcher.refresh()}ngOnInit(){this.fetcher.error$.subscribe(n=>this.feedback.error(n));const n=new p.e;n.pageIndex=0,n.pageSize=25,this.fetcher.page(n),this.resultsSubscription=this.initResultsSubscription()}ngOnDestroy(){this.resultsSubscription&&this.resultsSubscription.unsubscribe(),this.fetcher&&this.fetcher.close()}initResultsSubscription(){return this.fetcher.results$.subscribe(n=>{this.updateLabels(n)})}updateLabels(n){const l=n.map(n=>n.label);this.removed=[],this.legend=l,this.palette=ub.palette(l.length)}hideGroups(n){this.removed=n}loadPage(n){this.fetcher.page(n)}sort(n){this.fetcher.sort(n)}}var Jb=e.pb({encapsulation:2,styles:[],data:{}});function Wb(n){return e.Nb(0,[(n()(),e.rb(0,0,null,null,1,"mat-progress-bar",[["aria-valuemax","100"],["aria-valuemin","0"],["class","mat-progress-bar"],["mode","indeterminate"],["role","progressbar"]],[[1,"aria-valuenow",0],[1,"mode",0],[2,"_mat-animation-noopable",null]],null,null,Rn.b,Rn.a)),e.qb(1,4374528,null,0,Ln.b,[e.k,e.x,[2,En.a],[2,Ln.a]],{mode:[0,"mode"]},null)],(function(n,l){n(l,1,0,"indeterminate")}),(function(n,l){n(l,0,0,"indeterminate"===e.Db(l,1).mode||"query"===e.Db(l,1).mode?null:e.Db(l,1).value,e.Db(l,1).mode,e.Db(l,1)._isNoopAnimation)}))}function Hb(n){return e.Nb(0,[(n()(),e.rb(0,16777216,null,null,37,"mat-expansion-panel",[["class","mat-elevation-z2 mat-expansion-panel"]],[[2,"mat-expanded",null],[2,"_mat-animation-noopable",null],[2,"mat-expansion-panel-spacing",null]],[[null,"opened"],[null,"closed"]],(function(n,l,t){var e=!0,i=n.component;return"opened"===l&&(e=0!=(i.on=!0)&&e),"closed"===l&&(e=0!=(i.on=!1)&&e),e}),zn,Wn)),e.qb(1,1753088,null,1,Bn.d,[[3,Bn.a],e.h,jn.d,e.N,f.d,[2,En.a],[2,Bn.b]],{expanded:[0,"expanded"]},{closed:"closed",opened:"opened"}),e.Jb(603979776,1,{_lazyContent:0}),e.Ib(256,null,Bn.a,void 0,[]),(n()(),e.rb(4,0,null,0,8,"mat-expansion-panel-header",[["class","mat-expansion-panel-header"],["role","button"]],[[1,"id",0],[1,"tabindex",0],[1,"aria-controls",0],[1,"aria-expanded",0],[1,"aria-disabled",0],[2,"mat-expanded",null],[2,"mat-expansion-toggle-indicator-after",null],[2,"mat-expansion-toggle-indicator-before",null],[40,"@.disabled",0],[40,"@expansionHeight",0]],[[null,"click"],[null,"keydown"],["component","@expansionHeight.start"]],(function(n,l,t){var i=!0;return"click"===l&&(i=!1!==e.Db(n,5)._toggle()&&i),"keydown"===l&&(i=!1!==e.Db(n,5)._keydown(t)&&i),"component:@expansionHeight.start"===l&&(i=!1!==e.Db(n,5)._animationStarted()&&i),i}),Vn,$n)),e.qb(5,180224,null,0,Bn.e,[Bn.d,e.k,Jn.e,e.h,[2,Bn.b]],null,null),e.Gb(6,{collapsedHeight:0,expandedHeight:1}),e.Gb(7,{value:0,params:1}),(n()(),e.rb(8,0,null,0,4,"mat-panel-title",[["class","mat-expansion-panel-header-title"]],null,null,null,null,null)),e.qb(9,16384,null,0,Bn.f,[],null,null),(n()(),e.rb(10,0,null,null,0,"span",[["aria-hidden","true"],["class","glyphicon glyphicon-object-align-vertical"]],[[4,"color",null]],null,null,null,null)),(n()(),e.rb(11,0,null,null,0,"span",[["aria-hidden","true"],["class","glyphicon glyphicon-dashboard"]],[[4,"color",null]],null,null,null,null)),(n()(),e.Lb(-1,null,[" \xa0Results plots "])),(n()(),e.rb(13,0,null,1,1,"mat-divider",[["class","mat-divider"],["role","separator"]],[[1,"aria-orientation",0],[2,"mat-divider-vertical",null],[2,"mat-divider-horizontal",null],[2,"mat-divider-inset",null]],null,null,Kn.b,Kn.a)),e.qb(14,49152,null,0,Yn.a,[],null,null),(n()(),e.gb(16777216,null,1,2,null,Wb)),e.qb(16,16384,null,0,f.n,[e.N,e.K],{ngIf:[0,"ngIf"]},null),e.Fb(131072,f.b,[e.h]),(n()(),e.rb(18,0,[["periodPlotDiv",1]],1,3,"div",[],null,null,null,null,null)),(n()(),e.rb(19,0,null,null,2,"bd2-ppaperiod-plot",[],null,null,null,Yf,Kf)),e.qb(20,638976,null,0,Vf,[],{groups:[0,"groups"],legend:[1,"legend"],palette:[2,"palette"],removed:[3,"removed"]},null),e.Fb(131072,f.b,[e.h]),(n()(),e.rb(22,0,null,1,1,"bd2-ngx-svg-saver",[["class","pull-left"]],null,null,null,nb,Qf)),e.qb(23,114688,null,0,Zf,[e.k],{fileName:[0,"fileName"],refNode:[1,"refNode"]},null),(n()(),e.rb(24,0,null,1,1,"bd2-ppasort-widget",[["class","pull-right"]],null,[[null,"sort"]],(function(n,l,t){var e=!0;return"sort"===l&&(e=!1!==n.component.sort(t)&&e),e}),ib,eb)),e.qb(25,114688,null,0,tb,[],null,{sort:"sort"}),(n()(),e.rb(26,0,null,1,0,"div",[["class","clearfix"]],null,null,null,null,null)),(n()(),e.rb(27,0,null,1,2,"mat-paginator",[["class","mat-paginator"]],null,[[null,"page"]],(function(n,l,t){var e=!0;return"page"===l&&(e=!1!==n.component.loadPage(t)&&e),e}),b.b,b.a)),e.qb(28,245760,[["paginator",4]],0,p.b,[p.c,e.h],{disabled:[0,"disabled"],pageIndex:[1,"pageIndex"],length:[2,"length"],pageSize:[3,"pageSize"],pageSizeOptions:[4,"pageSizeOptions"]},{page:"page"}),e.Eb(29,5),(n()(),e.rb(30,0,null,1,1,"bd2-simple-legend",[],null,[[null,"marked"]],(function(n,l,t){var e=!0;return"marked"===l&&(e=!1!==n.component.hideGroups(t)&&e),e}),hb,cb)),e.qb(31,638976,null,0,sb,[],{labels:[0,"labels"],palette:[1,"palette"]},{marked:"marked"}),(n()(),e.rb(32,0,[["phasePlotDiv",1]],1,5,"div",[],null,null,null,null,null)),(n()(),e.rb(33,0,null,null,2,"bd2-ppaphase-plot",[],null,null,null,Rb,Eb)),e.qb(34,638976,null,0,Ob,[],{groups:[0,"groups"],phaseParams:[1,"phaseParams"],legend:[2,"legend"],palette:[3,"palette"],removed:[4,"removed"]},null),e.Fb(131072,f.b,[e.h]),(n()(),e.rb(36,0,null,null,1,"bd2-ngx-svg-saver",[["class","pull-left"]],null,null,null,nb,Qf)),e.qb(37,114688,null,0,Zf,[e.k],{fileName:[0,"fileName"],refNode:[1,"refNode"]},null)],(function(n,l){var t=l.component;n(l,1,0,!0),n(l,16,0,e.Mb(l,16,0,e.Db(l,17).transform(t.fetcher.isBusy$))),n(l,20,0,e.Mb(l,20,0,e.Db(l,21).transform(t.fetcher.results$)),t.legend,t.palette,t.removed),n(l,23,0,(null==t.fetcher.currentInput?null:t.fetcher.currentInput.parentId)+"_"+(null==t.fetcher.currentInput?null:t.fetcher.currentInput.method)+".periods",e.Db(l,18)),n(l,25,0);var i=t.disablePaginator,a=null==t.fetcher.currentPage?null:t.fetcher.currentPage.pageIndex,r=t.fetcher.dataLength,u=(null==t.fetcher.currentPage?null:t.fetcher.currentPage.pageSize)||25,o=n(l,29,0,5,10,25,50,100);n(l,28,0,i,a,r,u,o),n(l,31,0,t.legend,t.palette),n(l,34,0,e.Mb(l,34,0,e.Db(l,35).transform(t.fetcher.results$)),t.phaseParams,t.legend,t.palette,t.removed),n(l,37,0,(null==t.fetcher.currentInput?null:t.fetcher.currentInput.parentId)+"_"+(null==t.fetcher.currentInput?null:t.fetcher.currentInput.method)+".phases",e.Db(l,32))}),(function(n,l){var t=l.component;n(l,0,0,e.Db(l,1).expanded,"NoopAnimations"===e.Db(l,1)._animationMode,e.Db(l,1)._hasSpacing());var i=e.Db(l,5).panel._headerId,a=e.Db(l,5).disabled?-1:0,r=e.Db(l,5)._getPanelId(),u=e.Db(l,5)._isExpanded(),o=e.Db(l,5).panel.disabled,s=e.Db(l,5)._isExpanded(),c="after"===e.Db(l,5)._getTogglePosition(),d="before"===e.Db(l,5)._getTogglePosition(),h=e.Db(l,5)._animationsDisabled,f=n(l,7,0,e.Db(l,5)._getExpandedState(),n(l,6,0,e.Db(l,5).collapsedHeight,e.Db(l,5).expandedHeight));n(l,4,0,i,a,r,u,o,s,c,d,h,f),n(l,10,0,t.isOn?"green":"red"),n(l,11,0,t.isOn?"green":"red"),n(l,13,0,e.Db(l,14).vertical?"vertical":"horizontal",e.Db(l,14).vertical,!e.Db(l,14).vertical,e.Db(l,14).inset)}))}var zb=e.pb({encapsulation:0,styles:["div.spaced[_ngcontent-%COMP%] {\n      padding-top: 0.5em;\n      padding-bottom: 0.5em;\n      padding-right: 1em;\n    }"],data:{}});function $b(n){return e.Nb(0,[(n()(),e.rb(0,0,null,null,69,"div",[["class","spaced"]],null,null,null,null,null)),(n()(),e.rb(1,0,null,null,1,"label",[],null,null,null,null,null)),(n()(),e.Lb(-1,null,["Phases by \xa0"])),(n()(),e.rb(3,0,null,null,28,"div",[["class","btn-group spaced"]],null,null,null,null,null)),(n()(),e.rb(4,0,null,null,6,"label",[["btnRadio","ByFit"],["class","btn btn-success btn-xs"]],[[2,"active",null],[1,"aria-pressed",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"click"]],(function(n,l,t){var i=!0,a=n.component;return"click"===l&&(i=!1!==e.Db(n,5).onClick()&&i),"ngModelChange"===l&&(i=!1!==(a.phaseType=t)&&i),i}),null,null)),e.qb(5,81920,null,0,lb.b,[e.k,e.h,[2,lb.c],e.C],{btnRadio:[0,"btnRadio"]},null),e.Ib(1024,null,h.p,(function(n){return[n]}),[lb.b]),e.qb(7,671744,null,0,h.u,[[8,null],[8,null],[8,null],[6,h.p]],{model:[0,"model"]},{update:"ngModelChange"}),e.Ib(2048,null,h.q,null,[h.u]),e.qb(9,16384,null,0,h.r,[[4,h.q]],null,null),(n()(),e.Lb(-1,null,["Fit"])),(n()(),e.rb(11,0,null,null,6,"label",[["btnRadio","ByMethod"],["class","btn btn-success btn-xs"]],[[2,"active",null],[1,"aria-pressed",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"click"]],(function(n,l,t){var i=!0,a=n.component;return"click"===l&&(i=!1!==e.Db(n,12).onClick()&&i),"ngModelChange"===l&&(i=!1!==(a.phaseType=t)&&i),i}),null,null)),e.qb(12,81920,null,0,lb.b,[e.k,e.h,[2,lb.c],e.C],{btnRadio:[0,"btnRadio"]},null),e.Ib(1024,null,h.p,(function(n){return[n]}),[lb.b]),e.qb(14,671744,null,0,h.u,[[8,null],[8,null],[8,null],[6,h.p]],{model:[0,"model"]},{update:"ngModelChange"}),e.Ib(2048,null,h.q,null,[h.u]),e.qb(16,16384,null,0,h.r,[[4,h.q]],null,null),(n()(),e.Lb(-1,null,["Method"])),(n()(),e.rb(18,0,null,null,6,"label",[["btnRadio","ByFirstPeak"],["class","btn btn-success btn-xs"]],[[2,"active",null],[1,"aria-pressed",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"click"]],(function(n,l,t){var i=!0,a=n.component;return"click"===l&&(i=!1!==e.Db(n,19).onClick()&&i),"ngModelChange"===l&&(i=!1!==(a.phaseType=t)&&i),i}),null,null)),e.qb(19,81920,null,0,lb.b,[e.k,e.h,[2,lb.c],e.C],{btnRadio:[0,"btnRadio"]},null),e.Ib(1024,null,h.p,(function(n){return[n]}),[lb.b]),e.qb(21,671744,null,0,h.u,[[8,null],[8,null],[8,null],[6,h.p]],{model:[0,"model"]},{update:"ngModelChange"}),e.Ib(2048,null,h.q,null,[h.u]),e.qb(23,16384,null,0,h.r,[[4,h.q]],null,null),(n()(),e.Lb(-1,null,["First"])),(n()(),e.rb(25,0,null,null,6,"label",[["btnRadio","ByAvgMax"],["class","btn btn-success btn-xs"]],[[2,"active",null],[1,"aria-pressed",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"click"]],(function(n,l,t){var i=!0,a=n.component;return"click"===l&&(i=!1!==e.Db(n,26).onClick()&&i),"ngModelChange"===l&&(i=!1!==(a.phaseType=t)&&i),i}),null,null)),e.qb(26,81920,null,0,lb.b,[e.k,e.h,[2,lb.c],e.C],{btnRadio:[0,"btnRadio"]},null),e.Ib(1024,null,h.p,(function(n){return[n]}),[lb.b]),e.qb(28,671744,null,0,h.u,[[8,null],[8,null],[8,null],[6,h.p]],{model:[0,"model"]},{update:"ngModelChange"}),e.Ib(2048,null,h.q,null,[h.u]),e.qb(30,16384,null,0,h.r,[[4,h.q]],null,null),(n()(),e.Lb(-1,null,["Avg."])),(n()(),e.rb(32,0,null,null,14,"div",[["class","btn-group spaced"]],null,null,null,null,null)),(n()(),e.rb(33,0,null,null,6,"label",[["btnRadio","zero"],["class","btn btn-success btn-xs"]],[[2,"active",null],[1,"aria-pressed",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"click"]],(function(n,l,t){var i=!0,a=n.component;return"click"===l&&(i=!1!==e.Db(n,34).onClick()&&i),"ngModelChange"===l&&(i=!1!==(a.relativeTo=t)&&i),i}),null,null)),e.qb(34,81920,null,0,lb.b,[e.k,e.h,[2,lb.c],e.C],{btnRadio:[0,"btnRadio"]},null),e.Ib(1024,null,h.p,(function(n){return[n]}),[lb.b]),e.qb(36,671744,null,0,h.u,[[8,null],[8,null],[8,null],[6,h.p]],{model:[0,"model"]},{update:"ngModelChange"}),e.Ib(2048,null,h.q,null,[h.u]),e.qb(38,16384,null,0,h.r,[[4,h.q]],null,null),(n()(),e.Lb(-1,null,["Zero"])),(n()(),e.rb(40,0,null,null,6,"label",[["btnRadio","dw"],["class","btn btn-success btn-xs"]],[[2,"active",null],[1,"aria-pressed",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"click"]],(function(n,l,t){var i=!0,a=n.component;return"click"===l&&(i=!1!==e.Db(n,41).onClick()&&i),"ngModelChange"===l&&(i=!1!==(a.relativeTo=t)&&i),i}),null,null)),e.qb(41,81920,null,0,lb.b,[e.k,e.h,[2,lb.c],e.C],{btnRadio:[0,"btnRadio"]},null),e.Ib(1024,null,h.p,(function(n){return[n]}),[lb.b]),e.qb(43,671744,null,0,h.u,[[8,null],[8,null],[8,null],[6,h.p]],{model:[0,"model"]},{update:"ngModelChange"}),e.Ib(2048,null,h.q,null,[h.u]),e.qb(45,16384,null,0,h.r,[[4,h.q]],null,null),(n()(),e.Lb(-1,null,["Window"])),(n()(),e.rb(47,0,null,null,14,"div",[["class","btn-group spaced"]],null,null,null,null,null)),(n()(),e.rb(48,0,null,null,6,"label",[["btnRadio","circ"],["class","btn btn-success btn-xs"]],[[2,"active",null],[1,"aria-pressed",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"click"]],(function(n,l,t){var i=!0,a=n.component;return"click"===l&&(i=!1!==e.Db(n,49).onClick()&&i),"ngModelChange"===l&&(i=!1!==(a.phaseUnit=t)&&i),i}),null,null)),e.qb(49,81920,null,0,lb.b,[e.k,e.h,[2,lb.c],e.C],{btnRadio:[0,"btnRadio"]},null),e.Ib(1024,null,h.p,(function(n){return[n]}),[lb.b]),e.qb(51,671744,null,0,h.u,[[8,null],[8,null],[8,null],[6,h.p]],{model:[0,"model"]},{update:"ngModelChange"}),e.Ib(2048,null,h.q,null,[h.u]),e.qb(53,16384,null,0,h.r,[[4,h.q]],null,null),(n()(),e.Lb(-1,null,["Circadian"])),(n()(),e.rb(55,0,null,null,6,"label",[["btnRadio","abs"],["class","btn btn-success btn-xs"]],[[2,"active",null],[1,"aria-pressed",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"click"]],(function(n,l,t){var i=!0,a=n.component;return"click"===l&&(i=!1!==e.Db(n,56).onClick()&&i),"ngModelChange"===l&&(i=!1!==(a.phaseUnit=t)&&i),i}),null,null)),e.qb(56,81920,null,0,lb.b,[e.k,e.h,[2,lb.c],e.C],{btnRadio:[0,"btnRadio"]},null),e.Ib(1024,null,h.p,(function(n){return[n]}),[lb.b]),e.qb(58,671744,null,0,h.u,[[8,null],[8,null],[8,null],[6,h.p]],{model:[0,"model"]},{update:"ngModelChange"}),e.Ib(2048,null,h.q,null,[h.u]),e.qb(60,16384,null,0,h.r,[[4,h.q]],null,null),(n()(),e.Lb(-1,null,["Absolute"])),(n()(),e.rb(62,0,null,null,7,"div",[["class","btn-group spaced"]],null,null,null,null,null)),(n()(),e.rb(63,0,null,null,6,"label",[["btnCheckbox",""],["btnCheckboxFalse","selected"],["btnCheckboxTrue","all"],["class","btn btn-success btn-xs small"]],[[2,"active",null],[1,"aria-pressed",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"click"]],(function(n,l,t){var i=!0,a=n.component;return"click"===l&&(i=!1!==e.Db(n,64).onClick()&&i),"ngModelChange"===l&&(i=!1!==(a.showIndividuals=t)&&i),i}),null,null)),e.qb(64,81920,null,0,lb.a,[],{btnCheckboxTrue:[0,"btnCheckboxTrue"],btnCheckboxFalse:[1,"btnCheckboxFalse"]},null),e.Ib(1024,null,h.p,(function(n){return[n]}),[lb.a]),e.qb(66,671744,null,0,h.u,[[8,null],[8,null],[8,null],[6,h.p]],{model:[0,"model"]},{update:"ngModelChange"}),e.Ib(2048,null,h.q,null,[h.u]),e.qb(68,16384,null,0,h.r,[[4,h.q]],null,null),(n()(),e.Lb(-1,null,["Ind."]))],(function(n,l){var t=l.component;n(l,5,0,"ByFit"),n(l,7,0,t.phaseType),n(l,12,0,"ByMethod"),n(l,14,0,t.phaseType),n(l,19,0,"ByFirstPeak"),n(l,21,0,t.phaseType),n(l,26,0,"ByAvgMax"),n(l,28,0,t.phaseType),n(l,34,0,"zero"),n(l,36,0,t.relativeTo),n(l,41,0,"dw"),n(l,43,0,t.relativeTo),n(l,49,0,"circ"),n(l,51,0,t.phaseUnit),n(l,56,0,"abs"),n(l,58,0,t.phaseUnit),n(l,64,0,"all","selected"),n(l,66,0,t.showIndividuals)}),(function(n,l){n(l,4,0,e.Db(l,5).isActive,e.Db(l,5).isActive,e.Db(l,9).ngClassUntouched,e.Db(l,9).ngClassTouched,e.Db(l,9).ngClassPristine,e.Db(l,9).ngClassDirty,e.Db(l,9).ngClassValid,e.Db(l,9).ngClassInvalid,e.Db(l,9).ngClassPending),n(l,11,0,e.Db(l,12).isActive,e.Db(l,12).isActive,e.Db(l,16).ngClassUntouched,e.Db(l,16).ngClassTouched,e.Db(l,16).ngClassPristine,e.Db(l,16).ngClassDirty,e.Db(l,16).ngClassValid,e.Db(l,16).ngClassInvalid,e.Db(l,16).ngClassPending),n(l,18,0,e.Db(l,19).isActive,e.Db(l,19).isActive,e.Db(l,23).ngClassUntouched,e.Db(l,23).ngClassTouched,e.Db(l,23).ngClassPristine,e.Db(l,23).ngClassDirty,e.Db(l,23).ngClassValid,e.Db(l,23).ngClassInvalid,e.Db(l,23).ngClassPending),n(l,25,0,e.Db(l,26).isActive,e.Db(l,26).isActive,e.Db(l,30).ngClassUntouched,e.Db(l,30).ngClassTouched,e.Db(l,30).ngClassPristine,e.Db(l,30).ngClassDirty,e.Db(l,30).ngClassValid,e.Db(l,30).ngClassInvalid,e.Db(l,30).ngClassPending),n(l,33,0,e.Db(l,34).isActive,e.Db(l,34).isActive,e.Db(l,38).ngClassUntouched,e.Db(l,38).ngClassTouched,e.Db(l,38).ngClassPristine,e.Db(l,38).ngClassDirty,e.Db(l,38).ngClassValid,e.Db(l,38).ngClassInvalid,e.Db(l,38).ngClassPending),n(l,40,0,e.Db(l,41).isActive,e.Db(l,41).isActive,e.Db(l,45).ngClassUntouched,e.Db(l,45).ngClassTouched,e.Db(l,45).ngClassPristine,e.Db(l,45).ngClassDirty,e.Db(l,45).ngClassValid,e.Db(l,45).ngClassInvalid,e.Db(l,45).ngClassPending),n(l,48,0,e.Db(l,49).isActive,e.Db(l,49).isActive,e.Db(l,53).ngClassUntouched,e.Db(l,53).ngClassTouched,e.Db(l,53).ngClassPristine,e.Db(l,53).ngClassDirty,e.Db(l,53).ngClassValid,e.Db(l,53).ngClassInvalid,e.Db(l,53).ngClassPending),n(l,55,0,e.Db(l,56).isActive,e.Db(l,56).isActive,e.Db(l,60).ngClassUntouched,e.Db(l,60).ngClassTouched,e.Db(l,60).ngClassPristine,e.Db(l,60).ngClassDirty,e.Db(l,60).ngClassValid,e.Db(l,60).ngClassInvalid,e.Db(l,60).ngClassPending),n(l,63,0,e.Db(l,64).state,e.Db(l,64).state,e.Db(l,68).ngClassUntouched,e.Db(l,68).ngClassTouched,e.Db(l,68).ngClassPristine,e.Db(l,68).ngClassDirty,e.Db(l,68).ngClassValid,e.Db(l,68).ngClassInvalid,e.Db(l,68).ngClassPending)}))}var Gb=t("m46K"),Vb=t("7kcP"),Kb=t("8rEH"),Yb=t("zQui"),Xb=t("pIm3"),Zb=t("IP0z");class Qb extends Lb.a{constructor(n,l=!1){super(l),this.ppaService=n,this.stats$=this.data$}sameInput(n,l){return x.sameJob(n,l)}assetToData(n){return n.stats}fetchAsset(n){return this.ppaService.getPPAJobSimpleStats(n.parentId,n.jobId)}sortingKey(n){switch(n.active){case"label":return n=>n.label;case"period":return n=>Number.isNaN(Number(n.per))?Number.MAX_VALUE:n.per;default:return console.error("Not implemented sorting for "+n.active),n=>0}}}class np{constructor(n,l){this.fetcher=n,this.feedback=l,this.phaseType="ByFit",this.relativeTo="zero",this.phaseUnit="circ",this.isOn=!1,this.disablePaginator=!1,this.displayedColumns=["label","n","period","period.std","phase","phase.std","amplitude","amplitude.std"]}set job(n){this.fetcher.input(n)}set phaseParams(n){n&&(this.phaseType=n.phaseType,this.relativeTo=n.relativeTo,this.phaseUnit=n.phaseUnit)}set on(n){this.isOn=n,this.fetcher.on(n)}ngOnInit(){this.fetcher.error$.subscribe(n=>this.feedback.error(n));const n=new p.e;n.pageIndex=0,n.pageSize=25,this.fetcher.page(n)}ngOnDestroy(){this.fetcher&&this.fetcher.close()}reload(){this.fetcher.refresh()}loadPage(n){this.fetcher.page(n)}sortData(n){this.fetcher.sort(n)}extractPhase(n){return w(C(n,this.relativeTo,this.phaseUnit),this.phaseType)}extractPhaseStd(n){return w("circ"===this.phaseUnit?n.phStdCir:n.phStd,this.phaseType)}extractAmp(n){const l=w(n.amp,this.phaseType);return isNaN(l)?l:l.toExponential(2)}extractAmpStd(n){const l=w(n.ampStd,this.phaseType);return isNaN(l)?l:l.toExponential(2)}}var lp=e.pb({encapsulation:2,styles:[],data:{}});function tp(n){return e.Nb(0,[(n()(),e.rb(0,0,null,null,1,"mat-progress-bar",[["aria-valuemax","100"],["aria-valuemin","0"],["class","mat-progress-bar"],["mode","indeterminate"],["role","progressbar"]],[[1,"aria-valuenow",0],[1,"mode",0],[2,"_mat-animation-noopable",null]],null,null,Rn.b,Rn.a)),e.qb(1,4374528,null,0,Ln.b,[e.k,e.x,[2,En.a],[2,Ln.a]],{mode:[0,"mode"]},null)],(function(n,l){n(l,1,0,"indeterminate")}),(function(n,l){n(l,0,0,"indeterminate"===e.Db(l,1).mode||"query"===e.Db(l,1).mode?null:e.Db(l,1).value,e.Db(l,1).mode,e.Db(l,1)._isNoopAnimation)}))}function ep(n){return e.Nb(0,[(n()(),e.rb(0,0,null,null,3,"th",[["class","mat-header-cell"],["mat-header-cell",""],["mat-sort-header",""],["role","columnheader"]],[[1,"aria-sort",0],[2,"mat-sort-header-disabled",null]],[[null,"click"],[null,"mouseenter"],[null,"longpress"],[null,"mouseleave"]],(function(n,l,t){var i=!0;return"click"===l&&(i=!1!==e.Db(n,1)._handleClick()&&i),"mouseenter"===l&&(i=!1!==e.Db(n,1)._setIndicatorHintVisible(!0)&&i),"longpress"===l&&(i=!1!==e.Db(n,1)._setIndicatorHintVisible(!0)&&i),"mouseleave"===l&&(i=!1!==e.Db(n,1)._setIndicatorHintVisible(!1)&&i),i}),Gb.b,Gb.a)),e.qb(1,245760,null,0,Vb.c,[Vb.d,e.h,[2,Vb.b],[2,"MAT_SORT_HEADER_COLUMN_DEF"]],{id:[0,"id"]},null),e.qb(2,16384,null,0,Kb.h,[Yb.d,e.k],null,null),(n()(),e.Lb(-1,0,["Data"]))],(function(n,l){n(l,1,0,"")}),(function(n,l){n(l,0,0,e.Db(l,1)._getAriaSortAttribute(),e.Db(l,1)._isDisabled())}))}function ip(n){return e.Nb(0,[(n()(),e.rb(0,0,null,null,2,"td",[["class","word_wrapping mat-cell"],["mat-cell",""],["role","gridcell"],["style","max-width: 140px"]],null,null,null,null,null)),e.qb(1,16384,null,0,Kb.a,[Yb.d,e.k],null,null),(n()(),e.Lb(2,null,["",""]))],null,(function(n,l){n(l,2,0,l.context.$implicit.label)}))}function ap(n){return e.Nb(0,[(n()(),e.rb(0,0,null,null,2,"th",[["class","mat-header-cell"],["mat-header-cell",""],["role","columnheader"]],null,null,null,null,null)),e.qb(1,16384,null,0,Kb.h,[Yb.d,e.k],null,null),(n()(),e.Lb(-1,null,["N"]))],null,null)}function rp(n){return e.Nb(0,[(n()(),e.rb(0,0,null,null,2,"td",[["class","mat-cell"],["mat-cell",""],["role","gridcell"]],null,null,null,null,null)),e.qb(1,16384,null,0,Kb.a,[Yb.d,e.k],null,null),(n()(),e.Lb(2,null,["",""]))],null,(function(n,l){n(l,2,0,l.context.$implicit.N)}))}function up(n){return e.Nb(0,[(n()(),e.rb(0,0,null,null,3,"th",[["class","mat-header-cell"],["mat-header-cell",""],["mat-sort-header",""],["role","columnheader"]],[[1,"aria-sort",0],[2,"mat-sort-header-disabled",null]],[[null,"click"],[null,"mouseenter"],[null,"longpress"],[null,"mouseleave"]],(function(n,l,t){var i=!0;return"click"===l&&(i=!1!==e.Db(n,1)._handleClick()&&i),"mouseenter"===l&&(i=!1!==e.Db(n,1)._setIndicatorHintVisible(!0)&&i),"longpress"===l&&(i=!1!==e.Db(n,1)._setIndicatorHintVisible(!0)&&i),"mouseleave"===l&&(i=!1!==e.Db(n,1)._setIndicatorHintVisible(!1)&&i),i}),Gb.b,Gb.a)),e.qb(1,245760,null,0,Vb.c,[Vb.d,e.h,[2,Vb.b],[2,"MAT_SORT_HEADER_COLUMN_DEF"]],{id:[0,"id"]},null),e.qb(2,16384,null,0,Kb.h,[Yb.d,e.k],null,null),(n()(),e.Lb(-1,0,["Period"]))],(function(n,l){n(l,1,0,"")}),(function(n,l){n(l,0,0,e.Db(l,1)._getAriaSortAttribute(),e.Db(l,1)._isDisabled())}))}function op(n){return e.Nb(0,[(n()(),e.rb(0,0,null,null,2,"td",[["class","mat-cell"],["mat-cell",""],["role","gridcell"]],null,null,null,null,null)),e.qb(1,16384,null,0,Kb.a,[Yb.d,e.k],null,null),(n()(),e.Lb(2,null,["",""]))],null,(function(n,l){n(l,2,0,l.context.$implicit.per)}))}function sp(n){return e.Nb(0,[(n()(),e.rb(0,0,null,null,2,"th",[["class","mat-header-cell"],["mat-header-cell",""],["role","columnheader"]],null,null,null,null,null)),e.qb(1,16384,null,0,Kb.h,[Yb.d,e.k],null,null),(n()(),e.Lb(-1,null,["P.Std"]))],null,null)}function cp(n){return e.Nb(0,[(n()(),e.rb(0,0,null,null,2,"td",[["class","mat-cell"],["mat-cell",""],["role","gridcell"]],null,null,null,null,null)),e.qb(1,16384,null,0,Kb.a,[Yb.d,e.k],null,null),(n()(),e.Lb(2,null,["",""]))],null,(function(n,l){n(l,2,0,l.context.$implicit.perStd)}))}function dp(n){return e.Nb(0,[(n()(),e.rb(0,0,null,null,2,"th",[["class","mat-header-cell"],["mat-header-cell",""],["role","columnheader"]],null,null,null,null,null)),e.qb(1,16384,null,0,Kb.h,[Yb.d,e.k],null,null),(n()(),e.Lb(-1,null,["Phase"]))],null,null)}function hp(n){return e.Nb(0,[(n()(),e.rb(0,0,null,null,2,"td",[["class","mat-cell"],["mat-cell",""],["role","gridcell"]],null,null,null,null,null)),e.qb(1,16384,null,0,Kb.a,[Yb.d,e.k],null,null),(n()(),e.Lb(2,null,["",""]))],null,(function(n,l){n(l,2,0,l.component.extractPhase(l.context.$implicit))}))}function fp(n){return e.Nb(0,[(n()(),e.rb(0,0,null,null,2,"th",[["class","mat-header-cell"],["mat-header-cell",""],["role","columnheader"]],null,null,null,null,null)),e.qb(1,16384,null,0,Kb.h,[Yb.d,e.k],null,null),(n()(),e.Lb(-1,null,["Ph.Std"]))],null,null)}function bp(n){return e.Nb(0,[(n()(),e.rb(0,0,null,null,2,"td",[["class","mat-cell"],["mat-cell",""],["role","gridcell"]],null,null,null,null,null)),e.qb(1,16384,null,0,Kb.a,[Yb.d,e.k],null,null),(n()(),e.Lb(2,null,["",""]))],null,(function(n,l){n(l,2,0,l.component.extractPhaseStd(l.context.$implicit))}))}function pp(n){return e.Nb(0,[(n()(),e.rb(0,0,null,null,2,"th",[["class","mat-header-cell"],["mat-header-cell",""],["role","columnheader"]],null,null,null,null,null)),e.qb(1,16384,null,0,Kb.h,[Yb.d,e.k],null,null),(n()(),e.Lb(-1,null,["Amp."]))],null,null)}function gp(n){return e.Nb(0,[(n()(),e.rb(0,0,null,null,2,"td",[["class","mat-cell"],["mat-cell",""],["role","gridcell"]],null,null,null,null,null)),e.qb(1,16384,null,0,Kb.a,[Yb.d,e.k],null,null),(n()(),e.Lb(2,null,["",""]))],null,(function(n,l){n(l,2,0,l.component.extractAmp(l.context.$implicit))}))}function mp(n){return e.Nb(0,[(n()(),e.rb(0,0,null,null,2,"th",[["class","mat-header-cell"],["mat-header-cell",""],["role","columnheader"]],null,null,null,null,null)),e.qb(1,16384,null,0,Kb.h,[Yb.d,e.k],null,null),(n()(),e.Lb(-1,null,["Amp.Std"]))],null,null)}function yp(n){return e.Nb(0,[(n()(),e.rb(0,0,null,null,2,"td",[["class","mat-cell"],["mat-cell",""],["role","gridcell"]],null,null,null,null,null)),e.qb(1,16384,null,0,Kb.a,[Yb.d,e.k],null,null),(n()(),e.Lb(2,null,["",""]))],null,(function(n,l){n(l,2,0,l.component.extractAmpStd(l.context.$implicit))}))}function vp(n){return e.Nb(0,[(n()(),e.rb(0,0,null,null,2,"tr",[["class","mat-header-row"],["mat-header-row",""],["role","row"]],null,null,null,Xb.f,Xb.b)),e.Ib(6144,null,Yb.k,null,[Kb.j]),e.qb(2,49152,null,0,Kb.j,[],null,null)],null,null)}function _p(n){return e.Nb(0,[(n()(),e.rb(0,0,null,null,2,"tr",[["class","mat-row"],["mat-row",""],["role","row"]],null,null,null,Xb.g,Xb.c)),e.Ib(6144,null,Yb.m,null,[Kb.l]),e.qb(2,49152,null,0,Kb.l,[],null,null)],null,null)}function xp(n){return e.Nb(0,[(n()(),e.rb(0,16777216,null,null,137,"mat-expansion-panel",[["class","mat-elevation-z2 mat-expansion-panel"]],[[2,"mat-expanded",null],[2,"_mat-animation-noopable",null],[2,"mat-expansion-panel-spacing",null]],[[null,"opened"],[null,"closed"]],(function(n,l,t){var e=!0,i=n.component;return"opened"===l&&(e=0!=(i.on=!0)&&e),"closed"===l&&(e=0!=(i.on=!1)&&e),e}),zn,Wn)),e.qb(1,1753088,null,1,Bn.d,[[3,Bn.a],e.h,jn.d,e.N,f.d,[2,En.a],[2,Bn.b]],null,{closed:"closed",opened:"opened"}),e.Jb(603979776,1,{_lazyContent:0}),e.Ib(256,null,Bn.a,void 0,[]),(n()(),e.rb(4,0,null,0,7,"mat-expansion-panel-header",[["class","mat-expansion-panel-header"],["role","button"]],[[1,"id",0],[1,"tabindex",0],[1,"aria-controls",0],[1,"aria-expanded",0],[1,"aria-disabled",0],[2,"mat-expanded",null],[2,"mat-expansion-toggle-indicator-after",null],[2,"mat-expansion-toggle-indicator-before",null],[40,"@.disabled",0],[40,"@expansionHeight",0]],[[null,"click"],[null,"keydown"],["component","@expansionHeight.start"]],(function(n,l,t){var i=!0;return"click"===l&&(i=!1!==e.Db(n,5)._toggle()&&i),"keydown"===l&&(i=!1!==e.Db(n,5)._keydown(t)&&i),"component:@expansionHeight.start"===l&&(i=!1!==e.Db(n,5)._animationStarted()&&i),i}),Vn,$n)),e.qb(5,180224,null,0,Bn.e,[Bn.d,e.k,Jn.e,e.h,[2,Bn.b]],null,null),e.Gb(6,{collapsedHeight:0,expandedHeight:1}),e.Gb(7,{value:0,params:1}),(n()(),e.rb(8,0,null,0,3,"mat-panel-title",[["class","mat-expansion-panel-header-title"]],null,null,null,null,null)),e.qb(9,16384,null,0,Bn.f,[],null,null),(n()(),e.rb(10,0,null,null,0,"span",[["aria-hidden","true"],["class","glyphicon glyphicon-list-alt"]],[[4,"color",null]],null,null,null,null)),(n()(),e.Lb(-1,null,["\xa0 Summary statistics "])),(n()(),e.rb(12,0,null,1,1,"mat-divider",[["class","mat-divider"],["role","separator"]],[[1,"aria-orientation",0],[2,"mat-divider-vertical",null],[2,"mat-divider-horizontal",null],[2,"mat-divider-inset",null]],null,null,Kn.b,Kn.a)),e.qb(13,49152,null,0,Yn.a,[],null,null),(n()(),e.gb(16777216,null,1,2,null,tp)),e.qb(15,16384,null,0,f.n,[e.N,e.K],{ngIf:[0,"ngIf"]},null),e.Fb(131072,f.b,[e.h]),(n()(),e.rb(17,0,null,1,2,"mat-paginator",[["class","mat-paginator"]],null,[[null,"page"]],(function(n,l,t){var e=!0;return"page"===l&&(e=!1!==n.component.loadPage(t)&&e),e}),b.b,b.a)),e.qb(18,245760,[["paginator",4]],0,p.b,[p.c,e.h],{disabled:[0,"disabled"],pageIndex:[1,"pageIndex"],length:[2,"length"],pageSize:[3,"pageSize"],pageSizeOptions:[4,"pageSizeOptions"]},{page:"page"}),e.Eb(19,5),(n()(),e.rb(20,0,null,1,117,"table",[["aria-label","Summary statistics"],["class","full-width-table mat-table"],["mat-table",""],["matSort",""],["width","100%"]],null,[[null,"matSortChange"]],(function(n,l,t){var e=!0;return"matSortChange"===l&&(e=!1!==n.component.sortData(t)&&e),e}),Xb.h,Xb.d)),e.Ib(6144,null,Yb.o,null,[Kb.n]),e.qb(22,737280,null,0,Vb.b,[],null,{sortChange:"matSortChange"}),e.qb(23,2342912,null,4,Kb.n,[e.q,e.h,e.k,[8,null],[2,Zb.b],f.d,On.a],{dataSource:[0,"dataSource"]},null),e.Jb(603979776,2,{_contentColumnDefs:1}),e.Jb(603979776,3,{_contentRowDefs:1}),e.Jb(603979776,4,{_contentHeaderRowDefs:1}),e.Jb(603979776,5,{_contentFooterRowDefs:1}),(n()(),e.rb(28,0,null,null,12,null,null,null,null,null,null,null)),e.Ib(6144,null,"MAT_SORT_HEADER_COLUMN_DEF",null,[Kb.c]),e.qb(30,16384,null,3,Kb.c,[],{name:[0,"name"]},null),e.Jb(603979776,6,{cell:0}),e.Jb(603979776,7,{headerCell:0}),e.Jb(603979776,8,{footerCell:0}),e.Ib(2048,[[2,4]],Yb.d,null,[Kb.c]),(n()(),e.gb(0,null,null,2,null,ep)),e.qb(36,16384,null,0,Kb.i,[e.K],null,null),e.Ib(2048,[[7,4]],Yb.j,null,[Kb.i]),(n()(),e.gb(0,null,null,2,null,ip)),e.qb(39,16384,null,0,Kb.b,[e.K],null,null),e.Ib(2048,[[6,4]],Yb.b,null,[Kb.b]),(n()(),e.rb(41,0,null,null,12,null,null,null,null,null,null,null)),e.Ib(6144,null,"MAT_SORT_HEADER_COLUMN_DEF",null,[Kb.c]),e.qb(43,16384,null,3,Kb.c,[],{name:[0,"name"]},null),e.Jb(603979776,9,{cell:0}),e.Jb(603979776,10,{headerCell:0}),e.Jb(603979776,11,{footerCell:0}),e.Ib(2048,[[2,4]],Yb.d,null,[Kb.c]),(n()(),e.gb(0,null,null,2,null,ap)),e.qb(49,16384,null,0,Kb.i,[e.K],null,null),e.Ib(2048,[[10,4]],Yb.j,null,[Kb.i]),(n()(),e.gb(0,null,null,2,null,rp)),e.qb(52,16384,null,0,Kb.b,[e.K],null,null),e.Ib(2048,[[9,4]],Yb.b,null,[Kb.b]),(n()(),e.rb(54,0,null,null,12,null,null,null,null,null,null,null)),e.Ib(6144,null,"MAT_SORT_HEADER_COLUMN_DEF",null,[Kb.c]),e.qb(56,16384,null,3,Kb.c,[],{name:[0,"name"]},null),e.Jb(603979776,12,{cell:0}),e.Jb(603979776,13,{headerCell:0}),e.Jb(603979776,14,{footerCell:0}),e.Ib(2048,[[2,4]],Yb.d,null,[Kb.c]),(n()(),e.gb(0,null,null,2,null,up)),e.qb(62,16384,null,0,Kb.i,[e.K],null,null),e.Ib(2048,[[13,4]],Yb.j,null,[Kb.i]),(n()(),e.gb(0,null,null,2,null,op)),e.qb(65,16384,null,0,Kb.b,[e.K],null,null),e.Ib(2048,[[12,4]],Yb.b,null,[Kb.b]),(n()(),e.rb(67,0,null,null,12,null,null,null,null,null,null,null)),e.Ib(6144,null,"MAT_SORT_HEADER_COLUMN_DEF",null,[Kb.c]),e.qb(69,16384,null,3,Kb.c,[],{name:[0,"name"]},null),e.Jb(603979776,15,{cell:0}),e.Jb(603979776,16,{headerCell:0}),e.Jb(603979776,17,{footerCell:0}),e.Ib(2048,[[2,4]],Yb.d,null,[Kb.c]),(n()(),e.gb(0,null,null,2,null,sp)),e.qb(75,16384,null,0,Kb.i,[e.K],null,null),e.Ib(2048,[[16,4]],Yb.j,null,[Kb.i]),(n()(),e.gb(0,null,null,2,null,cp)),e.qb(78,16384,null,0,Kb.b,[e.K],null,null),e.Ib(2048,[[15,4]],Yb.b,null,[Kb.b]),(n()(),e.rb(80,0,null,null,12,null,null,null,null,null,null,null)),e.Ib(6144,null,"MAT_SORT_HEADER_COLUMN_DEF",null,[Kb.c]),e.qb(82,16384,null,3,Kb.c,[],{name:[0,"name"]},null),e.Jb(603979776,18,{cell:0}),e.Jb(603979776,19,{headerCell:0}),e.Jb(603979776,20,{footerCell:0}),e.Ib(2048,[[2,4]],Yb.d,null,[Kb.c]),(n()(),e.gb(0,null,null,2,null,dp)),e.qb(88,16384,null,0,Kb.i,[e.K],null,null),e.Ib(2048,[[19,4]],Yb.j,null,[Kb.i]),(n()(),e.gb(0,null,null,2,null,hp)),e.qb(91,16384,null,0,Kb.b,[e.K],null,null),e.Ib(2048,[[18,4]],Yb.b,null,[Kb.b]),(n()(),e.rb(93,0,null,null,12,null,null,null,null,null,null,null)),e.Ib(6144,null,"MAT_SORT_HEADER_COLUMN_DEF",null,[Kb.c]),e.qb(95,16384,null,3,Kb.c,[],{name:[0,"name"]},null),e.Jb(603979776,21,{cell:0}),e.Jb(603979776,22,{headerCell:0}),e.Jb(603979776,23,{footerCell:0}),e.Ib(2048,[[2,4]],Yb.d,null,[Kb.c]),(n()(),e.gb(0,null,null,2,null,fp)),e.qb(101,16384,null,0,Kb.i,[e.K],null,null),e.Ib(2048,[[22,4]],Yb.j,null,[Kb.i]),(n()(),e.gb(0,null,null,2,null,bp)),e.qb(104,16384,null,0,Kb.b,[e.K],null,null),e.Ib(2048,[[21,4]],Yb.b,null,[Kb.b]),(n()(),e.rb(106,0,null,null,12,null,null,null,null,null,null,null)),e.Ib(6144,null,"MAT_SORT_HEADER_COLUMN_DEF",null,[Kb.c]),e.qb(108,16384,null,3,Kb.c,[],{name:[0,"name"]},null),e.Jb(603979776,24,{cell:0}),e.Jb(603979776,25,{headerCell:0}),e.Jb(603979776,26,{footerCell:0}),e.Ib(2048,[[2,4]],Yb.d,null,[Kb.c]),(n()(),e.gb(0,null,null,2,null,pp)),e.qb(114,16384,null,0,Kb.i,[e.K],null,null),e.Ib(2048,[[25,4]],Yb.j,null,[Kb.i]),(n()(),e.gb(0,null,null,2,null,gp)),e.qb(117,16384,null,0,Kb.b,[e.K],null,null),e.Ib(2048,[[24,4]],Yb.b,null,[Kb.b]),(n()(),e.rb(119,0,null,null,12,null,null,null,null,null,null,null)),e.Ib(6144,null,"MAT_SORT_HEADER_COLUMN_DEF",null,[Kb.c]),e.qb(121,16384,null,3,Kb.c,[],{name:[0,"name"]},null),e.Jb(603979776,27,{cell:0}),e.Jb(603979776,28,{headerCell:0}),e.Jb(603979776,29,{footerCell:0}),e.Ib(2048,[[2,4]],Yb.d,null,[Kb.c]),(n()(),e.gb(0,null,null,2,null,mp)),e.qb(127,16384,null,0,Kb.i,[e.K],null,null),e.Ib(2048,[[28,4]],Yb.j,null,[Kb.i]),(n()(),e.gb(0,null,null,2,null,yp)),e.qb(130,16384,null,0,Kb.b,[e.K],null,null),e.Ib(2048,[[27,4]],Yb.b,null,[Kb.b]),(n()(),e.gb(0,null,null,2,null,vp)),e.qb(133,540672,null,0,Kb.k,[e.K,e.q],{columns:[0,"columns"]},null),e.Ib(2048,[[4,4]],Yb.l,null,[Kb.k]),(n()(),e.gb(0,null,null,2,null,_p)),e.qb(136,540672,null,0,Kb.m,[e.K,e.q],{columns:[0,"columns"]},null),e.Ib(2048,[[3,4]],Yb.n,null,[Kb.m])],(function(n,l){var t=l.component;n(l,15,0,e.Mb(l,15,0,e.Db(l,16).transform(t.fetcher.isBusy$)));var i=t.disablePaginator,a=null==t.fetcher.currentPage?null:t.fetcher.currentPage.pageIndex,r=t.fetcher.dataLength,u=(null==t.fetcher.currentPage?null:t.fetcher.currentPage.pageSize)||25,o=n(l,19,0,5,10,25,50,100);n(l,18,0,i,a,r,u,o),n(l,22,0),n(l,23,0,t.fetcher.stats$),n(l,30,0,"label"),n(l,43,0,"n"),n(l,56,0,"period"),n(l,69,0,"period.std"),n(l,82,0,"phase"),n(l,95,0,"phase.std"),n(l,108,0,"amplitude"),n(l,121,0,"amplitude.std"),n(l,133,0,t.displayedColumns),n(l,136,0,t.displayedColumns)}),(function(n,l){var t=l.component;n(l,0,0,e.Db(l,1).expanded,"NoopAnimations"===e.Db(l,1)._animationMode,e.Db(l,1)._hasSpacing());var i=e.Db(l,5).panel._headerId,a=e.Db(l,5).disabled?-1:0,r=e.Db(l,5)._getPanelId(),u=e.Db(l,5)._isExpanded(),o=e.Db(l,5).panel.disabled,s=e.Db(l,5)._isExpanded(),c="after"===e.Db(l,5)._getTogglePosition(),d="before"===e.Db(l,5)._getTogglePosition(),h=e.Db(l,5)._animationsDisabled,f=n(l,7,0,e.Db(l,5)._getExpandedState(),n(l,6,0,e.Db(l,5).collapsedHeight,e.Db(l,5).expandedHeight));n(l,4,0,i,a,r,u,o,s,c,d,h,f),n(l,10,0,t.isOn?"green":"red"),n(l,12,0,e.Db(l,13).vertical?"vertical":"horizontal",e.Db(l,13).vertical,!e.Db(l,13).vertical,e.Db(l,13).inset)}))}var wp=t("Mz6y"),Dp=t("QQfA"),Cp=t("hOhj"),kp=t("cUpR");class Mp extends Lb.a{constructor(n,l=!1){super(l),this.ppaService=n,this.results$=this.data$}sameInput(n,l){return x.sameJob(n,l)}assetToData(n){return n.results}fetchAsset(n){return this.ppaService.getPPAJobSimpleResults(n.parentId,n.jobId)}sortingKey(n){switch(n.active){case"id":return n=>n.dataId;case"state":return D.extractState;case"label":return n=>n.label;case"period":return n=>Number.isNaN(Number(n.per))?Number.MAX_VALUE:n.per;default:return console.error("Not implemented sorting for "+n.active),n=>0}}}class Pp{constructor(n,l){this.fetcher=n,this.feedback=l,this.phaseType="ByFit",this.relativeTo="zero",this.phaseUnit="circ",this.isOn=!1,this.disablePaginator=!1,this.displayedColumns=["id","label","state","period","phase","amplitude","gof","err","fit"]}set job(n){this.fetcher.input(n)}set phaseParams(n){n&&(this.phaseType=n.phaseType,this.relativeTo=n.relativeTo,this.phaseUnit=n.phaseUnit)}set on(n){this.isOn=n,this.fetcher.on(n)}reload(){this.fetcher.refresh()}ngOnInit(){this.fetcher.error$.subscribe(n=>this.feedback.error(n));const n=new p.e;n.pageIndex=0,n.pageSize=50,this.fetcher.page(n)}ngOnDestroy(){this.fetcher&&this.fetcher.close()}loadPage(n){this.fetcher.page(n)}sortData(n){this.fetcher.sort(n)}extractPhase(n){return w(C(n,this.relativeTo,this.phaseUnit),this.phaseType)}extractAmp(n){const l=w(n.amp,this.phaseType);return l>1e3||l<.001?l.toExponential(2):l}showFit(n){this.fitDialog&&this.fitDialog.show(this.fetcher.currentInput.parentId,n.jobId,n.dataId,!1)}extractState(n){return D.extractState(n)}}var Sp=e.pb({encapsulation:2,styles:[],data:{}});function Tp(n){return e.Nb(0,[(n()(),e.rb(0,0,null,null,1,"mat-progress-bar",[["aria-valuemax","100"],["aria-valuemin","0"],["class","mat-progress-bar"],["mode","indeterminate"],["role","progressbar"]],[[1,"aria-valuenow",0],[1,"mode",0],[2,"_mat-animation-noopable",null]],null,null,Rn.b,Rn.a)),e.qb(1,4374528,null,0,Ln.b,[e.k,e.x,[2,En.a],[2,Ln.a]],{mode:[0,"mode"]},null)],(function(n,l){n(l,1,0,"indeterminate")}),(function(n,l){n(l,0,0,"indeterminate"===e.Db(l,1).mode||"query"===e.Db(l,1).mode?null:e.Db(l,1).value,e.Db(l,1).mode,e.Db(l,1)._isNoopAnimation)}))}function Ip(n){return e.Nb(0,[(n()(),e.rb(0,0,null,null,3,"th",[["class","mat-header-cell"],["mat-header-cell",""],["mat-sort-header",""],["role","columnheader"]],[[1,"aria-sort",0],[2,"mat-sort-header-disabled",null]],[[null,"click"],[null,"mouseenter"],[null,"longpress"],[null,"mouseleave"]],(function(n,l,t){var i=!0;return"click"===l&&(i=!1!==e.Db(n,1)._handleClick()&&i),"mouseenter"===l&&(i=!1!==e.Db(n,1)._setIndicatorHintVisible(!0)&&i),"longpress"===l&&(i=!1!==e.Db(n,1)._setIndicatorHintVisible(!0)&&i),"mouseleave"===l&&(i=!1!==e.Db(n,1)._setIndicatorHintVisible(!1)&&i),i}),Gb.b,Gb.a)),e.qb(1,245760,null,0,Vb.c,[Vb.d,e.h,[2,Vb.b],[2,"MAT_SORT_HEADER_COLUMN_DEF"]],{id:[0,"id"]},null),e.qb(2,16384,null,0,Kb.h,[Yb.d,e.k],null,null),(n()(),e.Lb(-1,0,["Id"]))],(function(n,l){n(l,1,0,"")}),(function(n,l){n(l,0,0,e.Db(l,1)._getAriaSortAttribute(),e.Db(l,1)._isDisabled())}))}function Ap(n){return e.Nb(0,[(n()(),e.rb(0,0,null,null,2,"td",[["class","mat-cell"],["mat-cell",""],["role","gridcell"]],null,null,null,null,null)),e.qb(1,16384,null,0,Kb.a,[Yb.d,e.k],null,null),(n()(),e.Lb(2,null,["",""]))],null,(function(n,l){n(l,2,0,l.context.$implicit.dataRef)}))}function qp(n){return e.Nb(0,[(n()(),e.rb(0,0,null,null,3,"th",[["class","mat-header-cell"],["mat-header-cell",""],["mat-sort-header",""],["role","columnheader"]],[[1,"aria-sort",0],[2,"mat-sort-header-disabled",null]],[[null,"click"],[null,"mouseenter"],[null,"longpress"],[null,"mouseleave"]],(function(n,l,t){var i=!0;return"click"===l&&(i=!1!==e.Db(n,1)._handleClick()&&i),"mouseenter"===l&&(i=!1!==e.Db(n,1)._setIndicatorHintVisible(!0)&&i),"longpress"===l&&(i=!1!==e.Db(n,1)._setIndicatorHintVisible(!0)&&i),"mouseleave"===l&&(i=!1!==e.Db(n,1)._setIndicatorHintVisible(!1)&&i),i}),Gb.b,Gb.a)),e.qb(1,245760,null,0,Vb.c,[Vb.d,e.h,[2,Vb.b],[2,"MAT_SORT_HEADER_COLUMN_DEF"]],{id:[0,"id"]},null),e.qb(2,16384,null,0,Kb.h,[Yb.d,e.k],null,null),(n()(),e.Lb(-1,0,["Data"]))],(function(n,l){n(l,1,0,"")}),(function(n,l){n(l,0,0,e.Db(l,1)._getAriaSortAttribute(),e.Db(l,1)._isDisabled())}))}function Np(n){return e.Nb(0,[(n()(),e.rb(0,0,null,null,2,"td",[["class","word_wrapping mat-cell"],["mat-cell",""],["role","gridcell"],["style","max-width: 140px"]],null,null,null,null,null)),e.qb(1,16384,null,0,Kb.a,[Yb.d,e.k],null,null),(n()(),e.Lb(2,null,["",""]))],null,(function(n,l){n(l,2,0,l.context.$implicit.label)}))}function Op(n){return e.Nb(0,[(n()(),e.rb(0,0,null,null,3,"th",[["class","mat-header-cell"],["mat-header-cell",""],["mat-sort-header",""],["role","columnheader"]],[[1,"aria-sort",0],[2,"mat-sort-header-disabled",null]],[[null,"click"],[null,"mouseenter"],[null,"longpress"],[null,"mouseleave"]],(function(n,l,t){var i=!0;return"click"===l&&(i=!1!==e.Db(n,1)._handleClick()&&i),"mouseenter"===l&&(i=!1!==e.Db(n,1)._setIndicatorHintVisible(!0)&&i),"longpress"===l&&(i=!1!==e.Db(n,1)._setIndicatorHintVisible(!0)&&i),"mouseleave"===l&&(i=!1!==e.Db(n,1)._setIndicatorHintVisible(!1)&&i),i}),Gb.b,Gb.a)),e.qb(1,245760,null,0,Vb.c,[Vb.d,e.h,[2,Vb.b],[2,"MAT_SORT_HEADER_COLUMN_DEF"]],{id:[0,"id"]},null),e.qb(2,16384,null,0,Kb.h,[Yb.d,e.k],null,null),(n()(),e.Lb(-1,0,["S"]))],(function(n,l){n(l,1,0,"")}),(function(n,l){n(l,0,0,e.Db(l,1)._getAriaSortAttribute(),e.Db(l,1)._isDisabled())}))}function Ep(n){return e.Nb(0,[(n()(),e.rb(0,16777216,null,null,2,"span",[["class","mat-elevation-z4"],["matTooltipClass","tooltip-red"],["style","padding: 0.5em; color: red; font-weight: bold;"]],null,[[null,"longpress"],[null,"keydown"],[null,"touchend"]],(function(n,l,t){var i=!0;return"longpress"===l&&(i=!1!==e.Db(n,1).show()&&i),"keydown"===l&&(i=!1!==e.Db(n,1)._handleKeydown(t)&&i),"touchend"===l&&(i=!1!==e.Db(n,1)._handleTouchend()&&i),i}),null,null)),e.qb(1,212992,null,0,wp.d,[Dp.c,e.k,Cp.a,e.N,e.x,On.a,Jn.c,Jn.e,wp.b,[2,Zb.b],[2,wp.a],[2,kp.f]],{message:[0,"message"],tooltipClass:[1,"tooltipClass"]},null),(n()(),e.Lb(2,null,["",""])),(n()(),e.gb(0,null,null,0))],(function(n,l){n(l,1,0,l.parent.context.$implicit.message,"tooltip-red")}),(function(n,l){n(l,2,0,l.component.extractState(l.parent.context.$implicit))}))}function Rp(n){return e.Nb(0,[(n()(),e.rb(0,0,null,null,1,"span",[],null,null,null,null,null)),(n()(),e.Lb(1,null,["",""]))],null,(function(n,l){n(l,1,0,l.component.extractState(l.parent.context.$implicit))}))}function Lp(n){return e.Nb(0,[(n()(),e.rb(0,0,null,null,5,"td",[["class","mat-cell"],["mat-cell",""],["role","gridcell"]],null,null,null,null,null)),e.qb(1,16384,null,0,Kb.a,[Yb.d,e.k],null,null),(n()(),e.gb(16777216,null,null,1,null,Ep)),e.qb(3,16384,null,0,f.n,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(n()(),e.gb(16777216,null,null,1,null,Rp)),e.qb(5,16384,null,0,f.n,[e.N,e.K],{ngIf:[0,"ngIf"]},null)],(function(n,l){n(l,3,0,l.context.$implicit.failed),n(l,5,0,!l.context.$implicit.failed)}),null)}function Bp(n){return e.Nb(0,[(n()(),e.rb(0,0,null,null,3,"th",[["class","mat-header-cell"],["mat-header-cell",""],["mat-sort-header",""],["role","columnheader"]],[[1,"aria-sort",0],[2,"mat-sort-header-disabled",null]],[[null,"click"],[null,"mouseenter"],[null,"longpress"],[null,"mouseleave"]],(function(n,l,t){var i=!0;return"click"===l&&(i=!1!==e.Db(n,1)._handleClick()&&i),"mouseenter"===l&&(i=!1!==e.Db(n,1)._setIndicatorHintVisible(!0)&&i),"longpress"===l&&(i=!1!==e.Db(n,1)._setIndicatorHintVisible(!0)&&i),"mouseleave"===l&&(i=!1!==e.Db(n,1)._setIndicatorHintVisible(!1)&&i),i}),Gb.b,Gb.a)),e.qb(1,245760,null,0,Vb.c,[Vb.d,e.h,[2,Vb.b],[2,"MAT_SORT_HEADER_COLUMN_DEF"]],{id:[0,"id"]},null),e.qb(2,16384,null,0,Kb.h,[Yb.d,e.k],null,null),(n()(),e.Lb(-1,0,["Period"]))],(function(n,l){n(l,1,0,"")}),(function(n,l){n(l,0,0,e.Db(l,1)._getAriaSortAttribute(),e.Db(l,1)._isDisabled())}))}function Fp(n){return e.Nb(0,[(n()(),e.rb(0,0,null,null,2,"td",[["class","mat-cell"],["mat-cell",""],["role","gridcell"]],null,null,null,null,null)),e.qb(1,16384,null,0,Kb.a,[Yb.d,e.k],null,null),(n()(),e.Lb(2,null,["",""]))],null,(function(n,l){n(l,2,0,l.context.$implicit.per)}))}function Up(n){return e.Nb(0,[(n()(),e.rb(0,0,null,null,2,"th",[["class","mat-header-cell"],["mat-header-cell",""],["role","columnheader"]],null,null,null,null,null)),e.qb(1,16384,null,0,Kb.h,[Yb.d,e.k],null,null),(n()(),e.Lb(-1,null,["Phase"]))],null,null)}function jp(n){return e.Nb(0,[(n()(),e.rb(0,0,null,null,2,"td",[["class","mat-cell"],["mat-cell",""],["role","gridcell"]],null,null,null,null,null)),e.qb(1,16384,null,0,Kb.a,[Yb.d,e.k],null,null),(n()(),e.Lb(2,null,["",""]))],null,(function(n,l){n(l,2,0,l.component.extractPhase(l.context.$implicit))}))}function Jp(n){return e.Nb(0,[(n()(),e.rb(0,0,null,null,2,"th",[["class","mat-header-cell"],["mat-header-cell",""],["role","columnheader"]],null,null,null,null,null)),e.qb(1,16384,null,0,Kb.h,[Yb.d,e.k],null,null),(n()(),e.Lb(-1,null,["Amp."]))],null,null)}function Wp(n){return e.Nb(0,[(n()(),e.rb(0,0,null,null,2,"td",[["class","mat-cell"],["mat-cell",""],["role","gridcell"]],null,null,null,null,null)),e.qb(1,16384,null,0,Kb.a,[Yb.d,e.k],null,null),(n()(),e.Lb(2,null,["",""]))],null,(function(n,l){n(l,2,0,l.component.extractAmp(l.context.$implicit))}))}function Hp(n){return e.Nb(0,[(n()(),e.rb(0,0,null,null,2,"th",[["class","mat-header-cell"],["mat-header-cell",""],["role","columnheader"]],null,null,null,null,null)),e.qb(1,16384,null,0,Kb.h,[Yb.d,e.k],null,null),(n()(),e.Lb(-1,null,["GOF"]))],null,null)}function zp(n){return e.Nb(0,[(n()(),e.rb(0,0,null,null,2,"td",[["class","mat-cell"],["mat-cell",""],["role","gridcell"]],null,null,null,null,null)),e.qb(1,16384,null,0,Kb.a,[Yb.d,e.k],null,null),(n()(),e.Lb(2,null,["",""]))],null,(function(n,l){n(l,2,0,l.context.$implicit.GOF)}))}function $p(n){return e.Nb(0,[(n()(),e.rb(0,0,null,null,2,"th",[["class","mat-header-cell"],["mat-header-cell",""],["role","columnheader"]],null,null,null,null,null)),e.qb(1,16384,null,0,Kb.h,[Yb.d,e.k],null,null),(n()(),e.Lb(-1,null,["ERR"]))],null,null)}function Gp(n){return e.Nb(0,[(n()(),e.rb(0,0,null,null,2,"td",[["class","mat-cell"],["mat-cell",""],["role","gridcell"]],null,null,null,null,null)),e.qb(1,16384,null,0,Kb.a,[Yb.d,e.k],null,null),(n()(),e.Lb(2,null,["",""]))],null,(function(n,l){n(l,2,0,l.context.$implicit.ERR)}))}function Vp(n){return e.Nb(0,[(n()(),e.rb(0,0,null,null,2,"th",[["class","mat-header-cell"],["mat-header-cell",""],["role","columnheader"]],null,null,null,null,null)),e.qb(1,16384,null,0,Kb.h,[Yb.d,e.k],null,null),(n()(),e.Lb(-1,null,["Fit"]))],null,null)}function Kp(n){return e.Nb(0,[(n()(),e.rb(0,0,null,null,3,"td",[["class","mat-cell"],["mat-cell",""],["role","gridcell"]],null,null,null,null,null)),e.qb(1,16384,null,0,Kb.a,[Yb.d,e.k],null,null),(n()(),e.rb(2,0,null,null,1,"a",[["role","button"]],null,[[null,"click"]],(function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.showFit(n.context.$implicit)&&e),e}),null,null)),(n()(),e.Lb(-1,null,["fit"]))],null,null)}function Yp(n){return e.Nb(0,[(n()(),e.rb(0,0,null,null,2,"tr",[["class","mat-header-row"],["mat-header-row",""],["role","row"]],null,null,null,Xb.f,Xb.b)),e.Ib(6144,null,Yb.k,null,[Kb.j]),e.qb(2,49152,null,0,Kb.j,[],null,null)],null,null)}function Xp(n){return e.Nb(0,[(n()(),e.rb(0,0,null,null,5,"tr",[["class","mat-row"],["mat-row",""],["role","row"]],null,null,null,Xb.g,Xb.c)),e.Ib(6144,null,Yb.m,null,[Kb.l]),e.Ib(512,null,f.A,f.B,[e.q,e.r,e.k,e.C]),e.qb(3,278528,null,0,f.l,[f.A],{ngClass:[0,"ngClass"]},null),e.Gb(4,{ppa_ignored:0,ppa_attention:1}),e.qb(5,49152,null,0,Kb.l,[],null,null)],(function(n,l){var t=n(l,4,0,l.context.$implicit.ignored,l.context.$implicit.attention&&!l.context.$implicit.ignored);n(l,3,0,t)}),null)}function Zp(n){return e.Nb(0,[(n()(),e.rb(0,16777216,null,null,150,"mat-expansion-panel",[["class","mat-elevation-z2 mat-expansion-panel"]],[[2,"mat-expanded",null],[2,"_mat-animation-noopable",null],[2,"mat-expansion-panel-spacing",null]],[[null,"opened"],[null,"closed"]],(function(n,l,t){var e=!0,i=n.component;return"opened"===l&&(e=0!=(i.on=!0)&&e),"closed"===l&&(e=0!=(i.on=!1)&&e),e}),zn,Wn)),e.qb(1,1753088,null,1,Bn.d,[[3,Bn.a],e.h,jn.d,e.N,f.d,[2,En.a],[2,Bn.b]],null,{closed:"closed",opened:"opened"}),e.Jb(603979776,1,{_lazyContent:0}),e.Ib(256,null,Bn.a,void 0,[]),(n()(),e.rb(4,0,null,0,7,"mat-expansion-panel-header",[["class","mat-expansion-panel-header"],["role","button"]],[[1,"id",0],[1,"tabindex",0],[1,"aria-controls",0],[1,"aria-expanded",0],[1,"aria-disabled",0],[2,"mat-expanded",null],[2,"mat-expansion-toggle-indicator-after",null],[2,"mat-expansion-toggle-indicator-before",null],[40,"@.disabled",0],[40,"@expansionHeight",0]],[[null,"click"],[null,"keydown"],["component","@expansionHeight.start"]],(function(n,l,t){var i=!0;return"click"===l&&(i=!1!==e.Db(n,5)._toggle()&&i),"keydown"===l&&(i=!1!==e.Db(n,5)._keydown(t)&&i),"component:@expansionHeight.start"===l&&(i=!1!==e.Db(n,5)._animationStarted()&&i),i}),Vn,$n)),e.qb(5,180224,null,0,Bn.e,[Bn.d,e.k,Jn.e,e.h,[2,Bn.b]],null,null),e.Gb(6,{collapsedHeight:0,expandedHeight:1}),e.Gb(7,{value:0,params:1}),(n()(),e.rb(8,0,null,0,3,"mat-panel-title",[["class","mat-expansion-panel-header-title"]],null,null,null,null,null)),e.qb(9,16384,null,0,Bn.f,[],null,null),(n()(),e.rb(10,0,null,null,0,"span",[["aria-hidden","true"],["class","glyphicon glyphicon-list-alt"]],[[4,"color",null]],null,null,null,null)),(n()(),e.Lb(-1,null,["\xa0 Individual results "])),(n()(),e.rb(12,0,null,1,1,"mat-divider",[["class","mat-divider"],["role","separator"]],[[1,"aria-orientation",0],[2,"mat-divider-vertical",null],[2,"mat-divider-horizontal",null],[2,"mat-divider-inset",null]],null,null,Kn.b,Kn.a)),e.qb(13,49152,null,0,Yn.a,[],null,null),(n()(),e.gb(16777216,null,1,2,null,Tp)),e.qb(15,16384,null,0,f.n,[e.N,e.K],{ngIf:[0,"ngIf"]},null),e.Fb(131072,f.b,[e.h]),(n()(),e.rb(17,0,null,1,2,"mat-paginator",[["class","mat-paginator"]],null,[[null,"page"]],(function(n,l,t){var e=!0;return"page"===l&&(e=!1!==n.component.loadPage(t)&&e),e}),b.b,b.a)),e.qb(18,245760,[["paginator",4]],0,p.b,[p.c,e.h],{disabled:[0,"disabled"],pageIndex:[1,"pageIndex"],length:[2,"length"],pageSize:[3,"pageSize"],pageSizeOptions:[4,"pageSizeOptions"]},{page:"page"}),e.Eb(19,5),(n()(),e.rb(20,0,null,1,130,"table",[["aria-label","Summary statistics"],["class","full-width-table mat-table"],["mat-table",""],["matSort",""],["matSortActive","id"],["matSortDirection","asc"],["width","100%"]],null,[[null,"matSortChange"]],(function(n,l,t){var e=!0;return"matSortChange"===l&&(e=!1!==n.component.sortData(t)&&e),e}),Xb.h,Xb.d)),e.Ib(6144,null,Yb.o,null,[Kb.n]),e.qb(22,737280,null,0,Vb.b,[],{active:[0,"active"],direction:[1,"direction"]},{sortChange:"matSortChange"}),e.qb(23,2342912,null,4,Kb.n,[e.q,e.h,e.k,[8,null],[2,Zb.b],f.d,On.a],{dataSource:[0,"dataSource"]},null),e.Jb(603979776,2,{_contentColumnDefs:1}),e.Jb(603979776,3,{_contentRowDefs:1}),e.Jb(603979776,4,{_contentHeaderRowDefs:1}),e.Jb(603979776,5,{_contentFooterRowDefs:1}),(n()(),e.rb(28,0,null,null,12,null,null,null,null,null,null,null)),e.Ib(6144,null,"MAT_SORT_HEADER_COLUMN_DEF",null,[Kb.c]),e.qb(30,16384,null,3,Kb.c,[],{name:[0,"name"]},null),e.Jb(603979776,6,{cell:0}),e.Jb(603979776,7,{headerCell:0}),e.Jb(603979776,8,{footerCell:0}),e.Ib(2048,[[2,4]],Yb.d,null,[Kb.c]),(n()(),e.gb(0,null,null,2,null,Ip)),e.qb(36,16384,null,0,Kb.i,[e.K],null,null),e.Ib(2048,[[7,4]],Yb.j,null,[Kb.i]),(n()(),e.gb(0,null,null,2,null,Ap)),e.qb(39,16384,null,0,Kb.b,[e.K],null,null),e.Ib(2048,[[6,4]],Yb.b,null,[Kb.b]),(n()(),e.rb(41,0,null,null,12,null,null,null,null,null,null,null)),e.Ib(6144,null,"MAT_SORT_HEADER_COLUMN_DEF",null,[Kb.c]),e.qb(43,16384,null,3,Kb.c,[],{name:[0,"name"]},null),e.Jb(603979776,9,{cell:0}),e.Jb(603979776,10,{headerCell:0}),e.Jb(603979776,11,{footerCell:0}),e.Ib(2048,[[2,4]],Yb.d,null,[Kb.c]),(n()(),e.gb(0,null,null,2,null,qp)),e.qb(49,16384,null,0,Kb.i,[e.K],null,null),e.Ib(2048,[[10,4]],Yb.j,null,[Kb.i]),(n()(),e.gb(0,null,null,2,null,Np)),e.qb(52,16384,null,0,Kb.b,[e.K],null,null),e.Ib(2048,[[9,4]],Yb.b,null,[Kb.b]),(n()(),e.rb(54,0,null,null,12,null,null,null,null,null,null,null)),e.Ib(6144,null,"MAT_SORT_HEADER_COLUMN_DEF",null,[Kb.c]),e.qb(56,16384,null,3,Kb.c,[],{name:[0,"name"]},null),e.Jb(603979776,12,{cell:0}),e.Jb(603979776,13,{headerCell:0}),e.Jb(603979776,14,{footerCell:0}),e.Ib(2048,[[2,4]],Yb.d,null,[Kb.c]),(n()(),e.gb(0,null,null,2,null,Op)),e.qb(62,16384,null,0,Kb.i,[e.K],null,null),e.Ib(2048,[[13,4]],Yb.j,null,[Kb.i]),(n()(),e.gb(0,null,null,2,null,Lp)),e.qb(65,16384,null,0,Kb.b,[e.K],null,null),e.Ib(2048,[[12,4]],Yb.b,null,[Kb.b]),(n()(),e.rb(67,0,null,null,12,null,null,null,null,null,null,null)),e.Ib(6144,null,"MAT_SORT_HEADER_COLUMN_DEF",null,[Kb.c]),e.qb(69,16384,null,3,Kb.c,[],{name:[0,"name"]},null),e.Jb(603979776,15,{cell:0}),e.Jb(603979776,16,{headerCell:0}),e.Jb(603979776,17,{footerCell:0}),e.Ib(2048,[[2,4]],Yb.d,null,[Kb.c]),(n()(),e.gb(0,null,null,2,null,Bp)),e.qb(75,16384,null,0,Kb.i,[e.K],null,null),e.Ib(2048,[[16,4]],Yb.j,null,[Kb.i]),(n()(),e.gb(0,null,null,2,null,Fp)),e.qb(78,16384,null,0,Kb.b,[e.K],null,null),e.Ib(2048,[[15,4]],Yb.b,null,[Kb.b]),(n()(),e.rb(80,0,null,null,12,null,null,null,null,null,null,null)),e.Ib(6144,null,"MAT_SORT_HEADER_COLUMN_DEF",null,[Kb.c]),e.qb(82,16384,null,3,Kb.c,[],{name:[0,"name"]},null),e.Jb(603979776,18,{cell:0}),e.Jb(603979776,19,{headerCell:0}),e.Jb(603979776,20,{footerCell:0}),e.Ib(2048,[[2,4]],Yb.d,null,[Kb.c]),(n()(),e.gb(0,null,null,2,null,Up)),e.qb(88,16384,null,0,Kb.i,[e.K],null,null),e.Ib(2048,[[19,4]],Yb.j,null,[Kb.i]),(n()(),e.gb(0,null,null,2,null,jp)),e.qb(91,16384,null,0,Kb.b,[e.K],null,null),e.Ib(2048,[[18,4]],Yb.b,null,[Kb.b]),(n()(),e.rb(93,0,null,null,12,null,null,null,null,null,null,null)),e.Ib(6144,null,"MAT_SORT_HEADER_COLUMN_DEF",null,[Kb.c]),e.qb(95,16384,null,3,Kb.c,[],{name:[0,"name"]},null),e.Jb(603979776,21,{cell:0}),e.Jb(603979776,22,{headerCell:0}),e.Jb(603979776,23,{footerCell:0}),e.Ib(2048,[[2,4]],Yb.d,null,[Kb.c]),(n()(),e.gb(0,null,null,2,null,Jp)),e.qb(101,16384,null,0,Kb.i,[e.K],null,null),e.Ib(2048,[[22,4]],Yb.j,null,[Kb.i]),(n()(),e.gb(0,null,null,2,null,Wp)),e.qb(104,16384,null,0,Kb.b,[e.K],null,null),e.Ib(2048,[[21,4]],Yb.b,null,[Kb.b]),(n()(),e.rb(106,0,null,null,12,null,null,null,null,null,null,null)),e.Ib(6144,null,"MAT_SORT_HEADER_COLUMN_DEF",null,[Kb.c]),e.qb(108,16384,null,3,Kb.c,[],{name:[0,"name"]},null),e.Jb(603979776,24,{cell:0}),e.Jb(603979776,25,{headerCell:0}),e.Jb(603979776,26,{footerCell:0}),e.Ib(2048,[[2,4]],Yb.d,null,[Kb.c]),(n()(),e.gb(0,null,null,2,null,Hp)),e.qb(114,16384,null,0,Kb.i,[e.K],null,null),e.Ib(2048,[[25,4]],Yb.j,null,[Kb.i]),(n()(),e.gb(0,null,null,2,null,zp)),e.qb(117,16384,null,0,Kb.b,[e.K],null,null),e.Ib(2048,[[24,4]],Yb.b,null,[Kb.b]),(n()(),e.rb(119,0,null,null,12,null,null,null,null,null,null,null)),e.Ib(6144,null,"MAT_SORT_HEADER_COLUMN_DEF",null,[Kb.c]),e.qb(121,16384,null,3,Kb.c,[],{name:[0,"name"]},null),e.Jb(603979776,27,{cell:0}),e.Jb(603979776,28,{headerCell:0}),e.Jb(603979776,29,{footerCell:0}),e.Ib(2048,[[2,4]],Yb.d,null,[Kb.c]),(n()(),e.gb(0,null,null,2,null,$p)),e.qb(127,16384,null,0,Kb.i,[e.K],null,null),e.Ib(2048,[[28,4]],Yb.j,null,[Kb.i]),(n()(),e.gb(0,null,null,2,null,Gp)),e.qb(130,16384,null,0,Kb.b,[e.K],null,null),e.Ib(2048,[[27,4]],Yb.b,null,[Kb.b]),(n()(),e.rb(132,0,null,null,12,null,null,null,null,null,null,null)),e.Ib(6144,null,"MAT_SORT_HEADER_COLUMN_DEF",null,[Kb.c]),e.qb(134,16384,null,3,Kb.c,[],{name:[0,"name"]},null),e.Jb(603979776,30,{cell:0}),e.Jb(603979776,31,{headerCell:0}),e.Jb(603979776,32,{footerCell:0}),e.Ib(2048,[[2,4]],Yb.d,null,[Kb.c]),(n()(),e.gb(0,null,null,2,null,Vp)),e.qb(140,16384,null,0,Kb.i,[e.K],null,null),e.Ib(2048,[[31,4]],Yb.j,null,[Kb.i]),(n()(),e.gb(0,null,null,2,null,Kp)),e.qb(143,16384,null,0,Kb.b,[e.K],null,null),e.Ib(2048,[[30,4]],Yb.b,null,[Kb.b]),(n()(),e.gb(0,null,null,2,null,Yp)),e.qb(146,540672,null,0,Kb.k,[e.K,e.q],{columns:[0,"columns"]},null),e.Ib(2048,[[4,4]],Yb.l,null,[Kb.k]),(n()(),e.gb(0,null,null,2,null,Xp)),e.qb(149,540672,null,0,Kb.m,[e.K,e.q],{columns:[0,"columns"]},null),e.Ib(2048,[[3,4]],Yb.n,null,[Kb.m])],(function(n,l){var t=l.component;n(l,15,0,e.Mb(l,15,0,e.Db(l,16).transform(t.fetcher.isBusy$)));var i=t.disablePaginator,a=null==t.fetcher.currentPage?null:t.fetcher.currentPage.pageIndex,r=t.fetcher.dataLength,u=(null==t.fetcher.currentPage?null:t.fetcher.currentPage.pageSize)||50,o=n(l,19,0,5,10,25,50,100);n(l,18,0,i,a,r,u,o),n(l,22,0,"id","asc"),n(l,23,0,t.fetcher.results$),n(l,30,0,"id"),n(l,43,0,"label"),n(l,56,0,"state"),n(l,69,0,"period"),n(l,82,0,"phase"),n(l,95,0,"amplitude"),n(l,108,0,"gof"),n(l,121,0,"err"),n(l,134,0,"fit"),n(l,146,0,t.displayedColumns),n(l,149,0,t.displayedColumns)}),(function(n,l){var t=l.component;n(l,0,0,e.Db(l,1).expanded,"NoopAnimations"===e.Db(l,1)._animationMode,e.Db(l,1)._hasSpacing());var i=e.Db(l,5).panel._headerId,a=e.Db(l,5).disabled?-1:0,r=e.Db(l,5)._getPanelId(),u=e.Db(l,5)._isExpanded(),o=e.Db(l,5).panel.disabled,s=e.Db(l,5)._isExpanded(),c="after"===e.Db(l,5)._getTogglePosition(),d="before"===e.Db(l,5)._getTogglePosition(),h=e.Db(l,5)._animationsDisabled,f=n(l,7,0,e.Db(l,5)._getExpandedState(),n(l,6,0,e.Db(l,5).collapsedHeight,e.Db(l,5).expandedHeight));n(l,4,0,i,a,r,u,o,s,c,d,h,f),n(l,10,0,t.isOn?"green":"red"),n(l,12,0,e.Db(l,13).vertical?"vertical":"horizontal",e.Db(l,13).vertical,!e.Db(l,13).vertical,e.Db(l,13).inset)}))}var Qp=t("tu3j"),ng=t("zQ7r");class lg extends ng.a{constructor(n,l=!1){super(l),this.ppaService=n,this.finishedJob$=this.finished$,this.runningJob$=this.running$,this.failedJob$=this.failed$,this.allJob$=this.all$}get currentAssayJobId(){return this.currentInput}get currentJob(){return this.currentAsset}initIntervalsKeeper(){return new Qp.a(500,2e4,3e5,1.4)}assayJobId(n){this.input(n)}hasFailed(n){return!!n&&!this.isFinished(n)&&!this.isRunning(n)}isFinished(n){return!(!n||!n.state||"FINISHED"!==n.state&&"SUCCESS"!==n.state)}isRunning(n){return!(!n||!n.state||"SUBMITTED"!==n.state&&"PROCESSING"!==n.state)}fetchAsset([n,l]){return this.ppaService.getPPAJob(n,l).pipe(Object(Bb.a)(t=>{t?t.parentId=t.parentId||n:console.warn("Loaded null job ",[n,l])}))}assetToId(n){return n.jobId}assetToInput(n){return[n.parentId,n.jobId]}sameInput(n,l){return!(!n||!l)&&n[0]===l[0]&&n[1]===l[1]}}t("BDlQ");var tg=t("Kctx"),eg=t("SxV6");class ig{constructor(){this.selected=new Tb.a,this.modalOptions={},this.phaseType="ByFit"}ngOnInit(){}hidden(){console.log("Export dialog Hidden"),this.selected.next(null)}cancel(){this.myModal&&this.myModal.hide()}accepted(){this.selected.next(this.phaseType),this.myModal&&this.myModal.hide()}show(n){return this.myModal?(n&&(this.phaseType=n),this.myModal.show(),this.selected.pipe(Object(eg.a)()).toPromise()):Promise.resolve(null)}}class ag{constructor(n,l,t){this.ppaService=n,this.ppaJobFetcher=l,this.feedback=t,this.deleted=new e.m,this.finished=this.ppaJobFetcher.finishedJob$,this.phaseParams=new qb("ByFit","zero","circ"),this._periodsOn=!1,this._phasesOn=!1,this._expanded=!1,this._statsOn=!1,this.ppaJobFetcher.on(!0)}get periodsOn(){return this._periodsOn}set periodsOn(n){this._periodsOn=n}get phasesOn(){return this._phasesOn}set phasesOn(n){this._phasesOn=n}get expanded(){return this._expanded}set expanded(n){this._expanded=n}get statsOn(){return this._statsOn}set statsOn(n){this._statsOn=n}ngOnInit(){this.initSubscriptions()}ngOnDestroy(){this.ppaJobFetcher.close()}ngOnChanges(n){(n.jobId||n.assay)&&this.jobId&&this.assay&&this.ppaJobFetcher.assayJobId([this.assay.id,this.jobId])}phaseOptions(n){this.phaseParams=n}export(){this.exportDialog?this.exportDialog.show(this.phaseParams.phaseType).then(n=>{n&&this.ppaService.downloadPPAJob(this.assay.id,this.jobId,n).then(n=>{this.saveJobBlob(n,this.assay.id,this.jobId)})}):console.log("Missing export dialog")}saveJobBlob(n,l,t){Xf.saveAs(n,l+"_job"+t+".ppa.csv")}delete(){const n=this.assay,l=this.job;this.confirmDialog?this.confirmDialog.ask("Do you want to delete analysis: "+l.jobId,l.summary).then(t=>{t&&this.doDelete(n,l.jobId)}):(console.log("Confirmation dialog missing on job pane"),this.doDelete(n,l.jobId))}doDelete(n,l){this.ppaService.deletePPAJob(n,l).then(n=>{this.deleted.next(n),this.feedback.success("Job: "+n.jobId+" deleted")}).catch(n=>{this.feedback.error(n)})}refresh(){this.ppaJobFetcher.refresh()}reload(){this.expanded=!0,this.refresh(),this.ppaPlotsComponent&&this.ppaPlotsComponent.reload(),this.ppaStatsComponent&&this.ppaStatsComponent.reload(),this.ppaResultsComponent&&this.ppaResultsComponent.reload()}toggleExpanded(){this.expanded=!this.expanded}toggleStats(){this.statsOn=!this.statsOn}togglePeriods(){this.periodsOn=!this.periodsOn}togglePhases(){this.phasesOn=!this.phasesOn}initSubscriptions(){this.ppaJobFetcher.error$.subscribe(n=>this.feedback.error(n)),this.ppaJobFetcher.allJob$.subscribe(n=>this.job=n)}simplifyJobState(n){return n.state}isFinished(n){return this.ppaJobFetcher.isFinished(n)}}var rg=e.pb({encapsulation:0,styles:["div[_ngcontent-%COMP%]   label[_ngcontent-%COMP%] {\n      margin-bottom: 1em;\n    }\n\n    div.btn-wrap[_ngcontent-%COMP%] {\n      display: inline-block;\n      margin-bottom: 1em;\n    }\n\n    div.btn-wrap[_ngcontent-%COMP%]   label[_ngcontent-%COMP%] {\n      margin-bottom: 4px;\n    }\n\n    label.wide[_ngcontent-%COMP%] {\n      min-width: 52px;\n    }"],data:{}});function ug(n){return e.Nb(0,[(n()(),e.rb(0,0,null,null,3,"a",[["class","btn btn-primary btn-sm"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(n,l,t){var i=!0;return"click"===l&&(i=!1!==e.Db(n,1).onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)&&i),i}),null,null)),e.qb(1,671744,null,0,wn.o,[wn.l,wn.a,f.k],{routerLink:[0,"routerLink"]},null),e.Eb(2,3),(n()(),e.Lb(-1,null,[" Select periods"]))],(function(n,l){var t=n(l,2,0,".",l.component.job.jobId,"edit");n(l,1,0,t)}),(function(n,l){n(l,0,0,e.Db(l,1).target,e.Db(l,1).href)}))}function og(n){return e.Nb(0,[(n()(),e.rb(0,0,null,null,6,"div",[["class","pull-right"]],null,null,null,null,null)),(n()(),e.rb(1,0,null,null,1,"button",[["class","btn btn-danger btn-sm"],["type","button"]],null,[[null,"click"]],(function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.delete()&&e),e}),null,null)),(n()(),e.rb(2,0,null,null,0,"span",[["aria-hidden","true"],["class","glyphicon glyphicon-trash"]],null,null,null,null,null)),(n()(),e.gb(16777216,null,null,1,null,ug)),e.qb(4,16384,null,0,f.n,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(n()(),e.rb(5,0,null,null,1,"button",[["class","btn btn-primary btn-sm"],["type","button"]],null,[[null,"click"]],(function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.export()&&e),e}),null,null)),(n()(),e.rb(6,0,null,null,0,"span",[["aria-hidden","true"],["class","glyphicon glyphicon-download-alt"]],null,null,null,null,null))],(function(n,l){var t=l.component;n(l,4,0,t.isFinished(t.job))}),null)}function sg(n){return e.Nb(0,[(n()(),e.rb(0,0,null,null,2,"span",[["class","text-danger"]],null,null,null,null,null)),(n()(),e.rb(1,0,null,null,0,"br",[],null,null,null,null,null)),(n()(),e.Lb(2,null,[""," results needs attention"]))],null,(function(n,l){n(l,2,0,l.component.job.attentionCount)}))}function cg(n){return e.Nb(0,[(n()(),e.rb(0,0,null,null,2,"div",[["class","text-danger"],["style","word-wrap: break-word;"]],null,null,null,null,null)),(n()(),e.rb(1,0,null,null,0,"br",[],null,null,null,null,null)),(n()(),e.Lb(2,null,["ERROR: "," "]))],null,(function(n,l){n(l,2,0,l.component.job.lastError)}))}function dg(n){return e.Nb(0,[(n()(),e.rb(0,0,null,null,2,"div",[],null,null,null,null,null)),(n()(),e.rb(1,0,null,null,1,"mat-spinner",[["class","center-block mat-spinner mat-progress-spinner"],["mode","indeterminate"],["role","progressbar"]],[[2,"_mat-animation-noopable",null],[4,"width","px"],[4,"height","px"]],null,null,qn.b,qn.a)),e.qb(2,49152,null,0,Nn.d,[e.k,On.a,[2,f.d],[2,En.a],Nn.a],null,null)],null,(function(n,l){n(l,1,0,e.Db(l,2)._noopAnimations,e.Db(l,2).diameter,e.Db(l,2).diameter)}))}function hg(n){return e.Nb(0,[(n()(),e.rb(0,0,null,null,11,null,null,null,null,null,null,null)),(n()(),e.rb(1,0,null,null,2,"bd2-ppaplots",[],null,null,null,Hb,Jb)),e.Ib(512,null,Ub,Ub,[W,[2,R.a]]),e.qb(3,245760,[[3,4],["ppaPlots",4]],0,jb,[Ub,cn.a],{job:[0,"job"],phaseParams:[1,"phaseParams"]},null),(n()(),e.rb(4,0,null,null,1,"bd2-phases-options",[["phaseType","ByFit"],["phaseUnit","circ"],["relativeTo","zero"]],null,[[null,"options"]],(function(n,l,t){var e=!0;return"options"===l&&(e=!1!==n.component.phaseOptions(t)&&e),e}),$b,zb)),e.qb(5,245760,null,0,Nb,[],{phaseType:[0,"phaseType"],relativeTo:[1,"relativeTo"],phaseUnit:[2,"phaseUnit"]},{options:"options"}),(n()(),e.rb(6,0,null,null,2,"bd2-ppastats-table2",[],null,null,null,xp,lp)),e.Ib(512,null,Qb,Qb,[W,[2,R.a]]),e.qb(8,245760,[[1,4],["ppaStats",4]],0,np,[Qb,cn.a],{job:[0,"job"],phaseParams:[1,"phaseParams"]},null),(n()(),e.rb(9,0,null,null,2,"bd2-pparesults-table2",[],null,null,null,Zp,Sp)),e.Ib(512,null,Mp,Mp,[W,[2,R.a]]),e.qb(11,245760,[[2,4],["ppaResults",4]],0,Pp,[Mp,cn.a],{job:[0,"job"],phaseParams:[1,"phaseParams"],fitDialog:[2,"fitDialog"]},null)],(function(n,l){var t=l.component;n(l,3,0,l.context.ngIf,t.phaseParams),n(l,5,0,"ByFit","zero","circ"),n(l,8,0,l.context.ngIf,t.phaseParams),n(l,11,0,l.context.ngIf,t.phaseParams,t.fitDialog)}),null)}function fg(n){return e.Nb(0,[(n()(),e.rb(0,0,null,null,6,"div",[],null,null,null,null,null)),(n()(),e.gb(16777216,null,null,2,null,dg)),e.qb(2,16384,null,0,f.n,[e.N,e.K],{ngIf:[0,"ngIf"]},null),e.Fb(131072,f.b,[e.h]),(n()(),e.gb(16777216,null,null,2,null,hg)),e.qb(5,16384,null,0,f.n,[e.N,e.K],{ngIf:[0,"ngIf"]},null),e.Fb(131072,f.b,[e.h])],(function(n,l){var t=l.component;n(l,2,0,e.Mb(l,2,0,e.Db(l,3).transform(t.ppaJobFetcher.isReloading$))),n(l,5,0,e.Mb(l,5,0,e.Db(l,6).transform(t.ppaJobFetcher.finishedJob$)))}),null)}function bg(n){return e.Nb(0,[(n()(),e.rb(0,0,null,null,20,"div",[["class","panel panel-default"]],null,null,null,null,null)),(n()(),e.rb(1,0,null,null,8,"div",[["class","panel-heading clearfix"]],null,null,null,null,null)),(n()(),e.rb(2,0,null,null,3,"div",[["class","pull-left"],["role","button"]],null,[[null,"click"]],(function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.toggleExpanded()&&e),e}),null,null)),(n()(),e.rb(3,0,null,null,0,"span",[["aria-hidden","true"],["class","glyphicon glyphicon-sort-by-attributes"]],[[4,"color",null],[4,"font-size","%"]],null,null,null,null)),(n()(),e.Lb(4,null,[" \xa0",". "," (",") "])),e.Hb(5,1),(n()(),e.rb(6,0,null,null,3,"div",[["class","pull-right"]],null,null,null,null,null)),(n()(),e.Lb(7,null,[" "," "])),(n()(),e.rb(8,0,null,null,1,"a",[["role","button"]],null,[[null,"click"]],(function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.reload()&&e),e}),null,null)),(n()(),e.rb(9,0,null,null,0,"span",[["aria-hidden","true"],["class","glyphicon glyphicon-refresh"]],null,null,null,null,null)),(n()(),e.rb(10,0,null,null,10,"div",[["class","panel-body"]],null,null,null,null,null)),(n()(),e.rb(11,0,null,null,7,"div",[["class","clearfix"]],null,null,null,null,null)),(n()(),e.gb(16777216,null,null,1,null,og)),e.qb(13,16384,null,0,f.n,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(n()(),e.Lb(14,null,[" "," "])),(n()(),e.gb(16777216,null,null,1,null,sg)),e.qb(16,16384,null,0,f.n,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(n()(),e.gb(16777216,null,null,1,null,cg)),e.qb(18,16384,null,0,f.n,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(n()(),e.gb(16777216,null,null,1,null,fg)),e.qb(20,16384,null,0,f.n,[e.N,e.K],{ngIf:[0,"ngIf"]},null)],(function(n,l){var t=l.component;n(l,13,0,t.assay.security.canWrite),n(l,16,0,t.job.attentionCount),n(l,18,0,t.job.lastError),n(l,20,0,t.expanded)}),(function(n,l){var t=l.component;n(l,3,0,t.expanded?"green":"red",120);var i=t.job.jobId,a=t.job.method,r=e.Mb(l,4,2,n(l,5,0,e.Db(l.parent,0),t.job.submitted));n(l,4,0,i,a,r),n(l,7,0,t.simplifyJobState(t.job)),n(l,14,0,t.job.summary)}))}function pg(n){return e.Nb(0,[e.Fb(0,f.e,[e.s]),e.Jb(671088640,1,{ppaStatsComponent:0}),e.Jb(671088640,2,{ppaResultsComponent:0}),e.Jb(671088640,3,{ppaPlotsComponent:0}),(n()(),e.gb(16777216,null,null,1,null,bg)),e.qb(5,16384,null,0,f.n,[e.N,e.K],{ngIf:[0,"ngIf"]},null)],(function(n,l){n(l,5,0,l.component.job)}),null)}var gg=t("YwHJ"),mg=e.pb({encapsulation:2,styles:[],data:{}});function yg(n){return e.Nb(0,[e.Jb(402653184,1,{myModal:0}),(n()(),e.rb(1,16777216,null,null,42,"div",[["aria-hidden","true"],["aria-labelledby","exportDialog"],["bsModal",""],["class","modal fade"],["role","dialog"],["tabindex","-1"]],null,[[null,"onHide"],[null,"click"],[null,"keydown.esc"]],(function(n,l,t){var i=!0,a=n.component;return"click"===l&&(i=!1!==e.Db(n,2).onClick(t)&&i),"keydown.esc"===l&&(i=!1!==e.Db(n,2).onEsc(t)&&i),"onHide"===l&&(i=!1!==a.hidden()&&i),i}),null,null)),e.qb(2,212992,[[1,4],["exportDialog",4]],0,an.d,[e.k,e.N,e.C,rn.a],{config:[0,"config"]},{onHide:"onHide"}),(n()(),e.rb(3,0,null,null,40,"div",[["class","modal-dialog modal-sm"]],null,null,null,null,null)),(n()(),e.rb(4,0,null,null,39,"div",[["class","modal-content"]],null,null,null,null,null)),(n()(),e.rb(5,0,null,null,5,"div",[["class","modal-header"]],null,null,null,null,null)),(n()(),e.rb(6,0,null,null,2,"button",[["aria-label","Close"],["class","close"],["type","button"]],null,[[null,"click"]],(function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.cancel()&&e),e}),null,null)),(n()(),e.rb(7,0,null,null,1,"span",[["aria-hidden","true"]],null,null,null,null,null)),(n()(),e.Lb(-1,null,["\xd7"])),(n()(),e.rb(9,0,null,null,1,"h4",[["class","modal-title"]],null,null,null,null,null)),(n()(),e.Lb(-1,null,["Export job results"])),(n()(),e.rb(11,0,null,null,32,"div",[["class","modal-body"]],null,null,null,null,null)),(n()(),e.rb(12,0,null,null,1,"label",[["class",""],["for","phaseType"]],null,null,null,null,null)),(n()(),e.Lb(-1,null,["Phase type"])),(n()(),e.rb(14,0,null,null,23,"select",[["class","form-control"],["id","phaseType"],["name","phaseType"],["required",""]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],(function(n,l,t){var i=!0,a=n.component;return"change"===l&&(i=!1!==e.Db(n,15).onChange(t.target.value)&&i),"blur"===l&&(i=!1!==e.Db(n,15).onTouched()&&i),"ngModelChange"===l&&(i=!1!==(a.phaseType=t)&&i),i}),null,null)),e.qb(15,16384,null,0,h.B,[e.C,e.k],null,null),e.qb(16,16384,null,0,h.A,[],{required:[0,"required"]},null),e.Ib(1024,null,h.o,(function(n){return[n]}),[h.A]),e.Ib(1024,null,h.p,(function(n){return[n]}),[h.B]),e.qb(19,671744,null,0,h.u,[[8,null],[6,h.o],[8,null],[6,h.p]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),e.Ib(2048,null,h.q,null,[h.u]),e.qb(21,16384,null,0,h.r,[[4,h.q]],null,null),(n()(),e.rb(22,0,null,null,3,"option",[["value","ByMethod"]],null,null,null,null,null)),e.qb(23,147456,null,0,h.v,[e.k,e.C,[2,h.B]],{value:[0,"value"]},null),e.qb(24,147456,null,0,h.G,[e.k,e.C,[8,null]],{value:[0,"value"]},null),(n()(),e.Lb(-1,null,["method specific"])),(n()(),e.rb(26,0,null,null,3,"option",[["value","ByFit"]],null,null,null,null,null)),e.qb(27,147456,null,0,h.v,[e.k,e.C,[2,h.B]],{value:[0,"value"]},null),e.qb(28,147456,null,0,h.G,[e.k,e.C,[8,null]],{value:[0,"value"]},null),(n()(),e.Lb(-1,null,["by fit"])),(n()(),e.rb(30,0,null,null,3,"option",[["value","ByFirstPeak"]],null,null,null,null,null)),e.qb(31,147456,null,0,h.v,[e.k,e.C,[2,h.B]],{value:[0,"value"]},null),e.qb(32,147456,null,0,h.G,[e.k,e.C,[8,null]],{value:[0,"value"]},null),(n()(),e.Lb(-1,null,["by first peak"])),(n()(),e.rb(34,0,null,null,3,"option",[["value","ByAvgMax"]],null,null,null,null,null)),e.qb(35,147456,null,0,h.v,[e.k,e.C,[2,h.B]],{value:[0,"value"]},null),e.qb(36,147456,null,0,h.G,[e.k,e.C,[8,null]],{value:[0,"value"]},null),(n()(),e.Lb(-1,null,["by averaged peaks"])),(n()(),e.rb(38,0,null,null,0,"hr",[],null,null,null,null,null)),(n()(),e.rb(39,0,null,null,4,"div",[],null,null,null,null,null)),(n()(),e.rb(40,0,null,null,1,"button",[["class","btn btn-primary btn-sm"]],null,[[null,"click"]],(function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.cancel()&&e),e}),null,null)),(n()(),e.Lb(-1,null,["Cancel"])),(n()(),e.rb(42,0,null,null,1,"button",[["class","btn btn-primary btn-sm"]],null,[[null,"click"]],(function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.accepted()&&e),e}),null,null)),(n()(),e.Lb(-1,null,["Export"]))],(function(n,l){var t=l.component;n(l,2,0,t.modalOptions),n(l,16,0,""),n(l,19,0,"phaseType",t.phaseType),n(l,23,0,"ByMethod"),n(l,24,0,"ByMethod"),n(l,27,0,"ByFit"),n(l,28,0,"ByFit"),n(l,31,0,"ByFirstPeak"),n(l,32,0,"ByFirstPeak"),n(l,35,0,"ByAvgMax"),n(l,36,0,"ByAvgMax")}),(function(n,l){n(l,14,0,e.Db(l,16).required?"":null,e.Db(l,21).ngClassUntouched,e.Db(l,21).ngClassTouched,e.Db(l,21).ngClassPristine,e.Db(l,21).ngClassDirty,e.Db(l,21).ngClassValid,e.Db(l,21).ngClassInvalid,e.Db(l,21).ngClassPending)}))}class vg extends B{constructor(n,l){super(n,l),this.hasFinished=!1,this.blocked=!1,this.periodsOn=!0,this.phasesOn=!0,this.statsOn=!1,this.expandAll=!1,this.phaseType="ByFit",this.relativeTo="zero",this.phaseUnit="circ",this.showResults=!1}remove(n){const l=this.jobs.findIndex(l=>n.jobId===l.jobId);l>=0&&(this.jobs.splice(l,1),this.refreshJobs(this.jobs))}refreshJob(n){const l=this.jobs.findIndex(l=>n.jobId===l.jobId);l>=0&&(this.jobs[l]=n,this.refreshJobs(this.jobs))}refresh(){this.loadPPA(this.assay).then(()=>{this.panes&&this.panes.forEach(n=>n.refresh())})}simplifyJobState(n){return"SUCCESS"===n.state?"FINISHED":n.state}updateModel(n){super.updateModel(n),n&&this.loadPPA(n)}loadPPA(n){return this.loadJobs(n).then(()=>this.exportURL=this.ppaService.exportURL(n)).catch(n=>{this.blocked=!1,this.feedback.error(n)})}loadJobs(n){return this.ppaService.getPPAJobs(n).then(n=>(this.jobs=n,this.refreshJobs(n),n))}refreshJobs(n){this.jobsIds=n.map(n=>n.jobId),this.queuing=this.calculateQueuing(n),this.hasFinished=this.checkFinished(n)}calculateQueuing(n){return n.filter(n=>this.isQueueing(n.state)).length}isQueueing(n){switch(n){case"WAITING":case"PROCESSING":case"SUBMITTED":return!0;default:return!1}}checkFinished(n){return!!n.find(n=>this.isFinished(n.state))}isFinished(n){switch(n){case"SUCCESS":case"FINISHED":case"COMPLETED":return!0;default:return!1}}}var _g=e.pb({encapsulation:2,styles:[],data:{}});function xg(n){return e.Nb(0,[(n()(),e.rb(0,0,null,null,5,"div",[],null,null,null,null,null)),(n()(),e.rb(1,0,null,null,1,"strong",[],null,null,null,null,null)),(n()(),e.Lb(2,null,["Submitted jobs: ",""])),(n()(),e.rb(3,0,null,null,2,"span",[],[[8,"hidden",0]],null,null,null,null)),(n()(),e.rb(4,0,null,null,0,"br",[],null,null,null,null,null)),(n()(),e.Lb(5,null,[""," jobs queuing"]))],null,(function(n,l){var t=l.component;n(l,2,0,t.jobs.length),n(l,3,0,!t.queuing),n(l,5,0,t.queuing)}))}function wg(n){return e.Nb(0,[(n()(),e.rb(0,0,null,null,1,"div",[],null,null,null,null,null)),(n()(),e.Lb(-1,null,[" No jobs submitted, start new analysis. "]))],null,null)}function Dg(n){return e.Nb(0,[(n()(),e.rb(0,0,null,null,3,"a",[["class","btn btn-primary"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(n,l,t){var i=!0;return"click"===l&&(i=!1!==e.Db(n,1).onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)&&i),i}),null,null)),e.qb(1,671744,null,0,wn.o,[wn.l,wn.a,f.k],{routerLink:[0,"routerLink"]},null),e.Eb(2,1),(n()(),e.Lb(-1,null,[" New analysis "]))],(function(n,l){var t=n(l,2,0,"new");n(l,1,0,t)}),(function(n,l){n(l,0,0,e.Db(l,1).target,e.Db(l,1).href)}))}function Cg(n){return e.Nb(0,[(n()(),e.rb(0,0,null,null,2,"div",[["class","pull-right"]],null,null,null,null,null)),(n()(),e.rb(1,0,null,null,1,"a",[["class","btn btn-default"],["download",""],["role","button"]],[[8,"href",4]],null,null,null,null)),(n()(),e.Lb(-1,null,["Download all"]))],null,(function(n,l){n(l,1,0,e.vb(1,"",l.component.exportURL,""))}))}function kg(n){return e.Nb(0,[(n()(),e.rb(0,0,null,null,3,"div",[],null,null,null,null,null)),(n()(),e.rb(1,0,null,null,2,"bd2-ppajob-pane",[],null,[[null,"deleted"],[null,"finished"]],(function(n,l,t){var e=!0,i=n.component;return"deleted"===l&&(e=!1!==i.remove(t)&&e),"finished"===l&&(e=!1!==i.refreshJob(t)&&e),e}),pg,rg)),e.Ib(512,null,lg,lg,[W,[2,R.a]]),e.qb(3,770048,[[4,4]],0,ag,[W,lg,cn.a],{jobId:[0,"jobId"],assay:[1,"assay"],confirmDialog:[2,"confirmDialog"],fitDialog:[3,"fitDialog"],exportDialog:[4,"exportDialog"],expanded:[5,"expanded"]},{deleted:"deleted",finished:"finished"})],(function(n,l){var t=l.component;n(l,3,0,l.context.$implicit,t.assay,e.Db(l.parent,18),t.fitDialog,t.exportDialog,t.expandAll||0==l.context.index)}),null)}function Mg(n){return e.Nb(0,[(n()(),e.rb(0,0,null,null,54,"div",[],null,null,null,null,null)),(n()(),e.rb(1,0,null,null,1,"h3",[],null,null,null,null,null)),(n()(),e.Lb(-1,null,["Period analyses"])),(n()(),e.rb(3,0,null,null,0,"hr",[],null,null,null,null,null)),(n()(),e.rb(4,0,null,null,12,"div",[["class","panel panel-default"]],null,null,null,null,null)),(n()(),e.rb(5,0,null,null,4,"div",[["class","panel-heading"]],null,null,null,null,null)),(n()(),e.gb(16777216,null,null,1,null,xg)),e.qb(7,16384,null,0,f.n,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(n()(),e.gb(16777216,null,null,1,null,wg)),e.qb(9,16384,null,0,f.n,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(n()(),e.rb(10,0,null,null,6,"div",[["class","panel-body"]],null,null,null,null,null)),(n()(),e.gb(16777216,null,null,1,null,Dg)),e.qb(12,16384,null,0,f.n,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(n()(),e.rb(13,0,null,null,1,"button",[["class","btn btn-default"],["type","button"]],[[8,"disabled",0]],[[null,"click"]],(function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.refresh()&&e),e}),null,null)),(n()(),e.Lb(-1,null,["Refresh "])),(n()(),e.gb(16777216,null,null,1,null,Cg)),e.qb(16,16384,null,0,f.n,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(n()(),e.rb(17,0,null,null,1,"bd2-confirm-dialog",[],null,null,null,gg.b,gg.a)),e.qb(18,49152,[[1,4],["confirmDialog",4]],0,tg.a,[],null,null),(n()(),e.rb(19,0,null,null,1,"bd2-selectable-fit-dialog",[],null,null,null,mn,hn)),e.qb(20,114688,[[2,4]],0,dn,[sn,cn.a],null,null),(n()(),e.rb(21,0,null,null,1,"bd2-ppajob-export-dialog",[],null,null,null,yg,mg)),e.qb(22,114688,[[3,4]],0,ig,[],null,null),(n()(),e.rb(23,0,null,null,0,"hr",[],null,null,null,null,null)),(n()(),e.rb(24,0,null,null,1,"bd2-static-pop-up",[],null,null,null,g.b,g.a)),e.qb(25,114688,[["help",4]],0,m.a,[],null,null),(n()(),e.rb(26,0,null,null,24,"div",[],null,null,null,null,null)),(n()(),e.rb(27,0,null,null,1,"h4",[],null,null,null,null,null)),(n()(),e.Lb(-1,null,["Options explained"])),(n()(),e.rb(29,0,null,null,21,"div",[["class","form-horizontal"],["style","margin-top: 1em;"]],null,null,null,null,null)),(n()(),e.rb(30,0,null,null,3,"label",[["class","col-sm-3 col-sm-offset-1"]],null,null,null,null,null)),(n()(),e.Lb(-1,null,[" Phase type "])),(n()(),e.rb(32,0,null,null,1,"a",[],null,[[null,"click"]],(function(n,l,t){var i=!0;return"click"===l&&(i=!1!==e.Db(n,25).show("phases")&&i),i}),null,null)),(n()(),e.rb(33,0,null,null,0,"span",[["aria-hidden","true"],["class","glyphicon glyphicon-question-sign"]],null,null,null,null,null)),(n()(),e.rb(34,0,null,null,3,"label",[["class","col-sm-3 col-sm-offset-1"]],null,null,null,null,null)),(n()(),e.Lb(-1,null,["Phase relation "])),(n()(),e.rb(36,0,null,null,1,"a",[],null,[[null,"click"]],(function(n,l,t){var i=!0;return"click"===l&&(i=!1!==e.Db(n,25).show("phases")&&i),i}),null,null)),(n()(),e.rb(37,0,null,null,0,"span",[["aria-hidden","true"],["class","glyphicon glyphicon-question-sign"]],null,null,null,null,null)),(n()(),e.rb(38,0,null,null,3,"label",[["class","col-sm-3 col-sm-offset-1"]],null,null,null,null,null)),(n()(),e.Lb(-1,null,["Phase unit "])),(n()(),e.rb(40,0,null,null,1,"a",[],null,[[null,"click"]],(function(n,l,t){var i=!0;return"click"===l&&(i=!1!==e.Db(n,25).show("phases")&&i),i}),null,null)),(n()(),e.rb(41,0,null,null,0,"span",[["aria-hidden","true"],["class","glyphicon glyphicon-question-sign"]],null,null,null,null,null)),(n()(),e.rb(42,0,null,null,8,"label",[["class","col-sm-6 col-sm-offset-1"]],null,null,null,null,null)),(n()(),e.Lb(-1,null,[" Display "])),(n()(),e.rb(44,0,null,null,6,"button",[["btnCheckbox",""],["class","btn btn-danger btn-xs"],["style","margin-left: 2em;"],["type","button"]],[[2,"active",null],[1,"aria-pressed",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"click"]],(function(n,l,t){var i=!0,a=n.component;return"click"===l&&(i=!1!==e.Db(n,45).onClick()&&i),"ngModelChange"===l&&(i=!1!==(a.expandAll=t)&&i),i}),null,null)),e.qb(45,81920,null,0,lb.a,[],null,null),e.Ib(1024,null,h.p,(function(n){return[n]}),[lb.a]),e.qb(47,671744,null,0,h.u,[[8,null],[8,null],[8,null],[6,h.p]],{model:[0,"model"]},{update:"ngModelChange"}),e.Ib(2048,null,h.q,null,[h.u]),e.qb(49,16384,null,0,h.r,[[4,h.q]],null,null),(n()(),e.Lb(-1,null,["Expand all "])),(n()(),e.rb(51,0,null,null,0,"hr",[],null,null,null,null,null)),(n()(),e.gb(16777216,null,null,1,null,kg)),e.qb(53,278528,null,0,f.m,[e.N,e.K,e.q],{ngForOf:[0,"ngForOf"]},null),(n()(),e.rb(54,0,null,null,0,"hr",[],null,null,null,null,null))],(function(n,l){var t=l.component;n(l,7,0,t.jobs&&t.jobs.length>0),n(l,9,0,!t.jobs||0==t.jobs.length),n(l,12,0,t.assay.security.canWrite),n(l,16,0,t.hasFinished),n(l,20,0),n(l,22,0),n(l,25,0),n(l,45,0),n(l,47,0,t.expandAll),n(l,53,0,t.jobsIds)}),(function(n,l){n(l,13,0,l.component.blocked),n(l,44,0,e.Db(l,45).state,e.Db(l,45).state,e.Db(l,49).ngClassUntouched,e.Db(l,49).ngClassTouched,e.Db(l,49).ngClassPristine,e.Db(l,49).ngClassDirty,e.Db(l,49).ngClassValid,e.Db(l,49).ngClassInvalid,e.Db(l,49).ngClassPending)}))}function Pg(n){return e.Nb(0,[e.Jb(671088640,1,{confirmDialog:0}),e.Jb(671088640,2,{fitDialog:0}),e.Jb(671088640,3,{exportDialog:0}),e.Jb(671088640,4,{panes:1}),(n()(),e.gb(16777216,null,null,1,null,Mg)),e.qb(5,16384,null,0,f.n,[e.N,e.K],{ngIf:[0,"ngIf"]},null)],(function(n,l){n(l,5,0,l.component.assay)}),null)}function Sg(n){return e.Nb(0,[(n()(),e.rb(0,0,null,null,1,"ng-component",[],null,null,null,Pg,_g)),e.qb(1,245760,null,0,vg,[W,j.a],null,null)],(function(n,l){n(l,1,0)}),null)}var Tg=e.nb("ng-component",vg,Sg,{},{},[]),Ig=t("POq0"),Ag=t("JjoW"),qg=t("Xd0L"),Ng=t("qJ5m"),Og=t("s6ns"),Eg=t("/Co4"),Rg=t("STJf"),Lg=t("O6Xb"),Bg=t("hrfs"),Fg=t("HsOI"),Ug=t("Fwaw"),jg=t("elxJ"),Jg=t("pBi1"),Wg=t("igqZ"),Hg=t("qJ50"),zg=t("Gi4r"),$g=t("oapL"),Gg=t("ZwOa"),Vg=t("mkRZ"),Kg=t("FVPZ"),Yg=t("kNGD"),Xg=t("ZTEM"),Zg=t("a6j2");class Qg{}class nm{}class lm{}var tm=t("dvZr");t.d(l,"PPAModuleNgFactory",(function(){return em}));var em=e.ob(i,[],(function(n){return e.Ab([e.Bb(512,e.j,e.Z,[[8,[a.a,r.a,r.b,u.a,o.a,s.a,ln,An,Tg]],[3,e.j],e.v]),e.Bb(4608,f.p,f.o,[e.s,[2,f.F]]),e.Bb(4608,h.E,h.E,[]),e.Bb(4608,h.f,h.f,[]),e.Bb(4608,Ig.c,Ig.c,[]),e.Bb(4608,Dp.c,Dp.c,[Dp.i,Dp.e,e.j,Dp.h,Dp.f,e.p,e.x,f.d,Zb.b,[2,f.j]]),e.Bb(5120,Dp.j,Dp.k,[Dp.c]),e.Bb(5120,Ag.a,Ag.b,[Dp.c]),e.Bb(5120,wp.b,wp.c,[Dp.c]),e.Bb(4608,kp.e,qg.e,[[2,qg.i],[2,qg.n]]),e.Bb(5120,p.c,p.a,[[3,p.c]]),e.Bb(5120,Vb.d,Vb.a,[[3,Vb.d]]),e.Bb(5120,Ng.g,Ng.a,[[3,Ng.g]]),e.Bb(4608,qg.d,qg.d,[]),e.Bb(5120,Og.c,Og.d,[Dp.c]),e.Bb(135680,Og.e,Og.e,[Dp.c,e.p,[2,f.j],[2,Og.b],Og.c,[3,Og.e],Dp.e]),e.Bb(5120,Eg.b,Eg.c,[Dp.c]),e.Bb(1073742336,f.c,f.c,[]),e.Bb(1073742336,h.D,h.D,[]),e.Bb(1073742336,h.l,h.l,[]),e.Bb(1073742336,h.z,h.z,[]),e.Bb(1073742336,N.c,N.c,[]),e.Bb(1073742336,lb.d,lb.d,[]),e.Bb(1073742336,an.e,an.e,[]),e.Bb(1073742336,Rg.a,Rg.a,[]),e.Bb(1073742336,Lg.a,Lg.a,[]),e.Bb(1073742336,Bg.b,Bg.b,[]),e.Bb(1073742336,Ig.d,Ig.d,[]),e.Bb(1073742336,Fg.d,Fg.d,[]),e.Bb(1073742336,Zb.a,Zb.a,[]),e.Bb(1073742336,Un.f,Un.f,[]),e.Bb(1073742336,On.b,On.b,[]),e.Bb(1073742336,Cp.b,Cp.b,[]),e.Bb(1073742336,Dp.g,Dp.g,[]),e.Bb(1073742336,qg.n,qg.n,[[2,qg.f],[2,kp.f]]),e.Bb(1073742336,qg.x,qg.x,[]),e.Bb(1073742336,qg.v,qg.v,[]),e.Bb(1073742336,qg.s,qg.s,[]),e.Bb(1073742336,Ag.d,Ag.d,[]),e.Bb(1073742336,Ug.c,Ug.c,[]),e.Bb(1073742336,Jn.a,Jn.a,[]),e.Bb(1073742336,wp.e,wp.e,[]),e.Bb(1073742336,p.d,p.d,[]),e.Bb(1073742336,Nn.c,Nn.c,[]),e.Bb(1073742336,jg.d,jg.d,[]),e.Bb(1073742336,Vb.e,Vb.e,[]),e.Bb(1073742336,Yb.p,Yb.p,[]),e.Bb(1073742336,Kb.o,Kb.o,[]),e.Bb(1073742336,Jg.d,Jg.d,[]),e.Bb(1073742336,Jg.c,Jg.c,[]),e.Bb(1073742336,Wg.e,Wg.e,[]),e.Bb(1073742336,Yn.b,Yn.b,[]),e.Bb(1073742336,Hg.e,Hg.e,[]),e.Bb(1073742336,zg.c,zg.c,[]),e.Bb(1073742336,Ng.h,Ng.h,[]),e.Bb(1073742336,$g.c,$g.c,[]),e.Bb(1073742336,Gg.b,Gg.b,[]),e.Bb(1073742336,Vg.a,Vg.a,[]),e.Bb(1073742336,qg.o,qg.o,[]),e.Bb(1073742336,Kg.a,Kg.a,[]),e.Bb(1073742336,Og.k,Og.k,[]),e.Bb(1073742336,Yg.f,Yg.f,[]),e.Bb(1073742336,Eg.e,Eg.e,[]),e.Bb(1073742336,Fn.c,Fn.c,[]),e.Bb(1073742336,Bn.c,Bn.c,[]),e.Bb(1073742336,Ln.c,Ln.c,[]),e.Bb(1073742336,Xg.a,Xg.a,[]),e.Bb(1073742336,Zg.a,Zg.a,[]),e.Bb(1073742336,zf,zf,[]),e.Bb(1073742336,Mb,Mb,[]),e.Bb(1073742336,Qg,Qg,[]),e.Bb(1073742336,nm,nm,[]),e.Bb(1073742336,wn.p,wn.p,[[2,wn.u],[2,wn.l]]),e.Bb(1073742336,lm,lm,[]),e.Bb(1073742336,i,i,[]),e.Bb(256,Yg.a,{separatorKeyCodes:[tm.g]},[]),e.Bb(1024,wn.j,(function(){return[[{path:"",children:[{path:"new",component:G},{path:":jobId/edit",component:xn},{path:"",component:vg,pathMatch:"full"}]}]]}),[])])}))}}]);