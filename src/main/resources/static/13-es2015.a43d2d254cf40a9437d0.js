(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{"117B":function(t,e,r){"use strict";r.d(e,"a",(function(){return p}));var o=r("fXoL"),a=r("3Pt+"),i=r("BOp5"),s=r("B9cw"),n=r("QBpm"),c=r("QibW"),l=r("1jcm"),b=r("ofXK");function d(t,e){if(1&t&&(o.Wb(0,"option",20),o.Gc(1),o.jc(2,"date"),o.Vb()),2&t){const t=e.$implicit,r=o.ic();o.oc("value",t.jobId),o.Cb(1),o.Kc(" ",t.method,": ",r.shortUUID(t.jobId)," (",o.kc(2,4,r.toLocalDateTime(t.submitted)),") ")}}function h(t,e){if(1&t&&(o.Wb(0,"option",20),o.Gc(1),o.jc(2,"date"),o.Vb()),2&t){const t=e.$implicit,r=o.ic();o.oc("value",t.jobId),o.Cb(1),o.Kc(" ",r.friendlyRhythmMethod(t.parameters.METHOD),": ",r.shortUUID(t.jobId)," (",o.kc(2,4,r.toLocalDateTime(t.jobStatus.submitted)),") ")}}let p=(()=>{class t{constructor(t,e){this.fb=t,this.fetcher=e,this.sorting=new o.o,this.noPPA=!0,this.noRhythm=!0,this._rhythmJobs=[],this._ppaJobs=[],this.sortParamsForm=this.buildSortParamsForm(t),this.mainForm=this.buildMainForm(this.sortParamsForm,t),this.ppaJobs=[],this.rhythmJobs=[]}set rhythmJobs(t){this._rhythmJobs=t,this.noRhythm=!t||t.length<1,this.sortParamsForm.get("rhythmJobId").setValue(this.noRhythm?void 0:t[0].jobId)}get rhythmJobs(){return this._rhythmJobs}set ppaJobs(t){this._ppaJobs=t,this.noPPA=!t||t.length<1,this.sortParamsForm.get("ppaJobId").setValue(this.noPPA?void 0:t[0].jobId)}get ppaJobs(){return this._ppaJobs}ngOnInit(){this.valuesSubscription=this.mainForm.valueChanges.subscribe(t=>{const e=t;e.direction=t.isAscending?"asc":"desc",this.sorting.next(e),this.fetcher&&this.fetcher.sort(e)})}ngOnDestroy(){this.valuesSubscription&&this.valuesSubscription.unsubscribe(),this.sorting&&this.sorting.complete()}buildSortParamsForm(t){return t.group({active:[this.defaultSorting(),[a.A.required]],isAscending:[!0,[a.A.required]],ppaJobId:[],rhythmJobId:[]})}buildMainForm(t,e){return t}defaultSorting(){return"NR"}shortUUID(t){return Object(i.c)(t)}toLocalDateTime(t){return s.b.deserialize(t).date}friendlyRhythmMethod(t){return"BD2JTK"===t?"JTK":"BD2EJTK"===t?"eJTK":t}}return t.\u0275fac=function(e){return new(e||t)(o.Qb(a.d),o.Qb(n.a,8))},t.\u0275cmp=o.Kb({type:t,selectors:[["bd2-tssort-params-rform"]],inputs:{rhythmJobs:"rhythmJobs",ppaJobs:"ppaJobs"},outputs:{sorting:"sorting"},decls:42,vars:10,consts:[[1,"container"],["role","form",3,"formGroup"],["aria-label","Sorting options","formControlName","active"],[1,"row","mb-1"],[1,"col-lg-2"],[1,"col-lg-4"],["formControlName","isAscending"],[1,"col-lg-5"],["value","NR"],["value","LABEL"],["id","ppa","aria-label","Select period analysis","formControlName","ppaJobId",1,"form-control"],[3,"value",4,"ngFor","ngForOf"],["value","PERIOD",3,"disabled"],["value","PHASE",3,"disabled"],["value","AMP",3,"disabled"],["value","ERR",3,"disabled"],["id","rhythm","aria-label","Select rhythmicity test","formControlName","rhythmJobId",1,"form-control"],["value","R_TAU",3,"disabled"],["value","R_PEAK",3,"disabled"],["value","R_PERIOD",3,"disabled"],[3,"value"]],template:function(t,e){1&t&&(o.Wb(0,"div",0),o.Wb(1,"form",1),o.Wb(2,"mat-radio-group",2),o.Wb(3,"div",3),o.Wb(4,"label",4),o.Gc(5,"Sort"),o.Vb(),o.Wb(6,"div",5),o.Wb(7,"mat-slide-toggle",6),o.Gc(8,"asc."),o.Vb(),o.Vb(),o.Wb(9,"div",7),o.Wb(10,"mat-radio-button",8),o.Gc(11,"nr."),o.Vb(),o.Wb(12,"mat-radio-button",9),o.Gc(13,"label"),o.Vb(),o.Vb(),o.Vb(),o.Wb(14,"div",3),o.Wb(15,"label",4),o.Gc(16,"PPA Analysis"),o.Vb(),o.Wb(17,"div",5),o.Wb(18,"select",10),o.Ec(19,d,3,6,"option",11),o.Vb(),o.Vb(),o.Wb(20,"div",7),o.Wb(21,"mat-radio-button",12),o.Gc(22,"period"),o.Vb(),o.Wb(23,"mat-radio-button",13),o.Gc(24,"phase"),o.Vb(),o.Wb(25,"mat-radio-button",14),o.Gc(26,"amp."),o.Vb(),o.Wb(27,"mat-radio-button",15),o.Gc(28,"err"),o.Vb(),o.Vb(),o.Vb(),o.Wb(29,"div",3),o.Wb(30,"label",4),o.Gc(31,"Rhythmicity Test"),o.Vb(),o.Wb(32,"div",5),o.Wb(33,"select",16),o.Ec(34,h,3,6,"option",11),o.Vb(),o.Vb(),o.Wb(35,"div",7),o.Wb(36,"mat-radio-button",17),o.Gc(37,"signif."),o.Vb(),o.Wb(38,"mat-radio-button",18),o.Gc(39,"peak"),o.Vb(),o.Wb(40,"mat-radio-button",19),o.Gc(41,"length"),o.Vb(),o.Vb(),o.Vb(),o.Vb(),o.Vb(),o.Vb()),2&t&&(o.Cb(1),o.oc("formGroup",e.mainForm),o.Cb(18),o.oc("ngForOf",e.ppaJobs),o.Cb(2),o.oc("disabled",e.noPPA),o.Cb(2),o.oc("disabled",e.noPPA),o.Cb(2),o.oc("disabled",e.noPPA),o.Cb(2),o.oc("disabled",e.noPPA),o.Cb(7),o.oc("ngForOf",e.rhythmJobs),o.Cb(2),o.oc("disabled",e.noRhythm),o.Cb(2),o.oc("disabled",e.noRhythm),o.Cb(2),o.oc("disabled",e.noRhythm))},directives:[a.C,a.q,a.h,c.b,a.p,a.g,l.a,c.a,a.z,b.l,a.t,a.B],pipes:[b.e],styles:["mat-radio-button[_ngcontent-%COMP%] {\n        margin-right: 0.5em;\n      }"]}),t})()},K5d1:function(t,e,r){"use strict";r.d(e,"a",(function(){return b}));var o=r("XNiG"),a=r("2Vo4"),i=r("PkFh"),s=r("7jps"),n=r("fXoL"),c=r("ETLL"),l=r("FjDX");let b=(()=>{class t{constructor(t,e){this.ppa=t,this.rhythmicity=e,this.error$=new o.a,this.allowedPPAMethods=void 0,this.allowedRhythmMethods=void 0,this.ppaJobs=new a.a([]),this.rhythmJobs=new a.a([]),this.ppaJobs$=this.ppaJobs.asObservable(),this.rhythmJobs$=this.rhythmJobs.asObservable()}ngOnDestroy(){this.ppaJobs.complete(),this.rhythmJobs.complete()}experiment(t){this.fetchPPA(t),this.fetchRhythm(t)}fetchPPA(t){this.ppa.getPPAJobs(t).subscribe(t=>{t=t.filter(t=>i.c.isFinished(t)),this.allowedPPAMethods&&(t=t.filter(t=>this.allowedPPAMethods.includes(t.method))),this.ppaJobs.next(t)},t=>{this.error$.next(t),this.ppaJobs.next([])})}fetchRhythm(t){this.rhythmicity.getJobs(t).subscribe(t=>{t=t.filter(t=>s.e.isFinished(t)),this.allowedRhythmMethods&&(t=t.filter(t=>this.allowedRhythmMethods.includes(t.parameters.METHOD))),this.rhythmJobs.next(t)},t=>{this.error$.next(t),this.rhythmJobs.next([])})}}return t.\u0275fac=function(e){return new(e||t)(n.ac(c.a),n.ac(l.a))},t.\u0275prov=n.Mb({token:t,factory:t.\u0275fac}),t})()},d9Wp:function(t,e,r){"use strict";r.r(e),r.d(e,"TsDataModule",(function(){return F}));var o=r("ofXK"),a=r("tyNb"),i=r("yYXI"),s=r("bngM"),n=r("QBpm"),c=r("e8YO"),l=r("Kj3r"),b=r("Iab2"),d=r("K5d1"),h=r("fXoL"),p=r("vejM"),m=r("ZMwR"),u=r("GVyA"),f=r("wcxA"),g=r("3Pt+"),y=r("1jcm"),P=r("M9IT");function v(t,e){if(1&t&&(h.Wb(0,"option",28),h.Gc(1),h.Vb()),2&t){const t=e.$implicit;h.oc("value",t.name),h.Cb(1),h.Hc(t.label)}}function V(t,e){if(1&t&&(h.Wb(0,"option",28),h.Gc(1),h.Vb()),2&t){const t=e.$implicit;h.oc("value",t.name),h.Cb(1),h.Hc(t.label)}}function W(t,e){if(1&t&&(h.Wb(0,"option",28),h.Gc(1),h.Vb()),2&t){const t=e.$implicit;h.oc("value",t.name),h.Cb(1),h.Hc(t.label)}}const w=function(){return[10,25,50,100,200]};let x=(()=>{class t extends f.a{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(h.Qb(g.d))},t.\u0275cmp=h.Kb({type:t,selectors:[["bd2-tsdisplay-params-rform"]],inputs:{disabled:"disabled",totalTraces:"totalTraces",currentPage:"currentPage"},outputs:{displayParams:"displayParams"},features:[h.zb],decls:47,vars:10,consts:[["role","form",1,"form-horizontal","container",3,"formGroup"],[1,"row"],[1,"col-md-8","col-sm-10"],["formGroupName","timeScale",1,"form-group","row"],[1,"col-md-3","col-sm-3"],["for","timeStart",1,"col-md-1","col-sm-2"],["type","number","step","any","min","0","size","5","id","timeStart","required","","formControlName","timeStart",1,"form-control"],["for","timeEnd",1,"col-md-1","col-sm-1"],["type","number","step","any","min","0","size","5","required","","id","timeEnd","formControlName","timeEnd",1,"form-control"],[1,"col-md-2","col-sm-4"],["formControlName","hourly",1,"mr-3"],[1,"form-group","row"],["for","detrending",1,"col-sm-2"],[1,"col-sm-3"],["required","","id","detrending","formControlName","detrending",1,"form-control"],[3,"value",4,"ngFor","ngForOf"],[1,"col-sm-1"],["for","align",1,"col-sm-1"],["required","","id","align","formControlName","align",1,"form-control"],[1,"col-sm-2"],["for","normalisation"],["required","","id","normalisation","formControlName","normalisation",1,"form-control"],[1,"col-sm"],["formControlName","trimFirst",1,"mr-3"],["formControlName","log2"],[1,"col-sm-8"],[3,"length","disabled","pageSize","pageIndex","pageSizeOptions","page"],["dataPaginator",""],[3,"value"]],template:function(t,e){1&t&&(h.Wb(0,"form",0),h.Wb(1,"div",1),h.Wb(2,"div",2),h.Wb(3,"div",3),h.Wb(4,"label",4),h.Gc(5,"Time range"),h.Vb(),h.Wb(6,"label",5),h.Gc(7,"from:"),h.Vb(),h.Wb(8,"div",4),h.Rb(9,"input",6),h.Vb(),h.Wb(10,"label",7),h.Gc(11,"to:"),h.Vb(),h.Wb(12,"div",4),h.Rb(13,"input",8),h.Vb(),h.Vb(),h.Vb(),h.Wb(14,"div",9),h.Wb(15,"mat-slide-toggle",10),h.Gc(16,"hourly"),h.Vb(),h.Vb(),h.Vb(),h.Wb(17,"div",11),h.Wb(18,"label",12),h.Gc(19,"Detrending"),h.Vb(),h.Wb(20,"div",13),h.Wb(21,"select",14),h.Ec(22,v,2,2,"option",15),h.Vb(),h.Vb(),h.Rb(23,"div",16),h.Wb(24,"label",17),h.Gc(25,"Align"),h.Vb(),h.Wb(26,"div",13),h.Wb(27,"select",18),h.Ec(28,V,2,2,"option",15),h.Vb(),h.Vb(),h.Vb(),h.Wb(29,"div",11),h.Wb(30,"div",19),h.Wb(31,"label",20),h.Gc(32,"Normalize"),h.Vb(),h.Vb(),h.Wb(33,"div",13),h.Wb(34,"select",21),h.Ec(35,W,2,2,"option",15),h.Vb(),h.Vb(),h.Wb(36,"div",22),h.Wb(37,"mat-slide-toggle",23),h.Gc(38,"within range"),h.Vb(),h.Wb(39,"mat-slide-toggle",24),h.Gc(40,"log2 transf."),h.Vb(),h.Vb(),h.Vb(),h.Rb(41,"div",11),h.Wb(42,"div",11),h.Rb(43,"label",19),h.Wb(44,"div",25),h.Wb(45,"mat-paginator",26,27),h.ec("page",(function(t){return e.loadDataPage(t)})),h.Vb(),h.Vb(),h.Vb(),h.Vb()),2&t&&(h.oc("formGroup",e.mainForm),h.Cb(22),h.oc("ngForOf",e.detrendingOptions),h.Cb(6),h.oc("ngForOf",e.alignOptions),h.Cb(7),h.oc("ngForOf",e.normalisationOptions),h.Cb(10),h.oc("length",e.totalTraces)("disabled",e.disabledPagination)("pageSize",e.currentPage.pageSize)("pageIndex",e.currentPage.pageIndex)("pageSizeOptions",h.qc(9,w)))},directives:[g.C,g.q,g.h,g.i,g.u,g.c,g.y,g.p,g.g,y.a,g.z,o.l,P.a,g.t,g.B],encapsulation:2}),t})();var C=r("7EHt"),S=r("117B"),J=r("nA4b");function E(t,e){if(1&t){const t=h.Xb();h.Wb(0,"div",8),h.Gc(1,"Please complete "),h.Wb(2,"a",9),h.ec("click",(function(){h.xc(t);const e=h.ic(2);return e.goToExpEdit(e.assay.id,"MeasurementSection")})),h.Gc(3,"Measurement details"),h.Vb(),h.Gc(4," to get access to the secondary data "),h.Vb()}}function G(t,e){if(1&t){const t=h.Xb();h.Wb(0,"div",10),h.Wb(1,"label",11),h.Wb(2,"a",12),h.ec("click",(function(){return h.xc(t),h.ic(2).exportDataView()})),h.Wb(3,"i",13),h.Gc(4,"save_alt"),h.Vb(),h.Wb(5,"span",14),h.Gc(6,"Download"),h.Vb(),h.Vb(),h.Gc(7," current view "),h.Vb(),h.Wb(8,"label",11),h.Wb(9,"a",15),h.ec("click",(function(){return h.xc(t),h.ic(2).exportFullData()})),h.Wb(10,"i",13),h.Gc(11,"save_alt"),h.Vb(),h.Wb(12,"span",14),h.Gc(13,"Download"),h.Vb(),h.Vb(),h.Gc(14," full "),h.Vb(),h.Vb()}}function D(t,e){if(1&t&&h.Rb(0,"bd2-ts-plots",16),2&t){const t=h.ic(2);h.oc("tracesPerPlot",t.tracesPerPlot)("data",t.timeseries)}}function I(t,e){if(1&t){const t=h.Xb();h.Wb(0,"div"),h.Wb(1,"h3"),h.Gc(2,"Show timeseries"),h.Vb(),h.Rb(3,"hr"),h.Wb(4,"bd2-tsdisplay-params-rform",1),h.ec("displayParams",(function(e){return h.xc(t),h.ic().displayChanged(e)})),h.Vb(),h.Wb(5,"mat-expansion-panel"),h.Wb(6,"mat-expansion-panel-header"),h.Wb(7,"mat-panel-title"),h.Gc(8," Sorting "),h.Vb(),h.Vb(),h.Rb(9,"bd2-tssort-params-rform",2),h.jc(10,"async"),h.jc(11,"async"),h.Vb(),h.Ec(12,E,5,0,"div",3),h.Rb(13,"hr"),h.Wb(14,"div",4),h.Gc(15," Hint: You can click on trace label box to remove it from the plot. "),h.Vb(),h.Wb(16,"div",5),h.Ec(17,G,15,0,"div",6),h.Vb(),h.Rb(18,"hr"),h.Ec(19,D,1,2,"bd2-ts-plots",7),h.Vb()}if(2&t){const t=h.ic();h.Cb(4),h.oc("disabled",t.disabledSecondary)("totalTraces",t.totalTraces)("currentPage",t.currentPage),h.Cb(5),h.oc("ppaJobs",h.kc(10,8,t.analysis.ppaJobs$))("rhythmJobs",h.kc(11,10,t.analysis.rhythmJobs$)),h.Cb(3),h.oc("ngIf",t.disabledSecondary),h.Cb(5),h.oc("ngIf",t.timeseries),h.Cb(2),h.oc("ngIf",t.timeseries)}}const T=[{path:"",children:[{path:"view/ts",component:(()=>{class t extends i.a{constructor(t,e,r,o,a){super(a),this.analysis=t,this.fetcher=e,this.RDMSocial=r,this.analytics=o,this.timeseries=[],this.totalTraces=0,this.currentPage=s.a.firstPage(),this.tracesPerPlot=5,this.blocked=!1,this.disabledSecondary=!1,this.csvExporter=new c.a,t.allowedPPAMethods=["NLLS","MESA"],this.titlePart=" Data"}ngOnInit(){super.ngOnInit(),this.timeSeriesSubsripction=this.fetcher.seriesPackStream.pipe(Object(l.a)(1e3)).subscribe(t=>{if(!this.assay)return;const e=t.data;this.currentParams=t.params,this.timeseries=e,this.tracesPerPlot=Math.max(5,e.length/20),this.totalTraces=t.totalTraces,this.currentPage=t.currentPage,this.analytics.experimentDataView(this.assay.id)},t=>{console.log("Error in TS subscription: "+t),this.feedback.error(t)}),this.fetcher.error$.subscribe(t=>this.feedback.error(t))}ngOnDestroy(){this.timeSeriesSubsripction&&this.timeSeriesSubsripction.unsubscribe(),this.fetcher.ngOnDestroy(),super.ngOnDestroy()}displayChanged(t){this.fetcher.changeDisplayParams(t)}exportDataView(){this.exportSeriesPack(this.fetcher.current)}exportFullData(){this.fetcher.getFullDataSet(this.assay,this.fetcher.current.params,this.fetcher.current.sorting).subscribe(t=>{this.exportSeriesPack(t,!0)})}exportSeriesPack(t,e=!1){if(!t)return;const r=this.csvExporter.renderCSVTable(t.data,t.params,t.currentPage,t.sorting,this.assay),o=new Blob([r],{type:"text/csv"});b.saveAs(o,`${this.assay.id}_data.${t.params.detrending.name}${e?".full":".page"+(t.currentPage.pageIndex+1)}.csv`),this.recordExport()}recordExport(){this.analytics.experimentDataExport(this.assay.id)}updateModel(t){super.updateModel(t),this.RDMSocial.canProceedByMeasurement(t).then(t=>{this.disabledSecondary=!t}),this.fetcher.experiment(t),this.analysis.experiment(t)}}return t.\u0275fac=function(e){return new(e||t)(h.Qb(d.a),h.Qb(n.a),h.Qb(p.a),h.Qb(m.a),h.Qb(u.a))},t.\u0275cmp=h.Kb({type:t,selectors:[["ng-component"]],features:[h.Bb([n.a,d.a]),h.zb],decls:1,vars:1,consts:[[4,"ngIf"],[3,"disabled","totalTraces","currentPage","displayParams"],[3,"ppaJobs","rhythmJobs"],["type","danger","class","alert alert-danger","role","alert",4,"ngIf"],["type","info","role","alert","dismissible","true","dismissOnTimeout","20000",1,"alert","alert-info"],[1,"clearfix"],["class","float-right",4,"ngIf"],[3,"tracesPerPlot","data",4,"ngIf"],["type","danger","role","alert",1,"alert","alert-danger"],[3,"click"],[1,"float-right"],[1,"mr-4"],["download","","role","button","aria-label","download",1,"btn","btn-primary",2,"color","white",3,"click"],[1,"material-icons","bd-icon"],[1,"cdk-visually-hidden"],["download","","role","button","aria-label","download whole",1,"btn","btn-primary",2,"color","white",3,"click"],[3,"tracesPerPlot","data"]],template:function(t,e){1&t&&h.Ec(0,I,20,12,"div",0),2&t&&h.oc("ngIf",e.assay)},directives:[o.m,x,C.b,C.c,C.d,S.a,J.a],pipes:[o.b],encapsulation:2}),t})()},{path:"view/heatmap",loadChildren:()=>Promise.all([r.e(0),r.e(18)]).then(r.bind(null,"QftV")).then(t=>t.TsHeatmapModule)},{path:"ts-old-import",loadChildren:()=>Promise.all([r.e(0),r.e(17)]).then(r.bind(null,"9Gw/")).then(t=>t.TsOldImportModule)},{path:"ts-import",loadChildren:()=>Promise.all([r.e(0),r.e(19)]).then(r.bind(null,"yPAH")).then(t=>t.TsImportModule)}]}];let M=(()=>{class t{}return t.\u0275mod=h.Ob({type:t}),t.\u0275inj=h.Nb({factory:function(e){return new(e||t)},imports:[[a.f.forChild(T)],a.f]}),t})();var R=r("YiFe"),A=r("a6j2"),O=r("ZTEM");let F=(()=>{class t{}return t.\u0275mod=h.Ob({type:t}),t.\u0275inj=h.Nb({factory:function(e){return new(e||t)},imports:[[o.c,g.j,g.x,R.a,A.a,M,O.a]]}),t})()},e8YO:function(t,e,r){"use strict";r.d(e,"a",(function(){return a}));class o{constructor(t){this.rows=new Map,this.nextColumn=0,this.sorted=!0,null!=t&&(this.sorted=t)}get width(){return this.nextColumn}get size(){return this.rows.size}append(t,e){this.put(t,e,this.nextColumn)}put(t,e,r){this._put(t,e,r),this.nextColumn=Math.max(this.nextColumn,r+1)}putColumn(t,e,r){t.forEach((t,o)=>{this._put(t,e[o],r)}),this.nextColumn=Math.max(this.nextColumn,r+1)}appendColumn(t,e){this.putColumn(t,e,this.nextColumn)}getValue(t,e){const r=this.rows.get(t);return r?r[e]:void 0}getRow(t){return this.rows.get(t)}forEach(t){this.keys().forEach((e,r)=>{const o={key:e,columns:this.rows.get(e)};t(o,r,this)})}forEachFlat(t){this.keys().forEach((e,r)=>{const o=[e].concat(this.rows.get(e));t(o,r,this)})}keys(){return this.sorted?Array.from(this.rows.keys()).sort((t,e)=>t==e?0:t<e?-1:1):Array.from(this.rows.keys())}_put(t,e,r){let o=this.rows.get(t);o||(o=[],this.rows.set(t,o)),o[r]=e}}class a{constructor(){this.SEP=","}renderCSVTable(t,e,r,o,a){const i=this.prepareHeaders(a,e,r,o,t.length);this.appendDataLabels(i,t);const s=this.prepareDataTable(t);let n=this.mapToString(i,this.SEP);return n+=this.mapToString(s,this.SEP),n}prepareHeaders(t,e,r,o,a){const i=this.prepareExpHeaders(t);return this.appendDisplayProperties(i,e),this.appendSortingProperties(i,o),this.appendDataProperties(i,a,r),i}prepareExpHeaders(t){const e=new o(!1);return e.put("Exp Id:",""+t.id,0),e.put("Exp URL:","https://biodare2.ed.ac.uk/experiment/"+t.id,0),e.put("Exp Name:",t.name,0),t.contributionDesc.authors.forEach((t,r)=>{e.put("Authors:",t.name,r)}),e}appendDisplayProperties(t,e){t.put("Time range:",e.timeScaleLabel,0),t.put("Detrending:",e.detrending.label,0),e.hourly&&t.put("Hourly binned:","true",0),e.log2&&t.put("Log2 transform:",""+e.log2,0),t.put("Normalization:",e.normalisation,0),t.put("Normalization:",e.trimFirst?"within range":"whole serie",1),t.put("Align:",e.align,0)}appendSortingProperties(t,e){t.put("Sorting:",`${e.active} ${e.direction}`,0),t.put("Sorting jobs:",`${e.ppaJobId} ${e.rhythmJobId}`,0)}appendDataProperties(t,e,r){t.put("Traces",e+" of "+r.length,0);const o=Math.floor(r.length/r.pageSize)+(r.length%r.pageSize==0?0:1);t.put("Data Page",r.pageIndex+1+" of "+o,0)}appendDataLabels(t,e){e.forEach((e,r)=>{t.put("Label:",e.label,r)})}prepareDataTable(t){const e=new o;return t.forEach(t=>{const r=t.data.map(t=>t.x),o=t.data.map(t=>t.y);e.appendColumn(r,o)}),e}mapToString(t,e){let r="";return t.forEachFlat(t=>{for(let o=0;o<t.length;o++)void 0!==t[o]&&(r+=t[o]),r+=e;r+="\n"}),r}}}}]);