(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{"117B":function(t,e,r){"use strict";r.d(e,"a",(function(){return p}));var a=r("fXoL"),i=r("3Pt+"),o=r("BOp5"),s=r("B9cw"),n=r("QBpm"),c=r("QibW"),l=r("1jcm"),b=r("ofXK");function d(t,e){if(1&t&&(a.Tb(0,"option",20),a.Dc(1),a.ec(2,"date"),a.Sb()),2&t){const t=e.$implicit,r=a.dc();a.jc("value",t.jobId),a.Bb(1),a.Hc(" ",t.method,": ",r.shortUUID(t.jobId)," (",a.fc(2,4,r.toLocalDateTime(t.submitted)),") ")}}function h(t,e){if(1&t&&(a.Tb(0,"option",20),a.Dc(1),a.ec(2,"date"),a.Sb()),2&t){const t=e.$implicit,r=a.dc();a.jc("value",t.jobId),a.Bb(1),a.Hc(" ",r.friendlyRhythmMethod(t.parameters.METHOD),": ",r.shortUUID(t.jobId)," (",a.fc(2,4,r.toLocalDateTime(t.jobStatus.submitted)),") ")}}let p=(()=>{class t{constructor(t,e){this.fb=t,this.fetcher=e,this.sorting=new a.o,this.noPPA=!0,this.noRhythm=!0,this._rhythmJobs=[],this._ppaJobs=[],this.sortParamsForm=this.buildSortParamsForm(t),this.mainForm=this.buildMainForm(this.sortParamsForm,t),this.ppaJobs=[],this.rhythmJobs=[]}set rhythmJobs(t){this._rhythmJobs=t,this.noRhythm=!t||t.length<1,this.sortParamsForm.get("rhythmJobId").setValue(this.noRhythm?void 0:t[0].jobId)}get rhythmJobs(){return this._rhythmJobs}set ppaJobs(t){this._ppaJobs=t,this.noPPA=!t||t.length<1,this.sortParamsForm.get("ppaJobId").setValue(this.noPPA?void 0:t[0].jobId)}get ppaJobs(){return this._ppaJobs}ngOnInit(){this.valuesSubscription=this.mainForm.valueChanges.subscribe(t=>{const e=t;e.direction=t.isAscending?"asc":"desc",this.sorting.next(e),this.fetcher&&this.fetcher.sort(e)})}ngOnDestroy(){this.valuesSubscription&&this.valuesSubscription.unsubscribe(),this.sorting&&this.sorting.complete()}buildSortParamsForm(t){return t.group({active:[this.defaultSorting(),[i.B.required]],isAscending:[!0,[i.B.required]],ppaJobId:[],rhythmJobId:[]})}buildMainForm(t,e){return t}defaultSorting(){return"NR"}shortUUID(t){return Object(o.c)(t)}toLocalDateTime(t){return s.b.deserialize(t).date}friendlyRhythmMethod(t){return"BD2JTK"===t?"JTK":"BD2EJTK"===t?"eJTK":t}}return t.\u0275fac=function(e){return new(e||t)(a.Nb(i.e),a.Nb(n.a,8))},t.\u0275cmp=a.Hb({type:t,selectors:[["bd2-tssort-params-rform"]],inputs:{rhythmJobs:"rhythmJobs",ppaJobs:"ppaJobs"},outputs:{sorting:"sorting"},decls:42,vars:10,consts:[[1,"container"],["role","form",3,"formGroup"],["aria-label","Sorting options","formControlName","active"],[1,"row","mb-1"],[1,"col-lg-2"],[1,"col-lg-4"],["formControlName","isAscending"],[1,"col-lg-5"],["value","NR"],["value","LABEL"],["id","ppa","aria-label","Select period analysis","formControlName","ppaJobId",1,"form-control"],[3,"value",4,"ngFor","ngForOf"],["value","PERIOD",3,"disabled"],["value","PHASE",3,"disabled"],["value","AMP",3,"disabled"],["value","ERR",3,"disabled"],["id","rhythm","aria-label","Select rhythmicity test","formControlName","rhythmJobId",1,"form-control"],["value","R_TAU",3,"disabled"],["value","R_PEAK",3,"disabled"],["value","R_PERIOD",3,"disabled"],[3,"value"]],template:function(t,e){1&t&&(a.Tb(0,"div",0),a.Tb(1,"form",1),a.Tb(2,"mat-radio-group",2),a.Tb(3,"div",3),a.Tb(4,"label",4),a.Dc(5,"Sort"),a.Sb(),a.Tb(6,"div",5),a.Tb(7,"mat-slide-toggle",6),a.Dc(8,"asc."),a.Sb(),a.Sb(),a.Tb(9,"div",7),a.Tb(10,"mat-radio-button",8),a.Dc(11,"nr."),a.Sb(),a.Tb(12,"mat-radio-button",9),a.Dc(13,"label"),a.Sb(),a.Sb(),a.Sb(),a.Tb(14,"div",3),a.Tb(15,"label",4),a.Dc(16,"PPA Analysis"),a.Sb(),a.Tb(17,"div",5),a.Tb(18,"select",10),a.Bc(19,d,3,6,"option",11),a.Sb(),a.Sb(),a.Tb(20,"div",7),a.Tb(21,"mat-radio-button",12),a.Dc(22,"period"),a.Sb(),a.Tb(23,"mat-radio-button",13),a.Dc(24,"phase"),a.Sb(),a.Tb(25,"mat-radio-button",14),a.Dc(26,"amp."),a.Sb(),a.Tb(27,"mat-radio-button",15),a.Dc(28,"err"),a.Sb(),a.Sb(),a.Sb(),a.Tb(29,"div",3),a.Tb(30,"label",4),a.Dc(31,"Rhythmicity Test"),a.Sb(),a.Tb(32,"div",5),a.Tb(33,"select",16),a.Bc(34,h,3,6,"option",11),a.Sb(),a.Sb(),a.Tb(35,"div",7),a.Tb(36,"mat-radio-button",17),a.Dc(37,"signif."),a.Sb(),a.Tb(38,"mat-radio-button",18),a.Dc(39,"peak"),a.Sb(),a.Tb(40,"mat-radio-button",19),a.Dc(41,"length"),a.Sb(),a.Sb(),a.Sb(),a.Sb(),a.Sb(),a.Sb()),2&t&&(a.Bb(1),a.jc("formGroup",e.mainForm),a.Bb(18),a.jc("ngForOf",e.ppaJobs),a.Bb(2),a.jc("disabled",e.noPPA),a.Bb(2),a.jc("disabled",e.noPPA),a.Bb(2),a.jc("disabled",e.noPPA),a.Bb(2),a.jc("disabled",e.noPPA),a.Bb(7),a.jc("ngForOf",e.rhythmJobs),a.Bb(2),a.jc("disabled",e.noRhythm),a.Bb(2),a.jc("disabled",e.noRhythm),a.Bb(2),a.jc("disabled",e.noRhythm))},directives:[i.D,i.r,i.i,c.b,i.q,i.h,l.a,c.a,i.A,b.l,i.u,i.C],pipes:[b.e],styles:["mat-radio-button[_ngcontent-%COMP%] {\n        margin-right: 0.5em;\n      }"]}),t})()},K5d1:function(t,e,r){"use strict";r.d(e,"a",(function(){return b}));var a=r("XNiG"),i=r("2Vo4"),o=r("PkFh"),s=r("7jps"),n=r("fXoL"),c=r("ETLL"),l=r("FjDX");let b=(()=>{class t{constructor(t,e){this.ppa=t,this.rhythmicity=e,this.error$=new a.a,this.allowedPPAMethods=void 0,this.allowedRhythmMethods=void 0,this.ppaJobs=new i.a([]),this.rhythmJobs=new i.a([]),this.ppaJobs$=this.ppaJobs.asObservable(),this.rhythmJobs$=this.rhythmJobs.asObservable()}ngOnDestroy(){this.ppaJobs.complete(),this.rhythmJobs.complete()}experiment(t){this.fetchPPA(t),this.fetchRhythm(t)}fetchPPA(t){this.ppa.getPPAJobs(t).subscribe(t=>{t=t.filter(t=>o.c.isFinished(t)),this.allowedPPAMethods&&(t=t.filter(t=>this.allowedPPAMethods.includes(t.method))),this.ppaJobs.next(t)},t=>{this.error$.next(t),this.ppaJobs.next([])})}fetchRhythm(t){this.rhythmicity.getJobs(t).subscribe(t=>{t=t.filter(t=>s.e.isFinished(t)),this.allowedRhythmMethods&&(t=t.filter(t=>this.allowedRhythmMethods.includes(t.parameters.METHOD))),this.rhythmJobs.next(t)},t=>{this.error$.next(t),this.rhythmJobs.next([])})}}return t.\u0275fac=function(e){return new(e||t)(n.Xb(c.a),n.Xb(l.a))},t.\u0275prov=n.Jb({token:t,factory:t.\u0275fac}),t})()},d9Wp:function(t,e,r){"use strict";r.r(e),r.d(e,"TsDataModule",(function(){return k}));var a=r("ofXK"),i=r("tyNb"),o=r("yYXI"),s=r("bngM"),n=r("QBpm"),c=r("e8YO"),l=r("Kj3r"),b=r("Iab2"),d=r("K5d1"),h=r("fXoL"),p=r("vejM"),m=r("ZMwR"),u=r("GVyA"),f=r("wcxA"),g=r("3Pt+"),S=r("1jcm"),y=r("M9IT");function T(t,e){if(1&t&&(h.Tb(0,"option",28),h.Dc(1),h.Sb()),2&t){const t=e.$implicit;h.jc("value",t.name),h.Bb(1),h.Ec(t.label)}}function P(t,e){if(1&t&&(h.Tb(0,"option",28),h.Dc(1),h.Sb()),2&t){const t=e.$implicit;h.jc("value",t.name),h.Bb(1),h.Ec(t.label)}}function v(t,e){if(1&t&&(h.Tb(0,"option",28),h.Dc(1),h.Sb()),2&t){const t=e.$implicit;h.jc("value",t.name),h.Bb(1),h.Ec(t.label)}}const D=function(){return[10,25,50,100,200]};let w=(()=>{class t extends f.a{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(h.Nb(g.e))},t.\u0275cmp=h.Hb({type:t,selectors:[["bd2-tsdisplay-params-rform"]],inputs:{disabled:"disabled",totalTraces:"totalTraces",currentPage:"currentPage"},outputs:{displayParams:"displayParams"},features:[h.yb],decls:47,vars:10,consts:[["role","form",1,"form-horizontal","container",3,"formGroup"],[1,"row"],[1,"col-md-8","col-sm-10"],["formGroupName","timeScale",1,"form-group","row"],[1,"col-md-3","col-sm-3"],["for","timeStart",1,"col-md-1","col-sm-2"],["type","number","step","any","min","0","size","5","id","timeStart","required","","formControlName","timeStart",1,"form-control"],["for","timeEnd",1,"col-md-1","col-sm-1"],["type","number","step","any","min","0","size","5","required","","id","timeEnd","formControlName","timeEnd",1,"form-control"],[1,"col-md-2","col-sm-4"],["formControlName","hourly",1,"mr-3"],[1,"form-group","row"],["for","detrending",1,"col-sm-2"],[1,"col-sm-3"],["required","","id","detrending","formControlName","detrending",1,"form-control"],[3,"value",4,"ngFor","ngForOf"],[1,"col-sm-1"],["for","align",1,"col-sm-1"],["required","","id","align","formControlName","align",1,"form-control"],[1,"col-sm-2"],["for","normalisation"],["required","","id","normalisation","formControlName","normalisation",1,"form-control"],[1,"col-sm"],["formControlName","trimFirst",1,"mr-3"],["formControlName","log2"],[1,"col-sm-8"],[3,"length","disabled","pageSize","pageIndex","pageSizeOptions","page"],["dataPaginator",""],[3,"value"]],template:function(t,e){1&t&&(h.Tb(0,"form",0),h.Tb(1,"div",1),h.Tb(2,"div",2),h.Tb(3,"div",3),h.Tb(4,"label",4),h.Dc(5,"Time range"),h.Sb(),h.Tb(6,"label",5),h.Dc(7,"from:"),h.Sb(),h.Tb(8,"div",4),h.Ob(9,"input",6),h.Sb(),h.Tb(10,"label",7),h.Dc(11,"to:"),h.Sb(),h.Tb(12,"div",4),h.Ob(13,"input",8),h.Sb(),h.Sb(),h.Sb(),h.Tb(14,"div",9),h.Tb(15,"mat-slide-toggle",10),h.Dc(16,"hourly"),h.Sb(),h.Sb(),h.Sb(),h.Tb(17,"div",11),h.Tb(18,"label",12),h.Dc(19,"Detrending"),h.Sb(),h.Tb(20,"div",13),h.Tb(21,"select",14),h.Bc(22,T,2,2,"option",15),h.Sb(),h.Sb(),h.Ob(23,"div",16),h.Tb(24,"label",17),h.Dc(25,"Align"),h.Sb(),h.Tb(26,"div",13),h.Tb(27,"select",18),h.Bc(28,P,2,2,"option",15),h.Sb(),h.Sb(),h.Sb(),h.Tb(29,"div",11),h.Tb(30,"div",19),h.Tb(31,"label",20),h.Dc(32,"Normalize"),h.Sb(),h.Sb(),h.Tb(33,"div",13),h.Tb(34,"select",21),h.Bc(35,v,2,2,"option",15),h.Sb(),h.Sb(),h.Tb(36,"div",22),h.Tb(37,"mat-slide-toggle",23),h.Dc(38,"within range"),h.Sb(),h.Tb(39,"mat-slide-toggle",24),h.Dc(40,"log2 transf."),h.Sb(),h.Sb(),h.Sb(),h.Ob(41,"div",11),h.Tb(42,"div",11),h.Ob(43,"label",19),h.Tb(44,"div",25),h.Tb(45,"mat-paginator",26,27),h.Zb("page",(function(t){return e.loadDataPage(t)})),h.Sb(),h.Sb(),h.Sb(),h.Sb()),2&t&&(h.jc("formGroup",e.mainForm),h.Bb(22),h.jc("ngForOf",e.detrendingOptions),h.Bb(6),h.jc("ngForOf",e.alignOptions),h.Bb(7),h.jc("ngForOf",e.normalisationOptions),h.Bb(10),h.jc("length",e.totalTraces)("disabled",e.disabledPagination)("pageSize",e.currentPage.pageSize)("pageIndex",e.currentPage.pageIndex)("pageSizeOptions",h.lc(9,D)))},directives:[g.D,g.r,g.i,g.j,g.v,g.d,g.z,g.q,g.h,S.a,g.A,a.l,y.a,g.u,g.C],encapsulation:2}),t})();var x=r("7EHt"),J=r("117B"),j=r("nA4b");function B(t,e){if(1&t){const t=h.Ub();h.Tb(0,"div",8),h.Dc(1,"Please complete "),h.Tb(2,"a",9),h.Zb("click",(function(){h.sc(t);const e=h.dc(2);return e.goToExpEdit(e.assay.id,"MeasurementSection")})),h.Dc(3,"Measurement details"),h.Sb(),h.Dc(4," to get access to the secondary data "),h.Sb()}}function E(t,e){if(1&t){const t=h.Ub();h.Tb(0,"div",10),h.Tb(1,"label",11),h.Tb(2,"a",12),h.Zb("click",(function(){return h.sc(t),h.dc(2).exportDataView()})),h.Tb(3,"i",13),h.Dc(4,"save_alt"),h.Sb(),h.Tb(5,"span",14),h.Dc(6,"Download"),h.Sb(),h.Sb(),h.Dc(7," current view "),h.Sb(),h.Tb(8,"label",11),h.Tb(9,"a",15),h.Zb("click",(function(){return h.sc(t),h.dc(2).exportFullData()})),h.Tb(10,"i",13),h.Dc(11,"save_alt"),h.Sb(),h.Tb(12,"span",14),h.Dc(13,"Download"),h.Sb(),h.Sb(),h.Dc(14," full "),h.Sb(),h.Sb()}}function O(t,e){if(1&t&&h.Ob(0,"bd2-ts-plots",16),2&t){const t=h.dc(2);h.jc("tracesPerPlot",t.tracesPerPlot)("data",t.timeseries)}}function I(t,e){if(1&t){const t=h.Ub();h.Tb(0,"div"),h.Tb(1,"h3"),h.Dc(2,"Show timeseries"),h.Sb(),h.Ob(3,"hr"),h.Tb(4,"bd2-tsdisplay-params-rform",1),h.Zb("displayParams",(function(e){return h.sc(t),h.dc().displayChanged(e)})),h.Sb(),h.Tb(5,"mat-expansion-panel"),h.Tb(6,"mat-expansion-panel-header"),h.Tb(7,"mat-panel-title"),h.Dc(8," Sorting "),h.Sb(),h.Sb(),h.Ob(9,"bd2-tssort-params-rform",2),h.ec(10,"async"),h.ec(11,"async"),h.Sb(),h.Bc(12,B,5,0,"div",3),h.Ob(13,"hr"),h.Tb(14,"div",4),h.Dc(15," Hint: You can click on trace label box to remove it from the plot. "),h.Sb(),h.Tb(16,"div",5),h.Bc(17,E,15,0,"div",6),h.Sb(),h.Ob(18,"hr"),h.Bc(19,O,1,2,"bd2-ts-plots",7),h.Sb()}if(2&t){const t=h.dc();h.Bb(4),h.jc("disabled",t.disabledSecondary)("totalTraces",t.totalTraces)("currentPage",t.currentPage),h.Bb(5),h.jc("ppaJobs",h.fc(10,8,t.analysis.ppaJobs$))("rhythmJobs",h.fc(11,10,t.analysis.rhythmJobs$)),h.Bb(3),h.jc("ngIf",t.disabledSecondary),h.Bb(5),h.jc("ngIf",t.timeseries),h.Bb(2),h.jc("ngIf",t.timeseries)}}const A=[{path:"",children:[{path:"view/ts",component:(()=>{class t extends o.a{constructor(t,e,r,a,i){super(i),this.analysis=t,this.fetcher=e,this.RDMSocial=r,this.analytics=a,this.timeseries=[],this.totalTraces=0,this.currentPage=s.a.firstPage(),this.tracesPerPlot=5,this.blocked=!1,this.disabledSecondary=!1,this.csvExporter=new c.a,t.allowedPPAMethods=["NLLS","MESA"],this.titlePart=" Data"}ngOnInit(){super.ngOnInit(),this.timeSeriesSubsripction=this.fetcher.seriesPackStream.pipe(Object(l.a)(1e3)).subscribe(t=>{if(!this.assay)return;const e=t.data;this.currentParams=t.params,this.timeseries=e,this.tracesPerPlot=Math.max(5,e.length/20),this.totalTraces=t.totalTraces,this.currentPage=t.currentPage,this.analytics.experimentDataView(this.assay.id)},t=>{console.log("Error in TS subscription: "+t),this.feedback.error(t)}),this.fetcher.error$.subscribe(t=>this.feedback.error(t))}ngOnDestroy(){this.timeSeriesSubsripction&&this.timeSeriesSubsripction.unsubscribe(),this.fetcher.ngOnDestroy(),super.ngOnDestroy()}displayChanged(t){this.fetcher.changeDisplayParams(t)}exportDataView(){this.exportSeriesPack(this.fetcher.current)}exportFullData(){this.fetcher.getFullDataSet(this.assay,this.fetcher.current.params,this.fetcher.current.sorting).subscribe(t=>{this.exportSeriesPack(t,!0)})}exportSeriesPack(t,e=!1){if(!t)return;const r=this.csvExporter.renderCSVTable(t.data,t.params,t.currentPage,t.sorting,this.assay),a=new Blob([r],{type:"text/csv"});b.saveAs(a,`${this.assay.id}_data.${t.params.detrending.name}${e?".full":".page"+(t.currentPage.pageIndex+1)}.csv`),this.recordExport()}recordExport(){this.analytics.experimentDataExport(this.assay.id)}updateModel(t){super.updateModel(t),this.RDMSocial.canProceedByMeasurement(t).then(t=>{this.disabledSecondary=!t}),this.fetcher.experiment(t),this.analysis.experiment(t)}}return t.\u0275fac=function(e){return new(e||t)(h.Nb(d.a),h.Nb(n.a),h.Nb(p.a),h.Nb(m.a),h.Nb(u.a))},t.\u0275cmp=h.Hb({type:t,selectors:[["ng-component"]],features:[h.Ab([n.a,d.a]),h.yb],decls:1,vars:1,consts:[[4,"ngIf"],[3,"disabled","totalTraces","currentPage","displayParams"],[3,"ppaJobs","rhythmJobs"],["type","danger","class","alert alert-danger","role","alert",4,"ngIf"],["type","info","role","alert","dismissible","true","dismissOnTimeout","20000",1,"alert","alert-info"],[1,"clearfix"],["class","float-right",4,"ngIf"],[3,"tracesPerPlot","data",4,"ngIf"],["type","danger","role","alert",1,"alert","alert-danger"],[3,"click"],[1,"float-right"],[1,"mr-4"],["download","","role","button","aria-label","download",1,"btn","btn-primary",2,"color","white",3,"click"],[1,"material-icons","bd-icon"],[1,"cdk-visually-hidden"],["download","","role","button","aria-label","download whole",1,"btn","btn-primary",2,"color","white",3,"click"],[3,"tracesPerPlot","data"]],template:function(t,e){1&t&&h.Bc(0,I,20,12,"div",0),2&t&&h.jc("ngIf",e.assay)},directives:[a.m,w,x.b,x.c,x.d,J.a,j.a],pipes:[a.b],encapsulation:2}),t})()},{path:"view/heatmap",loadChildren:()=>Promise.all([r.e(6),r.e(19)]).then(r.bind(null,"QftV")).then(t=>t.TsHeatmapModule)},{path:"ts-old-import",loadChildren:()=>Promise.all([r.e(0),r.e(18)]).then(r.bind(null,"9Gw/")).then(t=>t.TsOldImportModule)},{path:"ts-import",loadChildren:()=>Promise.all([r.e(0),r.e(20)]).then(r.bind(null,"yPAH")).then(t=>t.TsImportModule)}]}];let M=(()=>{class t{}return t.\u0275mod=h.Lb({type:t}),t.\u0275inj=h.Kb({factory:function(e){return new(e||t)},imports:[[i.f.forChild(A)],i.f]}),t})();var C=r("YiFe"),F=r("a6j2"),N=r("ZTEM");let k=(()=>{class t{}return t.\u0275mod=h.Lb({type:t}),t.\u0275inj=h.Kb({factory:function(e){return new(e||t)},imports:[[a.c,g.k,g.y,C.a,F.a,M,N.a]]}),t})()},e8YO:function(t,e,r){"use strict";r.d(e,"a",(function(){return i}));class a{constructor(t){this.rows=new Map,this.nextColumn=0,this.sorted=!0,null!=t&&(this.sorted=t)}get width(){return this.nextColumn}get size(){return this.rows.size}append(t,e){this.put(t,e,this.nextColumn)}put(t,e,r){this._put(t,e,r),this.nextColumn=Math.max(this.nextColumn,r+1)}putColumn(t,e,r){t.forEach((t,a)=>{this._put(t,e[a],r)}),this.nextColumn=Math.max(this.nextColumn,r+1)}appendColumn(t,e){this.putColumn(t,e,this.nextColumn)}getValue(t,e){const r=this.rows.get(t);return r?r[e]:void 0}getRow(t){return this.rows.get(t)}forEach(t){this.keys().forEach((e,r)=>{const a={key:e,columns:this.rows.get(e)};t(a,r,this)})}forEachFlat(t){this.keys().forEach((e,r)=>{const a=[e].concat(this.rows.get(e));t(a,r,this)})}keys(){return this.sorted?Array.from(this.rows.keys()).sort((t,e)=>t==e?0:t<e?-1:1):Array.from(this.rows.keys())}_put(t,e,r){let a=this.rows.get(t);a||(a=[],this.rows.set(t,a)),a[r]=e}}class i{constructor(){this.SEP=","}renderCSVTable(t,e,r,a,i){const o=this.prepareHeaders(i,e,r,a,t.length);this.appendDataLabels(o,t);const s=this.prepareDataTable(t);let n=this.mapToString(o,this.SEP);return n+=this.mapToString(s,this.SEP),n}prepareHeaders(t,e,r,a,i){const o=this.prepareExpHeaders(t);return this.appendDisplayProperties(o,e),this.appendSortingProperties(o,a),this.appendDataProperties(o,i,r),o}prepareExpHeaders(t){const e=new a(!1);return e.put("Exp Id:",""+t.id,0),e.put("Exp URL:","https://biodare2.ed.ac.uk/experiment/"+t.id,0),e.put("Exp Name:",t.name,0),t.contributionDesc.authors.forEach((t,r)=>{e.put("Authors:",t.name,r)}),e}appendDisplayProperties(t,e){t.put("Time range:",e.timeScaleLabel,0),t.put("Detrending:",e.detrending.label,0),e.hourly&&t.put("Hourly binned:","true",0),e.log2&&t.put("Log2 transform:",""+e.log2,0),t.put("Normalization:",e.normalisation,0),t.put("Normalization:",e.trimFirst?"within range":"whole serie",1),t.put("Align:",e.align,0)}appendSortingProperties(t,e){t.put("Sorting:",`${e.active} ${e.direction}`,0),t.put("Sorting jobs:",`${e.ppaJobId} ${e.rhythmJobId}`,0)}appendDataProperties(t,e,r){t.put("Traces",e+" of "+r.length,0);const a=Math.floor(r.length/r.pageSize)+(r.length%r.pageSize==0?0:1);t.put("Data Page",r.pageIndex+1+" of "+a,0)}appendDataLabels(t,e){e.forEach((e,r)=>{t.put("Label:",e.label,r)})}prepareDataTable(t){const e=new a;return t.forEach(t=>{const r=t.data.map(t=>t.x),a=t.data.map(t=>t.y);e.appendColumn(r,a)}),e}mapToString(t,e){let r="";return t.forEachFlat(t=>{for(let a=0;a<t.length;a++)void 0!==t[a]&&(r+=t[a]),r+=e;r+="\n"}),r}}}}]);