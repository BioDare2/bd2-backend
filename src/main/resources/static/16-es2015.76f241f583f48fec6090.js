(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{Sypl:function(l,n,u){"use strict";u.r(n);var e=u("8Y7J");class t{}var r=u("t68o"),a=u("f0Ef"),i=u("NcP4"),s=u("pMnS"),o=u("b8ec"),b=u("nA4b"),c=u("s7LF"),d=u("SVse"),h=u("b1+6"),m=u("OIZN"),p=u("Tl2h");let g=(()=>{class l{constructor(l,n){this._name=l,this._label=n}get name(){return this._name}get label(){return this._label}static get(n){return l.getValuesMap().get(n)}static getValuesMap(){return l.valuesMap||(l.valuesMap=l.initValuesMap()),l.valuesMap}static initValuesMap(){const n=new Map;return l.values.forEach(l=>n.set(l.name,l)),n}toJSON(){return this.name}}return l.BD2EJTK=new l("BD2EJTK","BD2 eJTK"),l.values=[l.BD2EJTK],l})();const f=[g.BD2EJTK];let E=(()=>{class l{constructor(l,n){this._name=l,this._label=n}get name(){return this._name}get label(){return this._label}static get(n){return l.getValuesMap().get(n)}static getValuesMap(){return l.valuesMap||(l.valuesMap=l.initValuesMap()),l.valuesMap}static initValuesMap(){const n=new Map;return l.values.forEach(l=>n.set(l.name,l)),n}toJSON(){return this.name}}return l.EJTK_CLASSIC=new l("EJTK_CLASSIC","eJTK Classic"),l.BD2_CLASSIC=new l("BD2_CLASSIC","BD2 Classic"),l.BD2_SPREAD=new l("BD2_SPREAD","Period range"),l.values=[l.EJTK_CLASSIC,l.BD2_CLASSIC,l.BD2_SPREAD],l})();const v=[E.EJTK_CLASSIC,E.BD2_CLASSIC];class C{isValid(){return!(this.windowStart<0||this.windowEnd<0||this.periodMin<=0||this.periodMax<=0||this.periodMin>this.periodMax||this.windowEnd>0&&this.windowStart>=this.windowEnd||null==this.method||null==this.preset||null==this.detrending)}}class y{static sameJob(l,n){return!(!l||!n)&&l.jobId===n.jobId&&l.parentId===n.parentId}}class O{constructor(l=0,n=!1,u=!1,e=!1){this.pValue=l,this.bhCorrection=n,this.showPattern=u,this.circadian=e}clone(){return new O(this.pValue,this.bhCorrection,this.showPattern,this.circadian)}}var M=u("wcxA");class _ extends M.a{constructor(l){super(l),this.methodOptions=f,this.presetOptions=v,this.dataHelp=!1,this.presetsHelp=!1,this.methodHelp=!1,this.rhythmicityRequests=new e.m,this.detrendingOptions=[p.b.NO_DTR,p.b.LIN_DTR]}buildMainForm(){return this.fb.group({displayParams:this.displayParamsForm,periodScale:this.fb.group({periodMin:[18,[c.C.required]],periodMax:[34,[c.C.required]]},{validator:l=>this.validPeriodScale(l.value)}),method:[g.BD2EJTK.name,[c.C.required]],preset:[E.EJTK_CLASSIC.name,[c.C.required]]})}defaultDetrending(){return p.b.NO_DTR.name}validPeriodScale(l){const n=l.periodMin,u=l.periodMax;return n<10?{validPeriodScale:"Period min must >= 10"}:u<10?{validPeriodScale:"Period max must >= 10"}:u>50?{validPeriodScale:"Period max must < 50"}:n>=u?{validPeriodScale:"Period min must be < max"}:null}analyse(){if(this.mainForm.invalid)return;const l=this.map2RhythmicityRequest(this.mainForm.value);l.isValid()&&this.rhythmicityRequests.next(l)}map2RhythmicityRequest(l){const n=new C;return n.detrending=p.b.get(l.displayParams.detrending),n.method=g.get(l.method),n.preset=E.get(l.preset),n.periodMax=l.periodScale.periodMax,n.periodMin=l.periodScale.periodMin,n.windowEnd=l.displayParams.timeScale.timeEnd,n.windowStart=l.displayParams.timeScale.timeStart,n}}var S=e.qb({encapsulation:2,styles:[],data:{}});function I(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,3,"option",[],null,null,null,null,null)),e.rb(1,147456,null,0,c.v,[e.k,e.D,[2,c.B]],{value:[0,"value"]},null),e.rb(2,147456,null,0,c.G,[e.k,e.D,[8,null]],{value:[0,"value"]},null),(l()(),e.Mb(3,null,["",""]))],(function(l,n){l(n,1,0,n.context.$implicit.name),l(n,2,0,n.context.$implicit.name)}),(function(l,n){l(n,3,0,n.context.$implicit.label)}))}function k(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,6,"div",[["class","col-sm-12"]],null,null,null,null,null)),(l()(),e.sb(1,0,null,null,5,"div",[["class","alert alert-info"],["role","alert"],["type","info"]],null,null,null,null,null)),(l()(),e.Mb(-1,null,[" Rhythmicity tests are generally used for short, sparse timeseries. "])),(l()(),e.sb(3,0,null,null,0,"br",[],null,null,null,null,null)),(l()(),e.Mb(-1,null,[" The current limit is 5 or 4 days of hourly sampled data for eJTK preset and BD2 preset respectivelly."])),(l()(),e.sb(5,0,null,null,0,"br",[],null,null,null,null,null)),(l()(),e.Mb(-1,null,[" Generally the raw data are being analysed, but we also enabled a linear detrended option. "]))],null,null)}function J(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,3,"option",[],null,null,null,null,null)),e.rb(1,147456,null,0,c.v,[e.k,e.D,[2,c.B]],{value:[0,"value"]},null),e.rb(2,147456,null,0,c.G,[e.k,e.D,[8,null]],{value:[0,"value"]},null),(l()(),e.Mb(3,null,["",""]))],(function(l,n){l(n,1,0,n.context.$implicit.name),l(n,2,0,n.context.$implicit.name)}),(function(l,n){l(n,3,0,n.context.$implicit.label)}))}function D(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,5,"div",[["class","col-sm-12"]],null,null,null,null,null)),(l()(),e.sb(1,0,null,null,4,"div",[["class","alert alert-info"],["role","alert"],["type","info"]],null,null,null,null,null)),(l()(),e.Mb(-1,null,[" BD2 eJTK is the BioDare2 implementation of Empirical JTK_CYCLE with asymmetry search from "])),(l()(),e.sb(3,0,null,null,1,"a",[["href"," https://doi.org/10.1371/journal.pcbi.1004094"],["target","_blank"]],null,null,null,null,null)),(l()(),e.Mb(-1,null,["Alan L. Hutchison et al. 2015"])),(l()(),e.Mb(-1,null,[". It is a classic JTK method but with p values empirically calculated against set of random noise data. "]))],null,null)}function P(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,3,"option",[],null,null,null,null,null)),e.rb(1,147456,null,0,c.v,[e.k,e.D,[2,c.B]],{value:[0,"value"]},null),e.rb(2,147456,null,0,c.G,[e.k,e.D,[8,null]],{value:[0,"value"]},null),(l()(),e.Mb(3,null,["",""]))],(function(l,n){l(n,1,0,n.context.$implicit.name),l(n,2,0,n.context.$implicit.name)}),(function(l,n){l(n,3,0,n.context.$implicit.label)}))}function T(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,22,"div",[["class","col-sm-12"]],null,null,null,null,null)),(l()(),e.sb(1,0,null,null,21,"div",[["class","alert alert-info"],["role","alert"],["type","info"]],null,null,null,null,null)),(l()(),e.Mb(-1,null,[" Presets determine set of pattern curves against the comparison test is run."])),(l()(),e.sb(3,0,null,null,0,"br",[],null,null,null,null,null)),(l()(),e.sb(4,0,null,null,18,"ul",[],null,null,null,null,null)),(l()(),e.sb(5,0,null,null,6,"li",[],null,null,null,null,null)),(l()(),e.Mb(-1,null,["eJTK Classic is recommended for typical omics-like data for which eJTK method was developed. "])),(l()(),e.sb(7,0,null,null,0,"br",[],null,null,null,null,null)),(l()(),e.Mb(-1,null,[" It works well for short data (48h, 2h- 1h-sampled) when actual period is within range 22-26 hours."])),(l()(),e.sb(9,0,null,null,0,"br",[],null,null,null,null,null)),(l()(),e.Mb(-1,null,[" The patterns are series of cosine-like waveforms with 24h period, phases by 2hours and range of asymmetries by 2h (see original paper)."])),(l()(),e.sb(11,0,null,null,0,"br",[],null,null,null,null,null)),(l()(),e.sb(12,0,null,null,10,"li",[],null,null,null,null,null)),(l()(),e.Mb(-1,null,["BD2 Classic can detect non 24 periods and some forms of the spikes."])),(l()(),e.sb(14,0,null,null,0,"br",[],null,null,null,null,null)),(l()(),e.Mb(-1,null,[" As it compares against much more patterns it has a weaker power."])),(l()(),e.sb(16,0,null,null,0,"br",[],null,null,null,null,null)),(l()(),e.Mb(-1,null,[" It should be used when there is a good reason to suspect periods outside 22-26h range."])),(l()(),e.sb(18,0,null,null,0,"br",[],null,null,null,null,null)),(l()(),e.Mb(-1,null,[" The patterns are series of cosine-like waverforms with periods from 18-35hours, for each period there are multiple "])),(l()(),e.sb(20,0,null,null,1,"b",[],null,null,null,null,null)),(l()(),e.Mb(-1,null,["circadian"])),(l()(),e.Mb(-1,null,[" phases with step 2h (so each period value generates the same number of patterns but the peaks in absolute units do not coincide) and a range of assymetries by 2h in circadian units (see original paper). The preset contains also additional some spike patterns. "]))],null,null)}function w(l){return e.Ob(0,[e.Kb(402653184,1,{dataPaginator:0}),(l()(),e.sb(1,0,null,null,133,"form",[["class","form-horizontal"],["novalidate",""],["role","form"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],(function(l,n,u){var t=!0;return"submit"===n&&(t=!1!==e.Eb(l,3).onSubmit(u)&&t),"reset"===n&&(t=!1!==e.Eb(l,3).onReset()&&t),t}),null,null)),e.rb(2,16384,null,0,c.H,[],null,null),e.rb(3,540672,null,0,c.j,[[8,null],[8,null]],{form:[0,"form"]},null),e.Jb(2048,null,c.d,null,[c.j]),e.rb(5,16384,null,0,c.s,[[4,c.d]],null,null),(l()(),e.sb(6,0,null,null,50,"div",[["formGroupName","displayParams"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,null,null)),e.rb(7,212992,null,0,c.k,[[3,c.d],[8,null],[8,null]],{name:[0,"name"]},null),e.Jb(2048,null,c.d,null,[c.k]),e.rb(9,16384,null,0,c.s,[[4,c.d]],null,null),(l()(),e.sb(10,0,null,null,29,"div",[["class","form-group row"],["formGroupName","timeScale"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,null,null)),e.rb(11,212992,null,0,c.k,[[3,c.d],[8,null],[8,null]],{name:[0,"name"]},null),e.Jb(2048,null,c.d,null,[c.k]),e.rb(13,16384,null,0,c.s,[[4,c.d]],null,null),(l()(),e.sb(14,0,null,null,1,"label",[["class","col-sm-4"]],null,null,null,null,null)),(l()(),e.Mb(-1,null,["Data window"])),(l()(),e.sb(16,0,null,null,1,"label",[["class","col-sm-1"],["for","windowStart"]],null,null,null,null,null)),(l()(),e.Mb(-1,null,["from:"])),(l()(),e.sb(18,0,null,null,9,"div",[["class","col-sm-2"]],null,null,null,null,null)),(l()(),e.sb(19,0,null,null,8,"input",[["class","form-control"],["formControlName","timeStart"],["id","windowStart"],["min","0"],["required",""],["size","5"],["step","any"],["type","number"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],(function(l,n,u){var t=!0;return"input"===n&&(t=!1!==e.Eb(l,20)._handleInput(u.target.value)&&t),"blur"===n&&(t=!1!==e.Eb(l,20).onTouched()&&t),"compositionstart"===n&&(t=!1!==e.Eb(l,20)._compositionStart()&&t),"compositionend"===n&&(t=!1!==e.Eb(l,20)._compositionEnd(u.target.value)&&t),"change"===n&&(t=!1!==e.Eb(l,21).onChange(u.target.value)&&t),"input"===n&&(t=!1!==e.Eb(l,21).onChange(u.target.value)&&t),"blur"===n&&(t=!1!==e.Eb(l,21).onTouched()&&t),t}),null,null)),e.rb(20,16384,null,0,c.e,[e.D,e.k,[2,c.a]],null,null),e.rb(21,16384,null,0,c.w,[e.D,e.k],null,null),e.rb(22,16384,null,0,c.A,[],{required:[0,"required"]},null),e.Jb(1024,null,c.o,(function(l){return[l]}),[c.A]),e.Jb(1024,null,c.p,(function(l,n){return[l,n]}),[c.e,c.w]),e.rb(25,671744,null,0,c.i,[[3,c.d],[6,c.o],[8,null],[6,c.p],[2,c.F]],{name:[0,"name"]},null),e.Jb(2048,null,c.q,null,[c.i]),e.rb(27,16384,null,0,c.r,[[4,c.q]],null,null),(l()(),e.sb(28,0,null,null,1,"label",[["class","col-sm-1"],["for","windowEnd"]],null,null,null,null,null)),(l()(),e.Mb(-1,null,["to:"])),(l()(),e.sb(30,0,null,null,9,"div",[["class","col-sm-2"]],null,null,null,null,null)),(l()(),e.sb(31,0,null,null,8,"input",[["class","form-control"],["formControlName","timeEnd"],["id","windowEnd"],["min","0"],["placeholder",""],["required",""],["size","5"],["step","any"],["type","number"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],(function(l,n,u){var t=!0;return"input"===n&&(t=!1!==e.Eb(l,32)._handleInput(u.target.value)&&t),"blur"===n&&(t=!1!==e.Eb(l,32).onTouched()&&t),"compositionstart"===n&&(t=!1!==e.Eb(l,32)._compositionStart()&&t),"compositionend"===n&&(t=!1!==e.Eb(l,32)._compositionEnd(u.target.value)&&t),"change"===n&&(t=!1!==e.Eb(l,33).onChange(u.target.value)&&t),"input"===n&&(t=!1!==e.Eb(l,33).onChange(u.target.value)&&t),"blur"===n&&(t=!1!==e.Eb(l,33).onTouched()&&t),t}),null,null)),e.rb(32,16384,null,0,c.e,[e.D,e.k,[2,c.a]],null,null),e.rb(33,16384,null,0,c.w,[e.D,e.k],null,null),e.rb(34,16384,null,0,c.A,[],{required:[0,"required"]},null),e.Jb(1024,null,c.o,(function(l){return[l]}),[c.A]),e.Jb(1024,null,c.p,(function(l,n){return[l,n]}),[c.e,c.w]),e.rb(37,671744,null,0,c.i,[[3,c.d],[6,c.o],[8,null],[6,c.p],[2,c.F]],{name:[0,"name"]},null),e.Jb(2048,null,c.q,null,[c.i]),e.rb(39,16384,null,0,c.r,[[4,c.q]],null,null),(l()(),e.sb(40,0,null,null,16,"div",[["class","form-group row"]],null,null,null,null,null)),(l()(),e.sb(41,0,null,null,4,"label",[["class","col-sm-4"],["for","detrending"]],null,null,null,null,null)),(l()(),e.Mb(-1,null,["Input Data "])),(l()(),e.sb(43,0,null,null,2,"a",[],null,[[null,"click"]],(function(l,n,u){var e=!0,t=l.component;return"click"===n&&(e=0!=(t.dataHelp=!t.dataHelp)&&e),e}),null,null)),(l()(),e.sb(44,0,null,null,1,"i",[["class","material-icons bd-icon bd-primary"]],null,null,null,null,null)),(l()(),e.Mb(-1,null,["help"])),(l()(),e.sb(46,0,null,null,10,"div",[["class","col-sm-6"]],null,null,null,null,null)),(l()(),e.sb(47,0,null,null,9,"select",[["class","form-control"],["formControlName","detrending"],["id","detrending"],["required",""]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"blur"]],(function(l,n,u){var t=!0;return"change"===n&&(t=!1!==e.Eb(l,48).onChange(u.target.value)&&t),"blur"===n&&(t=!1!==e.Eb(l,48).onTouched()&&t),t}),null,null)),e.rb(48,16384,null,0,c.B,[e.D,e.k],null,null),e.rb(49,16384,null,0,c.A,[],{required:[0,"required"]},null),e.Jb(1024,null,c.o,(function(l){return[l]}),[c.A]),e.Jb(1024,null,c.p,(function(l){return[l]}),[c.B]),e.rb(52,671744,null,0,c.i,[[3,c.d],[6,c.o],[8,null],[6,c.p],[2,c.F]],{name:[0,"name"]},null),e.Jb(2048,null,c.q,null,[c.i]),e.rb(54,16384,null,0,c.r,[[4,c.q]],null,null),(l()(),e.hb(16777216,null,null,1,null,I)),e.rb(56,278528,null,0,d.l,[e.O,e.L,e.r],{ngForOf:[0,"ngForOf"]},null),(l()(),e.hb(16777216,null,null,1,null,k)),e.rb(58,16384,null,0,d.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.sb(59,0,null,null,16,"div",[["class","form-group row"]],null,null,null,null,null)),(l()(),e.sb(60,0,null,null,4,"label",[["class","col-sm-4"],["for","method"]],null,null,null,null,null)),(l()(),e.Mb(-1,null,["Test Method "])),(l()(),e.sb(62,0,null,null,2,"a",[],null,[[null,"click"]],(function(l,n,u){var e=!0,t=l.component;return"click"===n&&(e=0!=(t.methodHelp=!t.methodHelp)&&e),e}),null,null)),(l()(),e.sb(63,0,null,null,1,"i",[["class","material-icons bd-icon bd-primary"]],null,null,null,null,null)),(l()(),e.Mb(-1,null,["help"])),(l()(),e.sb(65,0,null,null,10,"div",[["class","col-sm-6"]],null,null,null,null,null)),(l()(),e.sb(66,0,null,null,9,"select",[["class","form-control"],["formControlName","method"],["id","method"],["required",""]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"blur"]],(function(l,n,u){var t=!0;return"change"===n&&(t=!1!==e.Eb(l,67).onChange(u.target.value)&&t),"blur"===n&&(t=!1!==e.Eb(l,67).onTouched()&&t),t}),null,null)),e.rb(67,16384,null,0,c.B,[e.D,e.k],null,null),e.rb(68,16384,null,0,c.A,[],{required:[0,"required"]},null),e.Jb(1024,null,c.o,(function(l){return[l]}),[c.A]),e.Jb(1024,null,c.p,(function(l){return[l]}),[c.B]),e.rb(71,671744,null,0,c.i,[[3,c.d],[6,c.o],[8,null],[6,c.p],[2,c.F]],{name:[0,"name"]},null),e.Jb(2048,null,c.q,null,[c.i]),e.rb(73,16384,null,0,c.r,[[4,c.q]],null,null),(l()(),e.hb(16777216,null,null,1,null,J)),e.rb(75,278528,null,0,d.l,[e.O,e.L,e.r],{ngForOf:[0,"ngForOf"]},null),(l()(),e.hb(16777216,null,null,1,null,D)),e.rb(77,16384,null,0,d.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.sb(78,0,null,null,16,"div",[["class","form-group row"]],null,null,null,null,null)),(l()(),e.sb(79,0,null,null,4,"label",[["class","col-sm-4"],["for","method"]],null,null,null,null,null)),(l()(),e.Mb(-1,null,["Analysis Presets "])),(l()(),e.sb(81,0,null,null,2,"a",[],null,[[null,"click"]],(function(l,n,u){var e=!0,t=l.component;return"click"===n&&(e=0!=(t.presetsHelp=!t.presetsHelp)&&e),e}),null,null)),(l()(),e.sb(82,0,null,null,1,"i",[["class","material-icons bd-icon bd-primary"]],null,null,null,null,null)),(l()(),e.Mb(-1,null,["help"])),(l()(),e.sb(84,0,null,null,10,"div",[["class","col-sm-6"]],null,null,null,null,null)),(l()(),e.sb(85,0,null,null,9,"select",[["class","form-control"],["formControlName","preset"],["id","preset"],["required",""]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"blur"]],(function(l,n,u){var t=!0;return"change"===n&&(t=!1!==e.Eb(l,86).onChange(u.target.value)&&t),"blur"===n&&(t=!1!==e.Eb(l,86).onTouched()&&t),t}),null,null)),e.rb(86,16384,null,0,c.B,[e.D,e.k],null,null),e.rb(87,16384,null,0,c.A,[],{required:[0,"required"]},null),e.Jb(1024,null,c.o,(function(l){return[l]}),[c.A]),e.Jb(1024,null,c.p,(function(l){return[l]}),[c.B]),e.rb(90,671744,null,0,c.i,[[3,c.d],[6,c.o],[8,null],[6,c.p],[2,c.F]],{name:[0,"name"]},null),e.Jb(2048,null,c.q,null,[c.i]),e.rb(92,16384,null,0,c.r,[[4,c.q]],null,null),(l()(),e.hb(16777216,null,null,1,null,P)),e.rb(94,278528,null,0,d.l,[e.O,e.L,e.r],{ngForOf:[0,"ngForOf"]},null),(l()(),e.hb(16777216,null,null,1,null,T)),e.rb(96,16384,null,0,d.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.sb(97,0,null,null,29,"div",[["class","form-group row"],["formGroupName","periodScale"]],[[8,"hidden",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,null,null)),e.rb(98,212992,null,0,c.k,[[3,c.d],[8,null],[8,null]],{name:[0,"name"]},null),e.Jb(2048,null,c.d,null,[c.k]),e.rb(100,16384,null,0,c.s,[[4,c.d]],null,null),(l()(),e.sb(101,0,null,null,1,"label",[["class","col-sm-4"]],null,null,null,null,null)),(l()(),e.Mb(-1,null,["Expected periods"])),(l()(),e.sb(103,0,null,null,1,"label",[["class","col-sm-1"],["for","periodMin"]],null,null,null,null,null)),(l()(),e.Mb(-1,null,["from:"])),(l()(),e.sb(105,0,null,null,9,"div",[["class","col-sm-2"]],null,null,null,null,null)),(l()(),e.sb(106,0,null,null,8,"input",[["class","form-control"],["formControlName","periodMin"],["id","periodMin"],["max","50"],["min","10"],["placeholder",""],["required",""],["size","5"],["step","any"],["type","number"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],(function(l,n,u){var t=!0;return"input"===n&&(t=!1!==e.Eb(l,107)._handleInput(u.target.value)&&t),"blur"===n&&(t=!1!==e.Eb(l,107).onTouched()&&t),"compositionstart"===n&&(t=!1!==e.Eb(l,107)._compositionStart()&&t),"compositionend"===n&&(t=!1!==e.Eb(l,107)._compositionEnd(u.target.value)&&t),"change"===n&&(t=!1!==e.Eb(l,108).onChange(u.target.value)&&t),"input"===n&&(t=!1!==e.Eb(l,108).onChange(u.target.value)&&t),"blur"===n&&(t=!1!==e.Eb(l,108).onTouched()&&t),t}),null,null)),e.rb(107,16384,null,0,c.e,[e.D,e.k,[2,c.a]],null,null),e.rb(108,16384,null,0,c.w,[e.D,e.k],null,null),e.rb(109,16384,null,0,c.A,[],{required:[0,"required"]},null),e.Jb(1024,null,c.o,(function(l){return[l]}),[c.A]),e.Jb(1024,null,c.p,(function(l,n){return[l,n]}),[c.e,c.w]),e.rb(112,671744,null,0,c.i,[[3,c.d],[6,c.o],[8,null],[6,c.p],[2,c.F]],{name:[0,"name"]},null),e.Jb(2048,null,c.q,null,[c.i]),e.rb(114,16384,null,0,c.r,[[4,c.q]],null,null),(l()(),e.sb(115,0,null,null,1,"label",[["class","col-sm-1"],["for","periodMax"]],null,null,null,null,null)),(l()(),e.Mb(-1,null,["to:"])),(l()(),e.sb(117,0,null,null,9,"div",[["class","col-sm-2"]],null,null,null,null,null)),(l()(),e.sb(118,0,null,null,8,"input",[["class","form-control"],["formControlName","periodMax"],["id","periodMax"],["max","50"],["min","10"],["placeholder",""],["required",""],["size","5"],["step","any"],["type","number"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],(function(l,n,u){var t=!0;return"input"===n&&(t=!1!==e.Eb(l,119)._handleInput(u.target.value)&&t),"blur"===n&&(t=!1!==e.Eb(l,119).onTouched()&&t),"compositionstart"===n&&(t=!1!==e.Eb(l,119)._compositionStart()&&t),"compositionend"===n&&(t=!1!==e.Eb(l,119)._compositionEnd(u.target.value)&&t),"change"===n&&(t=!1!==e.Eb(l,120).onChange(u.target.value)&&t),"input"===n&&(t=!1!==e.Eb(l,120).onChange(u.target.value)&&t),"blur"===n&&(t=!1!==e.Eb(l,120).onTouched()&&t),t}),null,null)),e.rb(119,16384,null,0,c.e,[e.D,e.k,[2,c.a]],null,null),e.rb(120,16384,null,0,c.w,[e.D,e.k],null,null),e.rb(121,16384,null,0,c.A,[],{required:[0,"required"]},null),e.Jb(1024,null,c.o,(function(l){return[l]}),[c.A]),e.Jb(1024,null,c.p,(function(l,n){return[l,n]}),[c.e,c.w]),e.rb(124,671744,null,0,c.i,[[3,c.d],[6,c.o],[8,null],[6,c.p],[2,c.F]],{name:[0,"name"]},null),e.Jb(2048,null,c.q,null,[c.i]),e.rb(126,16384,null,0,c.r,[[4,c.q]],null,null),(l()(),e.sb(127,0,null,null,5,"div",[["class","form-group row"]],null,null,null,null,null)),(l()(),e.sb(128,0,null,null,0,"label",[["class","col-sm-2"]],null,null,null,null,null)),(l()(),e.sb(129,0,null,null,3,"div",[["class","col-sm-8"]],null,null,null,null,null)),(l()(),e.sb(130,0,null,null,2,"mat-paginator",[["class","mat-paginator"]],null,[[null,"page"]],(function(l,n,u){var e=!0;return"page"===n&&(e=!1!==l.component.loadDataPage(u)&&e),e}),h.b,h.a)),e.rb(131,245760,[[1,4],["dataPaginator",4]],0,m.b,[m.c,e.h],{disabled:[0,"disabled"],pageIndex:[1,"pageIndex"],length:[2,"length"],pageSize:[3,"pageSize"],pageSizeOptions:[4,"pageSizeOptions"]},{page:"page"}),e.Fb(132,5),(l()(),e.sb(133,0,null,null,1,"button",[["class","btn btn-primary"],["type","button"]],[[8,"disabled",0]],[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.analyse()&&e),e}),null,null)),(l()(),e.Mb(-1,null,["Test Rhythmicity "]))],(function(l,n){var u=n.component;l(n,3,0,u.mainForm),l(n,7,0,"displayParams"),l(n,11,0,"timeScale"),l(n,22,0,""),l(n,25,0,"timeStart"),l(n,34,0,""),l(n,37,0,"timeEnd"),l(n,49,0,""),l(n,52,0,"detrending"),l(n,56,0,u.detrendingOptions),l(n,58,0,u.dataHelp),l(n,68,0,""),l(n,71,0,"method"),l(n,75,0,u.methodOptions),l(n,77,0,u.methodHelp),l(n,87,0,""),l(n,90,0,"preset"),l(n,94,0,u.presetOptions),l(n,96,0,u.presetsHelp),l(n,98,0,"periodScale"),l(n,109,0,""),l(n,112,0,"periodMin"),l(n,121,0,""),l(n,124,0,"periodMax");var e=u.disabledPagination,t=u.currentPage.pageIndex,r=u.totalTraces,a=u.currentPage.pageSize,i=l(n,132,0,10,25,50,100,200);l(n,131,0,e,t,r,a,i)}),(function(l,n){var u=n.component;l(n,1,0,e.Eb(n,5).ngClassUntouched,e.Eb(n,5).ngClassTouched,e.Eb(n,5).ngClassPristine,e.Eb(n,5).ngClassDirty,e.Eb(n,5).ngClassValid,e.Eb(n,5).ngClassInvalid,e.Eb(n,5).ngClassPending),l(n,6,0,e.Eb(n,9).ngClassUntouched,e.Eb(n,9).ngClassTouched,e.Eb(n,9).ngClassPristine,e.Eb(n,9).ngClassDirty,e.Eb(n,9).ngClassValid,e.Eb(n,9).ngClassInvalid,e.Eb(n,9).ngClassPending),l(n,10,0,e.Eb(n,13).ngClassUntouched,e.Eb(n,13).ngClassTouched,e.Eb(n,13).ngClassPristine,e.Eb(n,13).ngClassDirty,e.Eb(n,13).ngClassValid,e.Eb(n,13).ngClassInvalid,e.Eb(n,13).ngClassPending),l(n,19,0,e.Eb(n,22).required?"":null,e.Eb(n,27).ngClassUntouched,e.Eb(n,27).ngClassTouched,e.Eb(n,27).ngClassPristine,e.Eb(n,27).ngClassDirty,e.Eb(n,27).ngClassValid,e.Eb(n,27).ngClassInvalid,e.Eb(n,27).ngClassPending),l(n,31,0,e.Eb(n,34).required?"":null,e.Eb(n,39).ngClassUntouched,e.Eb(n,39).ngClassTouched,e.Eb(n,39).ngClassPristine,e.Eb(n,39).ngClassDirty,e.Eb(n,39).ngClassValid,e.Eb(n,39).ngClassInvalid,e.Eb(n,39).ngClassPending),l(n,47,0,e.Eb(n,49).required?"":null,e.Eb(n,54).ngClassUntouched,e.Eb(n,54).ngClassTouched,e.Eb(n,54).ngClassPristine,e.Eb(n,54).ngClassDirty,e.Eb(n,54).ngClassValid,e.Eb(n,54).ngClassInvalid,e.Eb(n,54).ngClassPending),l(n,66,0,e.Eb(n,68).required?"":null,e.Eb(n,73).ngClassUntouched,e.Eb(n,73).ngClassTouched,e.Eb(n,73).ngClassPristine,e.Eb(n,73).ngClassDirty,e.Eb(n,73).ngClassValid,e.Eb(n,73).ngClassInvalid,e.Eb(n,73).ngClassPending),l(n,85,0,e.Eb(n,87).required?"":null,e.Eb(n,92).ngClassUntouched,e.Eb(n,92).ngClassTouched,e.Eb(n,92).ngClassPristine,e.Eb(n,92).ngClassDirty,e.Eb(n,92).ngClassValid,e.Eb(n,92).ngClassInvalid,e.Eb(n,92).ngClassPending),l(n,97,0,!0,e.Eb(n,100).ngClassUntouched,e.Eb(n,100).ngClassTouched,e.Eb(n,100).ngClassPristine,e.Eb(n,100).ngClassDirty,e.Eb(n,100).ngClassValid,e.Eb(n,100).ngClassInvalid,e.Eb(n,100).ngClassPending),l(n,106,0,e.Eb(n,109).required?"":null,e.Eb(n,114).ngClassUntouched,e.Eb(n,114).ngClassTouched,e.Eb(n,114).ngClassPristine,e.Eb(n,114).ngClassDirty,e.Eb(n,114).ngClassValid,e.Eb(n,114).ngClassInvalid,e.Eb(n,114).ngClassPending),l(n,118,0,e.Eb(n,121).required?"":null,e.Eb(n,126).ngClassUntouched,e.Eb(n,126).ngClassTouched,e.Eb(n,126).ngClassPristine,e.Eb(n,126).ngClassDirty,e.Eb(n,126).ngClassValid,e.Eb(n,126).ngClassInvalid,e.Eb(n,126).ngClassPending),l(n,133,0,u.disabled||u.mainForm.invalid)}))}var x=u("QBpm"),A=u("ZC3s"),R=u("Iurr"),L=u("yYXI");class j extends L.a{constructor(l,n){super(n),this.rhythmicityService=l,this.titlePart=" Rhythm"}goToRhythmicityHome(l){const n=this.expHomePath(l);n.push("rhythmicity"),this.router.navigate(n)}}var K=u("Kj3r"),N=u("bngM");class q extends j{constructor(l,n,u,e,t){super(e,t),this.fetcher=l,this.analytics=n,this.userService=u,this.disabled=!1,this.blocked=!1,this.tracesPerPlot=5,this.totalTraces=0,this.currentPage=N.a.firstPage(),this.titlePart=" New Test"}ngOnInit(){super.ngOnInit(),this.timeSeriesSubsripction=this.fetcher.seriesPackStream.pipe(Object(K.a)(1e3)).subscribe(l=>{const n=l.data;this.tracesPerPlot=Math.max(5,n.length/20),this.timeseries=n,this.totalTraces=l.totalTraces,this.currentPage=l.currentPage},l=>{console.log("Error in TS subscription: "+l),this.feedback.error(l)})}ngOnDestroy(){this.timeSeriesSubsripction&&this.timeSeriesSubsripction.unsubscribe(),this.fetcher.ngOnDestroy(),super.ngOnDestroy()}emitDisplayParams(l){this.fetcher.changeDisplayParams(l)}doAnalysis(l){l.isValid()&&(this.blocked=!0,this.rhythmicityService.newTest(this.assay,l).subscribe(n=>{this.feedback.success("Rhythmicity test submitted"),this.analytics.rhythmicityNew(l.method.name,this.assay.id,this.userService.currentUser.login),this.refreshModel(),this.goToRhythmicityHome()},l=>{this.blocked=!1,this.feedback.error(l)}))}updateModel(l){this.fetcher.experiment(l),super.updateModel(l)}}var H=u("ZMwR"),F=u("naqj"),U=u("lJxs"),$=u("UsWK");let B=(()=>{class l{constructor(l){this.BD2REST=l}newTest(l,n){return this.BD2REST.rhythmicityNew(l.id,n)}getJob(l,n){return this.BD2REST.rhythmicityJob(l,n)}getJobs(l){return this.BD2REST.rhythmicityJobs(l.id).pipe(Object(U.a)(l=>l.data))}getResults(l,n){return this.BD2REST.rhythmicityResults(l,n)}exportURL(l){return this.BD2REST.ppaExportURL(l.id)}deleteJob(l,n){return this.BD2REST.rhythmicityDeleteJob(l.id,n)}downloadJob(l,n){return this.BD2REST.rhythmicityExportJob(l,n)}}return l.ngInjectableDef=e.Sb({factory:function(){return new l(e.Tb($.a))},token:l,providedIn:"root"}),l})();var V=u("GVyA"),z=e.qb({encapsulation:2,styles:[],data:{}});function G(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,1,"bd2-ts-plots",[],null,null,null,o.b,o.a)),e.rb(1,114688,null,0,b.a,[],{tracesPerPlot:[0,"tracesPerPlot"],data:[1,"data"]},null)],(function(l,n){var u=n.component;l(n,1,0,u.tracesPerPlot,u.timeseries)}),null)}function Z(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,5,"div",[],null,null,null,null,null)),(l()(),e.sb(1,0,null,null,1,"bd2-rhythmicityjob-params-rform",[],null,[[null,"displayParams"],[null,"rhythmicityRequests"]],(function(l,n,u){var e=!0,t=l.component;return"displayParams"===n&&(e=!1!==t.emitDisplayParams(u)&&e),"rhythmicityRequests"===n&&(e=!1!==t.doAnalysis(u)&&e),e}),w,S)),e.rb(2,4440064,null,0,_,[c.f],{disabled:[0,"disabled"],totalTraces:[1,"totalTraces"],currentPage:[2,"currentPage"]},{displayParams:"displayParams",rhythmicityRequests:"rhythmicityRequests"}),(l()(),e.sb(3,0,null,null,0,"hr",[],null,null,null,null,null)),(l()(),e.hb(16777216,null,null,1,null,G)),e.rb(5,16384,null,0,d.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null)],(function(l,n){var u=n.component;l(n,2,0,u.blocked,u.totalTraces,u.currentPage),l(n,5,0,u.timeseries)}),null)}function Y(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,5,"div",[],null,null,null,null,null)),(l()(),e.sb(1,0,null,null,1,"h3",[],null,null,null,null,null)),(l()(),e.Mb(-1,null,["Start rhythmicity test"])),(l()(),e.sb(3,0,null,null,0,"hr",[],null,null,null,null,null)),(l()(),e.hb(16777216,null,null,1,null,Z)),e.rb(5,16384,null,0,d.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null)],(function(l,n){l(n,5,0,!n.component.disabled)}),null)}function Q(l){return e.Ob(0,[(l()(),e.hb(16777216,null,null,1,null,Y)),e.rb(1,16384,null,0,d.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null)],(function(l,n){l(n,1,0,n.component.assay)}),null)}function W(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,2,"ng-component",[],null,null,null,Q,z)),e.Jb(131584,null,x.a,x.a,[A.a,[2,R.a]]),e.rb(2,245760,null,0,q,[x.a,H.a,F.a,B,V.a],null,null)],(function(l,n){l(n,2,0)}),null)}var X=e.ob("ng-component",q,W,{},{},[]),ll=u("iInd"),nl=u("lzlj"),ul=u("igqZ"),el=u("omvX"),tl=u("NvT6"),rl=u("W5yJ"),al=u("/HVE"),il=u("Ourk"),sl=u("elxJ"),ol=u("5GAg"),bl=u("8bJo"),cl=u("HsOI");class dl{constructor(){this.values=[1e-4,.001,.005,.01,.05,.1],this.pvalue=.001,this.pvalue$=new e.m}ngOnInit(){}ngAfterViewInit(){this.pvalue$.emit(this.pvalue)}selected(l){this.pvalue$.emit(l.value)}}var hl=e.qb({encapsulation:0,styles:[".mat-radio-button[_ngcontent-%COMP%]  {\n      margin-right: 15px;\n    }"],data:{}});function ml(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,2,"mat-radio-button",[["class","mat-radio-button"]],[[2,"mat-radio-checked",null],[2,"mat-radio-disabled",null],[2,"_mat-animation-noopable",null],[2,"mat-primary",null],[2,"mat-accent",null],[2,"mat-warn",null],[1,"tabindex",0],[1,"id",0],[1,"aria-label",0],[1,"aria-labelledby",0],[1,"aria-describedby",0]],[[null,"focus"]],(function(l,n,u){var t=!0;return"focus"===n&&(t=!1!==e.Eb(l,1)._inputElement.nativeElement.focus()&&t),t}),il.b,il.a)),e.rb(1,4440064,[[1,4]],0,sl.b,[[2,sl.c],e.k,e.h,ol.h,bl.d,[2,el.a],[2,sl.a]],{value:[0,"value"]},null),(l()(),e.Mb(2,0,["",""]))],(function(l,n){l(n,1,0,n.context.$implicit)}),(function(l,n){l(n,0,1,[e.Eb(n,1).checked,e.Eb(n,1).disabled,"NoopAnimations"===e.Eb(n,1)._animationMode,"primary"===e.Eb(n,1).color,"accent"===e.Eb(n,1).color,"warn"===e.Eb(n,1).color,-1,e.Eb(n,1).id,null,null,null]),l(n,2,0,n.context.$implicit)}))}function pl(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,16,"form",[["class","form-inline"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],(function(l,n,u){var t=!0;return"submit"===n&&(t=!1!==e.Eb(l,2).onSubmit(u)&&t),"reset"===n&&(t=!1!==e.Eb(l,2).onReset()&&t),t}),null,null)),e.rb(1,16384,null,0,c.H,[],null,null),e.rb(2,4210688,null,0,c.t,[[8,null],[8,null]],null,null),e.Jb(2048,null,c.d,null,[c.t]),e.rb(4,16384,null,0,c.s,[[4,c.d]],null,null),(l()(),e.sb(5,0,null,null,11,"div",[["class","mx-auto text-center"]],null,null,null,null,null)),(l()(),e.sb(6,0,null,null,3,"mat-label",[["class","mb-1"],["id","pvalues-label"]],null,null,null,null,null)),e.rb(7,16384,null,0,cl.g,[],null,null),(l()(),e.sb(8,0,null,null,1,"strong",[],null,null,null,null,null)),(l()(),e.Mb(-1,null,["p-value threshold:"])),(l()(),e.sb(10,0,null,null,6,"div",[],null,null,null,null,null)),(l()(),e.sb(11,0,null,null,5,"mat-radio-group",[["aria-label","Select p-value"],["aria-labelledby","pvalues-label"],["class","mat-radio-group"],["role","radiogroup"]],null,[[null,"change"]],(function(l,n,u){var e=!0;return"change"===n&&(e=!1!==l.component.selected(u)&&e),e}),null,null)),e.Jb(5120,null,c.p,(function(l){return[l]}),[sl.c]),e.rb(13,1064960,null,1,sl.c,[e.h],{value:[0,"value"]},{change:"change"}),e.Kb(603979776,1,{_radios:1}),(l()(),e.hb(16777216,null,null,1,null,ml)),e.rb(16,278528,null,0,d.l,[e.O,e.L,e.r],{ngForOf:[0,"ngForOf"]},null)],(function(l,n){var u=n.component;l(n,13,0,u.pvalue),l(n,16,0,u.values)}),(function(l,n){l(n,0,0,e.Eb(n,4).ngClassUntouched,e.Eb(n,4).ngClassTouched,e.Eb(n,4).ngClassPristine,e.Eb(n,4).ngClassDirty,e.Eb(n,4).ngClassValid,e.Eb(n,4).ngClassInvalid,e.Eb(n,4).ngClassPending)}))}var gl=u("oJZn"),fl=u("pBi1"),El=u("IP0z");class vl{constructor(){this.options=new e.m,this.currentOptions=new O(0,!1,!1,!1)}ngOnInit(){}pValue(l){this.currentOptions=this.currentOptions.clone(),this.currentOptions.pValue=l,this.options.next(this.currentOptions)}bhCorrection(l){this.currentOptions=this.currentOptions.clone(),this.currentOptions.bhCorrection=l,this.options.next(this.currentOptions)}circadian(l){this.currentOptions=this.currentOptions.clone(),this.currentOptions.circadian=l,this.options.next(this.currentOptions)}showPattern(l){this.currentOptions=this.currentOptions.clone(),this.currentOptions.showPattern=l,this.options.next(this.currentOptions)}}var Cl=e.qb({encapsulation:2,styles:[],data:{}});function yl(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,21,"mat-card",[["class","mat-card"]],[[2,"_mat-animation-noopable",null]],null,null,nl.b,nl.a)),e.rb(1,49152,null,0,ul.a,[[2,el.a]],null,null),(l()(),e.sb(2,0,null,0,19,"mat-card-content",[["class","mat-card-content"]],null,null,null,null,null)),e.rb(3,16384,null,0,ul.c,[],null,null),(l()(),e.sb(4,0,null,null,2,"section",[],null,null,null,null,null)),(l()(),e.sb(5,0,null,null,1,"bd2-pvalue-form",[],null,[[null,"pvalue$"]],(function(l,n,u){var e=!0;return"pvalue$"===n&&(e=!1!==l.component.pValue(u)&&e),e}),pl,hl)),e.rb(6,4308992,null,0,dl,[],null,{pvalue$:"pvalue$"}),(l()(),e.sb(7,0,null,null,4,"section",[["style","margin-top: 0.5em; text-align: center;"]],null,null,null,null,null)),(l()(),e.sb(8,0,null,null,3,"mat-slide-toggle",[["class","mat-slide-toggle"]],[[8,"id",0],[1,"tabindex",0],[1,"aria-label",0],[1,"aria-labelledby",0],[2,"mat-checked",null],[2,"mat-disabled",null],[2,"mat-slide-toggle-label-before",null],[2,"_mat-animation-noopable",null]],[[null,"change"],[null,"focus"]],(function(l,n,u){var t=!0,r=l.component;return"focus"===n&&(t=!1!==e.Eb(l,10)._inputElement.nativeElement.focus()&&t),"change"===n&&(t=!1!==r.bhCorrection(u.checked)&&t),t}),gl.b,gl.a)),e.Jb(5120,null,c.p,(function(l){return[l]}),[fl.b]),e.rb(10,1228800,null,0,fl.b,[e.k,ol.h,e.h,[8,null],e.y,fl.a,[2,el.a],[2,El.b]],null,{change:"change"}),(l()(),e.Mb(-1,0,["Benjamini Hochberg correction"])),(l()(),e.sb(12,0,null,null,9,"section",[["style","margin-top: 0.5em; text-align: center;"]],null,null,null,null,null)),(l()(),e.sb(13,0,null,null,3,"mat-slide-toggle",[["class","mat-slide-toggle"]],[[8,"id",0],[1,"tabindex",0],[1,"aria-label",0],[1,"aria-labelledby",0],[2,"mat-checked",null],[2,"mat-disabled",null],[2,"mat-slide-toggle-label-before",null],[2,"_mat-animation-noopable",null]],[[null,"change"],[null,"focus"]],(function(l,n,u){var t=!0,r=l.component;return"focus"===n&&(t=!1!==e.Eb(l,15)._inputElement.nativeElement.focus()&&t),"change"===n&&(t=!1!==r.showPattern(u.checked)&&t),t}),gl.b,gl.a)),e.Jb(5120,null,c.p,(function(l){return[l]}),[fl.b]),e.rb(15,1228800,[["pattern",4]],0,fl.b,[e.k,ol.h,e.h,[8,null],e.y,fl.a,[2,el.a],[2,El.b]],null,{change:"change"}),(l()(),e.Mb(-1,0,["show pattern"])),(l()(),e.Mb(-1,null,[" \xa0 "])),(l()(),e.sb(18,0,null,null,3,"mat-slide-toggle",[["class","mat-slide-toggle"]],[[8,"id",0],[1,"tabindex",0],[1,"aria-label",0],[1,"aria-labelledby",0],[2,"mat-checked",null],[2,"mat-disabled",null],[2,"mat-slide-toggle-label-before",null],[2,"_mat-animation-noopable",null]],[[null,"change"],[null,"focus"]],(function(l,n,u){var t=!0,r=l.component;return"focus"===n&&(t=!1!==e.Eb(l,20)._inputElement.nativeElement.focus()&&t),"change"===n&&(t=!1!==r.circadian(u.checked)&&t),t}),gl.b,gl.a)),e.Jb(5120,null,c.p,(function(l){return[l]}),[fl.b]),e.rb(20,1228800,null,0,fl.b,[e.k,ol.h,e.h,[8,null],e.y,fl.a,[2,el.a],[2,El.b]],{disabled:[0,"disabled"]},{change:"change"}),(l()(),e.Mb(-1,0,["circadian unit"]))],(function(l,n){l(n,6,0),l(n,20,0,!e.Eb(n,15).checked)}),(function(l,n){l(n,0,0,"NoopAnimations"===e.Eb(n,1)._animationMode),l(n,8,0,e.Eb(n,10).id,e.Eb(n,10).disabled?null:-1,null,null,e.Eb(n,10).checked,e.Eb(n,10).disabled,"before"==e.Eb(n,10).labelPosition,"NoopAnimations"===e.Eb(n,10)._animationMode),l(n,13,0,e.Eb(n,15).id,e.Eb(n,15).disabled?null:-1,null,null,e.Eb(n,15).checked,e.Eb(n,15).disabled,"before"==e.Eb(n,15).labelPosition,"NoopAnimations"===e.Eb(n,15)._animationMode),l(n,18,0,e.Eb(n,20).id,e.Eb(n,20).disabled?null:-1,null,null,e.Eb(n,20).checked,e.Eb(n,20).disabled,"before"==e.Eb(n,20).labelPosition,"NoopAnimations"===e.Eb(n,20)._animationMode)}))}var Ol=u("MBfO"),Ml=u("8P0U"),_l=u("m46K"),Sl=u("7kcP"),Il=u("8rEH"),kl=u("zQui"),Jl=u("pIm3"),Dl=u("vkgz"),Pl=u("8jiw");class Tl extends Pl.a{constructor(l,n=!1){super(n),this.rhythmicityService=l,this.results$=this.data$}sameInput(l,n){return y.sameJob(l,n)}assetToData(l,n){return l.results}fetchAsset(l){return this.rhythmicityService.getResults(l.parentId,l.jobId).pipe(Object(Dl.a)(l=>this.labelPatterns(l)))}sortingKey(l){switch(l.active){case"label":return l=>l.label;case"id":return l=>+l.id;case"empp":return l=>+l.result.empP;case"emppbh":return l=>+l.result.empPBH;case"tau":return l=>+l.result.tau;case"period":return l=>l.result.pattern.period;case"peak":return l=>l.result.pattern.peak;case"trough":return l=>l.result.pattern.trough;default:return console.error("Not implemented sorting for "+l.active),l=>0}}processData(l,n){return n?(this.rankResults(l,n.pValue,n.bhCorrection),l):l}labelPatterns(l){l.results.forEach(l=>{l.result.patternLabel=this.describePattern(l.result),l.result.pattern.shapeLabel=this.patternToShape(l.result.pattern)})}describePattern(l){const n=l.pattern,u=Math.round(10*n.period)/10,e=Math.round(100*n.peak)/100,t=Math.round(100*n.trough)/100;return`${this.patternToShape(n)}\t${u}\t${e}\t${t}`}patternToShape(l){switch(l.waveform){case"ASYM_COSINE":return"ACOS";case"ASYM_COS_SPIKE":return"SPIKE";case"ASYM_COS_SPIKE_NEG":return"NPIKE";default:return l.waveform}}rankResults(l,n,u){l.forEach(l=>{const e=l.result;e.rhythmic=(u?e.empPBH:e.empP)<n})}}class wl{constructor(l,n){this.fetcher=l,this.feedback=n,this.normPColumns=["id","label","rhythmic","empp","tau"],this.bhPColumns=["id","label","rhythmic","emppbh","tau"],this.patternColumns=["shape","period","peak","trough"],this.patternColumnsC=["shape","period","peakc","troughc"],this.displayedColumns=this.normPColumns,this.disablePaginator=!1}set job(l){l&&this.fetcher.input(l)}set statTestParams(l){if(l){this.fetcher.params(l);let n=l.bhCorrection?this.bhPColumns:this.normPColumns;l.showPattern&&(n=n.concat(l.circadian?this.patternColumnsC:this.patternColumns)),this.displayedColumns=n}}ngOnInit(){this.fetcher.error$.subscribe(l=>this.feedback.error(l));const l=new m.e;l.pageSize=25,l.pageIndex=0,this.fetcher.page(l),this.fetcher.on(!0)}ngOnDestroy(){this.fetcher.close()}ngAfterViewInit(){}reload(){this.fetcher.refresh()}sortData(l){this.fetcher.sort(l)}loadPage(l){this.fetcher.page(l)}}var xl=u("6tuW"),Al=e.qb({encapsulation:0,styles:[".full-width-table[_ngcontent-%COMP%] {\n      width: 100%;\n    }"],data:{}});function Rl(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,1,"mat-progress-bar",[["aria-valuemax","100"],["aria-valuemin","0"],["class","mat-progress-bar"],["mode","indeterminate"],["role","progressbar"]],[[1,"aria-valuenow",0],[1,"mode",0],[2,"_mat-animation-noopable",null]],null,null,Ol.b,Ol.a)),e.rb(1,4374528,null,0,Ml.b,[e.k,e.y,[2,el.a],[2,Ml.a]],{mode:[0,"mode"]},null)],(function(l,n){l(n,1,0,"indeterminate")}),(function(l,n){l(n,0,0,"indeterminate"===e.Eb(n,1).mode||"query"===e.Eb(n,1).mode?null:e.Eb(n,1).value,e.Eb(n,1).mode,e.Eb(n,1)._isNoopAnimation)}))}function Ll(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,3,"th",[["class","mat-header-cell"],["mat-header-cell",""],["mat-sort-header",""],["role","columnheader"]],[[1,"aria-sort",0],[2,"mat-sort-header-disabled",null]],[[null,"click"],[null,"mouseenter"],[null,"mouseleave"]],(function(l,n,u){var t=!0;return"click"===n&&(t=!1!==e.Eb(l,1)._handleClick()&&t),"mouseenter"===n&&(t=!1!==e.Eb(l,1)._setIndicatorHintVisible(!0)&&t),"mouseleave"===n&&(t=!1!==e.Eb(l,1)._setIndicatorHintVisible(!1)&&t),t}),_l.b,_l.a)),e.rb(1,245760,null,0,Sl.c,[Sl.d,e.h,[2,Sl.b],[2,"MAT_SORT_HEADER_COLUMN_DEF"]],{id:[0,"id"]},null),e.rb(2,16384,null,0,Il.h,[kl.d,e.k],null,null),(l()(),e.Mb(-1,0,["Id"]))],(function(l,n){l(n,1,0,"")}),(function(l,n){l(n,0,0,e.Eb(n,1)._getAriaSortAttribute(),e.Eb(n,1)._isDisabled())}))}function jl(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,2,"td",[["class","mat-cell"],["mat-cell",""],["role","gridcell"]],null,null,null,null,null)),e.rb(1,16384,null,0,Il.a,[kl.d,e.k],null,null),(l()(),e.Mb(2,null,["",""]))],null,(function(l,n){l(n,2,0,n.context.$implicit.id)}))}function Kl(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,3,"th",[["class","mat-header-cell"],["mat-header-cell",""],["mat-sort-header",""],["role","columnheader"]],[[1,"aria-sort",0],[2,"mat-sort-header-disabled",null]],[[null,"click"],[null,"mouseenter"],[null,"mouseleave"]],(function(l,n,u){var t=!0;return"click"===n&&(t=!1!==e.Eb(l,1)._handleClick()&&t),"mouseenter"===n&&(t=!1!==e.Eb(l,1)._setIndicatorHintVisible(!0)&&t),"mouseleave"===n&&(t=!1!==e.Eb(l,1)._setIndicatorHintVisible(!1)&&t),t}),_l.b,_l.a)),e.rb(1,245760,null,0,Sl.c,[Sl.d,e.h,[2,Sl.b],[2,"MAT_SORT_HEADER_COLUMN_DEF"]],{id:[0,"id"]},null),e.rb(2,16384,null,0,Il.h,[kl.d,e.k],null,null),(l()(),e.Mb(-1,0,["Label"]))],(function(l,n){l(n,1,0,"")}),(function(l,n){l(n,0,0,e.Eb(n,1)._getAriaSortAttribute(),e.Eb(n,1)._isDisabled())}))}function Nl(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,2,"td",[["class","word_wrapping mat-cell"],["mat-cell",""],["role","gridcell"],["style","max-width: 100px"]],null,null,null,null,null)),e.rb(1,16384,null,0,Il.a,[kl.d,e.k],null,null),(l()(),e.Mb(2,null,["",""]))],null,(function(l,n){l(n,2,0,n.context.$implicit.label)}))}function ql(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,2,"th",[["class","mat-header-cell"],["mat-header-cell",""],["role","columnheader"]],null,null,null,null,null)),e.rb(1,16384,null,0,Il.h,[kl.d,e.k],null,null),(l()(),e.Mb(-1,null,["Rhythmic"]))],null,null)}function Hl(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,2,"td",[["class","mat-cell"],["mat-cell",""],["role","gridcell"]],[[2,"bold",null]],null,null,null,null)),e.rb(1,16384,null,0,Il.a,[kl.d,e.k],null,null),(l()(),e.Mb(2,null,["",""]))],null,(function(l,n){l(n,0,0,n.context.$implicit.result.rhythmic),l(n,2,0,n.context.$implicit.result.rhythmic)}))}function Fl(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,3,"th",[["class","mat-header-cell"],["mat-header-cell",""],["mat-sort-header",""],["role","columnheader"]],[[1,"aria-sort",0],[2,"mat-sort-header-disabled",null]],[[null,"click"],[null,"mouseenter"],[null,"mouseleave"]],(function(l,n,u){var t=!0;return"click"===n&&(t=!1!==e.Eb(l,1)._handleClick()&&t),"mouseenter"===n&&(t=!1!==e.Eb(l,1)._setIndicatorHintVisible(!0)&&t),"mouseleave"===n&&(t=!1!==e.Eb(l,1)._setIndicatorHintVisible(!1)&&t),t}),_l.b,_l.a)),e.rb(1,245760,null,0,Sl.c,[Sl.d,e.h,[2,Sl.b],[2,"MAT_SORT_HEADER_COLUMN_DEF"]],{id:[0,"id"]},null),e.rb(2,16384,null,0,Il.h,[kl.d,e.k],null,null),(l()(),e.Mb(-1,0,["emp-p"]))],(function(l,n){l(n,1,0,"")}),(function(l,n){l(n,0,0,e.Eb(n,1)._getAriaSortAttribute(),e.Eb(n,1)._isDisabled())}))}function Ul(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,3,"td",[["class","mat-cell"],["mat-cell",""],["role","gridcell"]],null,null,null,null,null)),e.rb(1,16384,null,0,Il.a,[kl.d,e.k],null,null),(l()(),e.Mb(2,null,["",""])),e.Ib(3,2)],null,(function(l,n){var u=e.Nb(n,2,0,l(n,3,0,e.Eb(n.parent,0),n.context.$implicit.result.empP,"1.0-5"));l(n,2,0,u)}))}function $l(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,3,"th",[["class","mat-header-cell"],["mat-header-cell",""],["mat-sort-header",""],["role","columnheader"]],[[1,"aria-sort",0],[2,"mat-sort-header-disabled",null]],[[null,"click"],[null,"mouseenter"],[null,"mouseleave"]],(function(l,n,u){var t=!0;return"click"===n&&(t=!1!==e.Eb(l,1)._handleClick()&&t),"mouseenter"===n&&(t=!1!==e.Eb(l,1)._setIndicatorHintVisible(!0)&&t),"mouseleave"===n&&(t=!1!==e.Eb(l,1)._setIndicatorHintVisible(!1)&&t),t}),_l.b,_l.a)),e.rb(1,245760,null,0,Sl.c,[Sl.d,e.h,[2,Sl.b],[2,"MAT_SORT_HEADER_COLUMN_DEF"]],{id:[0,"id"]},null),e.rb(2,16384,null,0,Il.h,[kl.d,e.k],null,null),(l()(),e.Mb(-1,0,["BH emp-p"]))],(function(l,n){l(n,1,0,"")}),(function(l,n){l(n,0,0,e.Eb(n,1)._getAriaSortAttribute(),e.Eb(n,1)._isDisabled())}))}function Bl(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,3,"td",[["class","mat-cell"],["mat-cell",""],["role","gridcell"]],null,null,null,null,null)),e.rb(1,16384,null,0,Il.a,[kl.d,e.k],null,null),(l()(),e.Mb(2,null,["",""])),e.Ib(3,2)],null,(function(l,n){var u=e.Nb(n,2,0,l(n,3,0,e.Eb(n.parent,0),n.context.$implicit.result.empPBH,"1.0-5"));l(n,2,0,u)}))}function Vl(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,3,"th",[["class","mat-header-cell"],["mat-header-cell",""],["mat-sort-header",""],["role","columnheader"]],[[1,"aria-sort",0],[2,"mat-sort-header-disabled",null]],[[null,"click"],[null,"mouseenter"],[null,"mouseleave"]],(function(l,n,u){var t=!0;return"click"===n&&(t=!1!==e.Eb(l,1)._handleClick()&&t),"mouseenter"===n&&(t=!1!==e.Eb(l,1)._setIndicatorHintVisible(!0)&&t),"mouseleave"===n&&(t=!1!==e.Eb(l,1)._setIndicatorHintVisible(!1)&&t),t}),_l.b,_l.a)),e.rb(1,245760,null,0,Sl.c,[Sl.d,e.h,[2,Sl.b],[2,"MAT_SORT_HEADER_COLUMN_DEF"]],{id:[0,"id"]},null),e.rb(2,16384,null,0,Il.h,[kl.d,e.k],null,null),(l()(),e.Mb(-1,0,["Tau"]))],(function(l,n){l(n,1,0,"")}),(function(l,n){l(n,0,0,e.Eb(n,1)._getAriaSortAttribute(),e.Eb(n,1)._isDisabled())}))}function zl(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,3,"td",[["class","mat-cell"],["mat-cell",""],["role","gridcell"]],null,null,null,null,null)),e.rb(1,16384,null,0,Il.a,[kl.d,e.k],null,null),(l()(),e.Mb(2,null,["",""])),e.Ib(3,2)],null,(function(l,n){var u=e.Nb(n,2,0,l(n,3,0,e.Eb(n.parent,0),n.context.$implicit.result.tau,"1.0-2"));l(n,2,0,u)}))}function Gl(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,2,"th",[["class","mat-header-cell"],["mat-header-cell",""],["role","columnheader"]],null,null,null,null,null)),e.rb(1,16384,null,0,Il.h,[kl.d,e.k],null,null),(l()(),e.Mb(-1,null,["Pattern"]))],null,null)}function Zl(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,2,"td",[["class","mat-cell"],["mat-cell",""],["role","gridcell"]],null,null,null,null,null)),e.rb(1,16384,null,0,Il.a,[kl.d,e.k],null,null),(l()(),e.Mb(2,null,["",""]))],null,(function(l,n){l(n,2,0,n.context.$implicit.result.patternLabel)}))}function Yl(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,2,"th",[["class","mat-header-cell"],["mat-header-cell",""],["role","columnheader"]],null,null,null,null,null)),e.rb(1,16384,null,0,Il.h,[kl.d,e.k],null,null),(l()(),e.Mb(-1,null,["P.Shape"]))],null,null)}function Ql(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,2,"td",[["class","mat-cell"],["mat-cell",""],["role","gridcell"]],null,null,null,null,null)),e.rb(1,16384,null,0,Il.a,[kl.d,e.k],null,null),(l()(),e.Mb(2,null,["",""]))],null,(function(l,n){l(n,2,0,n.context.$implicit.result.pattern.shapeLabel)}))}function Wl(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,3,"th",[["class","mat-header-cell"],["mat-header-cell",""],["mat-sort-header",""],["role","columnheader"]],[[1,"aria-sort",0],[2,"mat-sort-header-disabled",null]],[[null,"click"],[null,"mouseenter"],[null,"mouseleave"]],(function(l,n,u){var t=!0;return"click"===n&&(t=!1!==e.Eb(l,1)._handleClick()&&t),"mouseenter"===n&&(t=!1!==e.Eb(l,1)._setIndicatorHintVisible(!0)&&t),"mouseleave"===n&&(t=!1!==e.Eb(l,1)._setIndicatorHintVisible(!1)&&t),t}),_l.b,_l.a)),e.rb(1,245760,null,0,Sl.c,[Sl.d,e.h,[2,Sl.b],[2,"MAT_SORT_HEADER_COLUMN_DEF"]],{id:[0,"id"]},null),e.rb(2,16384,null,0,Il.h,[kl.d,e.k],null,null),(l()(),e.Mb(-1,0,["P.Period"]))],(function(l,n){l(n,1,0,"")}),(function(l,n){l(n,0,0,e.Eb(n,1)._getAriaSortAttribute(),e.Eb(n,1)._isDisabled())}))}function Xl(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,3,"td",[["class","mat-cell"],["mat-cell",""],["role","gridcell"]],null,null,null,null,null)),e.rb(1,16384,null,0,Il.a,[kl.d,e.k],null,null),(l()(),e.Mb(2,null,["",""])),e.Ib(3,2)],null,(function(l,n){var u=e.Nb(n,2,0,l(n,3,0,e.Eb(n.parent,0),n.context.$implicit.result.pattern.period,"1.0-1"));l(n,2,0,u)}))}function ln(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,3,"th",[["class","mat-header-cell"],["mat-header-cell",""],["mat-sort-header",""],["role","columnheader"]],[[1,"aria-sort",0],[2,"mat-sort-header-disabled",null]],[[null,"click"],[null,"mouseenter"],[null,"mouseleave"]],(function(l,n,u){var t=!0;return"click"===n&&(t=!1!==e.Eb(l,1)._handleClick()&&t),"mouseenter"===n&&(t=!1!==e.Eb(l,1)._setIndicatorHintVisible(!0)&&t),"mouseleave"===n&&(t=!1!==e.Eb(l,1)._setIndicatorHintVisible(!1)&&t),t}),_l.b,_l.a)),e.rb(1,245760,null,0,Sl.c,[Sl.d,e.h,[2,Sl.b],[2,"MAT_SORT_HEADER_COLUMN_DEF"]],{id:[0,"id"]},null),e.rb(2,16384,null,0,Il.h,[kl.d,e.k],null,null),(l()(),e.Mb(-1,0,["P.Peak"]))],(function(l,n){l(n,1,0,"")}),(function(l,n){l(n,0,0,e.Eb(n,1)._getAriaSortAttribute(),e.Eb(n,1)._isDisabled())}))}function nn(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,3,"td",[["class","mat-cell"],["mat-cell",""],["role","gridcell"]],null,null,null,null,null)),e.rb(1,16384,null,0,Il.a,[kl.d,e.k],null,null),(l()(),e.Mb(2,null,["",""])),e.Ib(3,2)],null,(function(l,n){var u=e.Nb(n,2,0,l(n,3,0,e.Eb(n.parent,0),n.context.$implicit.result.pattern.peak,"1.1-1"));l(n,2,0,u)}))}function un(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,2,"th",[["class","mat-header-cell"],["mat-header-cell",""],["role","columnheader"]],null,null,null,null,null)),e.rb(1,16384,null,0,Il.h,[kl.d,e.k],null,null),(l()(),e.Mb(-1,null,["P.Peak"]))],null,null)}function en(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,3,"td",[["class","mat-cell"],["mat-cell",""],["role","gridcell"]],null,null,null,null,null)),e.rb(1,16384,null,0,Il.a,[kl.d,e.k],null,null),(l()(),e.Mb(2,null,["",""])),e.Ib(3,2)],null,(function(l,n){var u=e.Nb(n,2,0,l(n,3,0,e.Eb(n.parent,0),24*n.context.$implicit.result.pattern.peak/n.context.$implicit.result.pattern.period,"1.1-1"));l(n,2,0,u)}))}function tn(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,3,"th",[["class","mat-header-cell"],["mat-header-cell",""],["mat-sort-header",""],["role","columnheader"]],[[1,"aria-sort",0],[2,"mat-sort-header-disabled",null]],[[null,"click"],[null,"mouseenter"],[null,"mouseleave"]],(function(l,n,u){var t=!0;return"click"===n&&(t=!1!==e.Eb(l,1)._handleClick()&&t),"mouseenter"===n&&(t=!1!==e.Eb(l,1)._setIndicatorHintVisible(!0)&&t),"mouseleave"===n&&(t=!1!==e.Eb(l,1)._setIndicatorHintVisible(!1)&&t),t}),_l.b,_l.a)),e.rb(1,245760,null,0,Sl.c,[Sl.d,e.h,[2,Sl.b],[2,"MAT_SORT_HEADER_COLUMN_DEF"]],{id:[0,"id"]},null),e.rb(2,16384,null,0,Il.h,[kl.d,e.k],null,null),(l()(),e.Mb(-1,0,["P.Trough"]))],(function(l,n){l(n,1,0,"")}),(function(l,n){l(n,0,0,e.Eb(n,1)._getAriaSortAttribute(),e.Eb(n,1)._isDisabled())}))}function rn(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,3,"td",[["class","mat-cell"],["mat-cell",""],["role","gridcell"]],null,null,null,null,null)),e.rb(1,16384,null,0,Il.a,[kl.d,e.k],null,null),(l()(),e.Mb(2,null,["",""])),e.Ib(3,2)],null,(function(l,n){var u=e.Nb(n,2,0,l(n,3,0,e.Eb(n.parent,0),n.context.$implicit.result.pattern.trough,"1.1-1"));l(n,2,0,u)}))}function an(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,2,"th",[["class","mat-header-cell"],["mat-header-cell",""],["role","columnheader"]],null,null,null,null,null)),e.rb(1,16384,null,0,Il.h,[kl.d,e.k],null,null),(l()(),e.Mb(-1,null,["P.Trough"]))],null,null)}function sn(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,3,"td",[["class","mat-cell"],["mat-cell",""],["role","gridcell"]],null,null,null,null,null)),e.rb(1,16384,null,0,Il.a,[kl.d,e.k],null,null),(l()(),e.Mb(2,null,["",""])),e.Ib(3,2)],null,(function(l,n){var u=e.Nb(n,2,0,l(n,3,0,e.Eb(n.parent,0),24*n.context.$implicit.result.pattern.trough/n.context.$implicit.result.pattern.period,"1.1-1"));l(n,2,0,u)}))}function on(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,2,"tr",[["class","mat-header-row"],["mat-header-row",""],["role","row"]],null,null,null,Jl.f,Jl.b)),e.Jb(6144,null,kl.k,null,[Il.j]),e.rb(2,49152,null,0,Il.j,[],null,null)],null,null)}function bn(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,2,"tr",[["class","mat-row"],["mat-row",""],["role","row"]],null,null,null,Jl.g,Jl.c)),e.Jb(6144,null,kl.m,null,[Il.l]),e.rb(2,49152,null,0,Il.l,[],null,null)],null,null)}function cn(l){return e.Ob(0,[e.Gb(0,d.f,[e.t]),(l()(),e.sb(1,0,null,null,192,"div",[["class","mat-elevation-z8"]],null,null,null,null,null)),(l()(),e.hb(16777216,null,null,2,null,Rl)),e.rb(3,16384,null,0,d.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null),e.Gb(131072,d.b,[e.h]),(l()(),e.sb(5,0,null,null,2,"mat-paginator",[["class","mat-paginator"]],null,[[null,"page"]],(function(l,n,u){var e=!0;return"page"===n&&(e=!1!==l.component.loadPage(u)&&e),e}),h.b,h.a)),e.rb(6,245760,[["paginator",4]],0,m.b,[m.c,e.h],{disabled:[0,"disabled"],pageIndex:[1,"pageIndex"],length:[2,"length"],pageSize:[3,"pageSize"],pageSizeOptions:[4,"pageSizeOptions"]},{page:"page"}),e.Fb(7,5),(l()(),e.sb(8,0,null,null,182,"table",[["aria-label","Results"],["class","full-width-table mat-table"],["mat-table",""],["matSort",""],["matSortActive","id"],["matSortDirection","asc"]],null,[[null,"matSortChange"]],(function(l,n,u){var e=!0;return"matSortChange"===n&&(e=!1!==l.component.sortData(u)&&e),e}),Jl.h,Jl.d)),e.Jb(6144,null,kl.o,null,[Il.n]),e.rb(10,737280,null,0,Sl.b,[],{active:[0,"active"],direction:[1,"direction"]},{sortChange:"matSortChange"}),e.rb(11,2342912,null,4,Il.n,[e.r,e.h,e.k,[8,null],[2,El.b],d.d,al.a],{dataSource:[0,"dataSource"]},null),e.Kb(603979776,1,{_contentColumnDefs:1}),e.Kb(603979776,2,{_contentRowDefs:1}),e.Kb(603979776,3,{_contentHeaderRowDefs:1}),e.Kb(603979776,4,{_contentFooterRowDefs:1}),(l()(),e.sb(16,0,null,null,12,null,null,null,null,null,null,null)),e.Jb(6144,null,"MAT_SORT_HEADER_COLUMN_DEF",null,[Il.c]),e.rb(18,16384,null,3,Il.c,[],{name:[0,"name"]},null),e.Kb(603979776,5,{cell:0}),e.Kb(603979776,6,{headerCell:0}),e.Kb(603979776,7,{footerCell:0}),e.Jb(2048,[[1,4]],kl.d,null,[Il.c]),(l()(),e.hb(0,null,null,2,null,Ll)),e.rb(24,16384,null,0,Il.i,[e.L],null,null),e.Jb(2048,[[6,4]],kl.j,null,[Il.i]),(l()(),e.hb(0,null,null,2,null,jl)),e.rb(27,16384,null,0,Il.b,[e.L],null,null),e.Jb(2048,[[5,4]],kl.b,null,[Il.b]),(l()(),e.sb(29,0,null,null,12,null,null,null,null,null,null,null)),e.Jb(6144,null,"MAT_SORT_HEADER_COLUMN_DEF",null,[Il.c]),e.rb(31,16384,null,3,Il.c,[],{name:[0,"name"]},null),e.Kb(603979776,8,{cell:0}),e.Kb(603979776,9,{headerCell:0}),e.Kb(603979776,10,{footerCell:0}),e.Jb(2048,[[1,4]],kl.d,null,[Il.c]),(l()(),e.hb(0,null,null,2,null,Kl)),e.rb(37,16384,null,0,Il.i,[e.L],null,null),e.Jb(2048,[[9,4]],kl.j,null,[Il.i]),(l()(),e.hb(0,null,null,2,null,Nl)),e.rb(40,16384,null,0,Il.b,[e.L],null,null),e.Jb(2048,[[8,4]],kl.b,null,[Il.b]),(l()(),e.sb(42,0,null,null,12,null,null,null,null,null,null,null)),e.Jb(6144,null,"MAT_SORT_HEADER_COLUMN_DEF",null,[Il.c]),e.rb(44,16384,null,3,Il.c,[],{name:[0,"name"]},null),e.Kb(603979776,11,{cell:0}),e.Kb(603979776,12,{headerCell:0}),e.Kb(603979776,13,{footerCell:0}),e.Jb(2048,[[1,4]],kl.d,null,[Il.c]),(l()(),e.hb(0,null,null,2,null,ql)),e.rb(50,16384,null,0,Il.i,[e.L],null,null),e.Jb(2048,[[12,4]],kl.j,null,[Il.i]),(l()(),e.hb(0,null,null,2,null,Hl)),e.rb(53,16384,null,0,Il.b,[e.L],null,null),e.Jb(2048,[[11,4]],kl.b,null,[Il.b]),(l()(),e.sb(55,0,null,null,12,null,null,null,null,null,null,null)),e.Jb(6144,null,"MAT_SORT_HEADER_COLUMN_DEF",null,[Il.c]),e.rb(57,16384,null,3,Il.c,[],{name:[0,"name"]},null),e.Kb(603979776,14,{cell:0}),e.Kb(603979776,15,{headerCell:0}),e.Kb(603979776,16,{footerCell:0}),e.Jb(2048,[[1,4]],kl.d,null,[Il.c]),(l()(),e.hb(0,null,null,2,null,Fl)),e.rb(63,16384,null,0,Il.i,[e.L],null,null),e.Jb(2048,[[15,4]],kl.j,null,[Il.i]),(l()(),e.hb(0,null,null,2,null,Ul)),e.rb(66,16384,null,0,Il.b,[e.L],null,null),e.Jb(2048,[[14,4]],kl.b,null,[Il.b]),(l()(),e.sb(68,0,null,null,12,null,null,null,null,null,null,null)),e.Jb(6144,null,"MAT_SORT_HEADER_COLUMN_DEF",null,[Il.c]),e.rb(70,16384,null,3,Il.c,[],{name:[0,"name"]},null),e.Kb(603979776,17,{cell:0}),e.Kb(603979776,18,{headerCell:0}),e.Kb(603979776,19,{footerCell:0}),e.Jb(2048,[[1,4]],kl.d,null,[Il.c]),(l()(),e.hb(0,null,null,2,null,$l)),e.rb(76,16384,null,0,Il.i,[e.L],null,null),e.Jb(2048,[[18,4]],kl.j,null,[Il.i]),(l()(),e.hb(0,null,null,2,null,Bl)),e.rb(79,16384,null,0,Il.b,[e.L],null,null),e.Jb(2048,[[17,4]],kl.b,null,[Il.b]),(l()(),e.sb(81,0,null,null,12,null,null,null,null,null,null,null)),e.Jb(6144,null,"MAT_SORT_HEADER_COLUMN_DEF",null,[Il.c]),e.rb(83,16384,null,3,Il.c,[],{name:[0,"name"]},null),e.Kb(603979776,20,{cell:0}),e.Kb(603979776,21,{headerCell:0}),e.Kb(603979776,22,{footerCell:0}),e.Jb(2048,[[1,4]],kl.d,null,[Il.c]),(l()(),e.hb(0,null,null,2,null,Vl)),e.rb(89,16384,null,0,Il.i,[e.L],null,null),e.Jb(2048,[[21,4]],kl.j,null,[Il.i]),(l()(),e.hb(0,null,null,2,null,zl)),e.rb(92,16384,null,0,Il.b,[e.L],null,null),e.Jb(2048,[[20,4]],kl.b,null,[Il.b]),(l()(),e.sb(94,0,null,null,12,null,null,null,null,null,null,null)),e.Jb(6144,null,"MAT_SORT_HEADER_COLUMN_DEF",null,[Il.c]),e.rb(96,16384,null,3,Il.c,[],{name:[0,"name"]},null),e.Kb(603979776,23,{cell:0}),e.Kb(603979776,24,{headerCell:0}),e.Kb(603979776,25,{footerCell:0}),e.Jb(2048,[[1,4]],kl.d,null,[Il.c]),(l()(),e.hb(0,null,null,2,null,Gl)),e.rb(102,16384,null,0,Il.i,[e.L],null,null),e.Jb(2048,[[24,4]],kl.j,null,[Il.i]),(l()(),e.hb(0,null,null,2,null,Zl)),e.rb(105,16384,null,0,Il.b,[e.L],null,null),e.Jb(2048,[[23,4]],kl.b,null,[Il.b]),(l()(),e.sb(107,0,null,null,12,null,null,null,null,null,null,null)),e.Jb(6144,null,"MAT_SORT_HEADER_COLUMN_DEF",null,[Il.c]),e.rb(109,16384,null,3,Il.c,[],{name:[0,"name"]},null),e.Kb(603979776,26,{cell:0}),e.Kb(603979776,27,{headerCell:0}),e.Kb(603979776,28,{footerCell:0}),e.Jb(2048,[[1,4]],kl.d,null,[Il.c]),(l()(),e.hb(0,null,null,2,null,Yl)),e.rb(115,16384,null,0,Il.i,[e.L],null,null),e.Jb(2048,[[27,4]],kl.j,null,[Il.i]),(l()(),e.hb(0,null,null,2,null,Ql)),e.rb(118,16384,null,0,Il.b,[e.L],null,null),e.Jb(2048,[[26,4]],kl.b,null,[Il.b]),(l()(),e.sb(120,0,null,null,12,null,null,null,null,null,null,null)),e.Jb(6144,null,"MAT_SORT_HEADER_COLUMN_DEF",null,[Il.c]),e.rb(122,16384,null,3,Il.c,[],{name:[0,"name"]},null),e.Kb(603979776,29,{cell:0}),e.Kb(603979776,30,{headerCell:0}),e.Kb(603979776,31,{footerCell:0}),e.Jb(2048,[[1,4]],kl.d,null,[Il.c]),(l()(),e.hb(0,null,null,2,null,Wl)),e.rb(128,16384,null,0,Il.i,[e.L],null,null),e.Jb(2048,[[30,4]],kl.j,null,[Il.i]),(l()(),e.hb(0,null,null,2,null,Xl)),e.rb(131,16384,null,0,Il.b,[e.L],null,null),e.Jb(2048,[[29,4]],kl.b,null,[Il.b]),(l()(),e.sb(133,0,null,null,12,null,null,null,null,null,null,null)),e.Jb(6144,null,"MAT_SORT_HEADER_COLUMN_DEF",null,[Il.c]),e.rb(135,16384,null,3,Il.c,[],{name:[0,"name"]},null),e.Kb(603979776,32,{cell:0}),e.Kb(603979776,33,{headerCell:0}),e.Kb(603979776,34,{footerCell:0}),e.Jb(2048,[[1,4]],kl.d,null,[Il.c]),(l()(),e.hb(0,null,null,2,null,ln)),e.rb(141,16384,null,0,Il.i,[e.L],null,null),e.Jb(2048,[[33,4]],kl.j,null,[Il.i]),(l()(),e.hb(0,null,null,2,null,nn)),e.rb(144,16384,null,0,Il.b,[e.L],null,null),e.Jb(2048,[[32,4]],kl.b,null,[Il.b]),(l()(),e.sb(146,0,null,null,12,null,null,null,null,null,null,null)),e.Jb(6144,null,"MAT_SORT_HEADER_COLUMN_DEF",null,[Il.c]),e.rb(148,16384,null,3,Il.c,[],{name:[0,"name"]},null),e.Kb(603979776,35,{cell:0}),e.Kb(603979776,36,{headerCell:0}),e.Kb(603979776,37,{footerCell:0}),e.Jb(2048,[[1,4]],kl.d,null,[Il.c]),(l()(),e.hb(0,null,null,2,null,un)),e.rb(154,16384,null,0,Il.i,[e.L],null,null),e.Jb(2048,[[36,4]],kl.j,null,[Il.i]),(l()(),e.hb(0,null,null,2,null,en)),e.rb(157,16384,null,0,Il.b,[e.L],null,null),e.Jb(2048,[[35,4]],kl.b,null,[Il.b]),(l()(),e.sb(159,0,null,null,12,null,null,null,null,null,null,null)),e.Jb(6144,null,"MAT_SORT_HEADER_COLUMN_DEF",null,[Il.c]),e.rb(161,16384,null,3,Il.c,[],{name:[0,"name"]},null),e.Kb(603979776,38,{cell:0}),e.Kb(603979776,39,{headerCell:0}),e.Kb(603979776,40,{footerCell:0}),e.Jb(2048,[[1,4]],kl.d,null,[Il.c]),(l()(),e.hb(0,null,null,2,null,tn)),e.rb(167,16384,null,0,Il.i,[e.L],null,null),e.Jb(2048,[[39,4]],kl.j,null,[Il.i]),(l()(),e.hb(0,null,null,2,null,rn)),e.rb(170,16384,null,0,Il.b,[e.L],null,null),e.Jb(2048,[[38,4]],kl.b,null,[Il.b]),(l()(),e.sb(172,0,null,null,12,null,null,null,null,null,null,null)),e.Jb(6144,null,"MAT_SORT_HEADER_COLUMN_DEF",null,[Il.c]),e.rb(174,16384,null,3,Il.c,[],{name:[0,"name"]},null),e.Kb(603979776,41,{cell:0}),e.Kb(603979776,42,{headerCell:0}),e.Kb(603979776,43,{footerCell:0}),e.Jb(2048,[[1,4]],kl.d,null,[Il.c]),(l()(),e.hb(0,null,null,2,null,an)),e.rb(180,16384,null,0,Il.i,[e.L],null,null),e.Jb(2048,[[42,4]],kl.j,null,[Il.i]),(l()(),e.hb(0,null,null,2,null,sn)),e.rb(183,16384,null,0,Il.b,[e.L],null,null),e.Jb(2048,[[41,4]],kl.b,null,[Il.b]),(l()(),e.hb(0,null,null,2,null,on)),e.rb(186,540672,null,0,Il.k,[e.L,e.r],{columns:[0,"columns"]},null),e.Jb(2048,[[3,4]],kl.l,null,[Il.k]),(l()(),e.hb(0,null,null,2,null,bn)),e.rb(189,540672,null,0,Il.m,[e.L,e.r],{columns:[0,"columns"]},null),e.Jb(2048,[[2,4]],kl.n,null,[Il.m]),(l()(),e.sb(191,0,null,null,2,"mat-paginator",[["class","mat-paginator"]],null,[[null,"page"]],(function(l,n,u){var e=!0;return"page"===n&&(e=!1!==l.component.loadPage(u)&&e),e}),h.b,h.a)),e.rb(192,245760,[["paginator2",4]],0,m.b,[m.c,e.h],{disabled:[0,"disabled"],pageIndex:[1,"pageIndex"],length:[2,"length"],pageSize:[3,"pageSize"],pageSizeOptions:[4,"pageSizeOptions"]},{page:"page"}),e.Fb(193,5)],(function(l,n){var u=n.component;l(n,3,0,e.Nb(n,3,0,e.Eb(n,4).transform(u.fetcher.isBusy$)));var t=u.disablePaginator,r=null==u.fetcher.currentPage?null:u.fetcher.currentPage.pageIndex,a=u.fetcher.dataLength,i=(null==u.fetcher.currentPage?null:u.fetcher.currentPage.pageSize)||25,s=l(n,7,0,10,25,50,100,250);l(n,6,0,t,r,a,i,s),l(n,10,0,"id","asc"),l(n,11,0,u.fetcher.results$),l(n,18,0,"id"),l(n,31,0,"label"),l(n,44,0,"rhythmic"),l(n,57,0,"empp"),l(n,70,0,"emppbh"),l(n,83,0,"tau"),l(n,96,0,"pattern"),l(n,109,0,"shape"),l(n,122,0,"period"),l(n,135,0,"peak"),l(n,148,0,"peakc"),l(n,161,0,"trough"),l(n,174,0,"troughc"),l(n,186,0,u.displayedColumns),l(n,189,0,u.displayedColumns);var o=u.disablePaginator,b=null==u.fetcher.currentPage?null:u.fetcher.currentPage.pageIndex,c=u.fetcher.dataLength,d=(null==u.fetcher.currentPage?null:u.fetcher.currentPage.pageSize)||25,h=l(n,193,0,10,25,50,100,250);l(n,192,0,o,b,c,d,h)}),null)}var dn=u("TtEo"),hn=u("02hT"),mn=u("zQ7r"),pn=u("tu3j");class gn extends mn.a{constructor(l,n=!1){super(n),this.rhythmicityService=l,this.finishedJob$=this.finished$,this.runningJob$=this.running$,this.allJob$=this.all$}get currentJob(){return this.currentAsset}initIntervalsKeeper(){return new pn.a(1e3,3e4,6e5,2)}assayJob(l){this.input(l)}sameInput(l,n){return l[1]===n[1]&&l[0]===n[0]}fetchAsset([l,n]){return this.rhythmicityService.getJob(l,n)}hasFailed(l){return!!l&&!this.isFinished(l)&&!this.isRunning(l)}isFinished(l){return!(!l||!l.jobStatus||"FINISHED"!==l.jobStatus.state&&"SUCCESS"!==l.jobStatus.state)}isRunning(l){return!!l&&!(!l||!l.jobStatus||"SUBMITTED"!==l.jobStatus.state&&"PROCESSING"!==l.jobStatus.state)}assetToId(l){return l.jobId}assetToInput(l){return[l.parentId,l.jobId]}}var fn=u("2Vo4"),En=u("PqYM"),vn=u("B9cw"),Cn=u("Iab2");class yn{constructor(l,n,u,t){this.rhythmicityService=l,this.rhythmicityJobDatasource=n,this.feedback=u,this.dialogs=t,this.deleted=new e.m,this.isExpanded=!1,this.expandedToogleStream=new fn.a(!1)}set expanded(l){this.isExpanded=l,this.expandedToogleStream.next(l)}ngOnInit(){this.initSubscriptions()}ngOnDestroy(){this.rhythmicityJobDatasource.close(),this.expandedToogleStream&&this.expandedToogleStream.complete()}ngOnChanges(l){(l.jobId||l.assay)&&this.jobId&&this.assay&&this.rhythmicityJobDatasource.assayJob([this.assay.id,this.jobId])}statTestOptions(l){const n=Object(En.a)(1).subscribe(()=>{this.statTestParams=l,n&&n.unsubscribe()})}export(){this.rhythmicityService.downloadJob(this.assay.id,this.jobId).subscribe(l=>{this.saveJobBlob(l,this.assay.id,this.jobId)},l=>this.feedback.error(l))}saveJobBlob(l,n,u){Cn.saveAs(l,n+"_job"+this.shortUUID(u)+".rhythmicity.csv")}refresh(){this.rhythmicityJobDatasource.refresh(),this.resultsTable&&this.resultsTable.reload()}delete(){const l=this.assay,n=this.rhythmicityJobDatasource.currentJob;this.dialogs.confirm("Do you want to delete analysis: "+n.jobId,n.parameters.PARAMS_SUMMARY).subscribe(u=>{u&&this.doDelete(l,n.jobId)})}initSubscriptions(){this.rhythmicityJobDatasource.on(!0),this.rhythmicityJobDatasource.error$.forEach(l=>this.feedback.error(l))}doDelete(l,n){this.rhythmicityService.deleteJob(l,n).subscribe(l=>{this.deleted.next(l),this.feedback.success("Job: "+this.shortUUID(n)+" deleted")},l=>{this.feedback.error(l)})}toggleExpanded(){this.expanded=!this.isExpanded}toLocalDateTime(l){return vn.b.deserialize(l).date}shortUUID(l){if(l){const n=l.indexOf("-");if(n>1)return l.substring(0,n)}return l}}var On=u("9+85"),Mn=e.qb({encapsulation:2,styles:[],data:{}});function _n(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,6,"div",[["class","float-right"]],null,null,null,null,null)),(l()(),e.sb(1,0,null,null,2,"button",[["class","btn btn-danger btn-sm mr-1"],["type","button"]],null,[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.delete()&&e),e}),null,null)),(l()(),e.sb(2,0,null,null,1,"i",[["class","material-icons bd-icon"]],null,null,null,null,null)),(l()(),e.Mb(-1,null,["delete_forever"])),(l()(),e.sb(4,0,null,null,2,"button",[["class","btn btn-primary btn-sm"],["type","button"]],null,[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.export()&&e),e}),null,null)),(l()(),e.sb(5,0,null,null,1,"i",[["class","material-icons bd-icon"]],null,null,null,null,null)),(l()(),e.Mb(-1,null,["save_alt"]))],null,null)}function Sn(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,2,"div",[["class","text-danger"],["style","word-wrap: break-word;"]],null,null,null,null,null)),(l()(),e.sb(1,0,null,null,0,"br",[],null,null,null,null,null)),(l()(),e.Mb(2,null,["ERROR: "," "]))],null,(function(l,n){l(n,2,0,n.parent.context.ngIf.jobStatus.message)}))}function In(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,6,"div",[],null,null,null,null,null)),(l()(),e.sb(1,0,null,null,5,"mat-card",[["class","mat-card"]],[[2,"_mat-animation-noopable",null]],null,null,nl.b,nl.a)),e.rb(2,49152,null,0,ul.a,[[2,el.a]],null,null),(l()(),e.sb(3,0,null,0,3,"mat-card-content",[["class","mat-card-content"]],null,null,null,null,null)),e.rb(4,16384,null,0,ul.c,[],null,null),(l()(),e.sb(5,0,null,null,1,"mat-spinner",[["class","center-block mat-spinner mat-progress-spinner"],["mode","indeterminate"],["role","progressbar"]],[[2,"_mat-animation-noopable",null],[4,"width","px"],[4,"height","px"]],null,null,tl.b,tl.a)),e.rb(6,114688,null,0,rl.d,[e.k,al.a,[2,d.d],[2,el.a],rl.a],null,null)],(function(l,n){l(n,6,0)}),(function(l,n){l(n,1,0,"NoopAnimations"===e.Eb(n,2)._animationMode),l(n,5,0,e.Eb(n,6)._noopAnimations,e.Eb(n,6).diameter,e.Eb(n,6).diameter)}))}function kn(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,6,"div",[],null,null,null,null,null)),(l()(),e.sb(1,0,null,null,5,"mat-card",[["class","mat-card"]],[[2,"_mat-animation-noopable",null]],null,null,nl.b,nl.a)),e.rb(2,49152,null,0,ul.a,[[2,el.a]],null,null),(l()(),e.sb(3,0,null,0,3,"mat-card-content",[["class","mat-card-content"]],null,null,null,null,null)),e.rb(4,16384,null,0,ul.c,[],null,null),(l()(),e.sb(5,0,null,null,1,"div",[["style","margin-top: 0.5em; text-align: center"]],null,null,null,null,null)),(l()(),e.Mb(-1,null,["It may take up to 10 minutes to test for rhythmicity"]))],null,(function(l,n){l(n,1,0,"NoopAnimations"===e.Eb(n,2)._animationMode)}))}function Jn(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,5,null,null,null,null,null,null,null)),(l()(),e.sb(1,0,null,null,1,"bd2-stat-test-options-widget",[],null,[[null,"options"]],(function(l,n,u){var e=!0;return"options"===n&&(e=!1!==l.component.statTestOptions(u)&&e),e}),yl,Cl)),e.rb(2,114688,null,0,vl,[],null,{options:"options"}),(l()(),e.sb(3,0,null,null,2,"bd2-rhythmicity-results-mdtable",[],null,null,null,cn,Al)),e.Jb(512,null,Tl,Tl,[B,[2,R.a]]),e.rb(5,4440064,[[1,4]],0,wl,[Tl,xl.a],{job:[0,"job"],statTestParams:[1,"statTestParams"]},null)],(function(l,n){var u=n.component;l(n,2,0),l(n,5,0,n.context.ngIf,u.statTestParams)}),null)}function Dn(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,10,"div",[],null,null,null,null,null)),(l()(),e.sb(1,0,null,null,1,"mat-divider",[["class","mat-divider"],["role","separator"]],[[1,"aria-orientation",0],[2,"mat-divider-vertical",null],[2,"mat-divider-horizontal",null],[2,"mat-divider-inset",null]],null,null,dn.b,dn.a)),e.rb(2,49152,null,0,hn.a,[],null,null),(l()(),e.hb(16777216,null,null,2,null,In)),e.rb(4,16384,null,0,d.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null),e.Gb(131072,d.b,[e.h]),(l()(),e.hb(16777216,null,null,1,null,kn)),e.rb(7,16384,null,0,d.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.hb(16777216,null,null,2,null,Jn)),e.rb(9,16384,null,0,d.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null),e.Gb(131072,d.b,[e.h])],(function(l,n){var u=n.component;l(n,4,0,e.Nb(n,4,0,e.Eb(n,5).transform(u.rhythmicityJobDatasource.isReloading$))),l(n,7,0,"SUBMITTED"===n.parent.context.ngIf.jobStatus.state),l(n,9,0,e.Nb(n,9,0,e.Eb(n,10).transform(u.rhythmicityJobDatasource.finishedJob$)))}),(function(l,n){l(n,1,0,e.Eb(n,2).vertical?"vertical":"horizontal",e.Eb(n,2).vertical,!e.Eb(n,2).vertical,e.Eb(n,2).inset)}))}function Pn(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,26,"div",[["class","card mb-2"]],null,null,null,null,null)),(l()(),e.sb(1,0,null,null,12,"div",[["class","card-header clearfix"]],null,null,null,null,null)),(l()(),e.sb(2,0,null,null,6,"div",[["class","float-left"],["role","button"]],null,[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.toggleExpanded()&&e),e}),null,null)),(l()(),e.sb(3,0,null,null,1,"i",[["class","material-icons bd-icon"]],[[4,"color",null],[4,"font-size","%"]],null,null,null,null)),(l()(),e.Mb(-1,null,["waves"])),(l()(),e.Mb(5,null,[" \xa0"," (",") "])),e.Ib(6,1),(l()(),e.sb(7,0,null,null,0,"br",[],null,null,null,null,null)),(l()(),e.Mb(8,null,[" "," "," "])),(l()(),e.sb(9,0,null,null,4,"div",[["class","float-right"]],null,null,null,null,null)),(l()(),e.Mb(10,null,[" "," "])),(l()(),e.sb(11,0,null,null,2,"a",[["aria-label","refresh"],["role","button"]],null,[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.refresh()&&e),e}),null,null)),(l()(),e.sb(12,0,null,null,1,"i",[["class","material-icons bd-icon bd-primary"]],null,null,null,null,null)),(l()(),e.Mb(-1,null,["refresh"])),(l()(),e.sb(14,0,null,null,12,"div",[["class","card-body"]],null,null,null,null,null)),(l()(),e.sb(15,0,null,null,9,"mat-card",[["class","mat-card"]],[[2,"_mat-animation-noopable",null]],null,null,nl.b,nl.a)),e.rb(16,49152,null,0,ul.a,[[2,el.a]],null,null),(l()(),e.sb(17,0,null,0,7,"mat-card-content",[["class","mat-card-content"]],null,null,null,null,null)),e.rb(18,16384,null,0,ul.c,[],null,null),(l()(),e.sb(19,0,null,null,5,"div",[["class","clearfix"]],null,null,null,null,null)),(l()(),e.hb(16777216,null,null,1,null,_n)),e.rb(21,16384,null,0,d.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.Mb(22,null,[" "," "])),(l()(),e.hb(16777216,null,null,1,null,Sn)),e.rb(24,16384,null,0,d.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.hb(16777216,null,null,1,null,Dn)),e.rb(26,16384,null,0,d.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null)],(function(l,n){var u=n.component;l(n,21,0,u.assay.security.canWrite),l(n,24,0,n.context.ngIf.jobStatus.message&&"OK"!=n.context.ngIf.jobStatus.message),l(n,26,0,u.isExpanded)}),(function(l,n){var u=n.component;l(n,3,0,u.isExpanded?"green":"red",150);var t=u.shortUUID(n.context.ngIf.jobId),r=e.Nb(n,5,1,l(n,6,0,e.Eb(n.parent,0),u.toLocalDateTime(n.context.ngIf.jobStatus.submitted)));l(n,5,0,t,r),l(n,8,0,n.context.ngIf.parameters.METHOD,n.context.ngIf.parameters.PRESET),l(n,10,0,n.context.ngIf.jobStatus.state),l(n,15,0,"NoopAnimations"===e.Eb(n,16)._animationMode),l(n,22,0,n.context.ngIf.parameters.PARAMS_SUMMARY)}))}function Tn(l){return e.Ob(0,[e.Gb(0,d.e,[e.t]),e.Kb(671088640,1,{resultsTable:0}),(l()(),e.hb(16777216,null,null,2,null,Pn)),e.rb(3,16384,null,0,d.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null),e.Gb(131072,d.b,[e.h])],(function(l,n){var u=n.component;l(n,3,0,e.Nb(n,3,0,e.Eb(n,4).transform(u.rhythmicityJobDatasource.allJob$)))}),null)}class wn extends j{constructor(l,n){super(l,n),this.expandAll=!1,this.blocked=!1,this.titlePart=" Rhythm"}updateModel(l){super.updateModel(l),l&&this.loadJobs(l)}loadJobs(l,n=!1){this.blocked=!0,this.rhythmicityService.getJobs(l).subscribe(u=>{this.jobs=u,this.refreshJobsInfo(u),this.exportURL=this.rhythmicityService.exportURL(l),n&&this.refreshPanes(),this.blocked=!1},l=>{this.blocked=!1,this.feedback.error(l)})}refreshJobsInfo(l){this.jobsIds=l.map(l=>l.jobId)}refresh(){this.loadJobs(this.assay,!0)}refreshPanes(){this.panes&&this.panes.forEach(l=>l.refresh())}remove(l){const n=this.jobs.findIndex(n=>l.jobId===n.jobId);n>=0&&(this.jobs.splice(n,1),this.refreshJobsInfo(this.jobs))}refreshJob(l){const n=this.jobs.findIndex(n=>l.jobId===n.jobId);n>=0&&(this.jobs[n]=l,this.refreshJobsInfo(this.jobs))}calculateQueuing(l){return l.filter(l=>this.isQueueing(l.jobStatus.state)).length}isQueueing(l){switch(l){case"WAITING":case"PROCESSING":case"SUBMITTED":return!0;default:return!1}}checkFinished(l){return!!l.find(l=>this.isFinished(l.jobStatus.state))}isFinished(l){switch(l){case"SUCCESS":case"FINISHED":case"COMPLETED":return!0;default:return!1}}}var xn=e.qb({encapsulation:2,styles:[],data:{}});function An(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,2,"div",[],null,null,null,null,null)),(l()(),e.sb(1,0,null,null,1,"strong",[],null,null,null,null,null)),(l()(),e.Mb(2,null,["Submitted jobs: ",""]))],null,(function(l,n){l(n,2,0,n.component.jobs.length)}))}function Rn(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,1,"div",[],null,null,null,null,null)),(l()(),e.Mb(-1,null,[" No jobs submitted, start a new test. "]))],null,null)}function Ln(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,3,"a",[["class","btn btn-primary mr-1"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(l,n,u){var t=!0;return"click"===n&&(t=!1!==e.Eb(l,1).onClick(u.button,u.ctrlKey,u.metaKey,u.shiftKey)&&t),t}),null,null)),e.rb(1,671744,null,0,ll.o,[ll.l,ll.a,d.j],{routerLink:[0,"routerLink"]},null),e.Fb(2,1),(l()(),e.Mb(-1,null,[" New test "]))],(function(l,n){var u=l(n,2,0,"new");l(n,1,0,u)}),(function(l,n){l(n,0,0,e.Eb(n,1).target,e.Eb(n,1).href)}))}function jn(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,3,"div",[],null,null,null,null,null)),(l()(),e.sb(1,0,null,null,2,"bd2-rhythmicity-job-pane",[],null,[[null,"deleted"],[null,"finished"]],(function(l,n,u){var e=!0,t=l.component;return"deleted"===n&&(e=!1!==t.remove(u)&&e),"finished"===n&&(e=!1!==t.refreshJob(u)&&e),e}),Tn,Mn)),e.Jb(512,null,gn,gn,[B,[2,R.a]]),e.rb(3,770048,[[1,4]],0,yn,[B,gn,xl.a,On.a],{jobId:[0,"jobId"],assay:[1,"assay"],expanded:[2,"expanded"]},{deleted:"deleted"})],(function(l,n){var u=n.component;l(n,3,0,n.context.$implicit,u.assay,u.expandAll||0==n.context.index)}),null)}function Kn(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,18,"div",[],null,null,null,null,null)),(l()(),e.sb(1,0,null,null,1,"h3",[],null,null,null,null,null)),(l()(),e.Mb(-1,null,["Rhythmicity tests"])),(l()(),e.sb(3,0,null,null,0,"hr",[],null,null,null,null,null)),(l()(),e.sb(4,0,null,null,10,"div",[["class","card"]],null,null,null,null,null)),(l()(),e.sb(5,0,null,null,4,"div",[["class","card-header"]],null,null,null,null,null)),(l()(),e.hb(16777216,null,null,1,null,An)),e.rb(7,16384,null,0,d.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.hb(16777216,null,null,1,null,Rn)),e.rb(9,16384,null,0,d.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.sb(10,0,null,null,4,"div",[["class","card-body"]],null,null,null,null,null)),(l()(),e.hb(16777216,null,null,1,null,Ln)),e.rb(12,16384,null,0,d.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.sb(13,0,null,null,1,"button",[["class","btn btn-outline-secondary"],["type","button"]],[[8,"disabled",0]],[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.refresh()&&e),e}),null,null)),(l()(),e.Mb(-1,null,["Refresh "])),(l()(),e.sb(15,0,null,null,0,"hr",[],null,null,null,null,null)),(l()(),e.hb(16777216,null,null,1,null,jn)),e.rb(17,278528,null,0,d.l,[e.O,e.L,e.r],{ngForOf:[0,"ngForOf"]},null),(l()(),e.sb(18,0,null,null,0,"hr",[],null,null,null,null,null))],(function(l,n){var u=n.component;l(n,7,0,u.jobs&&u.jobs.length>0),l(n,9,0,!u.jobs||0==u.jobs.length),l(n,12,0,u.assay.security.canWrite),l(n,17,0,u.jobsIds)}),(function(l,n){l(n,13,0,n.component.blocked)}))}function Nn(l){return e.Ob(0,[e.Kb(671088640,1,{panes:1}),(l()(),e.hb(16777216,null,null,1,null,Kn)),e.rb(2,16384,null,0,d.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null)],(function(l,n){l(n,2,0,n.component.assay)}),null)}function qn(l){return e.Ob(0,[(l()(),e.sb(0,0,null,null,1,"ng-component",[],null,null,null,Nn,xn)),e.rb(1,245760,null,0,wn,[B,V.a],null,null)],(function(l,n){l(n,1,0)}),null)}var Hn=e.ob("ng-component",wn,qn,{},{},[]),Fn=u("QQfA"),Un=u("s6ns"),$n=u("POq0"),Bn=u("JjoW"),Vn=u("Mz6y"),zn=u("cUpR"),Gn=u("Xd0L"),Zn=u("qJ5m"),Yn=u("/Co4"),Qn=u("zMNK"),Wn=u("hOhj"),Xn=u("wMBR"),lu=u("hrfs"),nu=u("Fwaw"),uu=u("qJ50"),eu=u("Gi4r"),tu=u("oapL"),ru=u("ZwOa"),au=u("mkRZ"),iu=u("FVPZ"),su=u("kNGD"),ou=u("5Bek"),bu=u("c9fC"),cu=u("r0V8"),du=u("ZTEM"),hu=u("a6j2");class mu{}var pu=u("dvZr");u.d(n,"RhythmicityModuleNgFactory",(function(){return gu}));var gu=e.pb(t,[],(function(l){return e.Bb([e.Cb(512,e.j,e.ab,[[8,[r.a,a.a,i.a,s.a,X,Hn]],[3,e.j],e.w]),e.Cb(4608,d.o,d.n,[e.t,[2,d.E]]),e.Cb(4608,c.E,c.E,[]),e.Cb(4608,c.f,c.f,[]),e.Cb(4608,Fn.c,Fn.c,[Fn.i,Fn.e,e.j,Fn.h,Fn.f,e.q,e.y,d.d,El.b,[2,d.i]]),e.Cb(5120,Fn.j,Fn.k,[Fn.c]),e.Cb(5120,Un.c,Un.d,[Fn.c]),e.Cb(135680,Un.e,Un.e,[Fn.c,e.q,[2,d.i],[2,Un.b],Un.c,[3,Un.e],Fn.e]),e.Cb(4608,$n.c,$n.c,[]),e.Cb(5120,Bn.a,Bn.b,[Fn.c]),e.Cb(5120,Vn.b,Vn.c,[Fn.c]),e.Cb(4608,zn.e,Gn.e,[[2,Gn.i],[2,Gn.n]]),e.Cb(5120,m.c,m.a,[[3,m.c]]),e.Cb(5120,Sl.d,Sl.a,[[3,Sl.d]]),e.Cb(5120,Zn.g,Zn.a,[[3,Zn.g]]),e.Cb(4608,Gn.d,Gn.d,[]),e.Cb(5120,Yn.b,Yn.c,[Fn.c]),e.Cb(1073742336,d.c,d.c,[]),e.Cb(1073742336,c.D,c.D,[]),e.Cb(1073742336,c.l,c.l,[]),e.Cb(1073742336,c.z,c.z,[]),e.Cb(1073742336,El.a,El.a,[]),e.Cb(1073742336,Qn.f,Qn.f,[]),e.Cb(1073742336,al.b,al.b,[]),e.Cb(1073742336,Wn.c,Wn.c,[]),e.Cb(1073742336,Fn.g,Fn.g,[]),e.Cb(1073742336,Gn.n,Gn.n,[[2,Gn.f],[2,zn.f]]),e.Cb(1073742336,Un.k,Un.k,[]),e.Cb(1073742336,Xn.a,Xn.a,[]),e.Cb(1073742336,lu.b,lu.b,[]),e.Cb(1073742336,$n.d,$n.d,[]),e.Cb(1073742336,cl.e,cl.e,[]),e.Cb(1073742336,Gn.x,Gn.x,[]),e.Cb(1073742336,Gn.v,Gn.v,[]),e.Cb(1073742336,Gn.s,Gn.s,[]),e.Cb(1073742336,Bn.d,Bn.d,[]),e.Cb(1073742336,nu.c,nu.c,[]),e.Cb(1073742336,ol.a,ol.a,[]),e.Cb(1073742336,Vn.e,Vn.e,[]),e.Cb(1073742336,m.d,m.d,[]),e.Cb(1073742336,rl.c,rl.c,[]),e.Cb(1073742336,sl.d,sl.d,[]),e.Cb(1073742336,Sl.e,Sl.e,[]),e.Cb(1073742336,kl.p,kl.p,[]),e.Cb(1073742336,Il.o,Il.o,[]),e.Cb(1073742336,fl.d,fl.d,[]),e.Cb(1073742336,fl.c,fl.c,[]),e.Cb(1073742336,ul.e,ul.e,[]),e.Cb(1073742336,hn.b,hn.b,[]),e.Cb(1073742336,uu.e,uu.e,[]),e.Cb(1073742336,eu.c,eu.c,[]),e.Cb(1073742336,Zn.h,Zn.h,[]),e.Cb(1073742336,tu.c,tu.c,[]),e.Cb(1073742336,ru.c,ru.c,[]),e.Cb(1073742336,au.a,au.a,[]),e.Cb(1073742336,Gn.o,Gn.o,[]),e.Cb(1073742336,iu.a,iu.a,[]),e.Cb(1073742336,su.f,su.f,[]),e.Cb(1073742336,Yn.e,Yn.e,[]),e.Cb(1073742336,ou.c,ou.c,[]),e.Cb(1073742336,bu.c,bu.c,[]),e.Cb(1073742336,Ml.c,Ml.c,[]),e.Cb(1073742336,cu.e,cu.e,[]),e.Cb(1073742336,cu.c,cu.c,[]),e.Cb(1073742336,du.a,du.a,[]),e.Cb(1073742336,hu.a,hu.a,[]),e.Cb(1073742336,ll.p,ll.p,[[2,ll.u],[2,ll.l]]),e.Cb(1073742336,mu,mu,[]),e.Cb(1073742336,t,t,[]),e.Cb(256,su.a,{separatorKeyCodes:[pu.g]},[]),e.Cb(1024,ll.j,(function(){return[[{path:"",children:[{path:"new",component:q},{path:"",component:wn,pathMatch:"full"}]}]]}),[])])}))}}]);