function _get(l,n,u){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(l,n,u){var e=_superPropBase(l,n);if(e){var t=Object.getOwnPropertyDescriptor(e,n);return t.get?t.get.call(u):t.value}})(l,n,u||l)}function _superPropBase(l,n){for(;!Object.prototype.hasOwnProperty.call(l,n)&&null!==(l=_getPrototypeOf(l)););return l}function _defineProperties(l,n){for(var u=0;u<n.length;u++){var e=n[u];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(l,e.key,e)}}function _createClass(l,n,u){return n&&_defineProperties(l.prototype,n),u&&_defineProperties(l,u),l}function _possibleConstructorReturn(l,n){return!n||"object"!=typeof n&&"function"!=typeof n?_assertThisInitialized(l):n}function _assertThisInitialized(l){if(void 0===l)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}function _getPrototypeOf(l){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(l){return l.__proto__||Object.getPrototypeOf(l)})(l)}function _inherits(l,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(n&&n.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),n&&_setPrototypeOf(l,n)}function _setPrototypeOf(l,n){return(_setPrototypeOf=Object.setPrototypeOf||function(l,n){return l.__proto__=n,l})(l,n)}function _classCallCheck(l,n){if(!(l instanceof n))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{cXDc:function(l,n,u){"use strict";u.r(n);var e=u("8Y7J"),t=function l(){_classCallCheck(this,l)},a=u("NcP4"),r=u("t68o"),i=u("pMnS"),o=u("b8ec"),s=u("nA4b"),c=u("s7LF"),b=u("SVse"),d=u("b1+6"),p=u("OIZN"),g=function(l){function n(l){return _classCallCheck(this,n),_possibleConstructorReturn(this,_getPrototypeOf(n).call(this,l))}return _inherits(n,l),n}(u("wcxA").a),f=e.rb({encapsulation:2,styles:[],data:{}});function h(l){return e.Pb(0,[(l()(),e.tb(0,0,null,null,3,"option",[],null,null,null,null,null)),e.sb(1,147456,null,0,c.v,[e.k,e.D,[2,c.B]],{value:[0,"value"]},null),e.sb(2,147456,null,0,c.G,[e.k,e.D,[8,null]],{value:[0,"value"]},null),(l()(),e.Nb(3,null,["",""]))],(function(l,n){l(n,1,0,n.context.$implicit.name),l(n,2,0,n.context.$implicit.name)}),(function(l,n){l(n,3,0,n.context.$implicit.label)}))}function m(l){return e.Pb(0,[(l()(),e.tb(0,0,null,null,3,"option",[],null,null,null,null,null)),e.sb(1,147456,null,0,c.v,[e.k,e.D,[2,c.B]],{value:[0,"value"]},null),e.sb(2,147456,null,0,c.G,[e.k,e.D,[8,null]],{value:[0,"value"]},null),(l()(),e.Nb(3,null,["",""]))],(function(l,n){l(n,1,0,n.context.$implicit.name),l(n,2,0,n.context.$implicit.name)}),(function(l,n){l(n,3,0,n.context.$implicit.label)}))}function v(l){return e.Pb(0,[(l()(),e.tb(0,0,null,null,3,"option",[],null,null,null,null,null)),e.sb(1,147456,null,0,c.v,[e.k,e.D,[2,c.B]],{value:[0,"value"]},null),e.sb(2,147456,null,0,c.G,[e.k,e.D,[8,null]],{value:[0,"value"]},null),(l()(),e.Nb(3,null,["",""]))],(function(l,n){l(n,1,0,n.context.$implicit.name),l(n,2,0,n.context.$implicit.name)}),(function(l,n){l(n,3,0,n.context.$implicit.label)}))}function y(l){return e.Pb(0,[e.Lb(402653184,1,{dataPaginator:0}),(l()(),e.tb(1,0,null,null,84,"form",[["class","form-horizontal"],["novalidate",""],["role","form"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],(function(l,n,u){var t=!0;return"submit"===n&&(t=!1!==e.Fb(l,3).onSubmit(u)&&t),"reset"===n&&(t=!1!==e.Fb(l,3).onReset()&&t),t}),null,null)),e.sb(2,16384,null,0,c.H,[],null,null),e.sb(3,540672,null,0,c.j,[[8,null],[8,null]],{form:[0,"form"]},null),e.Kb(2048,null,c.d,null,[c.j]),e.sb(5,16384,null,0,c.s,[[4,c.d]],null,null),(l()(),e.tb(6,0,null,null,29,"div",[["class","form-group row"],["formGroupName","timeScale"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,null,null)),e.sb(7,212992,null,0,c.k,[[3,c.d],[8,null],[8,null]],{name:[0,"name"]},null),e.Kb(2048,null,c.d,null,[c.k]),e.sb(9,16384,null,0,c.s,[[4,c.d]],null,null),(l()(),e.tb(10,0,null,null,1,"label",[["class","col-sm-2"]],null,null,null,null,null)),(l()(),e.Nb(-1,null,["Time scale"])),(l()(),e.tb(12,0,null,null,1,"label",[["class","col-sm-1"],["for","timeStart"]],null,null,null,null,null)),(l()(),e.Nb(-1,null,["from:"])),(l()(),e.tb(14,0,null,null,9,"div",[["class","col-sm-3"]],null,null,null,null,null)),(l()(),e.tb(15,0,null,null,8,"input",[["class","form-control"],["formControlName","timeStart"],["id","timeStart"],["min","0"],["required",""],["size","5"],["step","any"],["type","number"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],(function(l,n,u){var t=!0;return"input"===n&&(t=!1!==e.Fb(l,16)._handleInput(u.target.value)&&t),"blur"===n&&(t=!1!==e.Fb(l,16).onTouched()&&t),"compositionstart"===n&&(t=!1!==e.Fb(l,16)._compositionStart()&&t),"compositionend"===n&&(t=!1!==e.Fb(l,16)._compositionEnd(u.target.value)&&t),"change"===n&&(t=!1!==e.Fb(l,17).onChange(u.target.value)&&t),"input"===n&&(t=!1!==e.Fb(l,17).onChange(u.target.value)&&t),"blur"===n&&(t=!1!==e.Fb(l,17).onTouched()&&t),t}),null,null)),e.sb(16,16384,null,0,c.e,[e.D,e.k,[2,c.a]],null,null),e.sb(17,16384,null,0,c.w,[e.D,e.k],null,null),e.sb(18,16384,null,0,c.A,[],{required:[0,"required"]},null),e.Kb(1024,null,c.o,(function(l){return[l]}),[c.A]),e.Kb(1024,null,c.p,(function(l,n){return[l,n]}),[c.e,c.w]),e.sb(21,671744,null,0,c.i,[[3,c.d],[6,c.o],[8,null],[6,c.p],[2,c.F]],{name:[0,"name"]},null),e.Kb(2048,null,c.q,null,[c.i]),e.sb(23,16384,null,0,c.r,[[4,c.q]],null,null),(l()(),e.tb(24,0,null,null,1,"label",[["class","col-sm-1"],["for","timeEnd"]],null,null,null,null,null)),(l()(),e.Nb(-1,null,["to:"])),(l()(),e.tb(26,0,null,null,9,"div",[["class","col-sm-3"]],null,null,null,null,null)),(l()(),e.tb(27,0,null,null,8,"input",[["class","form-control"],["formControlName","timeEnd"],["id","timeEnd"],["min","0"],["required",""],["size","5"],["step","any"],["type","number"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],(function(l,n,u){var t=!0;return"input"===n&&(t=!1!==e.Fb(l,28)._handleInput(u.target.value)&&t),"blur"===n&&(t=!1!==e.Fb(l,28).onTouched()&&t),"compositionstart"===n&&(t=!1!==e.Fb(l,28)._compositionStart()&&t),"compositionend"===n&&(t=!1!==e.Fb(l,28)._compositionEnd(u.target.value)&&t),"change"===n&&(t=!1!==e.Fb(l,29).onChange(u.target.value)&&t),"input"===n&&(t=!1!==e.Fb(l,29).onChange(u.target.value)&&t),"blur"===n&&(t=!1!==e.Fb(l,29).onTouched()&&t),t}),null,null)),e.sb(28,16384,null,0,c.e,[e.D,e.k,[2,c.a]],null,null),e.sb(29,16384,null,0,c.w,[e.D,e.k],null,null),e.sb(30,16384,null,0,c.A,[],{required:[0,"required"]},null),e.Kb(1024,null,c.o,(function(l){return[l]}),[c.A]),e.Kb(1024,null,c.p,(function(l,n){return[l,n]}),[c.e,c.w]),e.sb(33,671744,null,0,c.i,[[3,c.d],[6,c.o],[8,null],[6,c.p],[2,c.F]],{name:[0,"name"]},null),e.Kb(2048,null,c.q,null,[c.i]),e.sb(35,16384,null,0,c.r,[[4,c.q]],null,null),(l()(),e.tb(36,0,null,null,15,"div",[["class","form-group row"]],null,null,null,null,null)),(l()(),e.tb(37,0,null,null,1,"label",[["class","col-sm-2"],["for","detrending"]],null,null,null,null,null)),(l()(),e.Nb(-1,null,["Processing"])),(l()(),e.tb(39,0,null,null,1,"label",[["class","col-sm-2"],["for","detrending"]],null,null,null,null,null)),(l()(),e.Nb(-1,null,["Detrending"])),(l()(),e.tb(41,0,null,null,10,"div",[["class","col-sm-6"]],null,null,null,null,null)),(l()(),e.tb(42,0,null,null,9,"select",[["class","form-control"],["formControlName","detrending"],["id","detrending"],["required",""]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"blur"]],(function(l,n,u){var t=!0;return"change"===n&&(t=!1!==e.Fb(l,43).onChange(u.target.value)&&t),"blur"===n&&(t=!1!==e.Fb(l,43).onTouched()&&t),t}),null,null)),e.sb(43,16384,null,0,c.B,[e.D,e.k],null,null),e.sb(44,16384,null,0,c.A,[],{required:[0,"required"]},null),e.Kb(1024,null,c.o,(function(l){return[l]}),[c.A]),e.Kb(1024,null,c.p,(function(l){return[l]}),[c.B]),e.sb(47,671744,null,0,c.i,[[3,c.d],[6,c.o],[8,null],[6,c.p],[2,c.F]],{name:[0,"name"]},null),e.Kb(2048,null,c.q,null,[c.i]),e.sb(49,16384,null,0,c.r,[[4,c.q]],null,null),(l()(),e.ib(16777216,null,null,1,null,h)),e.sb(51,278528,null,0,b.l,[e.O,e.L,e.r],{ngForOf:[0,"ngForOf"]},null),(l()(),e.tb(52,0,null,null,27,"div",[["class","form-group row"]],null,null,null,null,null)),(l()(),e.tb(53,0,null,null,0,"label",[["class","col-sm-2"]],null,null,null,null,null)),(l()(),e.tb(54,0,null,null,1,"label",[["class","col-sm-1"]],null,null,null,null,null)),(l()(),e.Nb(-1,null,["Norm."])),(l()(),e.tb(56,0,null,null,10,"div",[["class","col-sm-3"]],null,null,null,null,null)),(l()(),e.tb(57,0,null,null,9,"select",[["class","form-control"],["formControlName","normalisation"],["id","normalisation"],["required",""]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"blur"]],(function(l,n,u){var t=!0;return"change"===n&&(t=!1!==e.Fb(l,58).onChange(u.target.value)&&t),"blur"===n&&(t=!1!==e.Fb(l,58).onTouched()&&t),t}),null,null)),e.sb(58,16384,null,0,c.B,[e.D,e.k],null,null),e.sb(59,16384,null,0,c.A,[],{required:[0,"required"]},null),e.Kb(1024,null,c.o,(function(l){return[l]}),[c.A]),e.Kb(1024,null,c.p,(function(l){return[l]}),[c.B]),e.sb(62,671744,null,0,c.i,[[3,c.d],[6,c.o],[8,null],[6,c.p],[2,c.F]],{name:[0,"name"]},null),e.Kb(2048,null,c.q,null,[c.i]),e.sb(64,16384,null,0,c.r,[[4,c.q]],null,null),(l()(),e.ib(16777216,null,null,1,null,m)),e.sb(66,278528,null,0,b.l,[e.O,e.L,e.r],{ngForOf:[0,"ngForOf"]},null),(l()(),e.tb(67,0,null,null,1,"label",[["class","col-sm-1"]],null,null,null,null,null)),(l()(),e.Nb(-1,null,["Align"])),(l()(),e.tb(69,0,null,null,10,"div",[["class","col-sm-3"]],null,null,null,null,null)),(l()(),e.tb(70,0,null,null,9,"select",[["class","form-control"],["formControlName","align"],["id","align"],["required",""]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"blur"]],(function(l,n,u){var t=!0;return"change"===n&&(t=!1!==e.Fb(l,71).onChange(u.target.value)&&t),"blur"===n&&(t=!1!==e.Fb(l,71).onTouched()&&t),t}),null,null)),e.sb(71,16384,null,0,c.B,[e.D,e.k],null,null),e.sb(72,16384,null,0,c.A,[],{required:[0,"required"]},null),e.Kb(1024,null,c.o,(function(l){return[l]}),[c.A]),e.Kb(1024,null,c.p,(function(l){return[l]}),[c.B]),e.sb(75,671744,null,0,c.i,[[3,c.d],[6,c.o],[8,null],[6,c.p],[2,c.F]],{name:[0,"name"]},null),e.Kb(2048,null,c.q,null,[c.i]),e.sb(77,16384,null,0,c.r,[[4,c.q]],null,null),(l()(),e.ib(16777216,null,null,1,null,v)),e.sb(79,278528,null,0,b.l,[e.O,e.L,e.r],{ngForOf:[0,"ngForOf"]},null),(l()(),e.tb(80,0,null,null,5,"div",[["class","form-group row"]],null,null,null,null,null)),(l()(),e.tb(81,0,null,null,0,"label",[["class","col-sm-2"]],null,null,null,null,null)),(l()(),e.tb(82,0,null,null,3,"div",[["class","col-sm-8"]],null,null,null,null,null)),(l()(),e.tb(83,0,null,null,2,"mat-paginator",[["class","mat-paginator"]],null,[[null,"page"]],(function(l,n,u){var e=!0;return"page"===n&&(e=!1!==l.component.loadDataPage(u)&&e),e}),d.b,d.a)),e.sb(84,245760,[[1,4],["dataPaginator",4]],0,p.b,[p.c,e.h],{disabled:[0,"disabled"],pageIndex:[1,"pageIndex"],length:[2,"length"],pageSize:[3,"pageSize"],pageSizeOptions:[4,"pageSizeOptions"]},{page:"page"}),e.Gb(85,5)],(function(l,n){var u=n.component;l(n,3,0,u.mainForm),l(n,7,0,"timeScale"),l(n,18,0,""),l(n,21,0,"timeStart"),l(n,30,0,""),l(n,33,0,"timeEnd"),l(n,44,0,""),l(n,47,0,"detrending"),l(n,51,0,u.detrendingOptions),l(n,59,0,""),l(n,62,0,"normalisation"),l(n,66,0,u.normalisationOptions),l(n,72,0,""),l(n,75,0,"align"),l(n,79,0,u.alignOptions);var e=u.disabledPagination,t=u.currentPage.pageIndex,a=u.totalTraces,r=u.currentPage.pageSize,i=l(n,85,0,10,25,50,100,200);l(n,84,0,e,t,a,r,i)}),(function(l,n){l(n,1,0,e.Fb(n,5).ngClassUntouched,e.Fb(n,5).ngClassTouched,e.Fb(n,5).ngClassPristine,e.Fb(n,5).ngClassDirty,e.Fb(n,5).ngClassValid,e.Fb(n,5).ngClassInvalid,e.Fb(n,5).ngClassPending),l(n,6,0,e.Fb(n,9).ngClassUntouched,e.Fb(n,9).ngClassTouched,e.Fb(n,9).ngClassPristine,e.Fb(n,9).ngClassDirty,e.Fb(n,9).ngClassValid,e.Fb(n,9).ngClassInvalid,e.Fb(n,9).ngClassPending),l(n,15,0,e.Fb(n,18).required?"":null,e.Fb(n,23).ngClassUntouched,e.Fb(n,23).ngClassTouched,e.Fb(n,23).ngClassPristine,e.Fb(n,23).ngClassDirty,e.Fb(n,23).ngClassValid,e.Fb(n,23).ngClassInvalid,e.Fb(n,23).ngClassPending),l(n,27,0,e.Fb(n,30).required?"":null,e.Fb(n,35).ngClassUntouched,e.Fb(n,35).ngClassTouched,e.Fb(n,35).ngClassPristine,e.Fb(n,35).ngClassDirty,e.Fb(n,35).ngClassValid,e.Fb(n,35).ngClassInvalid,e.Fb(n,35).ngClassPending),l(n,42,0,e.Fb(n,44).required?"":null,e.Fb(n,49).ngClassUntouched,e.Fb(n,49).ngClassTouched,e.Fb(n,49).ngClassPristine,e.Fb(n,49).ngClassDirty,e.Fb(n,49).ngClassValid,e.Fb(n,49).ngClassInvalid,e.Fb(n,49).ngClassPending),l(n,57,0,e.Fb(n,59).required?"":null,e.Fb(n,64).ngClassUntouched,e.Fb(n,64).ngClassTouched,e.Fb(n,64).ngClassPristine,e.Fb(n,64).ngClassDirty,e.Fb(n,64).ngClassValid,e.Fb(n,64).ngClassInvalid,e.Fb(n,64).ngClassPending),l(n,70,0,e.Fb(n,72).required?"":null,e.Fb(n,77).ngClassUntouched,e.Fb(n,77).ngClassTouched,e.Fb(n,77).ngClassPristine,e.Fb(n,77).ngClassDirty,e.Fb(n,77).ngClassValid,e.Fb(n,77).ngClassInvalid,e.Fb(n,77).ngClassPending)}))}var D=u("QBpm"),C=u("ZC3s"),F=u("Iurr"),P=u("yYXI"),k=u("bngM"),_=function(){function l(n){_classCallCheck(this,l),this.rows=new Map,this.nextColumn=0,this.sorted=!0,null!=n&&(this.sorted=n)}return _createClass(l,[{key:"append",value:function(l,n){this.put(l,n,this.nextColumn)}},{key:"put",value:function(l,n,u){this._put(l,n,u),this.nextColumn=Math.max(this.nextColumn,u+1)}},{key:"putColumn",value:function(l,n,u){var e=this;l.forEach((function(l,t){e._put(l,n[t],u)})),this.nextColumn=Math.max(this.nextColumn,u+1)}},{key:"appendColumn",value:function(l,n){this.putColumn(l,n,this.nextColumn)}},{key:"getValue",value:function(l,n){var u=this.rows.get(l);return u?u[n]:void 0}},{key:"getRow",value:function(l){return this.rows.get(l)}},{key:"forEach",value:function(l){var n=this;this.keys().forEach((function(u,e){var t={key:u,columns:n.rows.get(u)};l(t,e,n)}))}},{key:"forEachFlat",value:function(l){var n=this;this.keys().forEach((function(u,e){var t=[u].concat(n.rows.get(u));l(t,e,n)}))}},{key:"keys",value:function(){return this.sorted?Array.from(this.rows.keys()).sort((function(l,n){return l==n?0:l<n?-1:1})):Array.from(this.rows.keys())}},{key:"_put",value:function(l,n,u){var e=this.rows.get(l);e||this.rows.set(l,e=[]),e[u]=n}},{key:"width",get:function(){return this.nextColumn}},{key:"size",get:function(){return this.rows.size}}]),l}(),O=function(){function l(){_classCallCheck(this,l),this.SEP=","}return _createClass(l,[{key:"renderCSVTable",value:function(l,n,u){var e=this.prepareHeaders(u,n);this.appendDataLabels(e,l);var t=this.prepareDataTable(l);return this.mapToString(e,this.SEP)+this.mapToString(t,this.SEP)}},{key:"prepareHeaders",value:function(l,n){var u=this.prepareExpHeaders(l);return this.appendDataProperties(u,n),u}},{key:"prepareExpHeaders",value:function(l){var n=new _(!1);return n.put("Exp Id:",""+l.id,0),n.put("Exp URL:","https://biodare2.ed.ac.uk/experiment/"+l.id,0),n.put("Exp Name:",l.name,0),l.contributionDesc.authors.forEach((function(l,u){n.put("Authors:",l.name,u)})),n}},{key:"appendDataProperties",value:function(l,n){l.put("Detrending:",n.detrending.label,0),l.put("Normalization:",n.normalisation,0),l.put("Align:",n.align,0)}},{key:"appendDataLabels",value:function(l,n){n.forEach((function(n,u){l.put("Label:",n.label,u)}))}},{key:"prepareDataTable",value:function(l){var n=new _;return l.forEach((function(l){var u=l.data.map((function(l){return l.x})),e=l.data.map((function(l){return l.y}));n.appendColumn(u,e)})),n}},{key:"mapToString",value:function(l,n){var u="";return l.forEachFlat((function(l){for(var e=0;e<l.length;e++)void 0!==l[e]&&(u+=l[e]),u+=n;u+="\n"})),u}}]),l}(),x=u("Kj3r"),w=u("Iab2"),S=function(l){function n(l,u,e,t,a){var r;return _classCallCheck(this,n),(r=_possibleConstructorReturn(this,_getPrototypeOf(n).call(this,a))).fetcher=l,r.tsdataService=u,r.RDMSocial=e,r.analytics=t,r.timeseries=[],r.totalTraces=0,r.currentPage=k.a.firstPage(),r.tracesPerPlot=5,r.blocked=!1,r.disabledSecondary=!1,r.csvExporter=new O,r.titlePart=" Data",r}return _inherits(n,l),_createClass(n,[{key:"ngOnInit",value:function(){var l=this;_get(_getPrototypeOf(n.prototype),"ngOnInit",this).call(this),this.timeSeriesSubsripction=this.fetcher.seriesPackStream.pipe(Object(x.a)(1e3)).subscribe((function(n){if(l.assay){var u=n.data;l.currentParams=n.params,l.exportURL=l.tsdataService.exportURL(l.assay,n.params),l.timeseries=u,l.tracesPerPlot=Math.max(5,u.length/20),l.totalTraces=n.totalTraces,l.currentPage=n.currentPage,l.analytics.experimentDataViev(l.assay.id)}}),(function(n){console.log("Error in TS subscription: "+n),l.feedback.error(n)}))}},{key:"ngOnDestroy",value:function(){this.timeSeriesSubsripction&&this.timeSeriesSubsripction.unsubscribe(),this.fetcher.ngOnDestroy(),_get(_getPrototypeOf(n.prototype),"ngOnDestroy",this).call(this)}},{key:"displayChanged",value:function(l){this.fetcher.changeDisplayParams(l)}},{key:"exportData",value:function(){var l=this.csvExporter.renderCSVTable(this.timeseries,this.currentParams,this.assay),n=new Blob([l],{type:"text/csv"});w.saveAs(n,this.assay.id+"_data."+this.currentParams.detrending.name+".csv"),this.recordExport()}},{key:"recordExport",value:function(){this.analytics.experimentDataExport(this.assay.id)}},{key:"updateModel",value:function(l){var u=this;_get(_getPrototypeOf(n.prototype),"updateModel",this).call(this,l),this.RDMSocial.canProceedByMeasurement(l).then((function(l){u.disabledSecondary=!l})),this.fetcher.experiment(l)}}]),n}(P.a),q=u("vejM"),T=u("ZMwR"),E=u("GVyA"),N=e.rb({encapsulation:2,styles:[],data:{}});function I(l){return e.Pb(0,[(l()(),e.tb(0,0,null,null,4,"div",[["class","alert alert-danger"],["role","alert"],["type","danger"]],null,null,null,null,null)),(l()(),e.Nb(-1,null,["Please complete "])),(l()(),e.tb(2,0,null,null,1,"a",[],null,[[null,"click"]],(function(l,n,u){var e=!0,t=l.component;return"click"===n&&(e=!1!==t.goToExpEdit(t.assay.id,"MeasurementSection")&&e),e}),null,null)),(l()(),e.Nb(-1,null,["Measurement details"])),(l()(),e.Nb(-1,null,[" to get access to the secondary data "]))],null,null)}function j(l){return e.Pb(0,[(l()(),e.tb(0,0,null,null,7,"div",[["class","float-right"]],null,null,null,null,null)),(l()(),e.tb(1,0,null,null,6,"h5",[],null,null,null,null,null)),(l()(),e.Nb(-1,null,["export data "])),(l()(),e.tb(3,0,null,null,4,"a",[["aria-label","download"],["class","btn btn-primary"],["download",""],["role","button"]],null,[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.exportData()&&e),e}),null,null)),(l()(),e.tb(4,0,null,null,1,"i",[["class","material-icons bd-icon"]],null,null,null,null,null)),(l()(),e.Nb(-1,null,["save_alt"])),(l()(),e.tb(6,0,null,null,1,"span",[["class","cdk-visually-hidden"]],null,null,null,null,null)),(l()(),e.Nb(-1,null,["Download"]))],null,null)}function K(l){return e.Pb(0,[(l()(),e.tb(0,0,null,null,1,"bd2-ts-plots",[],null,null,null,o.b,o.a)),e.sb(1,114688,null,0,s.a,[],{tracesPerPlot:[0,"tracesPerPlot"],data:[1,"data"]},null)],(function(l,n){var u=n.component;l(n,1,0,u.tracesPerPlot,u.timeseries)}),null)}function A(l){return e.Pb(0,[(l()(),e.tb(0,0,null,null,1,"h3",[],null,null,null,null,null)),(l()(),e.Nb(-1,null,["Show timeseries"])),(l()(),e.tb(2,0,null,null,0,"hr",[],null,null,null,null,null)),(l()(),e.tb(3,0,null,null,1,"bd2-tsdisplay-params-rform",[],null,[[null,"displayParams"]],(function(l,n,u){var e=!0;return"displayParams"===n&&(e=!1!==l.component.displayChanged(u)&&e),e}),y,f)),e.sb(4,4440064,null,0,g,[c.f],{disabled:[0,"disabled"],totalTraces:[1,"totalTraces"],currentPage:[2,"currentPage"]},{displayParams:"displayParams"}),(l()(),e.ib(16777216,null,null,1,null,I)),e.sb(6,16384,null,0,b.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.tb(7,0,null,null,0,"hr",[],null,null,null,null,null)),(l()(),e.tb(8,0,null,null,1,"div",[["class","alert alert-info"],["dismissOnTimeout","20000"],["dismissible","true"],["role","alert"],["type","info"]],null,null,null,null,null)),(l()(),e.Nb(-1,null,[" Hint: You can click on trace label box to remove it from the plot. "])),(l()(),e.ib(16777216,null,null,1,null,j)),e.sb(11,16384,null,0,b.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.tb(12,0,null,null,0,"div",[["class","clearfix"]],null,null,null,null,null)),(l()(),e.tb(13,0,null,null,0,"hr",[],null,null,null,null,null)),(l()(),e.ib(16777216,null,null,1,null,K)),e.sb(15,16384,null,0,b.m,[e.O,e.L],{ngIf:[0,"ngIf"]},null)],(function(l,n){var u=n.component;l(n,4,0,u.disabledSecondary,u.totalTraces,u.currentPage),l(n,6,0,u.disabledSecondary),l(n,11,0,u.timeseries&&u.exportURL),l(n,15,0,u.timeseries)}),null)}var M=e.pb("ng-component",S,(function(l){return e.Pb(0,[(l()(),e.tb(0,0,null,null,2,"ng-component",[],null,null,null,A,N)),e.Kb(131584,null,D.a,D.a,[C.a,[2,F.a]]),e.sb(2,245760,null,0,S,[D.a,C.a,q.a,T.a,E.a],null,null)],(function(l,n){l(n,2,0)}),null)}),{},{},[]),z=u("POq0"),R=u("QQfA"),L=u("IP0z"),B=u("JjoW"),V=u("Mz6y"),U=u("cUpR"),Z=u("Xd0L"),G=u("7kcP"),H=u("qJ5m"),$=u("s6ns"),J=u("/Co4"),Q=u("YiFe"),Y=u("hrfs"),X=u("HsOI"),W=u("zMNK"),ll=u("/HVE"),nl=u("hOhj"),ul=u("Fwaw"),el=u("5GAg"),tl=u("W5yJ"),al=u("elxJ"),rl=u("zQui"),il=u("8rEH"),ol=u("pBi1"),sl=u("igqZ"),cl=u("02hT"),bl=u("qJ50"),dl=u("Gi4r"),pl=u("oapL"),gl=u("ZwOa"),fl=u("mkRZ"),hl=u("FVPZ"),ml=u("kNGD"),vl=u("5Bek"),yl=u("c9fC"),Dl=u("8P0U"),Cl=u("r0V8"),Fl=u("ZTEM"),Pl=u("a6j2"),kl=u("iInd"),_l=function(){return Promise.all([u.e(0),u.e(17)]).then(u.bind(null,"ilZ+")).then((function(l){return l.TsOldImportModuleNgFactory}))},Ol=function(){return Promise.all([u.e(0),u.e(12)]).then(u.bind(null,"/Kdp")).then((function(l){return l.TsImportModuleNgFactory}))},xl=function l(){_classCallCheck(this,l)},wl=u("dvZr");u.d(n,"TsDataModuleNgFactory",(function(){return Sl}));var Sl=e.qb(t,[],(function(l){return e.Cb([e.Db(512,e.j,e.ab,[[8,[a.a,r.a,i.a,M]],[3,e.j],e.w]),e.Db(4608,b.o,b.n,[e.t,[2,b.E]]),e.Db(4608,c.E,c.E,[]),e.Db(4608,c.f,c.f,[]),e.Db(4608,z.c,z.c,[]),e.Db(4608,R.c,R.c,[R.i,R.e,e.j,R.h,R.f,e.q,e.y,b.d,L.b,[2,b.i]]),e.Db(5120,R.j,R.k,[R.c]),e.Db(5120,B.a,B.b,[R.c]),e.Db(5120,V.b,V.c,[R.c]),e.Db(4608,U.e,Z.e,[[2,Z.i],[2,Z.n]]),e.Db(5120,p.c,p.a,[[3,p.c]]),e.Db(5120,G.d,G.a,[[3,G.d]]),e.Db(5120,H.g,H.a,[[3,H.g]]),e.Db(4608,Z.d,Z.d,[]),e.Db(5120,$.c,$.d,[R.c]),e.Db(135680,$.e,$.e,[R.c,e.q,[2,b.i],[2,$.b],$.c,[3,$.e],R.e]),e.Db(5120,J.b,J.c,[R.c]),e.Db(1073742336,b.c,b.c,[]),e.Db(1073742336,c.D,c.D,[]),e.Db(1073742336,c.l,c.l,[]),e.Db(1073742336,c.z,c.z,[]),e.Db(1073742336,Q.a,Q.a,[]),e.Db(1073742336,Y.b,Y.b,[]),e.Db(1073742336,z.d,z.d,[]),e.Db(1073742336,X.e,X.e,[]),e.Db(1073742336,L.a,L.a,[]),e.Db(1073742336,W.f,W.f,[]),e.Db(1073742336,ll.b,ll.b,[]),e.Db(1073742336,nl.c,nl.c,[]),e.Db(1073742336,R.g,R.g,[]),e.Db(1073742336,Z.n,Z.n,[[2,Z.f],[2,U.f]]),e.Db(1073742336,Z.x,Z.x,[]),e.Db(1073742336,Z.v,Z.v,[]),e.Db(1073742336,Z.s,Z.s,[]),e.Db(1073742336,B.d,B.d,[]),e.Db(1073742336,ul.c,ul.c,[]),e.Db(1073742336,el.a,el.a,[]),e.Db(1073742336,V.e,V.e,[]),e.Db(1073742336,p.d,p.d,[]),e.Db(1073742336,tl.c,tl.c,[]),e.Db(1073742336,al.d,al.d,[]),e.Db(1073742336,G.e,G.e,[]),e.Db(1073742336,rl.p,rl.p,[]),e.Db(1073742336,il.o,il.o,[]),e.Db(1073742336,ol.d,ol.d,[]),e.Db(1073742336,ol.c,ol.c,[]),e.Db(1073742336,sl.e,sl.e,[]),e.Db(1073742336,cl.b,cl.b,[]),e.Db(1073742336,bl.e,bl.e,[]),e.Db(1073742336,dl.c,dl.c,[]),e.Db(1073742336,H.h,H.h,[]),e.Db(1073742336,pl.c,pl.c,[]),e.Db(1073742336,gl.c,gl.c,[]),e.Db(1073742336,fl.e,fl.e,[]),e.Db(1073742336,Z.o,Z.o,[]),e.Db(1073742336,hl.a,hl.a,[]),e.Db(1073742336,$.k,$.k,[]),e.Db(1073742336,ml.f,ml.f,[]),e.Db(1073742336,J.e,J.e,[]),e.Db(1073742336,vl.c,vl.c,[]),e.Db(1073742336,yl.c,yl.c,[]),e.Db(1073742336,Dl.c,Dl.c,[]),e.Db(1073742336,Cl.e,Cl.e,[]),e.Db(1073742336,Cl.c,Cl.c,[]),e.Db(1073742336,Fl.a,Fl.a,[]),e.Db(1073742336,Pl.a,Pl.a,[]),e.Db(1073742336,kl.p,kl.p,[[2,kl.u],[2,kl.l]]),e.Db(1073742336,xl,xl,[]),e.Db(1073742336,t,t,[]),e.Db(256,ml.a,{separatorKeyCodes:[wl.g]},[]),e.Db(1024,kl.j,(function(){return[[{path:"",children:[{path:"view/ts",component:S},{path:"ts-old-import",loadChildren:_l},{path:"ts-import",loadChildren:Ol}]}]]}),[])])}))}}]);