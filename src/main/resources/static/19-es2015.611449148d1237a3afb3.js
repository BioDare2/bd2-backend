(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{ReLR:function(e,t,i){"use strict";i.r(t);var s=i("ofXK"),r=i("tyNb"),n=i("M9IT"),c=i("pLZG"),a=i("lJxs"),o=i("XNiG"),h=i("2Vo4"),u=i("LRne"),b=i("itXk"),l=i("VRyK"),p=i("IzEk"),g=i("Kj3r"),d=i("vkgz"),m=i("JIr8"),f=i("/uUt"),x=i("eIep");let v=(()=>{class e{constructor(t=!1){this.removeDebounce=t,this.error$=new o.a,this.isFetching$=new h.a(!1),this.isProcessing$=new h.a(!1),this.dataLength=0,this.page$=new h.a(void 0),this.sort$=new h.a(void 0),this.on$=new h.a(!1),this.refresh$=new o.a,this.input$=new h.a(void 0),this.params$=new h.a(void 0),this.asset$=new h.a(void 0),this.DEBUG=!1,this.dataInputsDebounce=10,this.assetInputsDebounce=200,this.busyDebounce=50,this.id=e.ids++,this.logMe("created"),this.initAssetsStream(),this.isBusy$=this.initBusyStream(),this.data$=this.initDataStream()}logMe(e,t){this.DEBUG&&(e=this.constructor.name+":"+this.id+" "+e,t?console.log(e,t):console.log(e))}input(e){e&&(this.input$.next(e),this.resetPage())}params(e){this.params$.next(e)}on(e=!0){this.on$.next(e)}refresh(){this.refresh$.next(!0)}page(e){this.page$.next(e)}sort(e){this.sort$.next(e),this.resetPage()}close(){this.asset$.complete(),this.error$.complete(),this.isFetching$.complete(),this.isProcessing$.complete(),this.input$.complete(),this.params$.complete(),this.on$.complete(),this.refresh$.complete(),this.page$.complete(),this.sort$.complete()}errorToData(e){return Object(u.a)(void 0)}assetToSort(e){}assetToPage(e){}resetPage(){this.page$.pipe(Object(p.a)(1)).subscribe(e=>{if(e){const t=new n.d;t.pageIndex=0,t.pageSize=e.pageSize,this.page(t)}})}initBusyStream(){return this.removeDebounce?Object(b.a)([this.isFetching$,this.isProcessing$]).pipe(Object(a.a)(([e,t])=>e||t)):Object(b.a)([this.isFetching$,this.isProcessing$]).pipe(Object(g.a)(this.busyDebounce),Object(a.a)(([e,t])=>e||t))}initDataStream(){const e=this.dataMutators();let t;return t=this.removeDebounce?Object(b.a)(e):Object(b.a)(e).pipe(Object(g.a)(this.dataInputsDebounce)),t.pipe(Object(d.a)(e=>this.logMe("Input for data stream",e)),Object(d.a)(e=>this.isProcessing$.next(!0)),Object(a.a)(([e,t])=>{const i=this.processData(e,t);return this.currentParams=t,this.currentData=i,i}),Object(m.a)(e=>(this.error$.next(e),this.errorToData(e))),Object(d.a)(e=>this.isProcessing$.next(!1)))}dataMutators(){return[this.asset$.pipe(Object(c.a)(e=>!!e)),this.params$]}assetsMutators(){return[this.initAssetsInput(),this.sort$,this.page$.pipe(Object(c.a)(e=>!!e))]}initAssetsStream(){const e=this.assetsMutators();let t;t=this.removeDebounce?Object(b.a)(e):Object(b.a)(e).pipe(Object(g.a)(this.assetInputsDebounce)),t.pipe(Object(d.a)(e=>this.logMe("Input for asset stream",e))).subscribe(([e,t,i])=>this.loadAsset(e,t,i),e=>this.error$.next(e))}loadAsset(e,t,i){this.isFetching$.next(!0),this.fetchAsset(e,t,i).subscribe(s=>{this.isFetching$.next(!1),this.setAsset(s,e,t,i)},e=>{this.isFetching$.next(!1),this.error$.next(e)})}setAsset(e,t,i,s){this.currentInput=t,this.currentAsset=e,this.currentSort=this.assetToSort(e)||i,this.currentPage=this.assetToPage(e)||s,this.dataLength=this.assetToDataLength(e),this.asset$.next(e)}initAssetsInput(){const e=Object(b.a)([this.input$,this.on$]).pipe(Object(c.a)(([e,t])=>e&&t),Object(a.a)(([e,t])=>e)).pipe(Object(f.a)((e,t)=>this.sameInput(e,t))),t=this.refresh$.pipe(Object(x.a)(t=>e.pipe(Object(p.a)(1))));return Object(l.a)(e,t).pipe(Object(d.a)(e=>this.logMe("Assets input",e)))}}return e.ids=0,e})();var S=i("Iurr"),O=i("fXoL"),P=i("RtrU");let $=(()=>{class e extends v{constructor(e,t=!1){super(t),this.experimentService=e,this.experiment$=this.data$}fetchAsset(e,t,i){const s=(e.query||"").trim();return""===s?this.experimentService.getExperiments(e.showPublic,t,i):this.experimentService.searchExperiments(s,e.showPublic,t,i)}processData(e,t){return e.data}sameInput(e,t){return e.showPublic===t.showPublic&&e.query===t.query}assetToDataLength(e){return e.currentPage.length}assetToPage(e){return e.currentPage}errorToData(e){return Object(u.a)([])}}return e.\u0275fac=function(t){return new(t||e)(O.ac(P.a),O.ac(S.a,8))},e.\u0275prov=O.Mb({token:e,factory:e.\u0275fac}),e})();var y=i("6tuW"),I=i("naqj"),w=i("3Pt+"),V=i("bTqV");function W(e,t){if(1&e){const e=O.Xb();O.Wb(0,"i",3),O.ec("click",(function(t){return O.Ac(e),O.ic().select("desc")})),O.Jc(1,"sort"),O.Vb()}}function j(e,t){if(1&e){const e=O.Xb();O.Wb(0,"i",4),O.ec("click",(function(t){return O.Ac(e),O.ic().select("")})),O.Jc(1,"sort"),O.Vb()}}function C(e,t){if(1&e){const e=O.Xb();O.Wb(0,"i",4),O.ec("click",(function(t){return O.Ac(e),O.ic().select("asc")})),O.Jc(1,"more_horiz"),O.Vb()}}const k={provide:w.n,useExisting:Object(O.U)(()=>J),multi:!0};let J=(()=>{class e{constructor(){this.value="",this.disabled=!1,this.onChange=e=>{},this.onTouched=()=>{}}ngOnInit(){}select(e){this.disabled||(this.value=e,this.onChange(this.value),this.onTouched())}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}writeValue(e){this.value=e}setDisabledState(e){this.disabled=e}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=O.Kb({type:e,selectors:[["bd2-sort-switch"]],features:[O.Bb([k])],decls:4,vars:4,consts:[["mat-mini-fab","","aria-label","sorting",3,"disabled"],["class","material-icons  icon-flipped-h",3,"click",4,"ngIf"],["class","material-icons",3,"click",4,"ngIf"],[1,"material-icons","icon-flipped-h",3,"click"],[1,"material-icons",3,"click"]],template:function(e,t){1&e&&(O.Wb(0,"button",0),O.Hc(1,W,2,0,"i",1),O.Hc(2,j,2,0,"i",2),O.Hc(3,C,2,0,"i",2),O.Vb()),2&e&&(O.oc("disabled",t.disabled),O.Cb(1),O.oc("ngIf","asc"===t.value),O.Cb(1),O.oc("ngIf","desc"===t.value),O.Cb(1),O.oc("ngIf",""===t.value))},directives:[V.a,s.m],encapsulation:2}),e})();var D=i("jaxi"),q=i("1jcm");let z=(()=>{class e{constructor(e){this.fb=e,this.search=new O.o,this.sort=new O.o,this.currentSort={active:"id",direction:"asc"},this.currentQuery="",this.currentShowPublic=!1}set options(e){e&&(this.currentQuery=e.query,this.currentShowPublic=e.showPublic,this.currentSort=e.sorting)}ngOnInit(){this.sortOptionsF=this.fb.group({sorting:[this.currentSort.active],direction:[this.currentSort.direction]}),this.showPublicF=this.fb.control(this.currentShowPublic),this.queryF=this.fb.control(this.currentQuery,[w.A.required,w.A.minLength(3)]),this.sortOptionsF.valueChanges.subscribe(e=>this.updateSort(e.sorting,e.direction)),this.showPublicF.valueChanges.subscribe(e=>{this.currentShowPublic=e,this.emitSearch()})}updateSort(e,t){const i={active:e,direction:t};this.currentSort=i,this.sort.next(i)}emitSearch(){this.search.next({showPublic:this.currentShowPublic,query:this.currentQuery})}find(){this.queryF.valid&&(this.currentQuery=this.queryF.value,this.emitSearch())}all(){this.queryF.setValue(""),this.currentQuery="",this.emitSearch()}}return e.\u0275fac=function(t){return new(t||e)(O.Qb(w.d))},e.\u0275cmp=O.Kb({type:e,selectors:[["bd2-search-and-sort-panel"]],inputs:{options:"options"},outputs:{search:"search",sort:"sort"},decls:25,vars:4,consts:[[1,"pb-1","pt-1","searchpanel"],[1,"float-left",3,"formGroup"],["formControlName","direction",1,"mr-1"],["name","sorting","aria-label","sorting","formControlName","sorting",1,"mr-4"],["value","id"],["value","name"],["value","author"],["value","executed"],["value","modified"],[1,"mr-2",3,"formControl"],[1,"no-clues","float-right"],["name","search","minlength","3","placeholder","e.g. prr9 temp*",1,"form-control-sm","mr-1",3,"formControl"],["mat-mini-fab","","mat-icon-button","","aria-label","search",1,"mr-2",3,"disabled","click"],[1,"material-icons"],["mat-mini-fab","","color","primary","aria-label","all",3,"click"],[1,"clearfix"]],template:function(e,t){1&e&&(O.Wb(0,"div",0),O.Wb(1,"small"),O.Wb(2,"div",1),O.Rb(3,"bd2-sort-switch",2),O.Wb(4,"mat-button-toggle-group",3),O.Wb(5,"mat-button-toggle",4),O.Jc(6,"Id"),O.Vb(),O.Wb(7,"mat-button-toggle",5),O.Jc(8,"Title"),O.Vb(),O.Wb(9,"mat-button-toggle",6),O.Jc(10,"Author"),O.Vb(),O.Wb(11,"mat-button-toggle",7),O.Jc(12,"Exec."),O.Vb(),O.Wb(13,"mat-button-toggle",8),O.Jc(14,"Mod."),O.Vb(),O.Vb(),O.Vb(),O.Wb(15,"mat-slide-toggle",9),O.Jc(16,"Show public"),O.Vb(),O.Wb(17,"div",10),O.Rb(18,"input",11),O.Wb(19,"button",12),O.ec("click",(function(e){return t.find()})),O.Wb(20,"i",13),O.Jc(21,"search"),O.Vb(),O.Vb(),O.Wb(22,"button",14),O.ec("click",(function(e){return t.all()})),O.Jc(23,"all"),O.Vb(),O.Vb(),O.Vb(),O.Rb(24,"div",15),O.Vb()),2&e&&(O.Cb(2),O.oc("formGroup",t.sortOptionsF),O.Cb(13),O.oc("formControl",t.showPublicF),O.Cb(3),O.oc("formControl",t.queryF),O.Cb(1),O.oc("disabled",t.queryF.invalid))},directives:[w.q,w.h,J,w.p,w.g,D.b,D.a,q.a,w.f,w.c,w.l,V.a],encapsulation:2}),e})();function F(e,t){1&e&&(O.Wb(0,"i",5),O.Jc(1,"lock_open"),O.Vb())}const L=function(e){return["/experiment",e]};let A=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=O.Kb({type:e,selectors:[["bd2-experiment-summary"]],inputs:{exp:"exp"},decls:24,vars:14,consts:[[1,"list-group-item","list-group-item-action",3,"routerLink"],[1,"list-group-item-heading"],["class","material-icons bd-icon","style","color: green",4,"ngIf"],[1,"list-group-item-text"],[1,"mb-1"],[1,"material-icons","bd-icon",2,"color","green"]],template:function(e,t){1&e&&(O.Wb(0,"a",0),O.Wb(1,"h5",1),O.Hc(2,F,2,0,"i",2),O.Jc(3),O.Vb(),O.Wb(4,"div",3),O.Wb(5,"div",4),O.Jc(6),O.Vb(),O.Wb(7,"div"),O.Wb(8,"strong"),O.Jc(9,"Authors:"),O.Vb(),O.Jc(10),O.Vb(),O.Wb(11,"div"),O.Wb(12,"small"),O.Wb(13,"strong"),O.Jc(14,"Id:"),O.Vb(),O.Jc(15),O.Wb(16,"strong"),O.Jc(17,"Executed:"),O.Vb(),O.Jc(18),O.jc(19,"date"),O.Wb(20,"strong"),O.Jc(21,"Modified:"),O.Vb(),O.Jc(22),O.jc(23,"date"),O.Vb(),O.Vb(),O.Vb(),O.Vb()),2&e&&(O.oc("routerLink",O.rc(12,L,t.exp.id)),O.Cb(2),O.oc("ngIf",t.exp.features.isOpenAccess),O.Cb(1),O.Lc(" ",t.exp.name," "),O.Cb(3),O.Kc(t.exp.generalDesc.purpose),O.Cb(4),O.Lc(" ",t.exp.authors,""),O.Cb(5),O.Lc(" ",t.exp.id," "),O.Cb(3),O.Lc(" ",O.kc(19,8,t.exp.generalDesc.executionDate.date)," "),O.Cb(4),O.Lc(" ",O.kc(23,10,t.exp.provenance.modified.date)," "))},directives:[r.e,s.m],pipes:[s.e],encapsulation:2}),e})();function M(e,t){1&e&&(O.Wb(0,"div",13),O.Jc(1," There are no visible experiments matching the criteria. "),O.Vb())}function T(e,t){1&e&&O.Rb(0,"bd2-experiment-summary",14),2&e&&O.oc("exp",t.$implicit)}const Q=function(){return[]},R=function(e,t){return{pageIndex:e,pageSize:t}};function E(e,t){if(1&e&&(O.Wb(0,"a",15),O.Jc(1,"Next"),O.Vb()),2&e){const e=O.ic();O.oc("routerLink",O.qc(2,Q))("queryParams",O.sc(3,R,(null==e.fetcher.currentPage?null:e.fetcher.currentPage.pageIndex)+1,null==e.fetcher.currentPage?null:e.fetcher.currentPage.pageSize))}}const K=function(){return[10,25,50,100,200]},N=[{path:"",children:[{path:"",component:(()=>{class e{constructor(e,t,i,s,r){this.experimentService=e,this.fetcher=t,this.feedback=i,this.userService=s,this.route=r}ngOnInit(){this.firstPage(),this.initialSearchOptions={sorting:{active:"modified",direction:"desc"},showPublic:!this.userService.isLoggedIn(),query:""},this.subscribeRoute(),this.fetcher.experiment$.subscribe(e=>this.experiments=e),this.fetcher.error$.subscribe(e=>this.feedback.error(e)),this.fetcher.on(!0),this.sort(this.initialSearchOptions.sorting),this.search(this.initialSearchOptions),this.page(this.firstPage())}ngOnDestroy(){this.routeSubscription&&this.routeSubscription.unsubscribe(),this.fetcher&&this.fetcher.close()}search(e){this.fetcher.input(e)}sort(e){this.fetcher.sort(e)}page(e){this.fetcher.page(e)}firstPage(){const e=+this.route.snapshot.queryParamMap.get("pageIndex")||0,t=+this.route.snapshot.queryParamMap.get("pageSize")||25,i=new n.d;return i.pageIndex=e,i.pageSize=t,i}subscribeRoute(){this.routeSubscription=this.route.queryParamMap.pipe(Object(c.a)(e=>e.has("pageIndex")&&e.has("pageSize")),Object(a.a)(e=>{const t=new n.d;return t.pageSize=+e.get("pageSize"),t.pageIndex=+e.get("pageIndex"),t})).subscribe(e=>this.page(e))}refresh(){this.fetcher.refresh()}}return e.\u0275fac=function(t){return new(t||e)(O.Qb(P.a),O.Qb($),O.Qb(y.a),O.Qb(I.a),O.Qb(r.a))},e.\u0275cmp=O.Kb({type:e,selectors:[["ng-component"]],features:[O.Bb([$])],decls:18,vars:15,consts:[[1,"float-left"],["role","button","aria-label","refresh",3,"click"],[1,"material-icons","bd-icon-inh","bd-primary",2,"font-size","larger"],[1,"clearfix"],["class","alert alert-info",4,"ngIf"],[3,"options","search","sort"],[3,"length","pageSize","pageIndex","pageSizeOptions","page"],["paginator",""],[1,"list-group"],[3,"exp",4,"ngFor","ngForOf"],[3,"hidden","length","pageSize","pageIndex","pageSizeOptions","page"],["paginator2",""],["style","color: rgba(0,0,0,.54);",3,"routerLink","queryParams",4,"ngIf"],[1,"alert","alert-info"],[3,"exp"],[2,"color","rgba(0,0,0,.54)",3,"routerLink","queryParams"]],template:function(e,t){if(1&e&&(O.Wb(0,"div"),O.Wb(1,"h2",0),O.Jc(2,"Experiments "),O.Wb(3,"a",1),O.ec("click",(function(e){return t.refresh()})),O.Wb(4,"i",2),O.Jc(5,"refresh"),O.Vb(),O.Vb(),O.Vb(),O.Rb(6,"div",3),O.Hc(7,M,2,0,"div",4),O.Wb(8,"div"),O.Wb(9,"bd2-search-and-sort-panel",5),O.ec("search",(function(e){return t.search(e)}))("sort",(function(e){return t.sort(e)})),O.Vb(),O.Wb(10,"mat-paginator",6,7),O.ec("page",(function(e){return t.page(e)})),O.Vb(),O.Wb(12,"div",8),O.Hc(13,T,1,1,"bd2-experiment-summary",9),O.Vb(),O.Wb(14,"mat-paginator",10,11),O.ec("page",(function(e){return t.page(e)})),O.Vb(),O.Wb(16,"div",0),O.Hc(17,E,2,6,"a",12),O.Vb(),O.Vb(),O.Vb()),2&e){const e=O.xc(11);O.Cb(7),O.oc("ngIf",!t.experiments||t.experiments.length<1),O.Cb(2),O.oc("options",t.initialSearchOptions),O.Cb(1),O.oc("length",t.fetcher.dataLength)("pageSize",(null==t.fetcher.currentPage?null:t.fetcher.currentPage.pageSize)||25)("pageIndex",null==t.fetcher.currentPage?null:t.fetcher.currentPage.pageIndex)("pageSizeOptions",O.qc(13,K)),O.Cb(3),O.oc("ngForOf",t.experiments),O.Cb(1),O.oc("hidden",(null==t.experiments?null:t.experiments.length)<1)("length",t.fetcher.dataLength)("pageSize",(null==t.fetcher.currentPage?null:t.fetcher.currentPage.pageSize)||25)("pageIndex",null==t.fetcher.currentPage?null:t.fetcher.currentPage.pageIndex)("pageSizeOptions",O.qc(14,K)),O.Cb(3),O.oc("ngIf",e.hasNextPage())}},directives:[s.m,z,n.a,s.l,A,r.e],encapsulation:2}),e})(),pathMatch:"full"}]}];let B=(()=>{class e{}return e.\u0275mod=O.Ob({type:e}),e.\u0275inj=O.Nb({factory:function(t){return new(t||e)},imports:[[r.f.forChild(N)],r.f]}),e})();var H=i("DkMi"),X=i("+0xr");i.d(t,"ExperimentsModule",(function(){return G}));let G=(()=>{class e{}return e.\u0275mod=O.Ob({type:e}),e.\u0275inj=O.Nb({factory:function(t){return new(t||e)},imports:[[s.c,w.j,w.x,V.b,D.c,q.b,n.c,X.o,H.a,B]]}),e})()}}]);