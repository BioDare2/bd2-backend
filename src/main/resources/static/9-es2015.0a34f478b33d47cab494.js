(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{fSIb:function(l,n,u){"use strict";u.r(n);var e=u("8Y7J");class t{}var i=u("atuK"),r=u("z5nN"),a=u("MdoF"),o=u("SfUx"),s=u("pMnS"),c=u("SVse");u("BDlQ");class b{}var d=e.pb({encapsulation:2,styles:[],data:{}});function p(l){return e.Nb(0,[(l()(),e.rb(0,0,null,null,6,"div",[["class","item"]],null,null,null,null,null)),(l()(),e.rb(1,0,null,null,1,"strong",[],null,null,null,null,null)),(l()(),e.Lb(-1,null,["Open Access: "])),(l()(),e.Lb(-1,null,[" under "])),(l()(),e.rb(4,0,null,null,1,"strong",[],null,null,null,null,null)),(l()(),e.Lb(5,null,["",""])),(l()(),e.Lb(-1,null,[" license "]))],null,(function(l,n){l(n,5,0,n.component.model.features.licence)}))}function f(l){return e.Nb(0,[(l()(),e.rb(0,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),e.Lb(1,null,["",", "]))],null,(function(l,n){l(n,1,0,n.context.$implicit.name)}))}function h(l){return e.Nb(0,[(l()(),e.rb(0,0,null,null,4,"div",[["class","item"]],null,null,null,null,null)),(l()(),e.rb(1,0,null,null,1,"strong",[],null,null,null,null,null)),(l()(),e.Lb(-1,null,["Authors: "])),(l()(),e.gb(16777216,null,null,1,null,f)),e.qb(4,278528,null,0,c.m,[e.N,e.K,e.q],{ngForOf:[0,"ngForOf"]},null)],(function(l,n){l(n,4,0,n.component.model.contributionDesc.authors)}),null)}function m(l){return e.Nb(0,[(l()(),e.rb(0,0,null,null,12,"div",[["class","summary-box"]],null,null,null,null,null)),(l()(),e.rb(1,0,null,null,3,"div",[["class","item"]],null,null,null,null,null)),(l()(),e.rb(2,0,null,null,1,"strong",[],null,null,null,null,null)),(l()(),e.Lb(-1,null,["Purpose: "])),(l()(),e.Lb(4,null,[" "," "])),(l()(),e.gb(16777216,null,null,1,null,p)),e.qb(6,16384,null,0,c.n,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.gb(16777216,null,null,1,null,h)),e.qb(8,16384,null,0,c.n,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.rb(9,0,null,null,3,"div",[["class","item item-last"]],null,null,null,null,null)),(l()(),e.rb(10,0,null,null,1,"strong",[],null,null,null,null,null)),(l()(),e.Lb(-1,null,["Data category: "])),(l()(),e.Lb(12,null,[" "," "]))],(function(l,n){var u=n.component;l(n,6,0,u.model.features.isOpenAccess),l(n,8,0,u.model.contributionDesc.authors)}),(function(l,n){var u=n.component;l(n,4,0,u.model.generalDesc.purpose),l(n,12,0,null==u.model.dataCategory?null:u.model.dataCategory.longName)}))}function g(l){return e.Nb(0,[(l()(),e.gb(16777216,null,null,1,null,m)),e.qb(1,16384,null,0,c.n,[e.N,e.K],{ngIf:[0,"ngIf"]},null)],(function(l,n){l(n,1,0,n.component.model)}),null)}var v=u("iInd");class k{constructor(){this.onRefresh=new e.m}refresh(){this.onRefresh.emit(!0)}back(){window.history.back()}}var y=e.pb({encapsulation:2,styles:[],data:{}});function D(l){return e.Nb(0,[(l()(),e.rb(0,0,null,null,7,"a",[["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(l,n,u){var t=!0;return"click"===n&&(t=!1!==e.Db(l,1).onClick(u.button,u.ctrlKey,u.metaKey,u.shiftKey)&&t),t}),null,null)),e.qb(1,671744,[[4,4]],0,v.o,[v.l,v.a,c.k],{routerLink:[0,"routerLink"]},null),e.Eb(2,1),e.qb(3,1720320,null,2,v.n,[v.l,e.k,e.C,[2,v.m],[2,v.o]],{routerLinkActiveOptions:[0,"routerLinkActiveOptions"],routerLinkActive:[1,"routerLinkActive"]},null),e.Jb(603979776,3,{links:1}),e.Jb(603979776,4,{linksWithHrefs:1}),e.Gb(6,{exact:0}),(l()(),e.Lb(-1,null,["Edit"]))],(function(l,n){var u=l(n,2,0,"edit");l(n,1,0,u);var e=l(n,6,0,!0);l(n,3,0,e,"active")}),(function(l,n){l(n,0,0,e.Db(n,1).target,e.Db(n,1).href)}))}function N(l){return e.Nb(0,[(l()(),e.rb(0,0,null,null,7,"a",[["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(l,n,u){var t=!0;return"click"===n&&(t=!1!==e.Db(l,1).onClick(u.button,u.ctrlKey,u.metaKey,u.shiftKey)&&t),t}),null,null)),e.qb(1,671744,[[6,4]],0,v.o,[v.l,v.a,c.k],{routerLink:[0,"routerLink"]},null),e.Eb(2,4),e.qb(3,1720320,null,2,v.n,[v.l,e.k,e.C,[2,v.m],[2,v.o]],{routerLinkActiveOptions:[0,"routerLinkActiveOptions"],routerLinkActive:[1,"routerLinkActive"]},null),e.Jb(603979776,5,{links:1}),e.Jb(603979776,6,{linksWithHrefs:1}),e.Gb(6,{exact:0}),(l()(),e.Lb(-1,null,["Show data"]))],(function(l,n){var u=l(n,2,0,".","data","view","ts");l(n,1,0,u);var e=l(n,6,0,!0);l(n,3,0,e,"active")}),(function(l,n){l(n,0,0,e.Db(n,1).target,e.Db(n,1).href)}))}function L(l){return e.Nb(0,[(l()(),e.rb(0,0,null,null,7,"a",[["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(l,n,u){var t=!0;return"click"===n&&(t=!1!==e.Db(l,1).onClick(u.button,u.ctrlKey,u.metaKey,u.shiftKey)&&t),t}),null,null)),e.qb(1,671744,[[8,4]],0,v.o,[v.l,v.a,c.k],{routerLink:[0,"routerLink"]},null),e.Eb(2,1),e.qb(3,1720320,null,2,v.n,[v.l,e.k,e.C,[2,v.m],[2,v.o]],{routerLinkActiveOptions:[0,"routerLinkActiveOptions"],routerLinkActive:[1,"routerLinkActive"]},null),e.Jb(603979776,7,{links:1}),e.Jb(603979776,8,{linksWithHrefs:1}),e.Gb(6,{exact:0}),(l()(),e.Lb(-1,null,["Period analysis"]))],(function(l,n){var u=l(n,2,0,"ppa/new");l(n,1,0,u);var e=l(n,6,0,!0);l(n,3,0,e,"active")}),(function(l,n){l(n,0,0,e.Db(n,1).target,e.Db(n,1).href)}))}function q(l){return e.Nb(0,[(l()(),e.rb(0,0,null,null,7,"a",[["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(l,n,u){var t=!0;return"click"===n&&(t=!1!==e.Db(l,1).onClick(u.button,u.ctrlKey,u.metaKey,u.shiftKey)&&t),t}),null,null)),e.qb(1,671744,[[10,4]],0,v.o,[v.l,v.a,c.k],{routerLink:[0,"routerLink"]},null),e.Eb(2,1),e.qb(3,1720320,null,2,v.n,[v.l,e.k,e.C,[2,v.m],[2,v.o]],{routerLinkActiveOptions:[0,"routerLinkActiveOptions"],routerLinkActive:[1,"routerLinkActive"]},null),e.Jb(603979776,9,{links:1}),e.Jb(603979776,10,{linksWithHrefs:1}),e.Gb(6,{exact:0}),(l()(),e.Lb(-1,null,["Period analysis"]))],(function(l,n){var u=l(n,2,0,"ppa");l(n,1,0,u);var e=l(n,6,0,!1);l(n,3,0,e,"active")}),(function(l,n){l(n,0,0,e.Db(n,1).target,e.Db(n,1).href)}))}function I(l){return e.Nb(0,[(l()(),e.rb(0,0,null,null,7,"a",[["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(l,n,u){var t=!0;return"click"===n&&(t=!1!==e.Db(l,1).onClick(u.button,u.ctrlKey,u.metaKey,u.shiftKey)&&t),t}),null,null)),e.qb(1,671744,[[12,4]],0,v.o,[v.l,v.a,c.k],{routerLink:[0,"routerLink"]},null),e.Eb(2,1),e.qb(3,1720320,null,2,v.n,[v.l,e.k,e.C,[2,v.m],[2,v.o]],{routerLinkActiveOptions:[0,"routerLinkActiveOptions"],routerLinkActive:[1,"routerLinkActive"]},null),e.Jb(603979776,11,{links:1}),e.Jb(603979776,12,{linksWithHrefs:1}),e.Gb(6,{exact:0}),(l()(),e.Lb(-1,null,["Rhythmicity"]))],(function(l,n){var u=l(n,2,0,"rhythmicity");l(n,1,0,u);var e=l(n,6,0,!1);l(n,3,0,e,"active")}),(function(l,n){l(n,0,0,e.Db(n,1).target,e.Db(n,1).href)}))}function A(l){return e.Nb(0,[(l()(),e.rb(0,0,null,null,7,"a",[["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(l,n,u){var t=!0;return"click"===n&&(t=!1!==e.Db(l,1).onClick(u.button,u.ctrlKey,u.metaKey,u.shiftKey)&&t),t}),null,null)),e.qb(1,671744,[[14,4]],0,v.o,[v.l,v.a,c.k],{routerLink:[0,"routerLink"]},null),e.Eb(2,3),e.qb(3,1720320,null,2,v.n,[v.l,e.k,e.C,[2,v.m],[2,v.o]],{routerLinkActiveOptions:[0,"routerLinkActiveOptions"],routerLinkActive:[1,"routerLinkActive"]},null),e.Jb(603979776,13,{links:1}),e.Jb(603979776,14,{linksWithHrefs:1}),e.Gb(6,{exact:0}),(l()(),e.Lb(7,null,[" ",""]))],(function(l,n){var u=l(n,2,0,".","data","ts-import2");l(n,1,0,u);var e=l(n,6,0,!0);l(n,3,0,e,"active")}),(function(l,n){var u=n.component;l(n,0,0,e.Db(n,1).target,e.Db(n,1).href),l(n,7,0,u.experiment.features.hasTSData?"Replace data":"Import data")}))}function x(l){return e.Nb(0,[(l()(),e.rb(0,0,null,null,7,"a",[["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(l,n,u){var t=!0;return"click"===n&&(t=!1!==e.Db(l,1).onClick(u.button,u.ctrlKey,u.metaKey,u.shiftKey)&&t),t}),null,null)),e.qb(1,671744,[[18,4]],0,v.o,[v.l,v.a,c.k],{routerLink:[0,"routerLink"]},null),e.Eb(2,1),e.qb(3,1720320,null,2,v.n,[v.l,e.k,e.C,[2,v.m],[2,v.o]],{routerLinkActiveOptions:[0,"routerLinkActiveOptions"],routerLinkActive:[1,"routerLinkActive"]},null),e.Jb(603979776,17,{links:1}),e.Jb(603979776,18,{linksWithHrefs:1}),e.Gb(6,{exact:0}),(l()(),e.rb(7,0,null,null,0,"img",[["src","assets/Open_Access_logo_small.svg"],["style","height: 1em;"]],null,null,null,null,null))],(function(l,n){var u=l(n,2,0,"publish");l(n,1,0,u);var e=l(n,6,0,!0);l(n,3,0,e,"active")}),(function(l,n){l(n,0,0,e.Db(n,1).target,e.Db(n,1).href)}))}function K(l){return e.Nb(0,[(l()(),e.rb(0,0,null,null,39,"div",[["style","margin-bottom: 2em;"]],null,null,null,null,null)),(l()(),e.rb(1,0,null,null,38,"nav",[["class","secondary"]],null,null,null,null,null)),(l()(),e.rb(2,0,null,null,3,"a",[],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(l,n,u){var t=!0;return"click"===n&&(t=!1!==e.Db(l,3).onClick(u.button,u.ctrlKey,u.metaKey,u.shiftKey)&&t),t}),null,null)),e.qb(3,671744,null,0,v.o,[v.l,v.a,c.k],{routerLink:[0,"routerLink"]},null),e.Eb(4,1),(l()(),e.rb(5,0,null,null,0,"span",[["aria-hidden","true"],["class","glyphicon glyphicon-backward"]],null,null,null,null,null)),(l()(),e.rb(6,0,null,null,1,"a",[["class","shade"]],null,[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.back()&&e),e}),null,null)),(l()(),e.rb(7,0,null,null,0,"span",[["aria-hidden","true"],["class","glyphicon glyphicon-step-backward"]],null,null,null,null,null)),(l()(),e.rb(8,0,null,null,1,"a",[["class","shade"],["role","button"]],null,[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.refresh()&&e),e}),null,null)),(l()(),e.rb(9,0,null,null,0,"span",[["aria-hidden","true"],["class","glyphicon glyphicon-repeat"]],null,null,null,null,null)),(l()(),e.rb(10,0,null,null,7,"a",[["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(l,n,u){var t=!0;return"click"===n&&(t=!1!==e.Db(l,11).onClick(u.button,u.ctrlKey,u.metaKey,u.shiftKey)&&t),t}),null,null)),e.qb(11,671744,[[2,4]],0,v.o,[v.l,v.a,c.k],{routerLink:[0,"routerLink"]},null),e.Eb(12,1),e.qb(13,1720320,null,2,v.n,[v.l,e.k,e.C,[2,v.m],[2,v.o]],{routerLinkActiveOptions:[0,"routerLinkActiveOptions"],routerLinkActive:[1,"routerLinkActive"]},null),e.Jb(603979776,1,{links:1}),e.Jb(603979776,2,{linksWithHrefs:1}),e.Gb(16,{exact:0}),(l()(),e.Lb(-1,null,["Overview"])),(l()(),e.gb(16777216,null,null,1,null,D)),e.qb(19,16384,null,0,c.n,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.gb(16777216,null,null,1,null,N)),e.qb(21,16384,null,0,c.n,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.gb(16777216,null,null,1,null,L)),e.qb(23,16384,null,0,c.n,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.gb(16777216,null,null,1,null,q)),e.qb(25,16384,null,0,c.n,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.gb(16777216,null,null,1,null,I)),e.qb(27,16384,null,0,c.n,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.gb(16777216,null,null,1,null,A)),e.qb(29,16384,null,0,c.n,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.rb(30,0,null,null,7,"a",[["routerLinkActive","active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(l,n,u){var t=!0;return"click"===n&&(t=!1!==e.Db(l,31).onClick(u.button,u.ctrlKey,u.metaKey,u.shiftKey)&&t),t}),null,null)),e.qb(31,671744,[[16,4]],0,v.o,[v.l,v.a,c.k],{routerLink:[0,"routerLink"]},null),e.Eb(32,1),e.qb(33,1720320,null,2,v.n,[v.l,e.k,e.C,[2,v.m],[2,v.o]],{routerLinkActiveOptions:[0,"routerLinkActiveOptions"],routerLinkActive:[1,"routerLinkActive"]},null),e.Jb(603979776,15,{links:1}),e.Jb(603979776,16,{linksWithHrefs:1}),e.Gb(36,{exact:0}),(l()(),e.Lb(-1,null,["Files"])),(l()(),e.gb(16777216,null,null,1,null,x)),e.qb(39,16384,null,0,c.n,[e.N,e.K],{ngIf:[0,"ngIf"]},null)],(function(l,n){var u=n.component,e=l(n,4,0,"/experiments");l(n,3,0,e);var t=l(n,12,0,".");l(n,11,0,t);var i=l(n,16,0,!0);l(n,13,0,i,"active"),l(n,19,0,u.experiment.security.canWrite),l(n,21,0,u.experiment.features.hasTSData),l(n,23,0,u.experiment.security.canWrite&&u.experiment.features.hasTSData&&!u.experiment.features.hasPPAJobs),l(n,25,0,u.experiment.features.hasPPAJobs),l(n,27,0,u.experiment.security.canWrite&&u.experiment.features.hasTSData||u.experiment.features.hasRhythmicityJobs),l(n,29,0,u.experiment.security.canWrite);var r=l(n,32,0,"file");l(n,31,0,r);var a=l(n,36,0,!0);l(n,33,0,a,"active"),l(n,39,0,u.experiment.security.isOwner||u.experiment.security.isSuperOwner)}),(function(l,n){l(n,2,0,e.Db(n,3).target,e.Db(n,3).href),l(n,10,0,e.Db(n,11).target,e.Db(n,11).href),l(n,30,0,e.Db(n,31).target,e.Db(n,31).href)}))}function C(l){return e.Nb(0,[(l()(),e.gb(16777216,null,null,1,null,K)),e.qb(1,16384,null,0,c.n,[e.N,e.K],{ngIf:[0,"ngIf"]},null)],(function(l,n){l(n,1,0,n.component.experiment)}),null)}var w=u("YwHJ"),F=u("Kctx"),O=u("GVyA"),E=u("RtrU"),M=u("qnP+"),S=u("6tuW"),T=u("BMm9"),B=u("vejM"),R=u("ZMwR"),J=u("pLZG"),W=u("lJxs");class P{constructor(l,n,u,e,t,i,r){this.experimentService=l,this.RDMSocial=n,this.currentExperiment=u,this.feedback=e,this.analytics=t,this.route=i,this.router=r,this.isUnauthorised=!1}ngOnInit(){this.expSubscription=this.currentExperiment.experiment().pipe(Object(J.a)(l=>!!l)).subscribe(l=>{this.model=l,this.analytics.experimentView(l.id),this.RDMSocial.shouldShowMeasurementWarning(l).then(l=>{l&&this.showMetadataWarning()})},l=>this.feedback.error(l),()=>console.log("currentExperimentStream completed")),this.paramsSubscription=this.route.paramMap.pipe(Object(W.a)(l=>l.get("id")),Object(J.a)(l=>!!l)).subscribe(l=>this.loadExperiment(+l))}ngOnDestroy(){this.paramsSubscription&&this.paramsSubscription.unsubscribe(),this.expSubscription&&this.expSubscription.unsubscribe(),this.currentExperiment&&this.currentExperiment.close()}refresh(){this.model&&this.loadExperiment(this.model.id)}loadExperiment(l){this.experimentService.getExperiment(l).then(l=>{this.currentExperiment.push(l),this.isUnauthorised=!1}).catch(l=>{this.isUnauthorised=l.isUnauthorised,this.feedback.error(l)})}handleWarningResponse(l){console.log("Dialog: "+l)}showMetadataWarning(){this.warningDialog&&this.warningDialog.ask("Metadata reminder","\n        <p>\n        Please add measurements details, like technique, equipment and short description.\n        </p>\n        <p>\n        It will improve the metadata quality and it will help you when searching for the data.\n        </p>\n").then(l=>{this.RDMSocial.registerMeasurementWarning(this.model),l&&this.router.navigate(["edit"],{relativeTo:this.route,fragment:"MeasurementSection"})})}}var U=e.pb({encapsulation:2,styles:[],data:{}});function G(l){return e.Nb(0,[(l()(),e.rb(0,0,null,null,0,"img",[["src","assets/Open_Access_logo_small.svg"],["style","height: 1.5em;"]],null,null,null,null,null))],null,null)}function V(l){return e.Nb(0,[(l()(),e.rb(0,0,null,null,14,"div",[],null,null,null,null,null)),(l()(),e.rb(1,0,null,null,11,"div",[["class","panel panel-default asset-card"]],null,null,null,null,null)),(l()(),e.rb(2,0,null,null,7,"div",[["class","panel-heading"]],null,null,null,null,null)),(l()(),e.rb(3,0,null,null,6,"h3",[],null,null,null,null,null)),(l()(),e.gb(16777216,null,null,1,null,G)),e.qb(5,16384,null,0,c.n,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.Lb(6,null,[" Experiment: ",""])),(l()(),e.rb(7,0,null,null,0,"br",[],null,null,null,null,null)),(l()(),e.rb(8,0,null,null,1,"small",[],null,null,null,null,null)),(l()(),e.Lb(9,null,["",""])),(l()(),e.rb(10,0,null,null,2,"div",[["class","panel-body"]],null,null,null,null,null)),(l()(),e.rb(11,0,null,null,1,"bd2-experiment-basic-info-view",[],null,null,null,g,d)),e.qb(12,49152,null,0,b,[],{model:[0,"model"]},null),(l()(),e.rb(13,0,null,null,1,"bd2-experiment-navigation",[],null,[[null,"onRefresh"]],(function(l,n,u){var e=!0;return"onRefresh"===n&&(e=!1!==l.component.refresh()&&e),e}),C,y)),e.qb(14,49152,null,0,k,[],{experiment:[0,"experiment"]},{onRefresh:"onRefresh"})],(function(l,n){var u=n.component;l(n,5,0,u.model.features.isOpenAccess),l(n,12,0,u.model),l(n,14,0,u.model)}),(function(l,n){var u=n.component;l(n,6,0,u.model.id),l(n,9,0,u.model.name)}))}function j(l){return e.Nb(0,[(l()(),e.rb(0,0,null,null,3,"div",[],null,null,null,null,null)),(l()(),e.Lb(-1,null,[" ... loading experiment "])),(l()(),e.rb(2,0,null,null,1,"p",[],null,null,null,null,null)),(l()(),e.Lb(-1,null,["If just logged in try to refresh the window if the experiment is not loading."]))],null,null)}function H(l){return e.Nb(0,[(l()(),e.rb(0,0,null,null,4,"div",[],null,null,null,null,null)),(l()(),e.rb(1,0,null,null,1,"h4",[],null,null,null,null,null)),(l()(),e.Lb(-1,null,["You don't have sufficient permissions to see the experiment"])),(l()(),e.rb(3,0,null,null,1,"p",[],null,null,null,null,null)),(l()(),e.Lb(-1,null,["Try to login"]))],null,null)}function z(l){return e.Nb(0,[e.Jb(402653184,1,{warningDialog:0}),(l()(),e.rb(1,0,null,null,10,"div",[],null,null,null,null,null)),(l()(),e.gb(16777216,null,null,1,null,V)),e.qb(3,16384,null,0,c.n,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.gb(16777216,null,null,1,null,j)),e.qb(5,16384,null,0,c.n,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.gb(16777216,null,null,1,null,H)),e.qb(7,16384,null,0,c.n,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.rb(8,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),e.qb(9,212992,null,0,v.q,[v.b,e.N,e.j,[8,null],e.h],null,null),(l()(),e.rb(10,0,null,null,1,"bd2-confirm-dialog",[["cancelLabel","Not now"],["okLabel","OK"]],null,null,null,w.b,w.a)),e.qb(11,49152,[[1,4],["warningDialog",4]],0,F.a,[],{cancelLabel:[0,"cancelLabel"],okLabel:[1,"okLabel"],ignorable:[2,"ignorable"]},null)],(function(l,n){var u=n.component;l(n,3,0,u.model),l(n,5,0,!u.model&&!u.isUnauthorised),l(n,7,0,!u.model&&u.isUnauthorised),l(n,9,0),l(n,11,0,"Not now","OK",!1)}),null)}function $(l){return e.Nb(0,[(l()(),e.rb(0,0,null,null,3,"ng-component",[],null,null,null,z,U)),e.Ib(4608,null,O.a,O.a,[E.a,M.a,S.a,T.a,v.l]),e.Ib(512,null,M.a,M.a,[]),e.qb(3,245760,null,0,P,[E.a,B.a,M.a,S.a,R.a,v.a,v.l],null,null)],(function(l,n){l(n,3,0)}),null)}var _=e.nb("ng-component",P,$,{},{},[]),Y=u("P8p1"),X=u("bAp0"),Z=u("y25b"),Q=u("9tkb"),ll=u("8j0n"),nl=u("adRK"),ul=u("oW74"),el=u("3rK8"),tl=u("yYXI");class il extends tl.a{constructor(l){super(l)}}var rl=e.pb({encapsulation:2,styles:[],data:{}});function al(l){return e.Nb(0,[(l()(),e.rb(0,0,null,null,26,"div",[],null,null,null,null,null)),(l()(),e.rb(1,0,null,null,1,"h3",[],null,null,null,null,null)),(l()(),e.Lb(-1,null,["Overview of experimental details"])),(l()(),e.rb(3,0,null,null,5,"div",[["class","panel panel-default"]],null,null,null,null,null)),(l()(),e.rb(4,0,null,null,1,"div",[["class","panel-heading"]],null,null,null,null,null)),(l()(),e.Lb(-1,null,["General description"])),(l()(),e.rb(6,0,null,null,2,"div",[["class","panel-body"]],null,null,null,null,null)),(l()(),e.rb(7,0,null,null,1,"bd2-general-desc-view",[],null,null,null,Y.b,Y.a)),e.qb(8,49152,null,0,X.a,[],{model:[0,"model"]},null),(l()(),e.rb(9,0,null,null,5,"div",[["class","panel panel-default"]],null,null,null,null,null)),(l()(),e.rb(10,0,null,null,1,"div",[["class","panel-heading"]],null,null,null,null,null)),(l()(),e.Lb(-1,null,["Contributions"])),(l()(),e.rb(12,0,null,null,2,"div",[["class","panel-body"]],null,null,null,null,null)),(l()(),e.rb(13,0,null,null,1,"bd2-contr-desc-view",[],null,null,null,Z.b,Z.a)),e.qb(14,49152,null,0,Q.a,[],{model:[0,"model"]},null),(l()(),e.rb(15,0,null,null,5,"div",[["class","panel panel-default"]],null,null,null,null,null)),(l()(),e.rb(16,0,null,null,1,"div",[["class","panel-heading"]],null,null,null,null,null)),(l()(),e.Lb(-1,null,["Biological details"])),(l()(),e.rb(18,0,null,null,2,"div",[["class","panel-body"]],null,null,null,null,null)),(l()(),e.rb(19,0,null,null,1,"bd2-simple-bio-desc-view",[],null,null,null,ll.b,ll.a)),e.qb(20,49152,null,0,nl.a,[],{model:[0,"model"]},null),(l()(),e.rb(21,0,null,null,5,"div",[["class","panel panel-default"]],null,null,null,null,null)),(l()(),e.rb(22,0,null,null,1,"div",[["class","panel-heading"]],null,null,null,null,null)),(l()(),e.Lb(-1,null,["Measurement details"])),(l()(),e.rb(24,0,null,null,2,"div",[["class","panel-body"]],null,null,null,null,null)),(l()(),e.rb(25,0,null,null,1,"bd2-measurement-desc-view",[],null,null,null,ul.b,ul.a)),e.qb(26,114688,null,0,el.a,[],{model:[0,"model"]},null)],(function(l,n){var u=n.component;l(n,8,0,u.assay.generalDesc),l(n,14,0,u.assay.contributionDesc),l(n,20,0,u.assay),l(n,26,0,u.assay.experimentalDetails.measurementDesc)}),null)}function ol(l){return e.Nb(0,[(l()(),e.gb(16777216,null,null,1,null,al)),e.qb(1,16384,null,0,c.n,[e.N,e.K],{ngIf:[0,"ngIf"]},null)],(function(l,n){l(n,1,0,n.component.assay)}),null)}function sl(l){return e.Nb(0,[(l()(),e.rb(0,0,null,null,1,"ng-component",[],null,null,null,ol,rl)),e.qb(1,245760,null,0,il,[O.a],null,null)],(function(l,n){l(n,1,0)}),null)}var cl=e.nb("ng-component",il,sl,{},{},[]),bl=u("wbka"),dl=u("YJ2U"),pl=u("sj70"),fl=u("MhKU"),hl=u("q9OF"),ml=u("W3Xw"),gl=u("7+nn"),vl=u("Je4T"),kl=u("oFzb"),yl=u("XvzH"),Dl=u("s7LF"),Nl=u("qDIc");class Ll extends tl.a{constructor(l,n){super(n),this.route=l,this.blocked=!1,this.activeGeneralDescForm=!1,this.activeContributionDescForm=!1,this.activeSimpleBioDescForm=!1,this.activeMeasurementDescForm=!1,this.titlePart=" Edit",this.validator=Nl.a.INSTANCE}ngOnInit(){super.ngOnInit(),this.route.fragment.subscribe(l=>{this.requestedSection=l,this.focusOnSection(l)})}ngAfterViewInit(){this.focusOnSection(this.requestedSection)}focusOnSection(l){if(!l)return;const n=document.getElementById(l);n&&n.scrollIntoView(),"MeasurementSection"===l&&(this.activeMeasurementDescForm=!0)}saveEdits(l){this.assay&&l&&this.triggerValidation()&&(this.blocked=!0,this.experimentService.save(this.assay).then(l=>(this.feedback.success('Experiment: "'+l.name+'" updated.'),l)).then(l=>(this.currentExperiment.push(l),l)).then(n=>{this.blocked=!1,this.hideEdits(l)}).catch(l=>{this.blocked=!1,this.feedback.error(l)}))}hideEdits(l){this.activeGeneralDescForm=!1,this.activeContributionDescForm=!1,this.activeSimpleBioDescForm=!1,this.activeMeasurementDescForm=!1,this.triggerValidation()}cancel(){this.clearErrors(),this.router.navigate(["/experiment",this.assay.id])}updateModel(l){this._orgModel=l,this.assay=l?l.clone():null,this.setTitle()}}var ql=e.pb({encapsulation:2,styles:[],data:{}});function Il(l){return e.Nb(0,[(l()(),e.rb(0,0,null,null,1,"li",[],null,null,null,null,null)),(l()(),e.Lb(1,null,["",""]))],null,(function(l,n){l(n,1,0,n.context.$implicit)}))}function Al(l){return e.Nb(0,[(l()(),e.rb(0,0,null,null,3,"div",[["class","alert alert-danger"]],null,null,null,null,null)),(l()(),e.rb(1,0,null,null,2,"ul",[],null,null,null,null,null)),(l()(),e.gb(16777216,null,null,1,null,Il)),e.qb(3,278528,null,0,c.m,[e.N,e.K,e.q],{ngForOf:[0,"ngForOf"]},null)],(function(l,n){l(n,3,0,n.component.errors)}),null)}function xl(l){return e.Nb(0,[(l()(),e.rb(0,0,null,null,1,"bd2-general-desc-form",[],null,[[null,"onAccepted"],[null,"onCancelled"]],(function(l,n,u){var e=!0,t=l.component;return"onAccepted"===n&&(e=!1!==t.saveEdits(u)&&e),"onCancelled"===n&&(e=!1!==t.hideEdits(u)&&e),e}),bl.b,bl.a)),e.qb(1,49152,null,0,dl.a,[],{blocked:[0,"blocked"],model:[1,"model"]},{onAccepted:"onAccepted",onCancelled:"onCancelled"})],(function(l,n){var u=n.component;l(n,1,0,u.blocked,u.assay.generalDesc)}),null)}function Kl(l){return e.Nb(0,[(l()(),e.rb(0,0,null,null,1,"bd2-general-desc-view",[],null,null,null,Y.b,Y.a)),e.qb(1,49152,null,0,X.a,[],{model:[0,"model"]},null)],(function(l,n){l(n,1,0,n.component.assay.generalDesc)}),null)}function Cl(l){return e.Nb(0,[(l()(),e.rb(0,0,null,null,3,"div",[],null,null,null,null,null)),(l()(),e.rb(1,0,null,null,0,"hr",[],null,null,null,null,null)),(l()(),e.rb(2,0,null,null,1,"button",[["class","btn btn-primary"],["type","button"]],[[8,"disabled",0]],[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=0!=(l.component.activeGeneralDescForm=!0)&&e),e}),null,null)),(l()(),e.Lb(-1,null,["Modify "]))],null,(function(l,n){l(n,2,0,n.component.activeGeneralDescForm)}))}function wl(l){return e.Nb(0,[(l()(),e.rb(0,0,null,null,1,"bd2-contr-desc-form",[],null,[[null,"onAccepted"],[null,"onCancelled"]],(function(l,n,u){var e=!0,t=l.component;return"onAccepted"===n&&(e=!1!==t.saveEdits(u)&&e),"onCancelled"===n&&(e=!1!==t.hideEdits(u)&&e),e}),pl.b,pl.a)),e.qb(1,49152,null,0,fl.a,[],{blocked:[0,"blocked"],model:[1,"model"]},{onAccepted:"onAccepted",onCancelled:"onCancelled"})],(function(l,n){var u=n.component;l(n,1,0,u.blocked,u.assay.contributionDesc)}),null)}function Fl(l){return e.Nb(0,[(l()(),e.rb(0,0,null,null,1,"bd2-contr-desc-view",[],null,null,null,Z.b,Z.a)),e.qb(1,49152,null,0,Q.a,[],{model:[0,"model"]},null)],(function(l,n){l(n,1,0,n.component.assay.contributionDesc)}),null)}function Ol(l){return e.Nb(0,[(l()(),e.rb(0,0,null,null,3,"div",[],null,null,null,null,null)),(l()(),e.rb(1,0,null,null,0,"hr",[],null,null,null,null,null)),(l()(),e.rb(2,0,null,null,1,"button",[["class","btn btn-primary"],["type","button"]],[[8,"disabled",0]],[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=0!=(l.component.activeContributionDescForm=!0)&&e),e}),null,null)),(l()(),e.Lb(-1,null,["Modify "]))],null,(function(l,n){l(n,2,0,n.component.activeContributionDescForm)}))}function El(l){return e.Nb(0,[(l()(),e.rb(0,0,null,null,1,"bd2-simple-bio-desc-form",[],null,[[null,"onAccepted"],[null,"onCancelled"]],(function(l,n,u){var e=!0,t=l.component;return"onAccepted"===n&&(e=!1!==t.saveEdits(u)&&e),"onCancelled"===n&&(e=!1!==t.hideEdits(u)&&e),e}),hl.b,hl.a)),e.qb(1,114688,null,0,ml.a,[gl.a],{blocked:[0,"blocked"],model:[1,"model"]},{onAccepted:"onAccepted",onCancelled:"onCancelled"})],(function(l,n){var u=n.component;l(n,1,0,u.blocked,u.assay)}),null)}function Ml(l){return e.Nb(0,[(l()(),e.rb(0,0,null,null,1,"bd2-simple-bio-desc-view",[],null,null,null,ll.b,ll.a)),e.qb(1,49152,null,0,nl.a,[],{model:[0,"model"]},null)],(function(l,n){l(n,1,0,n.component.assay)}),null)}function Sl(l){return e.Nb(0,[(l()(),e.rb(0,0,null,null,3,"div",[],null,null,null,null,null)),(l()(),e.rb(1,0,null,null,0,"hr",[],null,null,null,null,null)),(l()(),e.rb(2,0,null,null,1,"button",[["class","btn btn-primary"],["type","button"]],[[8,"disabled",0]],[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=0!=(l.component.activeSimpleBioDescForm=!0)&&e),e}),null,null)),(l()(),e.Lb(-1,null,["Modify "]))],null,(function(l,n){l(n,2,0,n.component.activeSimpleBioDescForm)}))}function Tl(l){return e.Nb(0,[(l()(),e.rb(0,0,null,null,1,"bd2-measurement-desc-rform",[],null,[[null,"onAccepted"],[null,"onCancelled"]],(function(l,n,u){var e=!0,t=l.component;return"onAccepted"===n&&(e=!1!==t.saveEdits(u)&&e),"onCancelled"===n&&(e=!1!==t.hideEdits(u)&&e),e}),vl.b,vl.a)),e.qb(1,114688,null,0,kl.a,[yl.a,S.a,Dl.f],{blocked:[0,"blocked"],model:[1,"model"]},{onAccepted:"onAccepted",onCancelled:"onCancelled"})],(function(l,n){var u=n.component;l(n,1,0,u.blocked,u.assay.experimentalDetails.measurementDesc)}),null)}function Bl(l){return e.Nb(0,[(l()(),e.rb(0,0,null,null,1,"bd2-measurement-desc-view",[],null,null,null,ul.b,ul.a)),e.qb(1,114688,null,0,el.a,[],{model:[0,"model"]},null)],(function(l,n){l(n,1,0,n.component.assay.experimentalDetails.measurementDesc)}),null)}function Rl(l){return e.Nb(0,[(l()(),e.rb(0,0,null,null,3,"div",[],null,null,null,null,null)),(l()(),e.rb(1,0,null,null,0,"hr",[],null,null,null,null,null)),(l()(),e.rb(2,0,null,null,1,"button",[["class","btn btn-primary"],["type","button"]],[[8,"disabled",0]],[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=0!=(l.component.activeMeasurementDescForm=!0)&&e),e}),null,null)),(l()(),e.Lb(-1,null,["Modify "]))],null,(function(l,n){l(n,2,0,n.component.activeMeasurementDescForm)}))}function Jl(l){return e.Nb(0,[(l()(),e.rb(0,0,null,null,1,"li",[],null,null,null,null,null)),(l()(),e.Lb(1,null,["",""]))],null,(function(l,n){l(n,1,0,n.context.$implicit)}))}function Wl(l){return e.Nb(0,[(l()(),e.rb(0,0,null,null,3,"div",[["class","alert alert-danger"]],null,null,null,null,null)),(l()(),e.rb(1,0,null,null,2,"ul",[],null,null,null,null,null)),(l()(),e.gb(16777216,null,null,1,null,Jl)),e.qb(3,278528,null,0,c.m,[e.N,e.K,e.q],{ngForOf:[0,"ngForOf"]},null)],(function(l,n){l(n,3,0,n.component.errors)}),null)}function Pl(l){return e.Nb(0,[(l()(),e.rb(0,0,null,null,46,"div",[],null,null,null,null,null)),(l()(),e.rb(1,0,null,null,1,"h3",[],null,null,null,null,null)),(l()(),e.Lb(-1,null,["Modify experiment description"])),(l()(),e.gb(16777216,null,null,1,null,Al)),e.qb(4,16384,null,0,c.n,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.rb(5,0,null,null,9,"div",[["class","panel panel-default"]],null,null,null,null,null)),(l()(),e.rb(6,0,null,null,1,"div",[["class","panel-heading"]],null,null,null,null,null)),(l()(),e.Lb(-1,null,["General description"])),(l()(),e.rb(8,0,null,null,6,"div",[["class","panel-body"]],null,null,null,null,null)),(l()(),e.gb(16777216,null,null,1,null,xl)),e.qb(10,16384,null,0,c.n,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.gb(16777216,null,null,1,null,Kl)),e.qb(12,16384,null,0,c.n,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.gb(16777216,null,null,1,null,Cl)),e.qb(14,16384,null,0,c.n,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.rb(15,0,null,null,9,"div",[["class","panel panel-default"]],null,null,null,null,null)),(l()(),e.rb(16,0,null,null,1,"div",[["class","panel-heading"]],null,null,null,null,null)),(l()(),e.Lb(-1,null,["Contributions"])),(l()(),e.rb(18,0,null,null,6,"div",[["class","panel-body"]],null,null,null,null,null)),(l()(),e.gb(16777216,null,null,1,null,wl)),e.qb(20,16384,null,0,c.n,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.gb(16777216,null,null,1,null,Fl)),e.qb(22,16384,null,0,c.n,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.gb(16777216,null,null,1,null,Ol)),e.qb(24,16384,null,0,c.n,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.rb(25,0,null,null,9,"div",[["class","panel panel-default"]],null,null,null,null,null)),(l()(),e.rb(26,0,null,null,1,"div",[["class","panel-heading"]],null,null,null,null,null)),(l()(),e.Lb(-1,null,["Biological details"])),(l()(),e.rb(28,0,null,null,6,"div",[["class","panel-body"]],null,null,null,null,null)),(l()(),e.gb(16777216,null,null,1,null,El)),e.qb(30,16384,null,0,c.n,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.gb(16777216,null,null,1,null,Ml)),e.qb(32,16384,null,0,c.n,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.gb(16777216,null,null,1,null,Sl)),e.qb(34,16384,null,0,c.n,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.rb(35,0,null,null,9,"div",[["class","panel panel-default"],["id","MeasurementSection"]],null,null,null,null,null)),(l()(),e.rb(36,0,null,null,1,"div",[["class","panel-heading"]],null,null,null,null,null)),(l()(),e.Lb(-1,null,["Measurement details"])),(l()(),e.rb(38,0,null,null,6,"div",[["class","panel-body"]],null,null,null,null,null)),(l()(),e.gb(16777216,null,null,1,null,Tl)),e.qb(40,16384,null,0,c.n,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.gb(16777216,null,null,1,null,Bl)),e.qb(42,16384,null,0,c.n,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.gb(16777216,null,null,1,null,Rl)),e.qb(44,16384,null,0,c.n,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.gb(16777216,null,null,1,null,Wl)),e.qb(46,16384,null,0,c.n,[e.N,e.K],{ngIf:[0,"ngIf"]},null)],(function(l,n){var u=n.component;l(n,4,0,u.errors),l(n,10,0,u.activeGeneralDescForm),l(n,12,0,!u.activeGeneralDescForm),l(n,14,0,!u.activeGeneralDescForm),l(n,20,0,u.activeContributionDescForm),l(n,22,0,!u.activeContributionDescForm),l(n,24,0,!u.activeContributionDescForm),l(n,30,0,u.activeSimpleBioDescForm),l(n,32,0,!u.activeSimpleBioDescForm),l(n,34,0,!u.activeSimpleBioDescForm),l(n,40,0,u.activeMeasurementDescForm),l(n,42,0,!u.activeMeasurementDescForm),l(n,44,0,!u.activeMeasurementDescForm),l(n,46,0,u.errors)}),null)}function Ul(l){return e.Nb(0,[(l()(),e.gb(16777216,null,null,1,null,Pl)),e.qb(1,16384,null,0,c.n,[e.N,e.K],{ngIf:[0,"ngIf"]},null)],(function(l,n){l(n,1,0,n.component.assay)}),null)}function Gl(l){return e.Nb(0,[(l()(),e.rb(0,0,null,null,1,"ng-component",[],null,null,null,Ul,ql)),e.qb(1,4440064,null,0,Ll,[v.a,O.a],null,null)],(function(l,n){l(n,1,0)}),null)}var Vl=e.nb("ng-component",Ll,Gl,{},{},[]),jl=u("1A98"),Hl=u("vLYz");let zl=(()=>{class l{constructor(l){this.name=l}static deserialize(n){if(null==n)return null;const u=l.valuesMap.get(n);if(u)return u;const e=+n;if(e<0||e>=l.values.length||Number.isNaN(e))throw new RangeError("Uknown AssetType "+n);return l.values[e]}static initValuesMap(){const n=new Map;return l.values.forEach(l=>n.set(l.name,l)),n}equals(l){return this.name===l.name}toJSON(){return this.name}}return l.NONE=new l("NONE"),l.FILE=new l("FILE"),l.MEDIA=new l("MEDIA"),l.DATA=new l("DATA"),l.TS_DATA=new l("TS_DATA"),l.values=[l.NONE,l.FILE,l.MEDIA,l.DATA,l.TS_DATA],l.valuesMap=l.initValuesMap(),l})();var $l=u("B9cw");class _l{static deserialize(l){return l.created=$l.a.deserialize(l.created),l}}class Yl{constructor(){this.assetType=zl.NONE,this.versions=[]}get last(){return this.versions[0]}static deserialize(l){const n=new Yl;return n.id=l.id,n.originalName=l.originalName,n.url=l.url,n.assetType=zl.deserialize(l.assetType),l.versions&&(n.versions=l.versions.map(l=>_l.deserialize(l))),n}setAll(l){this.id=l.id,this.originalName=l.originalName,this.assetType=l.assetType,this.url=l.url,this.versions=l.versions}}class Xl{constructor(l){this.analytics=l,this.canEdit=!0,this.showVersions=!1,this.edit=!1,this.model=this.fakeFileAsset()}set model(l){this.file=l}ngOnInit(){}fakeFileAsset(){const l=JSON.parse('{\n      "id" : 2,\n      "originalName" : "f2",\n      "assetType" : "TS_DATA",\n      "versions" : [ {\n        "versionId" : 2,\n        "localFile" : "cos2",\n        "originalName" : "f2",\n        "contentType" : "txt",\n        "description" : "Some description",\n        "created" : [ 2016, 12, 8 ]\n      }, {\n        "versionId" : 1,\n        "localFile" : "cos2",\n        "originalName" : "f2",\n        "contentType" : "txt",\n        "description" : null,\n        "created" : [ 2016, 12, 8 ]\n      } ]\n    }');return Yl.deserialize(l)}recordDownload(){this.analytics.fileDownload(this.parentId,this.file.id)}}var Zl=e.pb({encapsulation:2,styles:[],data:{}});function Ql(l){return e.Nb(0,[(l()(),e.rb(0,0,null,null,1,"div",[],null,null,null,null,null)),(l()(),e.Lb(1,null,["",""]))],null,(function(l,n){l(n,1,0,n.component.file.last.description)}))}function ln(l){return e.Nb(0,[(l()(),e.rb(0,0,null,null,7,"li",[],null,null,null,null,null)),(l()(),e.Lb(1,null,[" Version ",". "," "])),e.Hb(2,2),(l()(),e.rb(3,0,null,null,2,"strong",[],null,null,null,null,null)),(l()(),e.rb(4,0,null,null,1,"a",[],[[8,"href",4],[8,"download",0]],[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.recordDownload()&&e),e}),null,null)),(l()(),e.Lb(5,null,["",""])),(l()(),e.rb(6,0,null,null,0,"br",[],null,null,null,null,null)),(l()(),e.Lb(7,null,[""," "]))],null,(function(l,n){var u=n.context.$implicit.versionId,t=e.Mb(n,1,1,l(n,2,0,e.Db(n.parent.parent.parent,0),n.context.$implicit.created.date,"shortDate"));l(n,1,0,u,t),l(n,4,0,e.vb(1,"",n.context.$implicit.url,""),e.vb(1,"",n.context.$implicit.originalName,"")),l(n,5,0,n.context.$implicit.originalName),l(n,7,0,n.context.$implicit.description)}))}function nn(l){return e.Nb(0,[(l()(),e.rb(0,0,null,null,3,"div",[],null,null,null,null,null)),(l()(),e.rb(1,0,null,null,2,"ul",[["class","list-unstyled"]],null,null,null,null,null)),(l()(),e.gb(16777216,null,null,1,null,ln)),e.qb(3,278528,null,0,c.m,[e.N,e.K,e.q],{ngForOf:[0,"ngForOf"]},null)],(function(l,n){l(n,3,0,n.component.file.versions)}),null)}function un(l){return e.Nb(0,[(l()(),e.rb(0,0,null,null,11,"div",[],null,null,null,null,null)),(l()(),e.rb(1,0,null,null,3,"div",[["class","pull-right"]],null,null,null,null,null)),(l()(),e.Lb(2,null,[" "," versions "])),(l()(),e.rb(3,0,null,null,1,"a",[["role","button"]],null,[[null,"click"]],(function(l,n,u){var e=!0,t=l.component;return"click"===n&&(e=0!=(t.showVersions=!t.showVersions)&&e),e}),null,null)),(l()(),e.rb(4,0,null,null,0,"span",[["aria-hidden","true"],["class","glyphicon glyphicon glyphicon-chevron-down"]],null,null,null,null,null)),(l()(),e.rb(5,0,null,null,2,"h5",[],null,null,null,null,null)),(l()(),e.rb(6,0,null,null,1,"a",[],[[8,"href",4],[8,"download",0]],[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.recordDownload()&&e),e}),null,null)),(l()(),e.Lb(7,null,["",""])),(l()(),e.gb(16777216,null,null,1,null,Ql)),e.qb(9,16384,null,0,c.n,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.gb(16777216,null,null,1,null,nn)),e.qb(11,16384,null,0,c.n,[e.N,e.K],{ngIf:[0,"ngIf"]},null)],(function(l,n){var u=n.component;l(n,9,0,u.file.last.description),l(n,11,0,u.showVersions)}),(function(l,n){var u=n.component;l(n,2,0,u.file.versions.length),l(n,6,0,e.vb(1,"",u.file.url,""),e.vb(1,"",u.file.last.originalName,"")),l(n,7,0,u.file.last.originalName)}))}function en(l){return e.Nb(0,[e.Fb(0,c.e,[e.s]),(l()(),e.gb(16777216,null,null,1,null,un)),e.qb(2,16384,null,0,c.n,[e.N,e.K],{ngIf:[0,"ngIf"]},null)],(function(l,n){var u=n.component;l(n,2,0,u.file&&u.file.last)}),null)}var tn=u("CNMR"),rn=u("UsWK");let an=(()=>{class l{constructor(l){this.BD2REST=l}upload(l,n){const u=new FormData;for(let e=0;e<n.length;e++)u.append("file",n[e],n[e].name);return this.BD2REST.expFileUpload(l,u).then(l=>l.data)}getFiles(l){return this.BD2REST.files(l).then(l=>l.data).then(l=>this.json2AssetsList(l)).then(n=>this.fillURLs(n,l))}fillURLs(l,n){return l.map(l=>this.fillURL(l,n))}fillURL(l,n){const u=this.BD2REST.fileURL(n,l.id);return l.url=u,l.versions.forEach(l=>{l.url=u+"/"+l.versionId}),l}json2AssetsList(l){return l.map(l=>Yl.deserialize(l))}}return l.ngInjectableDef=e.Rb({factory:function(){return new l(e.Sb(rn.a))},token:l,providedIn:"root"}),l})();class on extends tl.a{constructor(l,n){super(n),this.attachmentsService=l,this.attachments=[],this.tsData=[],this.blocked=!1,this.titlePart=" Files"}updateModel(l){super.updateModel(l),this.refreshAttachments()}refreshAttachments(){this.attachmentsService.getFiles(this.assay).then(l=>this.setFiles(l)).catch(l=>{this.feedback.error(l)})}setFiles(l){this.tsData=l.filter(l=>l.assetType.equals(zl.TS_DATA)),this.attachments=l.filter(l=>!l.assetType.equals(zl.TS_DATA))}upload(l){console.log("Uploading "+l.length),l&&0!==l.length&&(this.blocked=!0,this.attachmentsService.upload(this.assay,l).then(l=>{this.uploadWidget.reset(),this.blocked=!1,this.feedback.success(l.length+" files uploaded")}).then(()=>this.refreshModel()).catch(l=>{this.blocked=!1,this.feedback.error(l)}))}}var sn=e.pb({encapsulation:0,styles:[[""]],data:{}});function cn(l){return e.Nb(0,[(l()(),e.rb(0,0,null,null,3,"div",[],null,null,null,null,null)),(l()(),e.rb(1,0,null,null,1,"bd2-file-upload-widget",[],null,[[null,"uploadFiles"]],(function(l,n,u){var e=!0;return"uploadFiles"===n&&(e=!1!==l.component.upload(u)&&e),e}),jl.b,jl.a)),e.qb(2,114688,[[1,4],["uploadWidget",4]],0,Hl.a,[],{blocked:[0,"blocked"],autoReset:[1,"autoReset"]},{uploadFiles:"uploadFiles"}),(l()(),e.rb(3,0,null,null,0,"hr",[],null,null,null,null,null))],(function(l,n){l(n,2,0,n.component.blocked,!1)}),null)}function bn(l){return e.Nb(0,[(l()(),e.rb(0,0,null,null,1,"bd2-file-asset-view",[],null,null,null,en,Zl)),e.qb(1,114688,null,0,Xl,[R.a],{parentId:[0,"parentId"],model:[1,"model"]},null)],(function(l,n){l(n,1,0,n.component.assay.id,n.context.$implicit)}),null)}function dn(l){return e.Nb(0,[(l()(),e.rb(0,0,null,null,2,"alert",[["type","info"]],null,null,null,a.c,a.b)),e.qb(1,114688,null,0,tn.a,[tn.b,e.h],{type:[0,"type"]},null),(l()(),e.Lb(-1,0,[' Use "Replace data" to change timeseries files. ']))],(function(l,n){l(n,1,0,"info")}),null)}function pn(l){return e.Nb(0,[(l()(),e.rb(0,0,null,null,7,"div",[],null,null,null,null,null)),(l()(),e.rb(1,0,null,null,1,"h4",[],null,null,null,null,null)),(l()(),e.Lb(-1,null,["Timeseries files"])),(l()(),e.gb(16777216,null,null,1,null,bn)),e.qb(4,278528,null,0,c.m,[e.N,e.K,e.q],{ngForOf:[0,"ngForOf"]},null),(l()(),e.gb(16777216,null,null,1,null,dn)),e.qb(6,16384,null,0,c.n,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.rb(7,0,null,null,0,"hr",[],null,null,null,null,null))],(function(l,n){var u=n.component;l(n,4,0,u.tsData),l(n,6,0,u.assay.security.canWrite)}),null)}function fn(l){return e.Nb(0,[(l()(),e.rb(0,0,null,null,2,"alert",[["type","info"]],null,null,null,a.c,a.b)),e.qb(1,114688,null,0,tn.a,[tn.b,e.h],{type:[0,"type"]},null),(l()(),e.Lb(-1,0,[' Use "Import data" to add timeseries files. ']))],(function(l,n){l(n,1,0,"info")}),null)}function hn(l){return e.Nb(0,[(l()(),e.rb(0,0,null,null,1,"bd2-file-asset-view",[],null,null,null,en,Zl)),e.qb(1,114688,null,0,Xl,[R.a],{parentId:[0,"parentId"],model:[1,"model"]},null)],(function(l,n){l(n,1,0,n.component.assay.id,n.context.$implicit)}),null)}function mn(l){return e.Nb(0,[(l()(),e.rb(0,0,null,null,4,"div",[],null,null,null,null,null)),(l()(),e.rb(1,0,null,null,1,"h4",[],null,null,null,null,null)),(l()(),e.Lb(-1,null,["Attachments"])),(l()(),e.gb(16777216,null,null,1,null,hn)),e.qb(4,278528,null,0,c.m,[e.N,e.K,e.q],{ngForOf:[0,"ngForOf"]},null)],(function(l,n){l(n,4,0,n.component.attachments)}),null)}function gn(l){return e.Nb(0,[(l()(),e.rb(0,0,null,null,2,"alert",[["type","info"]],null,null,null,a.c,a.b)),e.qb(1,114688,null,0,tn.a,[tn.b,e.h],{type:[0,"type"]},null),(l()(),e.Lb(-1,0,[" Drag and upload files using the upload area in order to update the attachments. "]))],(function(l,n){l(n,1,0,"info")}),null)}function vn(l){return e.Nb(0,[(l()(),e.rb(0,0,null,null,10,"div",[],null,null,null,null,null)),(l()(),e.gb(16777216,null,null,1,null,cn)),e.qb(2,16384,null,0,c.n,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.gb(16777216,null,null,1,null,pn)),e.qb(4,16384,null,0,c.n,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.gb(16777216,null,null,1,null,fn)),e.qb(6,16384,null,0,c.n,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.gb(16777216,null,null,1,null,mn)),e.qb(8,16384,null,0,c.n,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.gb(16777216,null,null,1,null,gn)),e.qb(10,16384,null,0,c.n,[e.N,e.K],{ngIf:[0,"ngIf"]},null)],(function(l,n){var u=n.component;l(n,2,0,u.assay.security.canWrite),l(n,4,0,u.tsData&&u.tsData.length>0),l(n,6,0,!u.tsData||0===u.tsData.length),l(n,8,0,u.attachments&&u.attachments.length>0),l(n,10,0,u.assay.security.canWrite)}),null)}function kn(l){return e.Nb(0,[e.Jb(671088640,1,{uploadWidget:0}),(l()(),e.rb(1,0,null,null,1,"h3",[],null,null,null,null,null)),(l()(),e.Lb(-1,null,["Attached files"])),(l()(),e.rb(3,0,null,null,0,"hr",[],null,null,null,null,null)),(l()(),e.gb(16777216,null,null,1,null,vn)),e.qb(5,16384,null,0,c.n,[e.N,e.K],{ngIf:[0,"ngIf"]},null)],(function(l,n){l(n,5,0,n.component.assay)}),null)}function yn(l){return e.Nb(0,[(l()(),e.rb(0,0,null,null,1,"ng-component",[],null,null,null,kn,sn)),e.qb(1,245760,null,0,on,[an,O.a],null,null)],(function(l,n){l(n,1,0)}),null)}var Dn=e.nb("ng-component",on,yn,{},{},[]);class Nn extends tl.a{constructor(l){super(l),this.licences=["CC_BY"]}ngOnInit(){super.ngOnInit(),this.licence=this.licences[0]}publish(){this.terms&&this.licence&&this.experimentService.publish(this.assay,this.licence).then(l=>(this.feedback.success('Experiment: "'+l.name+'" published.'),l)).then(l=>(this.currentExperiment.push(l),l)).then(l=>{this.goToExpHome(l.id)}).catch(l=>{this.feedback.error(l)})}}var Ln=e.pb({encapsulation:2,styles:[],data:{}});function qn(l){return e.Nb(0,[(l()(),e.rb(0,0,null,null,6,"div",[],null,null,null,null,null)),(l()(),e.rb(1,0,null,null,5,"alert",[["type","info"]],null,null,null,a.c,a.b)),e.qb(2,114688,null,0,tn.a,[tn.b,e.h],{type:[0,"type"]},null),(l()(),e.Lb(-1,0,[" Experiment is already publicly available under "])),(l()(),e.rb(4,0,null,0,1,"strong",[],null,null,null,null,null)),(l()(),e.Lb(5,null,["",""])),(l()(),e.Lb(-1,0,[" licence. "]))],(function(l,n){l(n,2,0,"info")}),(function(l,n){l(n,5,0,n.component.assay.features.licence)}))}function In(l){return e.Nb(0,[(l()(),e.rb(0,0,null,null,3,"option",[],null,null,null,null,null)),e.qb(1,147456,null,0,Dl.v,[e.k,e.C,[2,Dl.B]],{value:[0,"value"]},null),e.qb(2,147456,null,0,Dl.G,[e.k,e.C,[8,null]],{value:[0,"value"]},null),(l()(),e.Lb(3,null,[""," "]))],(function(l,n){l(n,1,0,n.context.$implicit),l(n,2,0,n.context.$implicit)}),(function(l,n){l(n,3,0,n.context.$implicit)}))}function An(l){return e.Nb(0,[(l()(),e.rb(0,0,null,null,41,"div",[],null,null,null,null,null)),(l()(),e.rb(1,0,null,null,9,"alert",[["type","danger"]],null,null,null,a.c,a.b)),e.qb(2,114688,null,0,tn.a,[tn.b,e.h],{type:[0,"type"]},null),(l()(),e.Lb(-1,0,[" You are about to make the data public. Once they are public they cannot be made private again. "])),(l()(),e.rb(4,0,null,0,6,"ul",[],null,null,null,null,null)),(l()(),e.rb(5,0,null,null,1,"li",[],null,null,null,null,null)),(l()(),e.Lb(-1,null,["make sure you know what you are doing"])),(l()(),e.rb(7,0,null,null,1,"li",[],null,null,null,null,null)),(l()(),e.Lb(-1,null,["make sure all contributors agree to public sharing"])),(l()(),e.rb(9,0,null,null,1,"li",[],null,null,null,null,null)),(l()(),e.Lb(-1,null,["double check the description is correct, not all changes will be possible after the publishing"])),(l()(),e.rb(11,0,null,null,30,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],(function(l,n,u){var t=!0;return"submit"===n&&(t=!1!==e.Db(l,13).onSubmit(u)&&t),"reset"===n&&(t=!1!==e.Db(l,13).onReset()&&t),t}),null,null)),e.qb(12,16384,null,0,Dl.H,[],null,null),e.qb(13,4210688,[["publishForm",4]],0,Dl.t,[[8,null],[8,null]],null,null),e.Ib(2048,null,Dl.d,null,[Dl.t]),e.qb(15,16384,null,0,Dl.s,[[4,Dl.d]],null,null),(l()(),e.rb(16,0,null,null,12,"div",[["class","form-group"]],null,null,null,null,null)),(l()(),e.rb(17,0,null,null,1,"label",[["for","licence"]],null,null,null,null,null)),(l()(),e.Lb(-1,null,["Licence"])),(l()(),e.rb(19,0,null,null,9,"select",[["class","form-control"],["id","licence"],["name","licence"],["placeholder","Select licence"],["required",""]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],(function(l,n,u){var t=!0,i=l.component;return"change"===n&&(t=!1!==e.Db(l,20).onChange(u.target.value)&&t),"blur"===n&&(t=!1!==e.Db(l,20).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.licence=u)&&t),t}),null,null)),e.qb(20,16384,null,0,Dl.B,[e.C,e.k],null,null),e.qb(21,16384,null,0,Dl.A,[],{required:[0,"required"]},null),e.Ib(1024,null,Dl.o,(function(l){return[l]}),[Dl.A]),e.Ib(1024,null,Dl.p,(function(l){return[l]}),[Dl.B]),e.qb(24,671744,[["licenceF",4]],0,Dl.u,[[2,Dl.d],[6,Dl.o],[8,null],[6,Dl.p]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),e.Ib(2048,null,Dl.q,null,[Dl.u]),e.qb(26,16384,null,0,Dl.r,[[4,Dl.q]],null,null),(l()(),e.gb(16777216,null,null,1,null,In)),e.qb(28,278528,null,0,c.m,[e.N,e.K,e.q],{ngForOf:[0,"ngForOf"]},null),(l()(),e.rb(29,0,null,null,10,"div",[["class","form-group"]],null,null,null,null,null)),(l()(),e.rb(30,0,null,null,9,"label",[],null,null,null,null,null)),(l()(),e.rb(31,0,null,null,7,"input",[["id","terms"],["name","fTerms"],["required",""],["type","checkbox"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],(function(l,n,u){var t=!0,i=l.component;return"change"===n&&(t=!1!==e.Db(l,32).onChange(u.target.checked)&&t),"blur"===n&&(t=!1!==e.Db(l,32).onTouched()&&t),"ngModelChange"===n&&(t=!1!==(i.terms=u)&&t),t}),null,null)),e.qb(32,16384,null,0,Dl.b,[e.C,e.k],null,null),e.qb(33,16384,null,0,Dl.c,[],{required:[0,"required"]},null),e.Ib(1024,null,Dl.o,(function(l){return[l]}),[Dl.c]),e.Ib(1024,null,Dl.p,(function(l){return[l]}),[Dl.b]),e.qb(36,671744,[["fTerms",4]],0,Dl.u,[[2,Dl.d],[6,Dl.o],[8,null],[6,Dl.p]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),e.Ib(2048,null,Dl.q,null,[Dl.u]),e.qb(38,16384,null,0,Dl.r,[[4,Dl.q]],null,null),(l()(),e.Lb(-1,null,[" I understand that I cannot undo this operation "])),(l()(),e.rb(40,0,null,null,1,"button",[["class","btn btn-primary"],["type","submit"]],[[8,"disabled",0]],[[null,"click"]],(function(l,n,u){var e=!0;return"click"===n&&(e=!1!==l.component.publish()&&e),e}),null,null)),(l()(),e.Lb(-1,null,[" Publish "]))],(function(l,n){var u=n.component;l(n,2,0,"danger"),l(n,21,0,""),l(n,24,0,"licence",u.licence),l(n,28,0,u.licences),l(n,33,0,""),l(n,36,0,"fTerms",u.terms)}),(function(l,n){l(n,11,0,e.Db(n,15).ngClassUntouched,e.Db(n,15).ngClassTouched,e.Db(n,15).ngClassPristine,e.Db(n,15).ngClassDirty,e.Db(n,15).ngClassValid,e.Db(n,15).ngClassInvalid,e.Db(n,15).ngClassPending),l(n,19,0,e.Db(n,21).required?"":null,e.Db(n,26).ngClassUntouched,e.Db(n,26).ngClassTouched,e.Db(n,26).ngClassPristine,e.Db(n,26).ngClassDirty,e.Db(n,26).ngClassValid,e.Db(n,26).ngClassInvalid,e.Db(n,26).ngClassPending),l(n,31,0,e.Db(n,33).required?"":null,e.Db(n,38).ngClassUntouched,e.Db(n,38).ngClassTouched,e.Db(n,38).ngClassPristine,e.Db(n,38).ngClassDirty,e.Db(n,38).ngClassValid,e.Db(n,38).ngClassInvalid,e.Db(n,38).ngClassPending),l(n,40,0,!e.Db(n,13).form.valid)}))}function xn(l){return e.Nb(0,[(l()(),e.rb(0,0,null,null,6,"div",[],null,null,null,null,null)),(l()(),e.rb(1,0,null,null,1,"h3",[],null,null,null,null,null)),(l()(),e.Lb(-1,null,["Publish experiment"])),(l()(),e.gb(16777216,null,null,1,null,qn)),e.qb(4,16384,null,0,c.n,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.gb(16777216,null,null,1,null,An)),e.qb(6,16384,null,0,c.n,[e.N,e.K],{ngIf:[0,"ngIf"]},null)],(function(l,n){var u=n.component;l(n,4,0,u.assay.features.isOpenAccess),l(n,6,0,!u.assay.features.isOpenAccess)}),null)}function Kn(l){return e.Nb(0,[(l()(),e.gb(16777216,null,null,1,null,xn)),e.qb(1,16384,null,0,c.n,[e.N,e.K],{ngIf:[0,"ngIf"]},null)],(function(l,n){l(n,1,0,n.component.assay)}),null)}function Cn(l){return e.Nb(0,[(l()(),e.rb(0,0,null,null,1,"bd2-publish-form",[],null,null,null,Kn,Ln)),e.qb(1,245760,null,0,Nn,[O.a],null,null)],(function(l,n){l(n,1,0)}),null)}var wn=e.nb("bd2-publish-form",Nn,Cn,{},{},[]),Fn=u("ienR"),On=u("LqlI"),En=u("ZMeN"),Mn=u("aHM3"),Sn=u("DkMi"),Tn=u("O6Xb"),Bn=u("YiFe");class Rn{}class Jn{}const Wn=()=>u.e(13).then(u.bind(null,"cXDc")).then(l=>l.TsDataModuleNgFactory),Pn=()=>Promise.all([u.e(2),u.e(11)]).then(u.bind(null,"/qf6")).then(l=>l.PPAModuleNgFactory),Un=()=>Promise.all([u.e(2),u.e(12)]).then(u.bind(null,"Sypl")).then(l=>l.RhythmicityModuleNgFactory);class Gn{}u.d(n,"ExperimentModuleNgFactory",(function(){return Vn}));var Vn=e.ob(t,[],(function(l){return e.Ab([e.Bb(512,e.j,e.Z,[[8,[i.a,r.a,r.b,a.a,o.a,s.a,_,cl,Vl,Dn,wn]],[3,e.j],e.v]),e.Bb(4608,c.p,c.o,[e.s,[2,c.F]]),e.Bb(4608,Dl.E,Dl.E,[]),e.Bb(4608,Dl.f,Dl.f,[]),e.Bb(1073742336,c.c,c.c,[]),e.Bb(1073742336,Dl.D,Dl.D,[]),e.Bb(1073742336,Dl.l,Dl.l,[]),e.Bb(1073742336,Dl.z,Dl.z,[]),e.Bb(1073742336,Fn.j,Fn.j,[]),e.Bb(1073742336,On.e,On.e,[]),e.Bb(1073742336,tn.c,tn.c,[]),e.Bb(1073742336,En.d,En.d,[]),e.Bb(1073742336,Mn.d,Mn.d,[]),e.Bb(1073742336,Sn.a,Sn.a,[]),e.Bb(1073742336,Tn.a,Tn.a,[]),e.Bb(1073742336,Bn.a,Bn.a,[]),e.Bb(1073742336,Rn,Rn,[]),e.Bb(1073742336,Jn,Jn,[]),e.Bb(1073742336,v.p,v.p,[[2,v.u],[2,v.l]]),e.Bb(1073742336,Gn,Gn,[]),e.Bb(1073742336,t,t,[]),e.Bb(1024,v.j,(function(){return[[{path:":id",component:P,children:[{path:"",pathMatch:"full",component:il},{path:"edit",component:Ll},{path:"file",component:on},{path:"publish",component:Nn},{path:"data",loadChildren:Wn},{path:"ppa",loadChildren:Pn},{path:"rhythmicity",loadChildren:Un}]}]]}),[])])}))}}]);