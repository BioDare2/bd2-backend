(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{B9cw:function(l,n,t){"use strict";t.d(n,"a",function(){return e}),t.d(n,"b",function(){return u});var e=function(){function l(l,n,t){this._year=l,this._month=n,this._day=t}return Object.defineProperty(l.prototype,"date",{get:function(){return new Date(this._year,this._month-1,this._day)},enumerable:!0,configurable:!0}),l.deserialize=function(n){return n?new l(n[0],n[1],n[2]):null},l.prototype.toJSON=function(){return[this._year,this._month,this._day]},l}(),u=function(){function l(l,n,t,e,u,o,i){this._year=l,this._month=n,this._day=t,this._hour=e,this._minute=u,this._second=o,this._milisecond=i,this._second=o||0,this._milisecond=i||0}return Object.defineProperty(l.prototype,"date",{get:function(){return new Date(this._year,this._month-1,this._day,this._hour,this._minute,this._second,this._milisecond)},enumerable:!0,configurable:!0}),l.deserialize=function(n){return n?new l(n[0],n[1],n[2],n[3],n[4],n[5],n[6]):null},l.prototype.toJSON=function(){return[this._year,this._month,this._day,this._hour,this._minute,this._second,this._milisecond]},l}()},BDlQ:function(l,n,t){"use strict";var e=t("bIqs"),u=t("TSxo"),o=t("FBzB"),i=function(){function l(){}return l.deserialize=function(n){var t=new l;return t.setAll(n),t},l.prototype.setAll=function(l){this.name=l.name,this.description=l.description},l}(),r=function(){function l(){this.environments=[]}return l.deserialize=function(n){var t=new l,e=n.environments.map(function(l){return i.deserialize(l)});return t.setAll({environments:e}),t},l.prototype.clone=function(){var n=JSON.stringify(this);return l.deserialize(JSON.parse(n))},l.prototype.setAll=function(l){this.environments=l.environments},l}(),a=t("B9cw"),s=function(){function l(){}return l.deserialize=function(n){n.measurementDesc=o.a.deserialize(n.measurementDesc),n.growthEnvironments=r.deserialize(n.growthEnvironments),n.experimentalEnvironments=r.deserialize(n.experimentalEnvironments),n.executionDate=a.a.deserialize(n.executionDate);var t=new l;return t.setAll(n),t},l.prototype.clone=function(){var n=new l;return n.measurementDesc=this.measurementDesc.clone(),n.growthEnvironments=this.growthEnvironments.clone(),n.experimentalEnvironments=this.experimentalEnvironments.clone(),n.executionDate=this.executionDate,n},l.prototype.setAll=function(l){this.measurementDesc=l.measurementDesc,this.growthEnvironments=l.growthEnvironments,this.experimentalEnvironments=l.experimentalEnvironments,this.executionDate=l.executionDate},l}(),c=function(){function l(){}return l.deserialize=function(n){var t=new l;return t.canRead=n.canRead,t.canWrite=n.canWrite,t.isOwner=n.isOwner,t.isSuperOwner=n.isSuperOwner,t},l}(),p=t("JeNg"),d=t("y9VC"),b=t("FUU9");t.d(n,"a",function(){return m});var m=function(){function l(){this.generalDesc=new e.a,this.contributionDesc=new u.a,this.experimentalDetails=new s}return Object.defineProperty(l.prototype,"name",{get:function(){return this.generalDesc.name},enumerable:!0,configurable:!0}),l.deserialize=function(n){var t=new l;return t.id=n.id,t.generalDesc=e.a.deserialize(n.generalDesc),t.contributionDesc=u.a.deserialize(n.contributionDesc),t.experimentalDetails=s.deserialize(n.experimentalDetails),t.features=d.a.deserialize(n.features),t.species=n.species,t.dataCategory=b.a.deserialize(n.dataCategory),t.provenance=p.a.deserialize(n.provenance),t.security=c.deserialize(n.security),t},l.prototype.clone=function(){var n=new l;return n.id=this.id,n.generalDesc=this.generalDesc.clone(),n.contributionDesc=this.contributionDesc.clone(),n.experimentalDetails=this.experimentalDetails.clone(),n.features=this.features,n.species=this.species,n.dataCategory=this.dataCategory,n.provenance=this.provenance,n.security=this.security,n},l.prototype.setAll=function(l){this.id=l.id,this.generalDesc=l.generalDesc,this.contributionDesc=l.contributionDesc,this.experimentalDetails=l.experimentalDetails,this.features=l.features,this.species=l.species,this.dataCategory=l.dataCategory,this.provenance=l.provenance,this.security=l.security},l}()},FBzB:function(l,n,t){"use strict";t.d(n,"a",function(){return u});var e=t("zrmi"),u=function(){function l(){this.parameters=new e.a}return l.deserialize=function(n){var t=new l;return n.parameters=e.a.deserialize(n.parameters),t.setAll(n),t},l.prototype.clone=function(){var n=new l;return n.technique=this.technique,n.equipment=this.equipment,n.description=this.description,n.parameters=this.parameters.clone(),n},l.prototype.setAll=function(l){this.technique=l.technique,this.equipment=l.equipment,this.description=l.description,this.parameters=l.parameters||new e.a},l}()},FUU9:function(l,n,t){"use strict";t.d(n,"a",function(){return e});var e=function(){function l(l,n,t,e,u){this.nr=l,this.name=n,this.shortName=t,this.longName=e,this.disabled=u}return l.get=function(n){return l.getValuesMap().get(n)},l.getValues=function(){return l.values},l.getValidOptions=function(){return l.validOptions||(l.validOptions=l.values.filter(function(l){return!l.disabled})),l.validOptions},l.deserialize=function(n){if(null==n)return null;var t=l.getValuesMap().get(n);if(t)return t;var e=+n;return(e<0||e>=l.getValues().length)&&(e=0),l.getValues()[e]},l.initValues=function(){var n=[];return n.push(new l(0,"NONE","NONE","None",!0)),n.push(new l(1,"EXPR_REPORTER","EXPR_REP","Expression reporter (e.g. Luc/GFP-imaging)")),n.push(new l(2,"SIGNALLING_REPORTER","SIG_REP","Signalling reporter (e.g. Aequorin)")),n.push(new l(3,"DELAYED_FLUORESCENCE","DF","Delayed fluorescence")),n.push(new l(4,"LEAF_MOVEMENT","LEAF_MV","Leaf movement")),n.push(new l(5,"GEN_IMAGING","IMG","Other imaging")),n.push(new l(6,"PROTEIN","PROT","Protein levels (e.g. Western blot)")),n.push(new l(7,"TRANSCRIPT","RNA","RNA levels (e.g. qRT-PCR)")),n.push(new l(8,"METABOLITE","MET","Metabolite levels (e.g. LC-MS)")),n.push(new l(9,"BEHAVIOUR","BEHAVE","Behaviour (e.g. wheel running)")),n.push(new l(10,"PHYSIOLOGY","PHYS","Physiology (e.g. biomass)")),n.push(new l(11,"DEVELOPMENT","DEVEL","Development")),n.push(new l(12,"OTHER","OTHER","OTHER")),n.push(new l(13,"UNKNOWN","UNKNOWN","Unknown",!0)),n.push(new l(14,"PCR","PCR","qRT-PCR",!0)),n.push(new l(15,"TRANSC_FUSION","TSCR_FS","Transcriptional fusion",!0)),n.push(new l(16,"TRANSL_FUSION","TSLT_FS","Translational fusion",!0)),n},l.getValuesMap=function(){if(!l.valuesMap){var n=new Map;l.getValues().forEach(function(l){return n.set(l.name,l)}),l.valuesMap=n}return l.valuesMap},l.prototype.equals=function(l){return this.name===l.name},l.prototype.toJSON=function(){return this.name},l.values=l.initValues(),l}()},JeNg:function(l,n,t){"use strict";t.d(n,"a",function(){return u});var e=t("B9cw"),u=function(){function l(){}return l.deserialize=function(n){var t=new l;return t.created=e.b.deserialize(n.created),t.createdBy=n.createdBy,t.modified=e.b.deserialize(n.modified),t.modifiedBy=n.modifiedBy,t},l}()},RkHi:function(l,n,t){"use strict";t.d(n,"a",function(){return e});var e=function(){function l(l){this.name=l}return l.deserialize=function(n){var t=new l;return t.setAll(n),t},l.prototype.setAll=function(l){this.id=l.id,this.name=l.name,this.longName=l.longName,this.address=l.address,this.web=l.web},l}()},RtrU:function(l,n,t){"use strict";var e=t("UsWK"),u=t("bIqs"),o=t("JeNg"),i=t("y9VC"),r=function(){function l(){}return Object.defineProperty(l.prototype,"name",{get:function(){return this.generalDesc.name},enumerable:!0,configurable:!0}),l.deserialize=function(n){var t=new l;return t.id=n.id,t.generalDesc=u.a.deserialize(n.generalDesc),t.provenance=o.a.deserialize(n.provenance),t.features=i.a.deserialize(n.features),t},l}(),a=t("BDlQ"),s=t("CcnG");t.d(n,"a",function(){return c});var c=function(){function l(l){this.BD2REST=l,console.log("ExperimentService created")}return l.prototype.getExperiments=function(l){var n=this;return void 0===l&&(l=!0),this.BD2REST.experiments(l).then(function(l){return n.json2ExperimentSummaryList(l.data)})},l.prototype.newDraft=function(){var l=this;return this.BD2REST.experimentNewDraft().then(function(n){return l.json2ExperimentalAssayView(n)})},l.prototype.newExperiment=function(l){var n=this;return this.BD2REST.experimentNewExperiment(l).then(function(l){return n.json2ExperimentalAssayView(l)})},l.prototype.getExperiment=function(l){var n=this;return this.BD2REST.experiment(l).then(function(l){return n.json2ExperimentalAssayView(l)})},l.prototype.save=function(l){var n=this;return this.BD2REST.experimentSave(l).then(function(l){return n.json2ExperimentalAssayView(l)})},l.prototype.importTimeSeries=function(l,n){return this.BD2REST.experimentImportTS(l,n)},l.prototype.publish=function(l,n){var t=this;return this.BD2REST.experimentPublish(l,n).then(function(l){return t.json2ExperimentalAssayView(l)})},l.prototype.json2ExperimentSummaryList=function(l){return l.map(function(l){return r.deserialize(l)})},l.prototype.json2ExperimentalAssayView=function(l){return a.a.deserialize(l)},l.ngInjectableDef=s.S({factory:function(){return new l(s.W(e.a))},token:l,providedIn:"root"}),l}()},TPWj:function(l,n,t){"use strict";t.d(n,"a",function(){return e});var e=function(){function l(l){this.validator=l,this.errors=void 0}return l.prototype.triggerValidation=function(){var l=this.validate(this.getModel());return l?(this.showErrors(l),!1):(this.clearErrors(),!0)},l.prototype.clearErrors=function(){this.errors=void 0},l.prototype.showErrors=function(l){this.errors=l},l.prototype.validate=function(l){if(this.validator){var n=this.validator.validate(l);return 0===n.length?null:n}return null},l}()},TSxo:function(l,n,t){"use strict";t.d(n,"a",function(){return i});var e=t("kKfy"),u=t("RkHi"),o=t("cEDj"),i=function(){function l(){this.authors=[],this.curators=[],this.institutions=[],this.fundings=[]}return l.deserialize=function(n){var t=new l;return t.authors=n.authors.map(function(l){return o.a.deserialize(l)}),t.curators=n.curators.map(function(l){return o.a.deserialize(l)}),t.institutions=n.institutions.map(function(l){return u.a.deserialize(l)}),t.fundings=n.fundings.map(function(l){return e.a.deserialize(l)}),t},l.prototype.clone=function(){var n=new l;return n.authors=this.authors.slice(),n.curators=this.curators.slice(),n.institutions=this.institutions.slice(),n.fundings=this.fundings.slice(),n},l.prototype.setAll=function(l){this.authors=l.authors,this.curators=l.curators,this.institutions=l.institutions,this.fundings=l.fundings},l}()},bIqs:function(l,n,t){"use strict";t.d(n,"a",function(){return e});var e=function(){function l(){}return l.deserialize=function(n){var t=new l;return t.setAll(n),t},l.prototype.setAll=function(l){this.name=l.name,this.purpose=l.purpose,this.description=l.description,this.comments=l.comments},l.prototype.clone=function(){var n=new l;return n.setAll(this),n},l}()},cEDj:function(l,n,t){"use strict";t.d(n,"a",function(){return e});var e=function(){function l(l,n){this.firstName=l,this.lastName=n}return Object.defineProperty(l.prototype,"name",{get:function(){return this.firstName&&this.lastName?this.firstName+" "+this.lastName:this.lastName?this.lastName:this.firstName?this.firstName:void 0},enumerable:!0,configurable:!0}),l.deserialize=function(n){var t=new l;return t.setAll(n),t},l.prototype.setAll=function(l){this.id=l.id,this.login=l.login,this.firstName=l.firstName,this.lastName=l.lastName,this.ORCID=l.ORCID},l}()},cXDc:function(l,n,t){"use strict";t.r(n);var e=t("CcnG"),u=function(){return function(){}}(),o=t("MdoF"),i=t("z5nN"),r=t("pMnS"),a=t("gIcY"),s=t("lTVp"),c=t("Ip0R"),p=t("1A98"),d=t("vLYz"),b=t("mrSG"),m=t("yYXI"),h=function(){function l(l,n,t){this.id=l,this.name=n,this.label=t}return l.getValuesMap=function(){return l.valuesMap||(l.valuesMap=l.initValuesMap()),l.valuesMap},l.get=function(n){return l.getValuesMap().get(n)},l.initValuesMap=function(){var n=new Map;return n.set(l.NONE.name,l.NONE),n.set(l.EXCEL_TABLE.name,l.EXCEL_TABLE),n.set(l.TOPCOUNT.name,l.TOPCOUNT),n},l.prototype.toJSON=function(){return this.name},l.NONE=new l(0,"NONE","none"),l.EXCEL_TABLE=new l(1,"EXCEL_TABLE","Excel Table"),l.TOPCOUNT=new l(2,"TOPCOUNT","TopCount"),l}(),f=[h.EXCEL_TABLE,h.TOPCOUNT],g=function(l){function n(){var n=null!==l&&l.apply(this,arguments)||this;return n._class_name=".ExcelTSImportParameters",n}return b.__extends(n,l),n}(function(){return function(){}}()),v=function(){return function(){}}(),y=t("GVyA"),C=t("UsWK"),w=function(){function l(l){this.BD2REST=l}return l.prototype.uploadFile=function(l){var n=new FormData;return n.append("file",l,l.name),this.BD2REST.fileUpload(n).then(function(l){return l.id})},l.ngInjectableDef=e.S({factory:function(){return new l(e.W(C.a))},token:l,providedIn:"root"}),l}(),z=function(){function l(l){this.BD2REST=l}return l.prototype.getSimpleTableView=function(l){return this.BD2REST.fileViewSimpleTable(l).then(function(l){return l.data})},l.prototype.verifyFormat=function(l,n){return this.BD2REST.fileViewVerifyFormat(l,n)},l.ngInjectableDef=e.S({factory:function(){return new l(e.W(C.a))},token:l,providedIn:"root"}),l}(),E=function(l){function n(n,t,e){var u=l.call(this,e)||this;return u.uploadService=n,u.fileViewService=t,u.blocked=!1,u.titlePart=" Upload Data",u.importFormatOptions=f,u.importFormat=h.EXCEL_TABLE.name,u}return b.__extends(n,l),n.prototype.formatChanged=function(l){this.lastFiles&&this.checkFormat(this.lastFiles)},n.prototype.upload=function(l){var n=this;if(l&&1===l.length){var t=h.get(this.importFormat);this.assay&&t&&(this.blocked=!0,this.uploadService.uploadFile(l[0]).then(function(l){return n.verifyFormatRemotely(t,l)}).then(function(l){return n.goToImport(n.importFormat,l)}).catch(function(l){n.blocked=!1,n.feedback.error(l)}))}},n.prototype.verifyFormatRemotely=function(l,n){return this.fileViewService.verifyFormat(l,n).then(function(l){return n})},n.prototype.goToImport=function(l,n){var t=this.expHomePath();t.push("data","ts-import",l,n),this.router.navigate(t)},n.prototype.checkFormat=function(l){var n=this;this.lastFiles=l,this.formatWarning=void 0,l.forEach(function(l){if(n.importFormat===h.TOPCOUNT.name)(t=n.isTopCount(l))&&(n.formatWarning="The selected file does not seem to be a topcount file/archive but rather: "+t+". If you sure it is a valid topcount file/archive you can continue upload.");else if(n.importFormat===h.EXCEL_TABLE.name){var t;(t=n.isExcel(l))&&(n.formatWarning="The selected file does not seem to be an excel file but rather: "+t+". If you sure it is a valid excel file you can continue upload.")}})},n.prototype.isTopCount=function(l){var n=l.type;return l.name?(n||(n="Unknown"),l.name.endsWith(".csv")?"CSV":l.name.endsWith(".xls")?"Excel":l.name.endsWith(".xlsx")?"Excel":l.name.endsWith(".tsv")?"tab separated":null):"Unknown"},n.prototype.isExcel=function(l){var n=l.type;return n&&l.name?l.name.endsWith(".csv")?"CSV":l.name.endsWith(".txt")?"text":l.name.endsWith(".tsv")?"tab separated":n.indexOf("excel")>=0?null:n.indexOf("sheet")>=0?null:n:"Unknown"},n}(m.a),D=e.nb({encapsulation:2,styles:[],data:{}});function T(l){return e.Jb(0,[(l()(),e.pb(0,0,null,null,3,"option",[],null,null,null,null,null)),e.ob(1,147456,null,0,a.t,[e.k,e.D,[2,a.y]],{value:[0,"value"]},null),e.ob(2,147456,null,0,a.F,[e.k,e.D,[8,null]],{value:[0,"value"]},null),(l()(),e.Hb(3,null,["",""]))],function(l,n){l(n,1,0,n.context.$implicit.name),l(n,2,0,n.context.$implicit.name)},function(l,n){l(n,3,0,n.context.$implicit.label)})}function O(l){return e.Jb(0,[(l()(),e.pb(0,0,null,null,13,"alert",[["dismissible","true"],["style","font-size: smaller;"],["type","info"]],null,null,null,o.c,o.b)),e.ob(1,114688,null,0,s.a,[s.b,e.h],{type:[0,"type"],dismissible:[1,"dismissible"]},null),(l()(),e.Hb(-1,0,[" An Excel file in which one column contains time values while other columns contain measurements taken at the corresponding times. "])),(l()(),e.pb(3,0,null,0,10,"ul",[],null,null,null,null,null)),(l()(),e.pb(4,0,null,null,1,"li",[],null,null,null,null,null)),(l()(),e.Hb(-1,null,[" Time can be represented as: hours from start (e.g 2.25 for measurement at 2 hours 15 minutes after the start), minutes from start, seconds from start, or as image nr (1-based) which will be converted to time using interval between images. "])),(l()(),e.pb(6,0,null,null,1,"li",[],null,null,null,null,null)),(l()(),e.Hb(-1,null,[" Not all columns have to be imported. "])),(l()(),e.pb(8,0,null,null,1,"li",[],null,null,null,null,null)),(l()(),e.Hb(-1,null,[" Some columns can be marked as background noise, their content will be averaged and subtracted from other data column to remove the noise from the data. "])),(l()(),e.pb(10,0,null,null,1,"li",[],null,null,null,null,null)),(l()(),e.Hb(-1,null,[" First few rows can contain arbitrary text. "])),(l()(),e.pb(12,0,null,null,1,"li",[],null,null,null,null,null)),(l()(),e.Hb(-1,null,[" Values from one row can be used as data labels. "]))],function(l,n){l(n,1,0,"info","true")},null)}function k(l){return e.Jb(0,[(l()(),e.pb(0,0,null,null,8,"alert",[["dismissible","true"],["style","font-size: smaller;"],["type","info"]],null,null,null,o.c,o.b)),e.ob(1,114688,null,0,s.a,[s.b,e.h],{type:[0,"type"],dismissible:[1,"dismissible"]},null),(l()(),e.Hb(-1,0,[" Topcount data can be uploaded in two forms: "])),(l()(),e.pb(3,0,null,0,4,"ul",[],null,null,null,null,null)),(l()(),e.pb(4,0,null,null,1,"li",[],null,null,null,null,null)),(l()(),e.Hb(-1,null,["Individual file which contains concatenated topcount data blocks in one file"])),(l()(),e.pb(6,0,null,null,1,"li",[],null,null,null,null,null)),(l()(),e.Hb(-1,null,["Zip file which contains packed files from individual topcount reads"])),(l()(),e.Hb(-1,0,[' Check the Dosc section for details about suported data layouts inside tomcats file, we can currently read ASCI content with "plate map" or "column" layouts. ']))],function(l,n){l(n,1,0,"info","true")},null)}function I(l){return e.Jb(0,[(l()(),e.pb(0,0,null,null,2,"alert",[["type","danger"]],null,null,null,o.c,o.b)),e.ob(1,114688,null,0,s.a,[s.b,e.h],{type:[0,"type"]},null),(l()(),e.Hb(2,0,[" "," "]))],function(l,n){l(n,1,0,"danger")},function(l,n){l(n,2,0,n.component.formatWarning)})}function x(l){return e.Jb(0,[(l()(),e.pb(0,0,null,null,31,"div",[],null,null,null,null,null)),(l()(),e.pb(1,0,null,null,1,"h3",[],null,null,null,null,null)),(l()(),e.Hb(-1,null,["Upload timeseries data"])),(l()(),e.pb(3,0,null,null,0,"hr",[],null,null,null,null,null)),(l()(),e.pb(4,0,null,null,26,"form",[["class",""],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(l,n,t){var u=!0;return"submit"===n&&(u=!1!==e.zb(l,6).onSubmit(t)&&u),"reset"===n&&(u=!1!==e.zb(l,6).onReset()&&u),u},null,null)),e.ob(5,16384,null,0,a.C,[],null,null),e.ob(6,4210688,null,0,a.r,[[8,null],[8,null]],null,null),e.Eb(2048,null,a.d,null,[a.r]),e.ob(8,16384,null,0,a.q,[[4,a.d]],null,null),(l()(),e.pb(9,0,null,null,12,"div",[["class","form-group"]],null,null,null,null,null)),(l()(),e.pb(10,0,null,null,1,"label",[["for","fImportFormat"]],null,null,null,null,null)),(l()(),e.Hb(-1,null,["Format"])),(l()(),e.pb(12,0,null,null,9,"select",[["class","form-control"],["id","fImportFormat"],["name","fImportFormat"],["required",""]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],function(l,n,t){var u=!0,o=l.component;return"change"===n&&(u=!1!==e.zb(l,13).onChange(t.target.value)&&u),"blur"===n&&(u=!1!==e.zb(l,13).onTouched()&&u),"change"===n&&(u=!1!==o.formatChanged(t)&&u),"ngModelChange"===n&&(u=!1!==(o.importFormat=t)&&u),u},null,null)),e.ob(13,16384,null,0,a.y,[e.D,e.k],null,null),e.ob(14,16384,null,0,a.x,[],{required:[0,"required"]},null),e.Eb(1024,null,a.m,function(l){return[l]},[a.x]),e.Eb(1024,null,a.n,function(l){return[l]},[a.y]),e.ob(17,671744,[["fImportFormat",4]],0,a.s,[[2,a.d],[6,a.m],[8,null],[6,a.n]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),e.Eb(2048,null,a.o,null,[a.s]),e.ob(19,16384,null,0,a.p,[[4,a.o]],null,null),(l()(),e.gb(16777216,null,null,1,null,T)),e.ob(21,278528,null,0,c.k,[e.O,e.L,e.s],{ngForOf:[0,"ngForOf"]},null),(l()(),e.gb(16777216,null,null,1,null,O)),e.ob(23,16384,null,0,c.l,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.gb(16777216,null,null,1,null,k)),e.ob(25,16384,null,0,c.l,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.pb(26,0,null,null,2,"div",[["class","form-group"]],null,null,null,null,null)),(l()(),e.pb(27,0,null,null,1,"bd2-file-upload-widget",[],null,[[null,"selectedFiles"],[null,"uploadFiles"]],function(l,n,t){var e=!0,u=l.component;return"selectedFiles"===n&&(e=!1!==u.checkFormat(t)&&e),"uploadFiles"===n&&(e=!1!==u.upload(t)&&e),e},p.b,p.a)),e.ob(28,114688,[["uploadWidget",4]],0,d.a,[],{blocked:[0,"blocked"],multiple:[1,"multiple"],autoReset:[2,"autoReset"]},{uploadFiles:"uploadFiles",selectedFiles:"selectedFiles"}),(l()(),e.gb(16777216,null,null,1,null,I)),e.ob(30,16384,null,0,c.l,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.pb(31,0,null,null,0,"hr",[],null,null,null,null,null))],function(l,n){var t=n.component;l(n,14,0,""),l(n,17,0,"fImportFormat",t.importFormat),l(n,21,0,t.importFormatOptions),l(n,23,0,"EXCEL_TABLE"==t.importFormat),l(n,25,0,"TOPCOUNT"==t.importFormat),l(n,28,0,t.blocked||!t.importFormat,!1,!1),l(n,30,0,t.formatWarning)},function(l,n){l(n,4,0,e.zb(n,8).ngClassUntouched,e.zb(n,8).ngClassTouched,e.zb(n,8).ngClassPristine,e.zb(n,8).ngClassDirty,e.zb(n,8).ngClassValid,e.zb(n,8).ngClassInvalid,e.zb(n,8).ngClassPending),l(n,12,0,e.zb(n,14).required?"":null,e.zb(n,19).ngClassUntouched,e.zb(n,19).ngClassTouched,e.zb(n,19).ngClassPristine,e.zb(n,19).ngClassDirty,e.zb(n,19).ngClassValid,e.zb(n,19).ngClassInvalid,e.zb(n,19).ngClassPending)})}function M(l){return e.Jb(0,[(l()(),e.gb(16777216,null,null,1,null,x)),e.ob(1,16384,null,0,c.l,[e.O,e.L],{ngIf:[0,"ngIf"]},null)],function(l,n){l(n,1,0,n.component.assay)},null)}function R(l){return e.Jb(0,[(l()(),e.pb(0,0,null,null,1,"ng-component",[],null,null,null,M,D)),e.ob(1,245760,null,0,E,[w,z,y.a],null,null)],function(l,n){l(n,1,0)},null)}var S=e.lb("ng-component",E,R,{},{},[]),A=t("YwHJ"),N=t("Kctx"),B=t("DQlY"),L=t("lqqz"),P=function(){function l(l,n,t){this._id=l,this._name=n,this._label=t}return Object.defineProperty(l.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),l.get=function(n){return l.getValuesMap().get(n)},l.getValuesMap=function(){return l.valuesMap||(l.valuesMap=l.initValuesMap()),l.valuesMap},l.initValuesMap=function(){var n=new Map;return n.set(l.NONE.name,l.NONE),n.set(l.IGNORED.name,l.IGNORED),n.set(l.TIME.name,l.TIME),n.set(l.DATA.name,l.DATA),n.set(l.BACKGROUND.name,l.BACKGROUND),n.set(l.LABEL.name,l.LABEL),n},l.prototype.toJSON=function(){return this.name},l.NONE=new l(0,"NONE","NONE"),l.IGNORED=new l(1,"IGNORED","Ignored"),l.TIME=new l(2,"TIME","Time"),l.DATA=new l(3,"DATA","Data"),l.BACKGROUND=new l(4,"BACKGROUND","Background noise"),l.LABEL=new l(5,"LABEL","Label"),l}(),_=function(){function l(l,n,t){this._id=l,this._name=n,this._label=t}return Object.defineProperty(l.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),l.get=function(n){return l.getValuesMap().get(n)},l.getValuesMap=function(){return l.valuesMap||(l.valuesMap=l.initValuesMap()),l.valuesMap},l.initValuesMap=function(){var n=new Map;return n.set(l.NONE.name,l.NONE),n.set(l.TIME_IN_HOURS.name,l.TIME_IN_HOURS),n.set(l.TIME_IN_MINUTES.name,l.TIME_IN_MINUTES),n.set(l.TIME_IN_SECONDS.name,l.TIME_IN_SECONDS),n.set(l.IMG_NUMBER.name,l.IMG_NUMBER),n},l.prototype.toJSON=function(){return this.name},l.NONE=new l(0,"NONE","NONE"),l.TIME_IN_HOURS=new l(1,"TIME_IN_HOURS","time in hours"),l.TIME_IN_MINUTES=new l(2,"TIME_IN_MINUTES","time in minutes"),l.TIME_IN_SECONDS=new l(3,"TIME_IN_SECONDS","time in seconds"),l.IMG_NUMBER=new l(4,"IMG_NUMBER","image nr. (1-based)"),l}(),H=function(){return function(){}}(),F=function(){return function(l){this.dataLabel=l}}(),q="ABCDEFGHIJKLMNOPQRSTUVWXYZ";function U(l){var n=q.length;if((l-=1)<n)return q[l];if(l<n*n+n){var t=Math.floor(l/n)-1;return q[t]+q[u=l%n]}if(l<16384){var e=Math.floor(l/(n*n))-1,u=l%(n*n);return t=Math.floor(u/n)-1,q[e]+q[t]+q[u=l%n]}throw new RangeError("Unsupported column number: "+(l+1))}function V(l){l=l.toUpperCase();var n=0;if(n=q.indexOf(l.charAt(0))+1,l.length>1&&(n=n*q.length+q.indexOf(l.charAt(1))+1,l.length>2&&(n=n*q.length+q.indexOf(l.charAt(2))+1),l.length>3))throw new RangeError("Unsupported column code: "+l);return n}function J(l){if(l<1||l>96)throw new RangeError("Unsupported topcount column number: "+l);l-=1;var n=Math.floor(l/12);return q[n]+(l%12+1)}var j=function(){function l(l,n){this.col=l,this.row=n}return Object.defineProperty(l.prototype,"numericalLabel",{get:function(){return this.col+"-"+this.row},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"excelLabel",{get:function(){return U(this.col)+this.row},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"columnLetter",{get:function(){return U(this.col)},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"topCountWell",{get:function(){return q[this.row-1]+this.col},enumerable:!0,configurable:!0}),l.prototype.clone=function(){return new l(this.col,this.row)},l}(),G=function(){function l(l,n){this.first=l,this.last=n;var t=this.normalize(l,n);this.first=t[0],this.last=t[1]}return Object.defineProperty(l.prototype,"firstCol",{get:function(){return this.first.col},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"lastCol",{get:function(){return this.last.col},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"fullRangeLabel",{get:function(){return this.isSingleCell()?this.first.excelLabel:this.first.excelLabel+"-"+this.last.excelLabel},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"columnRangeLabel",{get:function(){return this.isSingleCell()?this.first.columnLetter:this.first.columnLetter+"-"+this.last.columnLetter},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"topCountRangeLabel",{get:function(){return this.isSingleCell()?this.first.topCountWell:this.first.topCountWell+"-"+this.last.topCountWell},enumerable:!0,configurable:!0}),l.prototype.clone=function(){return new l(this.first.clone(),this.last.clone())},l.prototype.normalize=function(l,n){if(l.row<=n.row&&l.col<=n.col)return[l,n];var t=Math.min(l.row,n.row),e=Math.min(l.col,n.col),u=Math.max(l.row,n.row),o=Math.max(l.col,n.col);return[new j(e,t),new j(o,u)]},l.prototype.isSingleCell=function(){return this.first.row===this.last.row&&this.first.col===this.last.col},l.prototype.size=function(){return(this.last.col-this.first.col+1)*(this.last.row-this.first.row+1)},l}(),$=function(){function l(l,n){this.range=l,this.content=n}return Object.defineProperty(l.prototype,"fullRangeLabel",{get:function(){return this.range.fullRangeLabel},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"columnRangeLabel",{get:function(){return this.range.columnRangeLabel},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"topCountRangeLabel",{get:function(){return this.range.topCountRangeLabel},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"firstCol",{get:function(){return this.range.firstCol},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"lastCol",{get:function(){return this.range.lastCol},enumerable:!0,configurable:!0}),l.prototype.clone=function(){var n=new l(this.range.clone(),this.content);return n.role=this.role,n.details=this.details,n},l}(),W=function(){function l(l,n,t,e){this.start=l,this.end=n,this.details=t,this.value=e}return Object.defineProperty(l.prototype,"label",{get:function(){return this.start===this.end?U(this.start):U(this.start)+"-"+U(this.end)},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"topcountLabel",{get:function(){return this.start===this.end?J(this.start):J(this.start)+"-"+J(this.end)},enumerable:!0,configurable:!0}),l.prototype.trimEnd=function(n){if(!(n<=this.start)){var t=this.details.clone();return t.range.last.col=n-1,new l(this.start,n-1,t,this.value)}},l.prototype.trimBegining=function(n){if(!(n>=this.end)){var t=this.details.clone();return t.range.first.col=n+1,new l(n+1,this.end,t,this.value)}},l.prototype.isSimilar=function(l){return this.details.role===l.details.role&&this.value===l.value},l}(),K=function(){function l(){this.columns=[]}return Object.defineProperty(l.prototype,"blocks",{get:function(){for(var l=[],n=1;n<this.columns.length;){var t=this.columns[n];t?(l.push(t),n=t.end+1):n++}return l},enumerable:!0,configurable:!0}),l.prototype.details=function(l){var n=this.columns[l];if(n)return n.details},l.prototype.delete=function(l){if(0===l.size())return!1;var n=!1;return this.columns[l.firstCol]&&(this.trimPreviousAt(l.firstCol),n=!0),this.columns[l.lastCol]&&(this.trimBehindAt(l.lastCol),n=!0),this.clear(l),n},l.prototype.insert=function(l,n){if(0===l.range.size())return!1;var t=!1,e=new W(l.range.first.col,l.range.last.col,l,n);return this.columns[e.start]&&(this.trimPreviousAt(e.start),t=!0),this.columns[e.end]&&(this.trimBehindAt(e.end),t=!0),this.put(e),t},l.prototype.merge=function(){for(var l=1;l<this.columns.length;){var n=this.columns[l];if(n)if(this.columns[n.end+1]){var t=this.columns[n.end+1];n.isSimilar(t)?(n.end=t.end,n.details.range.last=t.details.range.last,this.put(n)):l=t.start}else l=n.end+1;else l++}},l.prototype.trimPreviousAt=function(l){var n=this.columns[l];if(n.start!==l){var t=n.trimEnd(l);this.put(t)}},l.prototype.trimBehindAt=function(l){var n=this.columns[l];if(n.end!==l){var t=n.trimBegining(l);this.put(t)}},l.prototype.put=function(l){for(var n=l.start;n<=l.end;n++)this.columns[n]=l},l.prototype.clear=function(l){for(var n=l.firstCol;n<=l.lastCol;n++)this.columns[n]=void 0},l}(),X=function(){function l(){this.onAccepted=new e.m,this.errors=null,this.cellRoles=[P.IGNORED,P.BACKGROUND,P.TIME,P.DATA],this.timeTypeOptions=[_.TIME_IN_HOURS,_.TIME_IN_MINUTES,_.TIME_IN_SECONDS,_.IMG_NUMBER]}return Object.defineProperty(l.prototype,"showTime",{set:function(l){this.cellRoles=l?[P.IGNORED,P.BACKGROUND,P.TIME,P.DATA]:[P.IGNORED,P.BACKGROUND,P.DATA]},enumerable:!0,configurable:!0}),l.prototype.isData=function(){return this.cellRole===P.DATA.name},l.prototype.isTime=function(){return this.cellRole===P.TIME.name},l.prototype.isImageBased=function(){return this.isTime()&&this.timeType===_.IMG_NUMBER.name},l.prototype.show=function(l,n){l&&(this.orgRange=l,this.rangeSize=l.range.size(),this.rangeLabel=n||l.columnRangeLabel,l.role&&(this.cellRole=l.role.name),l.role==P.DATA&&l.details&&(this.dataLabel=l.details.dataLabel),l.role==P.TIME&&l.details&&(this.timeType=l.details.timeType.name,this.timeOffset=l.details.timeOffset,this.imgInterval=l.details.imgInterval,this.firstRow=l.details.firstRow),this.myModal&&this.myModal.show())},l.prototype.hide=function(){this.myModal&&this.myModal.hide()},l.prototype.accepted=function(){this.isValid()&&(this.emitDescription(),this.hide())},l.prototype.acceptedAndNext=function(){if(this.isValid()){var l=this.emitDescription();if(l.range.lastCol>=this.lastCol)this.hide();else{var n=this.nextRange(l.range,this.rangeSize),t=new $(n);t.role=P.DATA,this.show(t)}}},l.prototype.nextRange=function(l,n){var t=l.lastCol+1,e=t+n-1;return e=Math.min(e,this.lastCol),new G(new j(t,l.first.row),new j(e,l.first.row))},l.prototype.emitDescription=function(){var l=this.recalculateRange(this.orgRange.range),n={};if(this.isData())n=new F(this.dataLabel);else if(this.isTime()){var t=new H;t.firstRow=this.firstRow,t.timeType=_.get(this.timeType),t.timeOffset=this.timeOffset,this.isImageBased()&&(t.imgInterval=this.imgInterval),n=t}var e=new $(l,this.orgRange.content);return e.role=P.get(this.cellRole),e.details=n,this.onAccepted.emit(e),e},l.prototype.isValid=function(){var l=[];return P.get(this.cellRole)||l.push("Unknown role: "+this.cellRole),this.isData()&&(this.dataLabel&&""!==this.dataLabel.trim()||(l.push("Non empty data label is required"),this.dataLabel=null)),this.isTime()?((!this.firstRow||this.firstRow<1)&&l.push("Row nr of the first time point must be >= 1"),this.isImageBased()&&(!this.imgInterval||this.imgInterval<=0)&&l.push("Image interval must be > 0")):(!this.rangeSize||this.rangeSize<1)&&l.push("Block size must be >= 1"),0===l.length&&(this.errors=null,!0)},l.prototype.recalculateRange=function(l){var n=l.first;if(this.isTime())return n=new j(n.col,this.firstRow),new G(n,n);if(this.rangeSize!==l.size()){var t=new j(Math.min(n.col+this.rangeSize-1,this.lastCol),n.row);return new G(n,t)}return l},l}(),Y=e.nb({encapsulation:2,styles:[],data:{}});function Z(l){return e.Jb(0,[(l()(),e.pb(0,0,null,null,10,"li",[],null,null,null,null,null)),(l()(),e.pb(1,0,null,null,8,"input",[["name","fCellRole"],["required",""],["type","radio"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(l,n,t){var u=!0,o=l.component;return"input"===n&&(u=!1!==e.zb(l,2)._handleInput(t.target.value)&&u),"blur"===n&&(u=!1!==e.zb(l,2).onTouched()&&u),"compositionstart"===n&&(u=!1!==e.zb(l,2)._compositionStart()&&u),"compositionend"===n&&(u=!1!==e.zb(l,2)._compositionEnd(t.target.value)&&u),"change"===n&&(u=!1!==e.zb(l,3).onChange()&&u),"blur"===n&&(u=!1!==e.zb(l,3).onTouched()&&u),"ngModelChange"===n&&(u=!1!==(o.cellRole=t)&&u),u},null,null)),e.ob(2,16384,null,0,a.e,[e.D,e.k,[2,a.a]],null,null),e.ob(3,212992,null,0,a.v,[e.D,e.k,a.D,e.q],{name:[0,"name"],value:[1,"value"]},null),e.ob(4,16384,null,0,a.x,[],{required:[0,"required"]},null),e.Eb(1024,null,a.m,function(l){return[l]},[a.x]),e.Eb(1024,null,a.n,function(l,n){return[l,n]},[a.e,a.v]),e.ob(7,671744,[["fCellRole",4]],0,a.s,[[2,a.d],[6,a.m],[8,null],[6,a.n]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),e.Eb(2048,null,a.o,null,[a.s]),e.ob(9,16384,null,0,a.p,[[4,a.o]],null,null),(l()(),e.Hb(10,null,[" "," "]))],function(l,n){var t=n.component;l(n,3,0,"fCellRole",e.rb(1,"",n.context.$implicit.name,"")),l(n,4,0,""),l(n,7,0,"fCellRole",t.cellRole)},function(l,n){l(n,1,0,e.zb(n,4).required?"":null,e.zb(n,9).ngClassUntouched,e.zb(n,9).ngClassTouched,e.zb(n,9).ngClassPristine,e.zb(n,9).ngClassDirty,e.zb(n,9).ngClassValid,e.zb(n,9).ngClassInvalid,e.zb(n,9).ngClassPending),l(n,10,0,n.context.$implicit.label)})}function Q(l){return e.Jb(0,[(l()(),e.pb(0,0,null,null,11,"div",[["class","form-group"]],null,null,null,null,null)),(l()(),e.pb(1,0,null,null,1,"label",[["for","size"]],null,null,null,null,null)),(l()(),e.Hb(-1,null,["Propagate until block size"])),(l()(),e.pb(3,0,null,null,8,"input",[["class","form-control"],["id","size"],["min","1"],["name","fSize"],["required",""],["step","1"],["type","number"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(l,n,t){var u=!0,o=l.component;return"input"===n&&(u=!1!==e.zb(l,4)._handleInput(t.target.value)&&u),"blur"===n&&(u=!1!==e.zb(l,4).onTouched()&&u),"compositionstart"===n&&(u=!1!==e.zb(l,4)._compositionStart()&&u),"compositionend"===n&&(u=!1!==e.zb(l,4)._compositionEnd(t.target.value)&&u),"change"===n&&(u=!1!==e.zb(l,5).onChange(t.target.value)&&u),"input"===n&&(u=!1!==e.zb(l,5).onChange(t.target.value)&&u),"blur"===n&&(u=!1!==e.zb(l,5).onTouched()&&u),"ngModelChange"===n&&(u=!1!==(o.rangeSize=t)&&u),u},null,null)),e.ob(4,16384,null,0,a.e,[e.D,e.k,[2,a.a]],null,null),e.ob(5,16384,null,0,a.B,[e.D,e.k],null,null),e.ob(6,16384,null,0,a.x,[],{required:[0,"required"]},null),e.Eb(1024,null,a.m,function(l){return[l]},[a.x]),e.Eb(1024,null,a.n,function(l,n){return[l,n]},[a.e,a.B]),e.ob(9,671744,[["fSize",4]],0,a.s,[[2,a.d],[6,a.m],[8,null],[6,a.n]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),e.Eb(2048,null,a.o,null,[a.s]),e.ob(11,16384,null,0,a.p,[[4,a.o]],null,null)],function(l,n){var t=n.component;l(n,6,0,""),l(n,9,0,"fSize",t.rangeSize)},function(l,n){l(n,3,0,e.zb(n,6).required?"":null,e.zb(n,11).ngClassUntouched,e.zb(n,11).ngClassTouched,e.zb(n,11).ngClassPristine,e.zb(n,11).ngClassDirty,e.zb(n,11).ngClassValid,e.zb(n,11).ngClassInvalid,e.zb(n,11).ngClassPending)})}function ll(l){return e.Jb(0,[(l()(),e.pb(0,0,null,null,11,"div",[["class","form-group"]],null,null,null,null,null)),(l()(),e.pb(1,0,null,null,1,"label",[["for","dataLabel"]],null,null,null,null,null)),(l()(),e.Hb(-1,null,["Label"])),(l()(),e.pb(3,0,null,null,8,"input",[["class","form-control"],["id","dataLabel"],["minlength","2"],["name","fDataLabel"],["placeholder","e.g. TOC1 SD"],["required",""],["type","text"]],[[1,"required",0],[1,"minlength",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(l,n,t){var u=!0,o=l.component;return"input"===n&&(u=!1!==e.zb(l,4)._handleInput(t.target.value)&&u),"blur"===n&&(u=!1!==e.zb(l,4).onTouched()&&u),"compositionstart"===n&&(u=!1!==e.zb(l,4)._compositionStart()&&u),"compositionend"===n&&(u=!1!==e.zb(l,4)._compositionEnd(t.target.value)&&u),"ngModelChange"===n&&(u=!1!==(o.dataLabel=t)&&u),u},null,null)),e.ob(4,16384,null,0,a.e,[e.D,e.k,[2,a.a]],null,null),e.ob(5,16384,null,0,a.x,[],{required:[0,"required"]},null),e.ob(6,540672,null,0,a.l,[],{minlength:[0,"minlength"]},null),e.Eb(1024,null,a.m,function(l,n){return[l,n]},[a.x,a.l]),e.Eb(1024,null,a.n,function(l){return[l]},[a.e]),e.ob(9,671744,[["fDataLabel",4]],0,a.s,[[2,a.d],[6,a.m],[8,null],[6,a.n]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),e.Eb(2048,null,a.o,null,[a.s]),e.ob(11,16384,null,0,a.p,[[4,a.o]],null,null)],function(l,n){var t=n.component;l(n,5,0,""),l(n,6,0,"2"),l(n,9,0,"fDataLabel",t.dataLabel)},function(l,n){l(n,3,0,e.zb(n,5).required?"":null,e.zb(n,6).minlength?e.zb(n,6).minlength:null,e.zb(n,11).ngClassUntouched,e.zb(n,11).ngClassTouched,e.zb(n,11).ngClassPristine,e.zb(n,11).ngClassDirty,e.zb(n,11).ngClassValid,e.zb(n,11).ngClassInvalid,e.zb(n,11).ngClassPending)})}function nl(l){return e.Jb(0,[(l()(),e.pb(0,0,null,null,3,"option",[],null,null,null,null,null)),e.ob(1,147456,null,0,a.t,[e.k,e.D,[2,a.y]],{value:[0,"value"]},null),e.ob(2,147456,null,0,a.F,[e.k,e.D,[8,null]],{value:[0,"value"]},null),(l()(),e.Hb(3,null,[""," "]))],function(l,n){l(n,1,0,e.rb(1,"",n.context.$implicit.name,"")),l(n,2,0,e.rb(1,"",n.context.$implicit.name,""))},function(l,n){l(n,3,0,n.context.$implicit.label)})}function tl(l){return e.Jb(0,[(l()(),e.pb(0,0,null,null,11,"div",[["class","form-group"]],null,null,null,null,null)),(l()(),e.pb(1,0,null,null,1,"label",[["for","imgInterval"]],null,null,null,null,null)),(l()(),e.Hb(-1,null,["Time between images (hours)"])),(l()(),e.pb(3,0,null,null,8,"input",[["class","form-control"],["id","imgInterval"],["min","0.01"],["name","fImgInterval"],["placeholder","e.g. 1.5"],["required",""],["step","any"],["type","number"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(l,n,t){var u=!0,o=l.component;return"input"===n&&(u=!1!==e.zb(l,4)._handleInput(t.target.value)&&u),"blur"===n&&(u=!1!==e.zb(l,4).onTouched()&&u),"compositionstart"===n&&(u=!1!==e.zb(l,4)._compositionStart()&&u),"compositionend"===n&&(u=!1!==e.zb(l,4)._compositionEnd(t.target.value)&&u),"change"===n&&(u=!1!==e.zb(l,5).onChange(t.target.value)&&u),"input"===n&&(u=!1!==e.zb(l,5).onChange(t.target.value)&&u),"blur"===n&&(u=!1!==e.zb(l,5).onTouched()&&u),"ngModelChange"===n&&(u=!1!==(o.imgInterval=t)&&u),u},null,null)),e.ob(4,16384,null,0,a.e,[e.D,e.k,[2,a.a]],null,null),e.ob(5,16384,null,0,a.B,[e.D,e.k],null,null),e.ob(6,16384,null,0,a.x,[],{required:[0,"required"]},null),e.Eb(1024,null,a.m,function(l){return[l]},[a.x]),e.Eb(1024,null,a.n,function(l,n){return[l,n]},[a.e,a.B]),e.ob(9,671744,[["fImgInterval",4]],0,a.s,[[2,a.d],[6,a.m],[8,null],[6,a.n]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),e.Eb(2048,null,a.o,null,[a.s]),e.ob(11,16384,null,0,a.p,[[4,a.o]],null,null)],function(l,n){var t=n.component;l(n,6,0,""),l(n,9,0,"fImgInterval",t.imgInterval)},function(l,n){l(n,3,0,e.zb(n,6).required?"":null,e.zb(n,11).ngClassUntouched,e.zb(n,11).ngClassTouched,e.zb(n,11).ngClassPristine,e.zb(n,11).ngClassDirty,e.zb(n,11).ngClassValid,e.zb(n,11).ngClassInvalid,e.zb(n,11).ngClassPending)})}function el(l){return e.Jb(0,[(l()(),e.pb(0,0,null,null,37,"div",[],null,null,null,null,null)),(l()(),e.pb(1,0,null,null,12,"div",[["class","form-group"]],null,null,null,null,null)),(l()(),e.pb(2,0,null,null,1,"label",[["for","timeType"]],null,null,null,null,null)),(l()(),e.Hb(-1,null,["Type of time column"])),(l()(),e.pb(4,0,null,null,9,"select",[["class","form-control"],["id","timeType"],["name","fTimeType"],["required",""]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(l,n,t){var u=!0,o=l.component;return"change"===n&&(u=!1!==e.zb(l,5).onChange(t.target.value)&&u),"blur"===n&&(u=!1!==e.zb(l,5).onTouched()&&u),"ngModelChange"===n&&(u=!1!==(o.timeType=t)&&u),u},null,null)),e.ob(5,16384,null,0,a.y,[e.D,e.k],null,null),e.ob(6,16384,null,0,a.x,[],{required:[0,"required"]},null),e.Eb(1024,null,a.m,function(l){return[l]},[a.x]),e.Eb(1024,null,a.n,function(l){return[l]},[a.y]),e.ob(9,671744,[["fTimeType",4]],0,a.s,[[2,a.d],[6,a.m],[8,null],[6,a.n]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),e.Eb(2048,null,a.o,null,[a.s]),e.ob(11,16384,null,0,a.p,[[4,a.o]],null,null),(l()(),e.gb(16777216,null,null,1,null,nl)),e.ob(13,278528,null,0,c.k,[e.O,e.L,e.s],{ngForOf:[0,"ngForOf"]},null),(l()(),e.pb(14,0,null,null,11,"div",[["class","form-group"]],null,null,null,null,null)),(l()(),e.pb(15,0,null,null,1,"label",[["for","firstRow"]],null,null,null,null,null)),(l()(),e.Hb(-1,null,["Row with first timepoint"])),(l()(),e.pb(17,0,null,null,8,"input",[["class","form-control"],["id","firstRow"],["min","1"],["name","fFirstRow"],["placeholder","e.g. 2"],["required",""],["step","1"],["type","number"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(l,n,t){var u=!0,o=l.component;return"input"===n&&(u=!1!==e.zb(l,18)._handleInput(t.target.value)&&u),"blur"===n&&(u=!1!==e.zb(l,18).onTouched()&&u),"compositionstart"===n&&(u=!1!==e.zb(l,18)._compositionStart()&&u),"compositionend"===n&&(u=!1!==e.zb(l,18)._compositionEnd(t.target.value)&&u),"change"===n&&(u=!1!==e.zb(l,19).onChange(t.target.value)&&u),"input"===n&&(u=!1!==e.zb(l,19).onChange(t.target.value)&&u),"blur"===n&&(u=!1!==e.zb(l,19).onTouched()&&u),"ngModelChange"===n&&(u=!1!==(o.firstRow=t)&&u),u},null,null)),e.ob(18,16384,null,0,a.e,[e.D,e.k,[2,a.a]],null,null),e.ob(19,16384,null,0,a.B,[e.D,e.k],null,null),e.ob(20,16384,null,0,a.x,[],{required:[0,"required"]},null),e.Eb(1024,null,a.m,function(l){return[l]},[a.x]),e.Eb(1024,null,a.n,function(l,n){return[l,n]},[a.e,a.B]),e.ob(23,671744,[["fFirstRow",4]],0,a.s,[[2,a.d],[6,a.m],[8,null],[6,a.n]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),e.Eb(2048,null,a.o,null,[a.s]),e.ob(25,16384,null,0,a.p,[[4,a.o]],null,null),(l()(),e.pb(26,0,null,null,9,"div",[["class","form-group"]],null,null,null,null,null)),(l()(),e.pb(27,0,null,null,1,"label",[["for","timeOffset"]],null,null,null,null,null)),(l()(),e.Hb(-1,null,["Time offset (hours)"])),(l()(),e.pb(29,0,null,null,6,"input",[["class","form-control"],["id","timeOffset"],["name","fTimeOffset"],["placeholder","e.g. -4"],["step","any"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(l,n,t){var u=!0,o=l.component;return"input"===n&&(u=!1!==e.zb(l,30)._handleInput(t.target.value)&&u),"blur"===n&&(u=!1!==e.zb(l,30).onTouched()&&u),"compositionstart"===n&&(u=!1!==e.zb(l,30)._compositionStart()&&u),"compositionend"===n&&(u=!1!==e.zb(l,30)._compositionEnd(t.target.value)&&u),"change"===n&&(u=!1!==e.zb(l,31).onChange(t.target.value)&&u),"input"===n&&(u=!1!==e.zb(l,31).onChange(t.target.value)&&u),"blur"===n&&(u=!1!==e.zb(l,31).onTouched()&&u),"ngModelChange"===n&&(u=!1!==(o.timeOffset=t)&&u),u},null,null)),e.ob(30,16384,null,0,a.e,[e.D,e.k,[2,a.a]],null,null),e.ob(31,16384,null,0,a.B,[e.D,e.k],null,null),e.Eb(1024,null,a.n,function(l,n){return[l,n]},[a.e,a.B]),e.ob(33,671744,[["fTimeOffset",4]],0,a.s,[[2,a.d],[8,null],[8,null],[6,a.n]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),e.Eb(2048,null,a.o,null,[a.s]),e.ob(35,16384,null,0,a.p,[[4,a.o]],null,null),(l()(),e.gb(16777216,null,null,1,null,tl)),e.ob(37,16384,null,0,c.l,[e.O,e.L],{ngIf:[0,"ngIf"]},null)],function(l,n){var t=n.component;l(n,6,0,""),l(n,9,0,"fTimeType",t.timeType),l(n,13,0,t.timeTypeOptions),l(n,20,0,""),l(n,23,0,"fFirstRow",t.firstRow),l(n,33,0,"fTimeOffset",t.timeOffset),l(n,37,0,t.isImageBased())},function(l,n){l(n,4,0,e.zb(n,6).required?"":null,e.zb(n,11).ngClassUntouched,e.zb(n,11).ngClassTouched,e.zb(n,11).ngClassPristine,e.zb(n,11).ngClassDirty,e.zb(n,11).ngClassValid,e.zb(n,11).ngClassInvalid,e.zb(n,11).ngClassPending),l(n,17,0,e.zb(n,20).required?"":null,e.zb(n,25).ngClassUntouched,e.zb(n,25).ngClassTouched,e.zb(n,25).ngClassPristine,e.zb(n,25).ngClassDirty,e.zb(n,25).ngClassValid,e.zb(n,25).ngClassInvalid,e.zb(n,25).ngClassPending),l(n,29,0,e.zb(n,35).ngClassUntouched,e.zb(n,35).ngClassTouched,e.zb(n,35).ngClassPristine,e.zb(n,35).ngClassDirty,e.zb(n,35).ngClassValid,e.zb(n,35).ngClassInvalid,e.zb(n,35).ngClassPending)})}function ul(l){return e.Jb(0,[(l()(),e.pb(0,0,null,null,2,"alert",[["dismissOnTimeout","3000"],["dismissible","true"]],null,null,null,o.c,o.b)),e.ob(1,114688,null,0,s.a,[s.b,e.h],{dismissible:[0,"dismissible"],dismissOnTimeout:[1,"dismissOnTimeout"]},null),(l()(),e.Hb(2,0,["",""]))],function(l,n){l(n,1,0,"true","3000")},function(l,n){l(n,2,0,n.context.$implicit)})}function ol(l){return e.Jb(0,[(l()(),e.pb(0,0,null,null,2,"div",[],null,null,null,null,null)),(l()(),e.gb(16777216,null,null,1,null,ul)),e.ob(2,278528,null,0,c.k,[e.O,e.L,e.s],{ngForOf:[0,"ngForOf"]},null)],function(l,n){l(n,2,0,n.component.errors)},null)}function il(l){return e.Jb(0,[e.Fb(402653184,1,{myModal:0}),e.Fb(402653184,2,{columnTypeForm:0}),(l()(),e.pb(2,0,null,null,40,"div",[],null,null,null,null,null)),(l()(),e.pb(3,16777216,null,null,39,"div",[["aria-hidden","true"],["aria-labelledby","columnTypeModalLabel"],["bsModal",""],["class","modal fade"],["role","dialog"],["tabindex","-1"]],null,[[null,"click"],[null,"keydown.esc"]],function(l,n,t){var u=!0;return"click"===n&&(u=!1!==e.zb(l,4).onClick(t)&&u),"keydown.esc"===n&&(u=!1!==e.zb(l,4).onEsc(t)&&u),u},null,null)),e.ob(4,212992,[[1,4],["columnTypeModal",4]],0,B.d,[e.k,e.O,e.D,L.a],null,null),(l()(),e.pb(5,0,null,null,37,"div",[["class","modal-dialog modal-sm"]],null,null,null,null,null)),(l()(),e.pb(6,0,null,null,36,"div",[["class","modal-content"]],null,null,null,null,null)),(l()(),e.pb(7,0,null,null,5,"div",[["class","modal-header"]],null,null,null,null,null)),(l()(),e.pb(8,0,null,null,2,"button",[["aria-label","Close"],["class","close"],["type","button"]],null,[[null,"click"]],function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.hide()&&e),e},null,null)),(l()(),e.pb(9,0,null,null,1,"span",[["aria-hidden","true"]],null,null,null,null,null)),(l()(),e.Hb(-1,null,["\xd7"])),(l()(),e.pb(11,0,null,null,1,"h4",[["class","modal-title"]],null,null,null,null,null)),(l()(),e.Hb(-1,null,["Describe data column(s)"])),(l()(),e.pb(13,0,null,null,29,"div",[["class","modal-body"]],null,null,null,null,null)),(l()(),e.pb(14,0,null,null,3,"p",[],null,null,null,null,null)),(l()(),e.Hb(-1,null,[" Columns "])),(l()(),e.pb(16,0,null,null,1,"strong",[],null,null,null,null,null)),(l()(),e.Hb(17,null,["[","]"])),(l()(),e.pb(18,0,null,null,24,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(l,n,t){var u=!0;return"submit"===n&&(u=!1!==e.zb(l,20).onSubmit(t)&&u),"reset"===n&&(u=!1!==e.zb(l,20).onReset()&&u),u},null,null)),e.ob(19,16384,null,0,a.C,[],null,null),e.ob(20,4210688,[[2,4],["columnTypeForm",4]],0,a.r,[[8,null],[8,null]],null,null),e.Eb(2048,null,a.d,null,[a.r]),e.ob(22,16384,null,0,a.q,[[4,a.d]],null,null),(l()(),e.pb(23,0,null,null,5,"div",[["class","form-group"]],null,null,null,null,null)),(l()(),e.pb(24,0,null,null,1,"label",[],null,null,null,null,null)),(l()(),e.Hb(-1,null,["Column type"])),(l()(),e.pb(26,0,null,null,2,"ul",[["class","list-unstyled"]],null,null,null,null,null)),(l()(),e.gb(16777216,null,null,1,null,Z)),e.ob(28,278528,null,0,c.k,[e.O,e.L,e.s],{ngForOf:[0,"ngForOf"]},null),(l()(),e.gb(16777216,null,null,1,null,Q)),e.ob(30,16384,null,0,c.l,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.gb(16777216,null,null,1,null,ll)),e.ob(32,16384,null,0,c.l,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.gb(16777216,null,null,1,null,el)),e.ob(34,16384,null,0,c.l,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.gb(16777216,null,null,1,null,ol)),e.ob(36,16384,null,0,c.l,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.pb(37,0,null,null,1,"button",[["class","btn btn-primary btn-sm"]],[[8,"disabled",0]],[[null,"click"]],function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.acceptedAndNext()&&e),e},null,null)),(l()(),e.Hb(-1,null,["OK and Next "])),(l()(),e.pb(39,0,null,null,1,"button",[["class","btn btn-primary btn-sm"]],[[8,"disabled",0]],[[null,"click"]],function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.accepted()&&e),e},null,null)),(l()(),e.Hb(-1,null,["OK "])),(l()(),e.pb(41,0,null,null,1,"button",[["class","btn btn-default btn-sm"]],null,[[null,"click"]],function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.hide()&&e),e},null,null)),(l()(),e.Hb(-1,null,["Cancel"]))],function(l,n){var t=n.component;l(n,4,0),l(n,28,0,t.cellRoles),l(n,30,0,!t.isTime()),l(n,32,0,t.isData()),l(n,34,0,t.isTime()),l(n,36,0,t.errors)},function(l,n){l(n,17,0,n.component.rangeLabel),l(n,18,0,e.zb(n,22).ngClassUntouched,e.zb(n,22).ngClassTouched,e.zb(n,22).ngClassPristine,e.zb(n,22).ngClassDirty,e.zb(n,22).ngClassValid,e.zb(n,22).ngClassInvalid,e.zb(n,22).ngClassPending),l(n,37,0,!e.zb(n,20).form.valid),l(n,39,0,!e.zb(n,20).form.valid)})}var rl=function(){function l(){this.onAccepted=new e.m}return l.prototype.show=function(l){this.orgRange=l,this.rowNr=l.range.first.row,this.values=l.content,this.myModal&&this.myModal.show()},l.prototype.hide=function(){this.myModal&&this.myModal.hide()},l.prototype.accepted=function(){this.onAccepted.emit(this.orgRange),this.myModal&&this.myModal.hide()},l}(),al=e.nb({encapsulation:2,styles:[],data:{}});function sl(l){return e.Jb(0,[e.Fb(402653184,1,{myModal:0}),(l()(),e.pb(1,16777216,null,null,28,"div",[["aria-hidden","true"],["aria-labelledby","rowCopyDialog"],["bsModal",""],["class","modal fade"],["role","dialog"],["tabindex","-1"]],null,[[null,"click"],[null,"keydown.esc"]],function(l,n,t){var u=!0;return"click"===n&&(u=!1!==e.zb(l,2).onClick(t)&&u),"keydown.esc"===n&&(u=!1!==e.zb(l,2).onEsc(t)&&u),u},null,null)),e.ob(2,212992,[[1,4],["rowCopyDialog",4]],0,B.d,[e.k,e.O,e.D,L.a],null,null),(l()(),e.pb(3,0,null,null,26,"div",[["class","modal-dialog modal-sm"]],null,null,null,null,null)),(l()(),e.pb(4,0,null,null,25,"div",[["class","modal-content"]],null,null,null,null,null)),(l()(),e.pb(5,0,null,null,5,"div",[["class","modal-header"]],null,null,null,null,null)),(l()(),e.pb(6,0,null,null,2,"button",[["aria-label","Close"],["class","close"],["type","button"]],null,[[null,"click"]],function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.hide()&&e),e},null,null)),(l()(),e.pb(7,0,null,null,1,"span",[["aria-hidden","true"]],null,null,null,null,null)),(l()(),e.Hb(-1,null,["\xd7"])),(l()(),e.pb(9,0,null,null,1,"h4",[["class","modal-title"]],null,null,null,null,null)),(l()(),e.Hb(-1,null,["Use row content as data labels"])),(l()(),e.pb(11,0,null,null,18,"div",[["class","modal-body"]],null,null,null,null,null)),(l()(),e.pb(12,0,null,null,7,"div",[],null,null,null,null,null)),(l()(),e.pb(13,0,null,null,4,"p",[],null,null,null,null,null)),(l()(),e.Hb(-1,null,["Use values from row "])),(l()(),e.pb(15,0,null,null,1,"strong",[],null,null,null,null,null)),(l()(),e.Hb(16,null,["[","]"])),(l()(),e.Hb(-1,null,[" as data labels"])),(l()(),e.pb(18,0,null,null,1,"p",[],null,null,null,null,null)),(l()(),e.Hb(-1,null,["Existing labels and column types will be overwritten"])),(l()(),e.pb(20,0,null,null,4,"div",[],null,null,null,null,null)),(l()(),e.pb(21,0,null,null,3,"p",[],null,null,null,null,null)),(l()(),e.pb(22,0,null,null,1,"strong",[],null,null,null,null,null)),(l()(),e.Hb(-1,null,["Labels: "])),(l()(),e.Hb(24,null,["",""])),(l()(),e.pb(25,0,null,null,4,"div",[],null,null,null,null,null)),(l()(),e.pb(26,0,null,null,1,"button",[["class","btn btn-primary btn-sm"]],null,[[null,"click"]],function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.accepted()&&e),e},null,null)),(l()(),e.Hb(-1,null,["Copy labels"])),(l()(),e.pb(28,0,null,null,1,"button",[["class","btn btn-default btn-sm"]],null,[[null,"click"]],function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.hide()&&e),e},null,null)),(l()(),e.Hb(-1,null,["Cancel"]))],function(l,n){l(n,2,0)},function(l,n){var t=n.component;l(n,16,0,t.rowNr),l(n,24,0,t.values)})}var cl=function(){function l(){this.onAccepted=new e.m}return l.prototype.add=function(){if(this.colRange){var l=this.colRange.split("-"),n=V(l[0]);n=Math.min(n,this.lastCol);var t=V(l[1]);t=Math.min(t,this.lastCol),t=Math.max(n,t);var e=new F(this.label),u=new G(new j(n,1),new j(t,1)),o=new $(u);if(o.role=P.DATA,o.details=e,this.onAccepted.emit(o),t<this.lastCol){var i=t+1,r=i+t-n;i=Math.min(i,this.lastCol),r=Math.min(r,this.lastCol),this.colRange=U(i)+"-"+U(r)}else this.colRange=void 0,this.label=void 0}},l}(),pl=e.nb({encapsulation:2,styles:[],data:{}});function dl(l){return e.Jb(0,[(l()(),e.pb(0,0,null,null,29,"form",[["class","form-inline  no-clues"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(l,n,t){var u=!0;return"submit"===n&&(u=!1!==e.zb(l,2).onSubmit(t)&&u),"reset"===n&&(u=!1!==e.zb(l,2).onReset()&&u),u},null,null)),e.ob(1,16384,null,0,a.C,[],null,null),e.ob(2,4210688,[["simpleAddDataForm",4]],0,a.r,[[8,null],[8,null]],null,null),e.Eb(2048,null,a.d,null,[a.r]),e.ob(4,16384,null,0,a.q,[[4,a.d]],null,null),(l()(),e.pb(5,0,null,null,1,"label",[["for","colRange"]],null,null,null,null,null)),(l()(),e.Hb(-1,null,["Range"])),(l()(),e.pb(7,0,null,null,9,"input",[["class","form-control short-input"],["id","colRange"],["minlength","3"],["name","fColRange"],["pattern","[A-Za-z][A-Za-z]?-[A-Za-z][A-Za-z]?"],["placeholder","e.g. B-D"],["required",""],["style","max-width: 6em;"],["type","text"]],[[1,"required",0],[1,"minlength",0],[1,"pattern",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(l,n,t){var u=!0,o=l.component;return"input"===n&&(u=!1!==e.zb(l,8)._handleInput(t.target.value)&&u),"blur"===n&&(u=!1!==e.zb(l,8).onTouched()&&u),"compositionstart"===n&&(u=!1!==e.zb(l,8)._compositionStart()&&u),"compositionend"===n&&(u=!1!==e.zb(l,8)._compositionEnd(t.target.value)&&u),"ngModelChange"===n&&(u=!1!==(o.colRange=t)&&u),u},null,null)),e.ob(8,16384,null,0,a.e,[e.D,e.k,[2,a.a]],null,null),e.ob(9,16384,null,0,a.x,[],{required:[0,"required"]},null),e.ob(10,540672,null,0,a.l,[],{minlength:[0,"minlength"]},null),e.ob(11,540672,null,0,a.u,[],{pattern:[0,"pattern"]},null),e.Eb(1024,null,a.m,function(l,n,t){return[l,n,t]},[a.x,a.l,a.u]),e.Eb(1024,null,a.n,function(l){return[l]},[a.e]),e.ob(14,671744,[["fColRange",4]],0,a.s,[[2,a.d],[6,a.m],[8,null],[6,a.n]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),e.Eb(2048,null,a.o,null,[a.s]),e.ob(16,16384,null,0,a.p,[[4,a.o]],null,null),(l()(),e.pb(17,0,null,null,1,"label",[["for","dLabel"]],null,null,null,null,null)),(l()(),e.Hb(-1,null,["Label"])),(l()(),e.pb(19,0,null,null,8,"input",[["class","form-control"],["id","dLabel"],["minlength","2"],["name","fLabel"],["placeholder","e.g. TOC1 SD"],["required",""],["type","text"]],[[1,"required",0],[1,"minlength",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(l,n,t){var u=!0,o=l.component;return"input"===n&&(u=!1!==e.zb(l,20)._handleInput(t.target.value)&&u),"blur"===n&&(u=!1!==e.zb(l,20).onTouched()&&u),"compositionstart"===n&&(u=!1!==e.zb(l,20)._compositionStart()&&u),"compositionend"===n&&(u=!1!==e.zb(l,20)._compositionEnd(t.target.value)&&u),"ngModelChange"===n&&(u=!1!==(o.label=t)&&u),u},null,null)),e.ob(20,16384,null,0,a.e,[e.D,e.k,[2,a.a]],null,null),e.ob(21,16384,null,0,a.x,[],{required:[0,"required"]},null),e.ob(22,540672,null,0,a.l,[],{minlength:[0,"minlength"]},null),e.Eb(1024,null,a.m,function(l,n){return[l,n]},[a.x,a.l]),e.Eb(1024,null,a.n,function(l){return[l]},[a.e]),e.ob(25,671744,[["fLabel",4]],0,a.s,[[2,a.d],[6,a.m],[8,null],[6,a.n]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),e.Eb(2048,null,a.o,null,[a.s]),e.ob(27,16384,null,0,a.p,[[4,a.o]],null,null),(l()(),e.pb(28,0,null,null,1,"button",[["class","btn btn-primary btn-sm"]],[[8,"disabled",0]],[[null,"click"]],function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.add()&&e),e},null,null)),(l()(),e.Hb(-1,null,["Add"]))],function(l,n){var t=n.component;l(n,9,0,""),l(n,10,0,"3"),l(n,11,0,"[A-Za-z][A-Za-z]?-[A-Za-z][A-Za-z]?"),l(n,14,0,"fColRange",t.colRange),l(n,21,0,""),l(n,22,0,"2"),l(n,25,0,"fLabel",t.label)},function(l,n){l(n,0,0,e.zb(n,4).ngClassUntouched,e.zb(n,4).ngClassTouched,e.zb(n,4).ngClassPristine,e.zb(n,4).ngClassDirty,e.zb(n,4).ngClassValid,e.zb(n,4).ngClassInvalid,e.zb(n,4).ngClassPending),l(n,7,0,e.zb(n,9).required?"":null,e.zb(n,10).minlength?e.zb(n,10).minlength:null,e.zb(n,11).pattern?e.zb(n,11).pattern:null,e.zb(n,16).ngClassUntouched,e.zb(n,16).ngClassTouched,e.zb(n,16).ngClassPristine,e.zb(n,16).ngClassDirty,e.zb(n,16).ngClassValid,e.zb(n,16).ngClassInvalid,e.zb(n,16).ngClassPending),l(n,19,0,e.zb(n,21).required?"":null,e.zb(n,22).minlength?e.zb(n,22).minlength:null,e.zb(n,27).ngClassUntouched,e.zb(n,27).ngClassTouched,e.zb(n,27).ngClassPristine,e.zb(n,27).ngClassDirty,e.zb(n,27).ngClassValid,e.zb(n,27).ngClassInvalid,e.zb(n,27).ngClassPending),l(n,28,0,!e.zb(n,2).form.valid)})}var bl=function(){function l(n,t,e,u,o){this.rows=n,this.th=t,this.rowsLabels=e,this.specialRows=u,this.specialRowsLabels=o,this.width=l.maxLength(n),this.th=t||(n.length<1?[]:l.labelCols(this.width)),this.rowsLabels=e||l.labelRows(n.length),this.specialRows=u||[],this.specialRowsLabels=o||l.blankRows(this.specialRows.length)}return l.labelRows=function(l){for(var n=[],t=1;t<=l;t++)n.push(""+t);return n},l.blankRows=function(l){for(var n=[],t=0;t<l;t++)n.push("");return n},l.maxLength=function(l){return!l||l.length<1?0:Math.max.apply(Math,l.map(function(l){return l.length}))},l.labelCols=function(l){for(var n=[],t=1;t<=l;t++)n.push(U(t));return n},l}(),ml=function(){function l(){}return l.color=function(n){return l.colors[n%l.colors.length]},l.TIME_BG="lightyellow",l.IGNORED_BG="lightgrey",l.NOISE_BG="darkgrey",l.colors=["lightgreen","lightblue","lightcoral","lightcyan","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","palegoldenrod","paleturquoise","palevioletred"],l}(),hl=function(){function l(){this.onAccepted=new e.m,this.blocked=!1,this.confirmDataLoss=!1,this.columnBlocks=new K,this.dataBlocks=[],this.bgColors=[]}return Object.defineProperty(l.prototype,"dataTable",{set:function(l){if(l&&!(l.length<1)){var n=new bl(l,void 0,void 0,[[]],["L."]);this.dataModel=n,this.lastCol=n.width,this.visibleColIx=[];for(var t=0;t<n.width;t++)this.visibleColIx.push(t)}},enumerable:!0,configurable:!0}),l.prototype.hasTime=function(){return this.timeColumnDescription&&this.timeColumnDescription.role==P.TIME},l.prototype.hasData=function(){return this.dataBlocks.some(function(l){return l.details.role==P.DATA})},l.prototype.rowSelected=function(l){var n=this.joinRow(l),t=new j(0,l+1),e=new G(t,t),u=new $(e,n);this.rowCopyDialog.show(u)},l.prototype.thSelectStart=function(l){this.thSelectedCol=l},l.prototype.thSelectEnd=function(l){if(null!=this.thSelectedCol&&null!=this.thSelectedCol){var n=new j(this.thSelectedCol+1,1),t=new j(l+1,1),e=new G(n,t),u=new $(e,void 0),o=this.columnBlocks.details(n.col);o&&(u.role=o.role,u.details=o.details),this.thSelectedCol=void 0,this.columnTypeDialog.show(u)}},l.prototype.editTime=function(){this.timeColumnDescription&&this.columnTypeDialog.show(this.timeColumnDescription)},l.prototype.editBlock=function(l){l&&this.columnTypeDialog.show(l.details)},l.prototype.deleteBlock=function(l){l&&(l.details.role==P.TIME?this.clearTime():this.resetRegion(l.details.range),this.dataBlocks=this.columnBlocks.blocks)},l.prototype.accept=function(){var l=this;if(this.hasTime()&&this.hasData()){var n=Promise.resolve(!0);this.containsDataGaps()&&(n=this.confirmDialog.ask("Do you want to import partial data?","Not all columns are described. Data columns without annotations will not be imported.<br>Click OK if you want to proceed.")),n.then(function(n){return!!n&&(!l.confirmDataLoss||l.confirmDialog.ask("Do you want to replace the existing data?","It will also erase all analysis results. <br>Click OK if you want to proceed."))}).then(function(n){n&&l.emitParameters()}).catch(function(l){return console.log("Dialog error: "+l)})}},l.prototype.containsDataGaps=function(){if(this.dataBlocks.length<1)return!0;if(this.dataBlocks[this.dataBlocks.length-1].end<this.lastCol)return!0;for(var l=this.dataBlocks[0].start-1,n=0;n<this.dataBlocks.length;n++){if(this.dataBlocks[n].start!=l+1)return!0;l=this.dataBlocks[n].end}return!1},l.prototype.emitParameters=function(){var l=new g;l.timeColumn=this.timeColumnDescription,l.dataBlocks=this.dataBlocks.map(function(l){return l.details}),this.onAccepted.emit(l)},l.prototype.joinRow=function(l){return this.dataModel.rows[l].slice(0,10).join(" | ")+"..."},l.prototype.setColumnType=function(l){if(l&&null!=l.role){this.timeColumnDescription&&(l.role==P.TIME?this.clearTime():this.timeColumnDescription.firstCol>=l.firstCol&&this.timeColumnDescription.firstCol<=l.lastCol&&this.clearTime());var n=void 0;switch(l.role){case P.IGNORED:n="ign.";break;case P.BACKGROUND:n="bcg.";break;case P.TIME:n="Time";break;case P.DATA:n=l.details.dataLabel}this.columnBlocks.insert(l,n),this.columnBlocks.merge(),this.dataBlocks=this.columnBlocks.blocks;var t=this.dataModel.specialRows[0];if(t)for(var e=l.firstCol-1;e<l.lastCol;e++)t[e]=n;l.role==P.TIME&&(this.timeColumnDescription=l),this.updateBackgrounds()}},l.prototype.copyRowAsLabels=function(l){var n=this;if(l){this.clearTime();var t=this.dataModel.specialRows[0];this.dataModel.rows[l.range.first.row-1].forEach(function(l,e){if(l){var u=new F(l),o=new j(e+1,0),i=new G(o,o),r=new $(i,void 0);r.details=u,r.role=P.DATA,n.columnBlocks.insert(r,l),t[e]=l}}),this.columnBlocks.merge(),this.dataBlocks=this.columnBlocks.blocks,this.updateBackgrounds()}},l.prototype.clearTime=function(){this.timeColumnDescription&&(this.resetRegion(this.timeColumnDescription.range),this.timeColumnDescription=void 0)},l.prototype.updateBackgrounds=function(){for(var l=0;l<this.dataBlocks.length;l++){var n=this.dataBlocks[l],t=ml.color(l);n.details.role==P.IGNORED&&(t=ml.IGNORED_BG),n.details.role==P.BACKGROUND&&(t=ml.NOISE_BG),n.details.role==P.TIME&&(t=ml.TIME_BG);for(var e=n.start-1;e<n.end;e++)this.bgColors[e]=t}},l.prototype.resetRegion=function(l){this.resetLabels(l),this.resetBackground(l),this.columnBlocks.delete(l)},l.prototype.resetBackground=function(l){for(var n=l.firstCol-1;n<l.lastCol;n++)this.bgColors[n]="transparent"},l.prototype.resetLabels=function(l){for(var n=this.dataModel.specialRows[0],t=l.firstCol-1;t<l.lastCol;t++)n[t]="-"},l.prototype.fakeData=function(){var l=[],n=[];n.push("");for(var t=1;t<25;t++)n.push("RO "+t);for(l.push(n),(n=[]).push(""),t=1;t<25;t++)n.push("cls"+Math.round(t/3));l.push(n);for(var e=1;e<5;e++){for((n=[]).push(""+e),t=1;t<25;t++)n.push(""+(e+t));l.push(n)}return l},l}(),fl=e.nb({encapsulation:2,styles:[],data:{}});function gl(l){return e.Jb(0,[(l()(),e.pb(0,0,null,null,5,"alert",[["type","danger"]],null,null,null,o.c,o.b)),e.ob(1,114688,null,0,s.a,[s.b,e.h],{type:[0,"type"]},null),(l()(),e.pb(2,0,null,0,1,"strong",[],null,null,null,null,null)),(l()(),e.Hb(-1,null,["Missing time column parameters."])),(l()(),e.pb(4,0,null,0,0,"br",[],null,null,null,null,null)),(l()(),e.Hb(-1,0,[" Click on the header of the time column and set the time import parameters in the popup dialog. "]))],function(l,n){l(n,1,0,"danger")},null)}function vl(l){return e.Jb(0,[(l()(),e.pb(0,0,null,null,10,"alert",[["type","danger"]],null,null,null,o.c,o.b)),e.ob(1,114688,null,0,s.a,[s.b,e.h],{type:[0,"type"]},null),(l()(),e.pb(2,0,null,0,1,"strong",[],null,null,null,null,null)),(l()(),e.Hb(-1,null,["Missing data labels. Please use one of the methods:"])),(l()(),e.pb(4,0,null,0,6,"ul",[],null,null,null,null,null)),(l()(),e.pb(5,0,null,null,1,"li",[],null,null,null,null,null)),(l()(),e.Hb(-1,null,["Click and draw over the headers of columns to select the range and assign the data labels in the popup dialog. "])),(l()(),e.pb(7,0,null,null,1,"li",[],null,null,null,null,null)),(l()(),e.Hb(-1,null,["Click the header of a row which contains entries which could be used as data labels."])),(l()(),e.pb(9,0,null,null,1,"li",[],null,null,null,null,null)),(l()(),e.Hb(-1,null,["Use the form below to manually provide the column range and the data label."]))],function(l,n){l(n,1,0,"danger")},null)}function yl(l){return e.Jb(0,[(l()(),e.pb(0,0,null,null,2,"span",[],null,null,null,null,null)),(l()(),e.Hb(1,null,[" Time offset: ","[h]"])),(l()(),e.pb(2,0,null,null,0,"br",[],null,null,null,null,null))],null,function(l,n){l(n,1,0,n.component.timeColumnDescription.details.timeOffset)})}function Cl(l){return e.Jb(0,[(l()(),e.pb(0,0,null,null,2,"span",[],null,null,null,null,null)),(l()(),e.Hb(1,null,[" Image interval: ","[h]"])),(l()(),e.pb(2,0,null,null,0,"br",[],null,null,null,null,null))],null,function(l,n){l(n,1,0,n.component.timeColumnDescription.details.imgInterval)})}function wl(l){return e.Jb(0,[(l()(),e.pb(0,0,null,null,14,"div",[],null,null,null,null,null)),(l()(),e.pb(1,0,null,null,4,"p",[],null,null,null,null,null)),(l()(),e.pb(2,0,null,null,1,"strong",[],null,null,null,null,null)),(l()(),e.Hb(-1,null,["Time parameters"])),(l()(),e.pb(4,0,null,null,1,"a",[["role","button"]],null,[[null,"click"]],function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.editTime()&&e),e},null,null)),(l()(),e.pb(5,0,null,null,0,"span",[["aria-hidden","true"],["class","glyphicon glyphicon-pencil"]],null,null,null,null,null)),(l()(),e.pb(6,0,null,null,8,"p",[],null,null,null,null,null)),(l()(),e.Hb(7,null,[" ",""])),(l()(),e.pb(8,0,null,null,0,"br",[],null,null,null,null,null)),(l()(),e.Hb(9,null,[" First time cell: ",""])),(l()(),e.pb(10,0,null,null,0,"br",[],null,null,null,null,null)),(l()(),e.gb(16777216,null,null,1,null,yl)),e.ob(12,16384,null,0,c.l,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.gb(16777216,null,null,1,null,Cl)),e.ob(14,16384,null,0,c.l,[e.O,e.L],{ngIf:[0,"ngIf"]},null)],function(l,n){var t=n.component;l(n,12,0,t.timeColumnDescription.details.timeOffset),l(n,14,0,t.timeColumnDescription.details.imgInterval)},function(l,n){var t=n.component;l(n,7,0,t.timeColumnDescription.details.timeType.label),l(n,9,0,t.timeColumnDescription.fullRangeLabel)})}function zl(l){return e.Jb(0,[(l()(),e.pb(0,0,null,null,6,"li",[["class","list-group-item"]],null,[[null,"click"]],function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.editBlock(l.context.$implicit)&&e),e},null,null)),(l()(),e.pb(1,0,null,null,3,"span",[],null,null,null,null,null)),(l()(),e.pb(2,0,null,null,1,"strong",[],null,null,null,null,null)),(l()(),e.Hb(3,null,["",""])),(l()(),e.Hb(4,null,[" : ",""])),(l()(),e.pb(5,0,null,null,1,"a",[["class","pull-right"],["role","button"]],null,[[null,"click"]],function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.deleteBlock(l.context.$implicit)&&e),e},null,null)),(l()(),e.pb(6,0,null,null,0,"span",[["aria-hidden","true"],["class","glyphicon glyphicon-remove"]],null,null,null,null,null))],null,function(l,n){l(n,3,0,n.context.$implicit.label),l(n,4,0,n.context.$implicit.value)})}function El(l){return e.Jb(0,[(l()(),e.pb(0,0,null,null,7,"div",[["style",""]],null,null,null,null,null)),(l()(),e.pb(1,0,null,null,2,"p",[],null,null,null,null,null)),(l()(),e.pb(2,0,null,null,1,"strong",[],null,null,null,null,null)),(l()(),e.Hb(-1,null,["Columns descriptions (select to edit)"])),(l()(),e.pb(4,0,null,null,3,"div",[["style","max-height: 20em; overflow-y: auto; margin-bottom: 1em;"]],null,null,null,null,null)),(l()(),e.pb(5,0,null,null,2,"ul",[["class","list-group"]],null,null,null,null,null)),(l()(),e.gb(16777216,null,null,1,null,zl)),e.ob(7,278528,null,0,c.k,[e.O,e.L,e.s],{ngForOf:[0,"ngForOf"]},null)],function(l,n){l(n,7,0,n.component.dataBlocks)},null)}function Dl(l){return e.Jb(0,[(l()(),e.pb(0,0,null,null,1,"th",[],null,[[null,"mousedown"],[null,"mouseup"]],function(l,n,t){var e=!0,u=l.component;return"mousedown"===n&&(e=!1!==u.thSelectStart(l.context.$implicit)&&e),"mouseup"===n&&(e=!1!==u.thSelectEnd(l.context.$implicit)&&e),e},null,null)),(l()(),e.Hb(1,null,[" "," "]))],null,function(l,n){l(n,1,0,n.component.dataModel.th[n.context.$implicit])})}function Tl(l){return e.Jb(0,[(l()(),e.pb(0,0,null,null,1,"td",[],[[4,"background-color",null]],null,null,null,null)),(l()(),e.Hb(1,null,["",""]))],null,function(l,n){var t=n.component;l(n,0,0,t.bgColors[n.context.$implicit]?t.bgColors[n.context.$implicit]:"inherited"),l(n,1,0,n.parent.context.$implicit[n.context.$implicit])})}function Ol(l){return e.Jb(0,[(l()(),e.pb(0,0,null,null,4,"tr",[],null,null,null,null,null)),(l()(),e.pb(1,0,null,null,1,"td",[["class","rowh"]],null,null,null,null,null)),(l()(),e.Hb(2,null,["",""])),(l()(),e.gb(16777216,null,null,1,null,Tl)),e.ob(4,278528,null,0,c.k,[e.O,e.L,e.s],{ngForOf:[0,"ngForOf"]},null)],function(l,n){l(n,4,0,n.component.visibleColIx)},function(l,n){l(n,2,0,n.component.dataModel.specialRowsLabels[n.context.index])})}function kl(l){return e.Jb(0,[(l()(),e.pb(0,0,null,null,1,"td",[],[[4,"background-color",null]],null,null,null,null)),(l()(),e.Hb(1,null,["",""]))],null,function(l,n){var t=n.component;l(n,0,0,t.bgColors[n.context.$implicit]?t.bgColors[n.context.$implicit]:"inherited"),l(n,1,0,n.parent.context.$implicit[n.context.$implicit])})}function Il(l){return e.Jb(0,[(l()(),e.pb(0,0,null,null,4,"tr",[],null,null,null,null,null)),(l()(),e.pb(1,0,null,null,1,"td",[["class","rowh"]],null,[[null,"click"]],function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.rowSelected(l.context.index)&&e),e},null,null)),(l()(),e.Hb(2,null,["",""])),(l()(),e.gb(16777216,null,null,1,null,kl)),e.ob(4,278528,null,0,c.k,[e.O,e.L,e.s],{ngForOf:[0,"ngForOf"]},null)],function(l,n){l(n,4,0,n.component.visibleColIx)},function(l,n){l(n,2,0,n.component.dataModel.rowsLabels[n.context.index])})}function xl(l){return e.Jb(0,[(l()(),e.pb(0,0,null,null,43,"div",[],null,null,null,null,null)),(l()(),e.pb(1,0,null,null,1,"bd2-confirm-dialog",[],null,null,null,A.b,A.a)),e.ob(2,49152,[[3,4],["confirmDialog",4]],0,N.a,[],null,null),(l()(),e.pb(3,0,null,null,1,"bd2-column-type-dialog",[],null,[[null,"onAccepted"]],function(l,n,t){var e=!0;return"onAccepted"===n&&(e=!1!==l.component.setColumnType(t)&&e),e},il,Y)),e.ob(4,49152,[[1,4],["columnTypeDialog",4]],0,X,[],{lastCol:[0,"lastCol"]},{onAccepted:"onAccepted"}),(l()(),e.pb(5,0,null,null,1,"bd2-confirm-row-copy-dialog",[],null,[[null,"onAccepted"]],function(l,n,t){var e=!0;return"onAccepted"===n&&(e=!1!==l.component.copyRowAsLabels(t)&&e),e},sl,al)),e.ob(6,49152,[[2,4],["rowCopyDialog",4]],0,rl,[],null,{onAccepted:"onAccepted"}),(l()(),e.pb(7,0,null,null,0,"hr",[],null,null,null,null,null)),(l()(),e.pb(8,0,null,null,13,"div",[],null,null,null,null,null)),(l()(),e.pb(9,0,null,null,1,"h4",[],null,null,null,null,null)),(l()(),e.Hb(-1,null,["Current import parameters "])),(l()(),e.gb(16777216,null,null,1,null,gl)),e.ob(12,16384,null,0,c.l,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.gb(16777216,null,null,1,null,vl)),e.ob(14,16384,null,0,c.l,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.gb(16777216,null,null,1,null,wl)),e.ob(16,16384,null,0,c.l,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.gb(16777216,null,null,1,null,El)),e.ob(18,16384,null,0,c.l,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.pb(19,0,null,null,2,"div",[],null,null,null,null,null)),(l()(),e.pb(20,0,null,null,1,"button",[["class","btn btn-primary"]],[[8,"disabled",0]],[[null,"click"]],function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.accept()&&e),e},null,null)),(l()(),e.Hb(-1,null,["Import timeseries "])),(l()(),e.pb(22,0,null,null,0,"hr",[],null,null,null,null,null)),(l()(),e.pb(23,0,null,null,1,"bd2-simple-add-data-form",[],null,[[null,"onAccepted"]],function(l,n,t){var e=!0;return"onAccepted"===n&&(e=!1!==l.component.setColumnType(t)&&e),e},dl,pl)),e.ob(24,49152,null,0,cl,[],{lastCol:[0,"lastCol"]},{onAccepted:"onAccepted"}),(l()(),e.pb(25,0,null,null,0,"hr",[],null,null,null,null,null)),(l()(),e.pb(26,0,null,null,3,"h4",[],null,null,null,null,null)),(l()(),e.Hb(-1,null,["Data table "])),(l()(),e.pb(28,0,null,null,1,"small",[],null,null,null,null,null)),(l()(),e.Hb(-1,null,["(only top rows)"])),(l()(),e.pb(30,0,null,null,1,"p",[],null,null,null,null,null)),(l()(),e.Hb(-1,null,["Click on column/row headers for description options"])),(l()(),e.pb(32,0,null,null,11,"div",[["style","overflow-x: auto;"]],null,null,null,null,null)),(l()(),e.pb(33,0,null,null,10,"table",[["class","table table-bordered excel-table"],["role","grid"],["style","width: auto;"]],null,null,null,null,null)),(l()(),e.pb(34,0,null,null,4,"thead",[],null,null,null,null,null)),(l()(),e.pb(35,0,null,null,3,"tr",[["role","row"]],null,null,null,null,null)),(l()(),e.pb(36,0,null,null,0,"th",[],null,null,null,null,null)),(l()(),e.gb(16777216,null,null,1,null,Dl)),e.ob(38,278528,null,0,c.k,[e.O,e.L,e.s],{ngForOf:[0,"ngForOf"]},null),(l()(),e.pb(39,0,null,null,4,"tbody",[],null,null,null,null,null)),(l()(),e.gb(16777216,null,null,1,null,Ol)),e.ob(41,278528,null,0,c.k,[e.O,e.L,e.s],{ngForOf:[0,"ngForOf"]},null),(l()(),e.gb(16777216,null,null,1,null,Il)),e.ob(43,278528,null,0,c.k,[e.O,e.L,e.s],{ngForOf:[0,"ngForOf"]},null)],function(l,n){var t=n.component;l(n,4,0,t.lastCol),l(n,12,0,!t.hasTime()),l(n,14,0,!t.hasData()),l(n,16,0,t.timeColumnDescription),l(n,18,0,t.dataBlocks&&t.dataBlocks.length>0),l(n,24,0,t.lastCol),l(n,38,0,t.visibleColIx),l(n,41,0,t.dataModel.specialRows),l(n,43,0,t.dataModel.rows)},function(l,n){var t=n.component;l(n,20,0,t.blocked||!t.hasTime()||!t.hasData())})}function Ml(l){return e.Jb(0,[e.Fb(671088640,1,{columnTypeDialog:0}),e.Fb(671088640,2,{rowCopyDialog:0}),e.Fb(671088640,3,{confirmDialog:0}),(l()(),e.gb(16777216,null,null,1,null,xl)),e.ob(4,16384,null,0,c.l,[e.O,e.L],{ngIf:[0,"ngIf"]},null)],function(l,n){l(n,4,0,n.component.dataModel)},null)}var Rl=function(){function l(){this.onAccepted=new e.m,this.blocked=!1,this.confirmDataLoss=!1,this.columnBlocks=new K,this.dataBlocks=[],this.bgColors=[]}return Object.defineProperty(l.prototype,"dataTable",{set:function(l){if(l&&!(l.length<1)){var n=new bl(l,this.topcountHeaders(),void 0,[[]],["L."]);this.dataModel=n,this.lastCol=n.width,this.visibleColIx=[];for(var t=0;t<n.width;t++)this.visibleColIx.push(t);this.initTime()}},enumerable:!0,configurable:!0}),l.prototype.topcountHeaders=function(){var l=[];return["A","B","C","D","E","F","G","H"].forEach(function(n){for(var t=1;t<13;t++)l.push(n+t)}),l},l.prototype.initTime=function(){var l=new G(new j(0,0),new j(0,0)),n=new H;n.timeType=_.TIME_IN_HOURS,n.timeOffset=0,n.firstRow=1;var t=new $(l);t.role=P.TIME,t.details=n,this.timeColumnDescription=t},l.prototype.hasTime=function(){return this.timeColumnDescription&&this.timeColumnDescription.role===P.TIME},l.prototype.hasData=function(){return this.dataBlocks.some(function(l){return l.details.role===P.DATA})},l.prototype.rowSelected=function(l){var n=this.joinRow(l),t=new j(0,l+1),e=new G(t,t),u=new $(e,n);this.rowCopyDialog.show(u)},l.prototype.thSelectStart=function(l){this.thSelectedCol=l},l.prototype.thSelectEnd=function(l){if(null!=this.thSelectedCol&&null!=this.thSelectedCol){var n=new j(this.thSelectedCol+1,1),t=new j(l+1,1),e=new G(n,t),u=new $(e,void 0),o=this.columnBlocks.details(n.col);o&&(u.role=o.role,u.details=o.details);var i=this.rangeToTopcountLabel(u);this.thSelectedCol=void 0,this.columnTypeDialog.show(u,i)}},l.prototype.rangeToTopcountLabel=function(l){var n=l.range;return J(n.firstCol)+"-"+J(n.lastCol)},l.prototype.editTime=function(){this.timeColumnDescription&&this.columnTypeDialog.show(this.timeColumnDescription)},l.prototype.editBlock=function(l){if(l){var n=this.rangeToTopcountLabel(l.details);this.columnTypeDialog.show(l.details,n)}},l.prototype.deleteBlock=function(l){l&&(l.details.role==P.TIME?this.clearTime():this.resetRegion(l.details.range),this.dataBlocks=this.columnBlocks.blocks)},l.prototype.accept=function(){var l=this;if(this.hasTime()&&this.hasData()){var n=Promise.resolve(!0);this.containsDataGaps()&&(n=this.confirmDialog.ask("Do you want to import partial data?","Not all columns are described. Data columns without annotations will not be imported.<br>Click OK if you want to proceed.")),n.then(function(n){return!!n&&(!l.confirmDataLoss||l.confirmDialog.ask("Do you want to replace the existing data?","It will also erase all analysis results. <br>Click OK if you want to proceed."))}).then(function(n){n&&l.emitParameters()}).catch(function(l){return console.log("Dialog error: "+l)})}},l.prototype.containsDataGaps=function(){if(this.dataBlocks.length<1)return!0;if(this.dataBlocks[this.dataBlocks.length-1].end<this.lastCol)return!0;for(var l=this.dataBlocks[0].start-1,n=0;n<this.dataBlocks.length;n++){if(this.dataBlocks[n].start!=l+1)return!0;l=this.dataBlocks[n].end}return!1},l.prototype.emitParameters=function(){var l=new g;l.timeColumn=this.timeColumnDescription,l.dataBlocks=this.dataBlocks.map(function(l){return l.details}),this.onAccepted.emit(l)},l.prototype.joinRow=function(l){return this.dataModel.rows[l].slice(0,10).join(" | ")+"..."},l.prototype.setColumnType=function(l){if(l&&void 0!==l.role){this.timeColumnDescription&&(l.role==P.TIME?this.clearTime():this.timeColumnDescription.firstCol>=l.firstCol&&this.timeColumnDescription.firstCol<=l.lastCol&&this.clearTime());var n=void 0;switch(l.role){case P.IGNORED:n="ign.";break;case P.BACKGROUND:n="bcg.";break;case P.TIME:n="Time";break;case P.DATA:n=l.details.dataLabel}this.columnBlocks.insert(l,n),this.columnBlocks.merge(),this.dataBlocks=this.columnBlocks.blocks;var t=this.dataModel.specialRows[0];if(t)for(var e=l.firstCol-1;e<l.lastCol;e++)t[e]=n;l.role==P.TIME&&(this.timeColumnDescription=l),this.updateBackgrounds()}},l.prototype.copyRowAsLabels=function(l){var n=this;if(l){this.clearTime();var t=this.dataModel.specialRows[0];this.dataModel.rows[l.range.first.row-1].forEach(function(l,e){if(l){var u=new F(l),o=new j(e+1,0),i=new G(o,o),r=new $(i,void 0);r.details=u,r.role=P.DATA,n.columnBlocks.insert(r,l),t[e]=l}}),this.columnBlocks.merge(),this.dataBlocks=this.columnBlocks.blocks,this.updateBackgrounds()}},l.prototype.clearTime=function(){this.timeColumnDescription&&(this.resetRegion(this.timeColumnDescription.range),this.timeColumnDescription=void 0)},l.prototype.updateBackgrounds=function(){for(var l=0;l<this.dataBlocks.length;l++){var n=this.dataBlocks[l],t=ml.color(l);n.details.role==P.IGNORED&&(t=ml.IGNORED_BG),n.details.role==P.BACKGROUND&&(t=ml.NOISE_BG),n.details.role==P.TIME&&(t=ml.TIME_BG);for(var e=n.start-1;e<n.end;e++)this.bgColors[e]=t}},l.prototype.resetRegion=function(l){this.resetLabels(l),this.resetBackground(l),this.columnBlocks.delete(l)},l.prototype.resetBackground=function(l){for(var n=l.firstCol-1;n<l.lastCol;n++)this.bgColors[n]="transparent"},l.prototype.resetLabels=function(l){for(var n=this.dataModel.specialRows[0],t=l.firstCol-1;t<l.lastCol;t++)n[t]="-"},l.prototype.fakeData=function(){var l=[],n=[];n.push("");for(var t=1;t<25;t++)n.push("RO "+t);for(l.push(n),(n=[]).push(""),t=1;t<25;t++)n.push("cls"+Math.round(t/3));l.push(n);for(var e=1;e<5;e++){for((n=[]).push(""+e),t=1;t<25;t++)n.push(""+(e+t));l.push(n)}return l},l}(),Sl=e.nb({encapsulation:2,styles:[],data:{}});function Al(l){return e.Jb(0,[(l()(),e.pb(0,0,null,null,8,"alert",[["type","danger"]],null,null,null,o.c,o.b)),e.ob(1,114688,null,0,s.a,[s.b,e.h],{type:[0,"type"]},null),(l()(),e.pb(2,0,null,0,1,"strong",[],null,null,null,null,null)),(l()(),e.Hb(-1,null,["Missing data labels. Please use one of the methods:"])),(l()(),e.pb(4,0,null,0,4,"ul",[],null,null,null,null,null)),(l()(),e.pb(5,0,null,null,1,"li",[],null,null,null,null,null)),(l()(),e.Hb(-1,null,["Click and draw over the headers of columns to select the range and assign the data labels in the popup dialog. "])),(l()(),e.pb(7,0,null,null,1,"li",[],null,null,null,null,null)),(l()(),e.Hb(-1,null,["Use the form below to manually provide the column range and the data label."]))],function(l,n){l(n,1,0,"danger")},null)}function Nl(l){return e.Jb(0,[(l()(),e.pb(0,0,null,null,10,"div",[],null,null,null,null,null)),(l()(),e.pb(1,0,null,null,9,"div",[["class","form-group"]],null,null,null,null,null)),(l()(),e.pb(2,0,null,null,1,"label",[["for","timeOffset"]],null,null,null,null,null)),(l()(),e.Hb(-1,null,["Time parameter: offset (hours)"])),(l()(),e.pb(4,0,null,null,6,"input",[["class","form-control short-input"],["id","timeOffset"],["name","fTimeOffset"],["placeholder","e.g. -4"],["step","any"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(l,n,t){var u=!0,o=l.component;return"input"===n&&(u=!1!==e.zb(l,5)._handleInput(t.target.value)&&u),"blur"===n&&(u=!1!==e.zb(l,5).onTouched()&&u),"compositionstart"===n&&(u=!1!==e.zb(l,5)._compositionStart()&&u),"compositionend"===n&&(u=!1!==e.zb(l,5)._compositionEnd(t.target.value)&&u),"change"===n&&(u=!1!==e.zb(l,6).onChange(t.target.value)&&u),"input"===n&&(u=!1!==e.zb(l,6).onChange(t.target.value)&&u),"blur"===n&&(u=!1!==e.zb(l,6).onTouched()&&u),"ngModelChange"===n&&(u=!1!==(o.timeColumnDescription.details.timeOffset=t)&&u),u},null,null)),e.ob(5,16384,null,0,a.e,[e.D,e.k,[2,a.a]],null,null),e.ob(6,16384,null,0,a.B,[e.D,e.k],null,null),e.Eb(1024,null,a.n,function(l,n){return[l,n]},[a.e,a.B]),e.ob(8,671744,[["fTimeOffset",4]],0,a.s,[[8,null],[8,null],[8,null],[6,a.n]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),e.Eb(2048,null,a.o,null,[a.s]),e.ob(10,16384,null,0,a.p,[[4,a.o]],null,null)],function(l,n){l(n,8,0,"fTimeOffset",n.component.timeColumnDescription.details.timeOffset)},function(l,n){l(n,4,0,e.zb(n,10).ngClassUntouched,e.zb(n,10).ngClassTouched,e.zb(n,10).ngClassPristine,e.zb(n,10).ngClassDirty,e.zb(n,10).ngClassValid,e.zb(n,10).ngClassInvalid,e.zb(n,10).ngClassPending)})}function Bl(l){return e.Jb(0,[(l()(),e.pb(0,0,null,null,6,"li",[["class","list-group-item"]],null,[[null,"click"]],function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.editBlock(l.context.$implicit)&&e),e},null,null)),(l()(),e.pb(1,0,null,null,3,"span",[],null,null,null,null,null)),(l()(),e.pb(2,0,null,null,1,"strong",[],null,null,null,null,null)),(l()(),e.Hb(3,null,["",""])),(l()(),e.Hb(4,null,[" : ",""])),(l()(),e.pb(5,0,null,null,1,"a",[["class","pull-right"],["role","button"]],null,[[null,"click"]],function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.deleteBlock(l.context.$implicit)&&e),e},null,null)),(l()(),e.pb(6,0,null,null,0,"span",[["aria-hidden","true"],["class","glyphicon glyphicon-remove"]],null,null,null,null,null))],null,function(l,n){l(n,3,0,n.context.$implicit.topcountLabel),l(n,4,0,n.context.$implicit.value)})}function Ll(l){return e.Jb(0,[(l()(),e.pb(0,0,null,null,7,"div",[["style",""]],null,null,null,null,null)),(l()(),e.pb(1,0,null,null,2,"p",[],null,null,null,null,null)),(l()(),e.pb(2,0,null,null,1,"strong",[],null,null,null,null,null)),(l()(),e.Hb(-1,null,["Columns descriptions (select to edit)"])),(l()(),e.pb(4,0,null,null,3,"div",[["style","max-height: 20em; overflow-y: auto; margin-bottom: 1em;"]],null,null,null,null,null)),(l()(),e.pb(5,0,null,null,2,"ul",[["class","list-group"]],null,null,null,null,null)),(l()(),e.gb(16777216,null,null,1,null,Bl)),e.ob(7,278528,null,0,c.k,[e.O,e.L,e.s],{ngForOf:[0,"ngForOf"]},null)],function(l,n){l(n,7,0,n.component.dataBlocks)},null)}function Pl(l){return e.Jb(0,[(l()(),e.pb(0,0,null,null,1,"th",[],null,[[null,"mousedown"],[null,"mouseup"]],function(l,n,t){var e=!0,u=l.component;return"mousedown"===n&&(e=!1!==u.thSelectStart(l.context.$implicit)&&e),"mouseup"===n&&(e=!1!==u.thSelectEnd(l.context.$implicit)&&e),e},null,null)),(l()(),e.Hb(1,null,[" "," "]))],null,function(l,n){l(n,1,0,n.component.dataModel.th[n.context.$implicit])})}function _l(l){return e.Jb(0,[(l()(),e.pb(0,0,null,null,1,"td",[],[[4,"background-color",null]],null,null,null,null)),(l()(),e.Hb(1,null,[""," "]))],null,function(l,n){var t=n.component;l(n,0,0,t.bgColors[n.context.$implicit]?t.bgColors[n.context.$implicit]:"inherited"),l(n,1,0,n.parent.context.$implicit[n.context.$implicit])})}function Hl(l){return e.Jb(0,[(l()(),e.pb(0,0,null,null,4,"tr",[],null,null,null,null,null)),(l()(),e.pb(1,0,null,null,1,"td",[["class","rowh"]],null,null,null,null,null)),(l()(),e.Hb(2,null,["",""])),(l()(),e.gb(16777216,null,null,1,null,_l)),e.ob(4,278528,null,0,c.k,[e.O,e.L,e.s],{ngForOf:[0,"ngForOf"]},null)],function(l,n){l(n,4,0,n.component.visibleColIx)},function(l,n){l(n,2,0,n.component.dataModel.specialRowsLabels[n.context.index])})}function Fl(l){return e.Jb(0,[(l()(),e.pb(0,0,null,null,1,"td",[],[[4,"background-color",null]],null,null,null,null)),(l()(),e.Hb(1,null,[""," "]))],null,function(l,n){var t=n.component;l(n,0,0,t.bgColors[n.context.$implicit]?t.bgColors[n.context.$implicit]:"inherited"),l(n,1,0,n.parent.context.$implicit[n.context.$implicit])})}function ql(l){return e.Jb(0,[(l()(),e.pb(0,0,null,null,4,"tr",[],null,null,null,null,null)),(l()(),e.pb(1,0,null,null,1,"td",[["class","rowh"]],null,null,null,null,null)),(l()(),e.Hb(2,null,["",""])),(l()(),e.gb(16777216,null,null,1,null,Fl)),e.ob(4,278528,null,0,c.k,[e.O,e.L,e.s],{ngForOf:[0,"ngForOf"]},null)],function(l,n){l(n,4,0,n.component.visibleColIx)},function(l,n){l(n,2,0,n.component.dataModel.rowsLabels[n.context.index])})}function Ul(l){return e.Jb(0,[(l()(),e.pb(0,0,null,null,38,"div",[],null,null,null,null,null)),(l()(),e.pb(1,0,null,null,1,"bd2-confirm-dialog",[],null,null,null,A.b,A.a)),e.ob(2,49152,[[3,4],["confirmDialog",4]],0,N.a,[],null,null),(l()(),e.pb(3,0,null,null,1,"bd2-column-type-dialog",[],null,[[null,"onAccepted"]],function(l,n,t){var e=!0;return"onAccepted"===n&&(e=!1!==l.component.setColumnType(t)&&e),e},il,Y)),e.ob(4,49152,[[1,4],["columnTypeDialog",4]],0,X,[],{lastCol:[0,"lastCol"],showTime:[1,"showTime"]},{onAccepted:"onAccepted"}),(l()(),e.pb(5,0,null,null,1,"bd2-confirm-row-copy-dialog",[],null,[[null,"onAccepted"]],function(l,n,t){var e=!0;return"onAccepted"===n&&(e=!1!==l.component.copyRowAsLabels(t)&&e),e},sl,al)),e.ob(6,49152,[[2,4],["rowCopyDialog",4]],0,rl,[],null,{onAccepted:"onAccepted"}),(l()(),e.pb(7,0,null,null,0,"hr",[],null,null,null,null,null)),(l()(),e.pb(8,0,null,null,11,"div",[],null,null,null,null,null)),(l()(),e.pb(9,0,null,null,1,"h4",[],null,null,null,null,null)),(l()(),e.Hb(-1,null,["Current Topcount import parameters "])),(l()(),e.gb(16777216,null,null,1,null,Al)),e.ob(12,16384,null,0,c.l,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.gb(16777216,null,null,1,null,Nl)),e.ob(14,16384,null,0,c.l,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.gb(16777216,null,null,1,null,Ll)),e.ob(16,16384,null,0,c.l,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.pb(17,0,null,null,2,"div",[],null,null,null,null,null)),(l()(),e.pb(18,0,null,null,1,"button",[["class","btn btn-primary"]],[[8,"disabled",0]],[[null,"click"]],function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.accept()&&e),e},null,null)),(l()(),e.Hb(-1,null,["Import timeseries "])),(l()(),e.pb(20,0,null,null,0,"hr",[],null,null,null,null,null)),(l()(),e.pb(21,0,null,null,3,"h4",[],null,null,null,null,null)),(l()(),e.Hb(-1,null,["Data table "])),(l()(),e.pb(23,0,null,null,1,"small",[],null,null,null,null,null)),(l()(),e.Hb(-1,null,["(only top rows)"])),(l()(),e.pb(25,0,null,null,1,"p",[],null,null,null,null,null)),(l()(),e.Hb(-1,null,["Click on column headers for description options"])),(l()(),e.pb(27,0,null,null,11,"div",[["style","overflow-x: auto;"]],null,null,null,null,null)),(l()(),e.pb(28,0,null,null,10,"table",[["class","table table-bordered excel-table"],["role","grid"],["style","width: auto;"]],null,null,null,null,null)),(l()(),e.pb(29,0,null,null,4,"thead",[],null,null,null,null,null)),(l()(),e.pb(30,0,null,null,3,"tr",[["role","row"]],null,null,null,null,null)),(l()(),e.pb(31,0,null,null,0,"th",[],null,null,null,null,null)),(l()(),e.gb(16777216,null,null,1,null,Pl)),e.ob(33,278528,null,0,c.k,[e.O,e.L,e.s],{ngForOf:[0,"ngForOf"]},null),(l()(),e.pb(34,0,null,null,4,"tbody",[],null,null,null,null,null)),(l()(),e.gb(16777216,null,null,1,null,Hl)),e.ob(36,278528,null,0,c.k,[e.O,e.L,e.s],{ngForOf:[0,"ngForOf"]},null),(l()(),e.gb(16777216,null,null,1,null,ql)),e.ob(38,278528,null,0,c.k,[e.O,e.L,e.s],{ngForOf:[0,"ngForOf"]},null)],function(l,n){var t=n.component;l(n,4,0,t.lastCol,!1),l(n,12,0,!t.hasData()),l(n,14,0,t.timeColumnDescription),l(n,16,0,t.dataBlocks&&t.dataBlocks.length>0),l(n,33,0,t.visibleColIx),l(n,36,0,t.dataModel.specialRows),l(n,38,0,t.dataModel.rows)},function(l,n){var t=n.component;l(n,18,0,t.blocked||!t.hasTime()||!t.hasData())})}function Vl(l){return e.Jb(0,[e.Fb(671088640,1,{columnTypeDialog:0}),e.Fb(671088640,2,{rowCopyDialog:0}),e.Fb(671088640,3,{confirmDialog:0}),(l()(),e.gb(16777216,null,null,1,null,Ul)),e.ob(4,16384,null,0,c.l,[e.O,e.L],{ngIf:[0,"ngIf"]},null)],function(l,n){l(n,4,0,n.component.dataModel)},null)}var Jl=function(l){function n(n,t,e){var u=l.call(this,e)||this;return u.fileViewService=n,u.route=t,u.blocked=!1,u.titlePart=" Import Data",u}return b.__extends(n,l),n.prototype.ngOnInit=function(){var n=this;l.prototype.ngOnInit.call(this),this.route.params.forEach(function(l){var t=l.fileId,e=l.format;t&&e?n.loadData(e,t):console.log(n.constructor.name+" null parameters")})},n.prototype.loadData=function(l,n){var t=this;this.format=h.get(l),this.fileId=n,this.blocked=!1,this.fileViewService.getSimpleTableView(n).then(function(l){t.dataTable=l}).catch(function(l){t.feedback.error(l)})},n.prototype.import=function(l){var n=this;if(l&&this.fileId&&this.format){this.blocked=!0;var t=new v;t.fileId=this.fileId,t.importFormat=this.format,t.importParameters=l,this.experimentService.importTimeSeries(this.assay,t).then(function(l){return n.feedback.success("Imported "+l.imported+" timeseries"),l}).then(function(){return n.refreshModel()}).then(function(l){return n.goToTSView()}).catch(function(l){n.blocked=!1,n.feedback.error(l)})}},n.prototype.goToTSView=function(){var l=this.expHomePath();l.push("data"),l.push("view"),l.push("ts"),this.router.navigate(l)},n}(m.a),jl=t("ZYCi"),Gl=e.nb({encapsulation:2,styles:[],data:{}});function $l(l){return e.Jb(0,[(l()(),e.pb(0,0,null,null,1,"bd2-describe-ts-table",[],null,[[null,"onAccepted"]],function(l,n,t){var e=!0;return"onAccepted"===n&&(e=!1!==l.component.import(t)&&e),e},Ml,fl)),e.ob(1,49152,null,0,hl,[],{blocked:[0,"blocked"],confirmDataLoss:[1,"confirmDataLoss"],dataTable:[2,"dataTable"]},{onAccepted:"onAccepted"})],function(l,n){var t=n.component;l(n,1,0,t.blocked,null==t.assay?null:t.assay.features.hasTSData,t.dataTable)},null)}function Wl(l){return e.Jb(0,[(l()(),e.pb(0,0,null,null,1,"bd2-describe-topcount-table",[],null,[[null,"onAccepted"]],function(l,n,t){var e=!0;return"onAccepted"===n&&(e=!1!==l.component.import(t)&&e),e},Vl,Sl)),e.ob(1,49152,null,0,Rl,[],{blocked:[0,"blocked"],confirmDataLoss:[1,"confirmDataLoss"],dataTable:[2,"dataTable"]},{onAccepted:"onAccepted"})],function(l,n){var t=n.component;l(n,1,0,t.blocked,null==t.assay?null:t.assay.features.hasTSData,t.dataTable)},null)}function Kl(l){return e.Jb(0,[(l()(),e.pb(0,0,null,null,1,"h3",[],null,null,null,null,null)),(l()(),e.Hb(-1,null,["Timeseries import"])),(l()(),e.gb(16777216,null,null,1,null,$l)),e.ob(3,16384,null,0,c.l,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.gb(16777216,null,null,1,null,Wl)),e.ob(5,16384,null,0,c.l,[e.O,e.L],{ngIf:[0,"ngIf"]},null)],function(l,n){var t=n.component;l(n,3,0,"EXCEL_TABLE"===(null==t.format?null:t.format.name)),l(n,5,0,"TOPCOUNT"===(null==t.format?null:t.format.name))},null)}function Xl(l){return e.Jb(0,[(l()(),e.pb(0,0,null,null,1,"ng-component",[],null,null,null,Kl,Gl)),e.ob(1,245760,null,0,Jl,[z,jl.a,y.a],null,null)],function(l,n){l(n,1,0)},null)}var Yl=e.lb("ng-component",Jl,Xl,{},{},[]),Zl=t("b8ec"),Ql=t("nA4b"),ln=t("bngM"),nn=t("Tl2h"),tn=t("909l"),en=t("VnD/"),un=t("67Y/"),on=t("ad02"),rn=function(){function l(l){this.fb=l,this.detrendingOptions=nn.c,this.normalisationOptions=nn.d,this.alignOptions=nn.a,this.paramsForm=this.fb.group({timeScale:this.fb.group({timeStart:[0,[a.z.required]],timeEnd:[0,[a.z.required]]},{validator:function(l){return Object(ln.b)(l.value)}}),detrending:[nn.b.LIN_DTR.name,[a.z.required]],normalisation:[nn.d[0].name,[a.z.required]],align:[nn.a[0].name,[a.z.required]]}),this.displayParams=Object(tn.a)(this.paramsForm.valueChanges,this.paramsForm.statusChanges,function(l,n){return{value:l,status:n}}).pipe(Object(en.a)(function(l){return"VALID"===l.status}),Object(un.a)(function(l){return new ln.a(l.value.timeScale.timeStart,l.value.timeScale.timeEnd,nn.b.get(l.value.detrending),l.value.normalisation,l.value.align)}),Object(en.a)(function(l){return l.isValid()}),Object(on.a)(function(l,n){return n.equals(l)}))}return Object.defineProperty(l.prototype,"disabled",{set:function(l){l?this.paramsForm.disable():this.paramsForm.enable()},enumerable:!0,configurable:!0}),l.prototype.ngOnInit=function(){},l}(),an=e.nb({encapsulation:2,styles:[],data:{}});function sn(l){return e.Jb(0,[(l()(),e.pb(0,0,null,null,3,"option",[],null,null,null,null,null)),e.ob(1,147456,null,0,a.t,[e.k,e.D,[2,a.y]],{value:[0,"value"]},null),e.ob(2,147456,null,0,a.F,[e.k,e.D,[8,null]],{value:[0,"value"]},null),(l()(),e.Hb(3,null,["",""]))],function(l,n){l(n,1,0,n.context.$implicit.name),l(n,2,0,n.context.$implicit.name)},function(l,n){l(n,3,0,n.context.$implicit.label)})}function cn(l){return e.Jb(0,[(l()(),e.pb(0,0,null,null,3,"option",[],null,null,null,null,null)),e.ob(1,147456,null,0,a.t,[e.k,e.D,[2,a.y]],{value:[0,"value"]},null),e.ob(2,147456,null,0,a.F,[e.k,e.D,[8,null]],{value:[0,"value"]},null),(l()(),e.Hb(3,null,["",""]))],function(l,n){l(n,1,0,n.context.$implicit.name),l(n,2,0,n.context.$implicit.name)},function(l,n){l(n,3,0,n.context.$implicit.label)})}function pn(l){return e.Jb(0,[(l()(),e.pb(0,0,null,null,3,"option",[],null,null,null,null,null)),e.ob(1,147456,null,0,a.t,[e.k,e.D,[2,a.y]],{value:[0,"value"]},null),e.ob(2,147456,null,0,a.F,[e.k,e.D,[8,null]],{value:[0,"value"]},null),(l()(),e.Hb(3,null,["",""]))],function(l,n){l(n,1,0,n.context.$implicit.name),l(n,2,0,n.context.$implicit.name)},function(l,n){l(n,3,0,n.context.$implicit.label)})}function dn(l){return e.Jb(0,[(l()(),e.pb(0,0,null,null,78,"form",[["class","form-horizontal"],["novalidate",""],["role","form"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(l,n,t){var u=!0;return"submit"===n&&(u=!1!==e.zb(l,2).onSubmit(t)&&u),"reset"===n&&(u=!1!==e.zb(l,2).onReset()&&u),u},null,null)),e.ob(1,16384,null,0,a.C,[],null,null),e.ob(2,540672,null,0,a.h,[[8,null],[8,null]],{form:[0,"form"]},null),e.Eb(2048,null,a.d,null,[a.h]),e.ob(4,16384,null,0,a.q,[[4,a.d]],null,null),(l()(),e.pb(5,0,null,null,29,"div",[["class","form-group row"],["formGroupName","timeScale"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,null,null)),e.ob(6,212992,null,0,a.i,[[3,a.d],[8,null],[8,null]],{name:[0,"name"]},null),e.Eb(2048,null,a.d,null,[a.i]),e.ob(8,16384,null,0,a.q,[[4,a.d]],null,null),(l()(),e.pb(9,0,null,null,1,"label",[["class","col-sm-2"]],null,null,null,null,null)),(l()(),e.Hb(-1,null,["Time scale"])),(l()(),e.pb(11,0,null,null,1,"label",[["class","col-sm-1"],["for","timeStart"]],null,null,null,null,null)),(l()(),e.Hb(-1,null,["from:"])),(l()(),e.pb(13,0,null,null,9,"div",[["class","col-sm-3"]],null,null,null,null,null)),(l()(),e.pb(14,0,null,null,8,"input",[["class","form-control"],["formControlName","timeStart"],["id","timeStart"],["min","0"],["required",""],["size","5"],["step","any"],["type","number"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(l,n,t){var u=!0;return"input"===n&&(u=!1!==e.zb(l,15)._handleInput(t.target.value)&&u),"blur"===n&&(u=!1!==e.zb(l,15).onTouched()&&u),"compositionstart"===n&&(u=!1!==e.zb(l,15)._compositionStart()&&u),"compositionend"===n&&(u=!1!==e.zb(l,15)._compositionEnd(t.target.value)&&u),"change"===n&&(u=!1!==e.zb(l,16).onChange(t.target.value)&&u),"input"===n&&(u=!1!==e.zb(l,16).onChange(t.target.value)&&u),"blur"===n&&(u=!1!==e.zb(l,16).onTouched()&&u),u},null,null)),e.ob(15,16384,null,0,a.e,[e.D,e.k,[2,a.a]],null,null),e.ob(16,16384,null,0,a.B,[e.D,e.k],null,null),e.ob(17,16384,null,0,a.x,[],{required:[0,"required"]},null),e.Eb(1024,null,a.m,function(l){return[l]},[a.x]),e.Eb(1024,null,a.n,function(l,n){return[l,n]},[a.e,a.B]),e.ob(20,671744,null,0,a.g,[[3,a.d],[6,a.m],[8,null],[6,a.n],[2,a.E]],{name:[0,"name"]},null),e.Eb(2048,null,a.o,null,[a.g]),e.ob(22,16384,null,0,a.p,[[4,a.o]],null,null),(l()(),e.pb(23,0,null,null,1,"label",[["class","col-sm-1"],["for","timeEnd"]],null,null,null,null,null)),(l()(),e.Hb(-1,null,["to:"])),(l()(),e.pb(25,0,null,null,9,"div",[["class","col-sm-3"]],null,null,null,null,null)),(l()(),e.pb(26,0,null,null,8,"input",[["class","form-control"],["formControlName","timeEnd"],["id","timeEnd"],["min","0"],["required",""],["size","5"],["step","any"],["type","number"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(l,n,t){var u=!0;return"input"===n&&(u=!1!==e.zb(l,27)._handleInput(t.target.value)&&u),"blur"===n&&(u=!1!==e.zb(l,27).onTouched()&&u),"compositionstart"===n&&(u=!1!==e.zb(l,27)._compositionStart()&&u),"compositionend"===n&&(u=!1!==e.zb(l,27)._compositionEnd(t.target.value)&&u),"change"===n&&(u=!1!==e.zb(l,28).onChange(t.target.value)&&u),"input"===n&&(u=!1!==e.zb(l,28).onChange(t.target.value)&&u),"blur"===n&&(u=!1!==e.zb(l,28).onTouched()&&u),u},null,null)),e.ob(27,16384,null,0,a.e,[e.D,e.k,[2,a.a]],null,null),e.ob(28,16384,null,0,a.B,[e.D,e.k],null,null),e.ob(29,16384,null,0,a.x,[],{required:[0,"required"]},null),e.Eb(1024,null,a.m,function(l){return[l]},[a.x]),e.Eb(1024,null,a.n,function(l,n){return[l,n]},[a.e,a.B]),e.ob(32,671744,null,0,a.g,[[3,a.d],[6,a.m],[8,null],[6,a.n],[2,a.E]],{name:[0,"name"]},null),e.Eb(2048,null,a.o,null,[a.g]),e.ob(34,16384,null,0,a.p,[[4,a.o]],null,null),(l()(),e.pb(35,0,null,null,15,"div",[["class","form-group row"]],null,null,null,null,null)),(l()(),e.pb(36,0,null,null,1,"label",[["class","col-sm-2"],["for","detrending"]],null,null,null,null,null)),(l()(),e.Hb(-1,null,["Processing"])),(l()(),e.pb(38,0,null,null,1,"label",[["class","col-sm-2"],["for","detrending"]],null,null,null,null,null)),(l()(),e.Hb(-1,null,["Detrending"])),(l()(),e.pb(40,0,null,null,10,"div",[["class","col-sm-6"]],null,null,null,null,null)),(l()(),e.pb(41,0,null,null,9,"select",[["class","form-control"],["formControlName","detrending"],["id","detrending"],["required",""]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"blur"]],function(l,n,t){var u=!0;return"change"===n&&(u=!1!==e.zb(l,42).onChange(t.target.value)&&u),"blur"===n&&(u=!1!==e.zb(l,42).onTouched()&&u),u},null,null)),e.ob(42,16384,null,0,a.y,[e.D,e.k],null,null),e.ob(43,16384,null,0,a.x,[],{required:[0,"required"]},null),e.Eb(1024,null,a.m,function(l){return[l]},[a.x]),e.Eb(1024,null,a.n,function(l){return[l]},[a.y]),e.ob(46,671744,null,0,a.g,[[3,a.d],[6,a.m],[8,null],[6,a.n],[2,a.E]],{name:[0,"name"]},null),e.Eb(2048,null,a.o,null,[a.g]),e.ob(48,16384,null,0,a.p,[[4,a.o]],null,null),(l()(),e.gb(16777216,null,null,1,null,sn)),e.ob(50,278528,null,0,c.k,[e.O,e.L,e.s],{ngForOf:[0,"ngForOf"]},null),(l()(),e.pb(51,0,null,null,27,"div",[["class","form-group row"]],null,null,null,null,null)),(l()(),e.pb(52,0,null,null,0,"label",[["class","col-sm-2"]],null,null,null,null,null)),(l()(),e.pb(53,0,null,null,1,"label",[["class","col-sm-1"]],null,null,null,null,null)),(l()(),e.Hb(-1,null,["Norm."])),(l()(),e.pb(55,0,null,null,10,"div",[["class","col-sm-3"]],null,null,null,null,null)),(l()(),e.pb(56,0,null,null,9,"select",[["class","form-control"],["formControlName","normalisation"],["id","normalisation"],["required",""]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"blur"]],function(l,n,t){var u=!0;return"change"===n&&(u=!1!==e.zb(l,57).onChange(t.target.value)&&u),"blur"===n&&(u=!1!==e.zb(l,57).onTouched()&&u),u},null,null)),e.ob(57,16384,null,0,a.y,[e.D,e.k],null,null),e.ob(58,16384,null,0,a.x,[],{required:[0,"required"]},null),e.Eb(1024,null,a.m,function(l){return[l]},[a.x]),e.Eb(1024,null,a.n,function(l){return[l]},[a.y]),e.ob(61,671744,null,0,a.g,[[3,a.d],[6,a.m],[8,null],[6,a.n],[2,a.E]],{name:[0,"name"]},null),e.Eb(2048,null,a.o,null,[a.g]),e.ob(63,16384,null,0,a.p,[[4,a.o]],null,null),(l()(),e.gb(16777216,null,null,1,null,cn)),e.ob(65,278528,null,0,c.k,[e.O,e.L,e.s],{ngForOf:[0,"ngForOf"]},null),(l()(),e.pb(66,0,null,null,1,"label",[["class","col-sm-1"]],null,null,null,null,null)),(l()(),e.Hb(-1,null,["Align"])),(l()(),e.pb(68,0,null,null,10,"div",[["class","col-sm-3"]],null,null,null,null,null)),(l()(),e.pb(69,0,null,null,9,"select",[["class","form-control"],["formControlName","align"],["id","align"],["required",""]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"blur"]],function(l,n,t){var u=!0;return"change"===n&&(u=!1!==e.zb(l,70).onChange(t.target.value)&&u),"blur"===n&&(u=!1!==e.zb(l,70).onTouched()&&u),u},null,null)),e.ob(70,16384,null,0,a.y,[e.D,e.k],null,null),e.ob(71,16384,null,0,a.x,[],{required:[0,"required"]},null),e.Eb(1024,null,a.m,function(l){return[l]},[a.x]),e.Eb(1024,null,a.n,function(l){return[l]},[a.y]),e.ob(74,671744,null,0,a.g,[[3,a.d],[6,a.m],[8,null],[6,a.n],[2,a.E]],{name:[0,"name"]},null),e.Eb(2048,null,a.o,null,[a.g]),e.ob(76,16384,null,0,a.p,[[4,a.o]],null,null),(l()(),e.gb(16777216,null,null,1,null,pn)),e.ob(78,278528,null,0,c.k,[e.O,e.L,e.s],{ngForOf:[0,"ngForOf"]},null)],function(l,n){var t=n.component;l(n,2,0,t.paramsForm),l(n,6,0,"timeScale"),l(n,17,0,""),l(n,20,0,"timeStart"),l(n,29,0,""),l(n,32,0,"timeEnd"),l(n,43,0,""),l(n,46,0,"detrending"),l(n,50,0,t.detrendingOptions),l(n,58,0,""),l(n,61,0,"normalisation"),l(n,65,0,t.normalisationOptions),l(n,71,0,""),l(n,74,0,"align"),l(n,78,0,t.alignOptions)},function(l,n){l(n,0,0,e.zb(n,4).ngClassUntouched,e.zb(n,4).ngClassTouched,e.zb(n,4).ngClassPristine,e.zb(n,4).ngClassDirty,e.zb(n,4).ngClassValid,e.zb(n,4).ngClassInvalid,e.zb(n,4).ngClassPending),l(n,5,0,e.zb(n,8).ngClassUntouched,e.zb(n,8).ngClassTouched,e.zb(n,8).ngClassPristine,e.zb(n,8).ngClassDirty,e.zb(n,8).ngClassValid,e.zb(n,8).ngClassInvalid,e.zb(n,8).ngClassPending),l(n,14,0,e.zb(n,17).required?"":null,e.zb(n,22).ngClassUntouched,e.zb(n,22).ngClassTouched,e.zb(n,22).ngClassPristine,e.zb(n,22).ngClassDirty,e.zb(n,22).ngClassValid,e.zb(n,22).ngClassInvalid,e.zb(n,22).ngClassPending),l(n,26,0,e.zb(n,29).required?"":null,e.zb(n,34).ngClassUntouched,e.zb(n,34).ngClassTouched,e.zb(n,34).ngClassPristine,e.zb(n,34).ngClassDirty,e.zb(n,34).ngClassValid,e.zb(n,34).ngClassInvalid,e.zb(n,34).ngClassPending),l(n,41,0,e.zb(n,43).required?"":null,e.zb(n,48).ngClassUntouched,e.zb(n,48).ngClassTouched,e.zb(n,48).ngClassPristine,e.zb(n,48).ngClassDirty,e.zb(n,48).ngClassValid,e.zb(n,48).ngClassInvalid,e.zb(n,48).ngClassPending),l(n,56,0,e.zb(n,58).required?"":null,e.zb(n,63).ngClassUntouched,e.zb(n,63).ngClassTouched,e.zb(n,63).ngClassPristine,e.zb(n,63).ngClassDirty,e.zb(n,63).ngClassValid,e.zb(n,63).ngClassInvalid,e.zb(n,63).ngClassPending),l(n,69,0,e.zb(n,71).required?"":null,e.zb(n,76).ngClassUntouched,e.zb(n,76).ngClassTouched,e.zb(n,76).ngClassPristine,e.zb(n,76).ngClassDirty,e.zb(n,76).ngClassValid,e.zb(n,76).ngClassInvalid,e.zb(n,76).ngClassPending)})}var bn=t("vejM"),mn=t("ZMwR"),hn=t("QBpm"),fn=function(){function l(l){this.rows=new Map,this.nextColumn=0,this.sorted=!0,null!=l&&(this.sorted=l)}return Object.defineProperty(l.prototype,"width",{get:function(){return this.nextColumn},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"size",{get:function(){return this.rows.size},enumerable:!0,configurable:!0}),l.prototype.append=function(l,n){this.put(l,n,this.nextColumn)},l.prototype.put=function(l,n,t){this._put(l,n,t),this.nextColumn=Math.max(this.nextColumn,t+1)},l.prototype.putColumn=function(l,n,t){var e=this;l.forEach(function(l,u){e._put(l,n[u],t)}),this.nextColumn=Math.max(this.nextColumn,t+1)},l.prototype.appendColumn=function(l,n){this.putColumn(l,n,this.nextColumn)},l.prototype.getValue=function(l,n){var t=this.rows.get(l);return t?t[n]:void 0},l.prototype.getRow=function(l){return this.rows.get(l)},l.prototype.forEach=function(l){var n=this;this.keys().forEach(function(t,e){var u={key:t,columns:n.rows.get(t)};l(u,e,n)})},l.prototype.forEachFlat=function(l){var n=this;this.keys().forEach(function(t,e){var u=[t].concat(n.rows.get(t));l(u,e,n)})},l.prototype.keys=function(){return this.sorted?Array.from(this.rows.keys()).sort(function(l,n){return l==n?0:l<n?-1:1}):Array.from(this.rows.keys())},l.prototype._put=function(l,n,t){var e=this.rows.get(l);e||this.rows.set(l,e=[]),e[t]=n},l}(),gn=function(){function l(){this.SEP=","}return l.prototype.renderCSVTable=function(l,n,t){var e=this.prepareHeaders(t,n);this.appendDataLabels(e,l);var u=this.prepareDataTable(l);return this.mapToString(e,this.SEP)+this.mapToString(u,this.SEP)},l.prototype.prepareHeaders=function(l,n){var t=this.prepareExpHeaders(l);return this.appendDataProperties(t,n),t},l.prototype.prepareExpHeaders=function(l){var n=new fn(!1);return n.put("Exp Id:",""+l.id,0),n.put("Exp URL:","https://biodare2.ed.ac.uk/experiment/"+l.id,0),n.put("Exp Name:",l.name,0),l.contributionDesc.authors.forEach(function(l,t){n.put("Authors:",l.name,t)}),n},l.prototype.appendDataProperties=function(l,n){l.put("Detrending:",n.detrending.label,0),l.put("Normalization:",n.normalisation,0),l.put("Align:",n.align,0)},l.prototype.appendDataLabels=function(l,n){n.forEach(function(n,t){l.put("Label:",n.label,t)})},l.prototype.prepareDataTable=function(l){var n=new fn;return l.forEach(function(l){var t=l.data.map(function(l){return l.x}),e=l.data.map(function(l){return l.y});n.appendColumn(t,e)}),n},l.prototype.mapToString=function(l,n){var t="";return l.forEachFlat(function(l){for(var e=0;e<l.length;e++)void 0!==l[e]&&(t+=l[e]),t+=n;t+="\n"}),t},l}(),vn=t("ZC3s"),yn=t("Gi3i"),Cn=t("JEAp"),wn=function(l){function n(n,t,e,u){var o=l.call(this,u)||this;return o.tsdataService=n,o.RDMSocial=t,o.analytics=e,o.timeseries=[],o.tracesPerPlot=5,o.blocked=!1,o.disabledSecondary=!1,o.csvExporter=new gn,o.titlePart=" Data",o.fetcher=new hn.a(n,u.currentExperiment,u.feedback),o}return b.__extends(n,l),n.prototype.ngOnInit=function(){var n=this;l.prototype.ngOnInit.call(this),this.timeSeriesSubsripction=this.fetcher.seriesPackStream.pipe(Object(yn.a)(1e3)).subscribe(function(l){var t=l.data;n.currentParams=l.params,n.exportURL=n.tsdataService.exportURL(n.assay,l.params),n.timeseries=t,n.tracesPerPlot=Math.max(5,t.length/20),n.analytics.experimentDataViev(n.assay.id)},function(l){console.log("Error in TS subscription: "+l),n.feedback.error(l)},function(){return console.log("Timeseries stream finished")})},n.prototype.ngOnDestroy=function(){this.timeSeriesSubsripction&&this.timeSeriesSubsripction.unsubscribe(),this.fetcher.ngOnDestroy(),l.prototype.ngOnDestroy.call(this)},n.prototype.displayChanged=function(l){this.fetcher.changeDisplayParams(l)},n.prototype.exportData=function(){var l=this.csvExporter.renderCSVTable(this.timeseries,this.currentParams,this.assay),n=new Blob([l],{type:"text/csv"});Cn.saveAs(n,this.assay.id+"_data."+this.currentParams.detrending.name+".csv"),this.recordExport()},n.prototype.recordExport=function(){this.analytics.experimentDataExport(this.assay.id)},n.prototype.updateModel=function(n){var t=this;this.RDMSocial.canProceedByMeasurement(n).then(function(l){t.disabledSecondary=!l}),l.prototype.updateModel.call(this,n)},n}(m.a),zn=e.nb({encapsulation:2,styles:[],data:{}});function En(l){return e.Jb(0,[(l()(),e.pb(0,0,null,null,5,"alert",[["type","danger"]],null,null,null,o.c,o.b)),e.ob(1,114688,null,0,s.a,[s.b,e.h],{type:[0,"type"]},null),(l()(),e.Hb(-1,0,["Please complete "])),(l()(),e.pb(3,0,null,0,1,"a",[],null,[[null,"click"]],function(l,n,t){var e=!0,u=l.component;return"click"===n&&(e=!1!==u.goToExpEdit(u.assay.id,"MeasurementSection")&&e),e},null,null)),(l()(),e.Hb(-1,null,["Measurement details"])),(l()(),e.Hb(-1,0,[" to get access to the secondary data "]))],function(l,n){l(n,1,0,"danger")},null)}function Dn(l){return e.Jb(0,[(l()(),e.pb(0,0,null,null,5,"div",[],null,null,null,null,null)),(l()(),e.pb(1,0,null,null,3,"h4",[],null,null,null,null,null)),(l()(),e.Hb(-1,null,["Export data "])),(l()(),e.pb(3,0,null,null,1,"a",[["class","btn btn-primary"],["download",""],["role","button"]],null,[[null,"click"]],function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.exportData()&&e),e},null,null)),(l()(),e.Hb(-1,null,["Download"])),(l()(),e.pb(5,0,null,null,0,"hr",[],null,null,null,null,null))],null,null)}function Tn(l){return e.Jb(0,[(l()(),e.pb(0,0,null,null,1,"bd2-ts-plots",[],null,null,null,Zl.b,Zl.a)),e.ob(1,114688,null,0,Ql.a,[],{tracesPerPlot:[0,"tracesPerPlot"],data:[1,"data"]},null)],function(l,n){var t=n.component;l(n,1,0,t.tracesPerPlot,t.timeseries)},null)}function On(l){return e.Jb(0,[(l()(),e.pb(0,0,null,null,1,"h3",[],null,null,null,null,null)),(l()(),e.Hb(-1,null,["Show timeseries"])),(l()(),e.pb(2,0,null,null,0,"hr",[],null,null,null,null,null)),(l()(),e.pb(3,0,null,null,1,"bd2-tsdisplay-params-rform",[],null,[[null,"displayParams"]],function(l,n,t){var e=!0;return"displayParams"===n&&(e=!1!==l.component.displayChanged(t)&&e),e},dn,an)),e.ob(4,114688,null,0,rn,[a.f],{disabled:[0,"disabled"]},{displayParams:"displayParams"}),(l()(),e.gb(16777216,null,null,1,null,En)),e.ob(6,16384,null,0,c.l,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.pb(7,0,null,null,0,"hr",[],null,null,null,null,null)),(l()(),e.pb(8,0,null,null,2,"alert",[["dismissOnTimeout","20000"],["dismissible","true"],["type","info"]],null,null,null,o.c,o.b)),e.ob(9,114688,null,0,s.a,[s.b,e.h],{type:[0,"type"],dismissible:[1,"dismissible"],dismissOnTimeout:[2,"dismissOnTimeout"]},null),(l()(),e.Hb(-1,0,[" Hint: You can click on trace label box to remove it from the plot. "])),(l()(),e.gb(16777216,null,null,1,null,Dn)),e.ob(12,16384,null,0,c.l,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.gb(16777216,null,null,1,null,Tn)),e.ob(14,16384,null,0,c.l,[e.O,e.L],{ngIf:[0,"ngIf"]},null)],function(l,n){var t=n.component;l(n,4,0,t.disabledSecondary),l(n,6,0,t.disabledSecondary),l(n,9,0,"info","true","20000"),l(n,12,0,t.timeseries&&t.exportURL),l(n,14,0,t.timeseries)},null)}function kn(l){return e.Jb(0,[(l()(),e.pb(0,0,null,null,1,"ng-component",[],null,null,null,On,zn)),e.ob(1,245760,null,0,wn,[vn.a,bn.a,mn.a,y.a],null,null)],function(l,n){l(n,1,0)},null)}var In=e.lb("ng-component",wn,kn,{},{},[]),xn=t("O6Xb"),Mn=t("YiFe"),Rn=t("Zseb"),Sn=t("a6j2"),An=function(){return function(){}}();t.d(n,"TsDataModuleNgFactory",function(){return Nn});var Nn=e.mb(u,[],function(l){return e.wb([e.xb(512,e.j,e.bb,[[8,[o.a,i.a,i.b,r.a,S,Yl,In]],[3,e.j],e.x]),e.xb(4608,c.n,c.m,[e.u,[2,c.w]]),e.xb(4608,a.D,a.D,[]),e.xb(4608,a.f,a.f,[]),e.xb(1073742336,c.c,c.c,[]),e.xb(1073742336,a.A,a.A,[]),e.xb(1073742336,a.j,a.j,[]),e.xb(1073742336,s.c,s.c,[]),e.xb(1073742336,B.e,B.e,[]),e.xb(1073742336,xn.a,xn.a,[]),e.xb(1073742336,Mn.a,Mn.a,[]),e.xb(1073742336,a.w,a.w,[]),e.xb(1073742336,Rn.b,Rn.b,[]),e.xb(1073742336,Sn.a,Sn.a,[]),e.xb(1073742336,jl.o,jl.o,[[2,jl.u],[2,jl.l]]),e.xb(1073742336,An,An,[]),e.xb(1073742336,u,u,[]),e.xb(1024,jl.j,function(){return[[{path:"",children:[{path:"upload",component:E},{path:"ts-import/:format/:fileId",component:Jl},{path:"view/ts",component:wn}]}]]},[])])})},kKfy:function(l,n,t){"use strict";t.d(n,"a",function(){return u});var e=t("RkHi"),u=function(){function l(){}return Object.defineProperty(l.prototype,"name",{get:function(){return this.grantNr?this.institution.name+" ["+this.grantNr+"]":this.institution.name},enumerable:!0,configurable:!0}),l.deserialize=function(n){var t=new l;return t.institution=e.a.deserialize(n.institution),t.grantNr=n.grantNr,t},l}()},vejM:function(l,n,t){"use strict";t.d(n,"a",function(){return o});var e=t("UsWK"),u=t("CcnG"),o=function(){function l(l){this.BD2REST=l,this.visited=new Set,console.log("RDMSocialServiceService created")}return l.prototype.getAssayGuiAspects=function(l){var n=this;return this.BD2REST.rdmAssayGuiAspects(l).then(function(t){return n.visited.add(l.id),t})},l.prototype.shouldShowMeasurementWarning=function(l){return l.security.isOwner?this.visited.has(l.id)?Promise.resolve(!1):this.getAssayGuiAspects(l).then(function(l){return l.showMeasurementWarning}):Promise.resolve(!1)},l.prototype.registerNewAssay=function(l){this.visited.add(l.id)},l.prototype.registerMeasurementWarning=function(l){this.BD2REST.rdmRegisterWarning(l,"MEASUREMENT").then(function(l){return!0})},l.prototype.canProceedByMeasurement=function(l){return l.security.isOwner?this.getAssayGuiAspects(l).then(function(l){return l.canProceedByMeasurement}):Promise.resolve(!0)},l.ngInjectableDef=u.S({factory:function(){return new l(u.W(e.a))},token:l,providedIn:"root"}),l}()},y9VC:function(l,n,t){"use strict";t.d(n,"a",function(){return e});var e=function(){function l(){}return l.deserialize=function(n){var t=new l;return t.hasTSData=n.hasTSData,t.hasPPAJobs=n.hasPPAJobs,t.hasDataFiles=n.hasDataFiles,t.hasAttachments=n.hasAttachments,t.attachmentsSize=n.attachmentsSize,t.isOpenAccess=n.isOpenAccess,t.licence=n.licence,t},l}()},zrmi:function(l,n,t){"use strict";t.d(n,"b",function(){return e}),t.d(n,"a",function(){return u});var e=function(){function l(l,n,t,e){this.name=l,this.value=n,this.label=t,this.unit=e,null!=t&&null!=t||(this.label=l)}return l.deserialize=function(n){var t=new l;return t.setAll(n),t},l.prototype.setAll=function(l){this.name=l.name,this.value=l.value,this.label=l.label,this.unit=l.unit},l}(),u=function(){function l(){this.parameters=new Map}return l.deserialize=function(n){var t=new l;return n.forEach(function(l){return t.set(e.deserialize(l))}),t},l.prototype.set=function(l){this.parameters.set(l.name,l)},l.prototype.get=function(l){return this.parameters.get(l)},l.prototype.toJSON=function(){var l=[];return this.parameters.forEach(function(n){return l.push(n)}),l},l.prototype.clone=function(){var n=new l;return this.parameters.forEach(function(l){return n.set(l)}),n},l}()}}]);