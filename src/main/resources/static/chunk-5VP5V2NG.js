import{a as b}from"./chunk-URHLGKLM.js";import{j as l,k as x}from"./chunk-VDA2LVPM.js";import{Da as h,R as n,U as s,_ as m,cc as u,j as a,kc as f,sa as p,z as c}from"./chunk-BWZCNJMV.js";var g=1,d=(()=>{let e=class e{constructor(){this.experimentStream=new a(null),this.id=g++}close(){this.experimentStream.complete()}experiment(){return this.experimentStream}push(t){this.experimentStream.next(t)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=n({token:e,factory:e.\u0275fac});let i=e;return i})();var E=(()=>{let e=class e{constructor(t,r,o,v,y){this.experimentService=t,this.currentExperiment=r,this.feedback=o,this.titleSetter=v,this.router=y}};e.\u0275fac=function(r){return new(r||e)(s(l),s(d),s(f),s(b),s(u))},e.\u0275prov=n({token:e,factory:e.\u0275fac});let i=e;return i})();var O=(()=>{let e=class e extends x{constructor(t){super(),this.serviceDependencies=t,this.experimentService=t.experimentService,this.currentExperiment=t.currentExperiment,this.feedback=t.feedback,this.router=t.router,this.titleSetter=t.titleSetter,this.titlePart=""}ngOnInit(){this.subscribeToExperiment()}ngOnDestroy(){this.unsubscribeFromExperiment()}getModel(){return this.assay}updateModel(t){this.assay=t,this.setTitle()}setTitle(){this.titleSetter.setTitle("Exp "+this.assay.id+this.titlePart)}subscribeToExperiment(){this.expSubscription=this.currentExperiment.experiment().pipe(c(t=>!!t)).subscribe(t=>{this.updateModel(t)},t=>this.feedback.error(t),()=>console.log(this.constructor.name+" expSubscription completed"))}refreshModel(){return this.experimentService.getExperiment(this.assay.id).then(t=>(this.currentExperiment.push(t),t))}unsubscribeFromExperiment(){this.expSubscription&&this.expSubscription.unsubscribe()}expHomePath(t){return t=t||this.assay.id,["/experiment",t]}goToExpHome(t){this.router.navigate(this.expHomePath(t))}goToExpEdit(t,r){let o=this.expHomePath(t);o.push("edit"),r?this.router.navigate(o,{fragment:r}):this.router.navigate(o)}};e.\u0275fac=function(r){return new(r||e)(p(E))},e.\u0275dir=m({type:e,features:[h]});let i=e;return i})();export{d as a,E as b,O as c};
