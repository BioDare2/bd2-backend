import{e as d}from"./chunk-7XF6BO2U.js";var b=(()=>{if(typeof self>"u")return!1;if(!("top"in self&&self!==top)){if("showOpenFilePicker"in self)return"showOpenFilePicker"}return!1})(),N=b?Promise.resolve().then(function(){return L}):Promise.resolve().then(function(){return R});var D=b?Promise.resolve().then(function(){return x}):Promise.resolve().then(function(){return F});var _=b?Promise.resolve().then(function(){return T}):Promise.resolve().then(function(){return M});function H(...e){return d(this,null,function*(){return(yield _).default(...e)})}var A=e=>d(null,null,function*(){let r=yield e.getFile();return r.handle=e,r}),O=(...r)=>d(null,[...r],function*(e=[{}]){Array.isArray(e)||(e=[e]);let n=[];e.forEach((u,p)=>{n[p]={description:u.description||"Files",accept:{}},u.mimeTypes?u.mimeTypes.map(i=>{n[p].accept[i]=u.extensions||[]}):n[p].accept["*/*"]=u.extensions||[]});let a=yield window.showOpenFilePicker({id:e[0].id,startIn:e[0].startIn,types:n,multiple:e[0].multiple||!1,excludeAcceptAllOption:e[0].excludeAcceptAllOption||!1}),t=yield Promise.all(a.map(A));return e[0].multiple?t:t[0]}),L={__proto__:null,default:O};function P(e){function r(n){if(Object(n)!==n)return Promise.reject(new TypeError(n+" is not an object."));var a=n.done;return Promise.resolve(n.value).then(function(t){return{value:t,done:a}})}return P=function(n){this.s=n,this.n=n.next},P.prototype={s:null,n:null,next:function(){return r(this.n.apply(this.s,arguments))},return:function(n){var a=this.s.return;return a===void 0?Promise.resolve({value:n,done:!0}):r(a.apply(this.s,arguments))},throw:function(n){var a=this.s.return;return a===void 0?Promise.reject(n):r(a.apply(this.s,arguments))}},new P(e)}var k=(t,u,...p)=>d(null,[t,u,...p],function*(e,r,n=e.name,a){let i=[],o=[];var s,y=!1,l=!1;try{for(var f,h=function(c){var w,m,v,g=2;for(typeof Symbol<"u"&&(m=Symbol.asyncIterator,v=Symbol.iterator);g--;){if(m&&(w=c[m])!=null)return w.call(c);if(v&&(w=c[v])!=null)return new P(w.call(c));m="@@asyncIterator",v="@@iterator"}throw new TypeError("Object is not async iterable")}(e.values());y=!(f=yield h.next()).done;y=!1){let c=f.value,w=`${n}/${c.name}`;c.kind==="file"?o.push(c.getFile().then(m=>(m.directoryHandle=e,m.handle=c,Object.defineProperty(m,"webkitRelativePath",{configurable:!0,enumerable:!0,get:()=>w})))):c.kind!=="directory"||!r||a&&a(c)||i.push(k(c,r,w,a))}}catch(c){l=!0,s=c}finally{try{y&&h.return!=null&&(yield h.return())}finally{if(l)throw s}}return[...(yield Promise.all(i)).flat(),...yield Promise.all(o)]}),E=(...r)=>d(null,[...r],function*(e={}){e.recursive=e.recursive||!1,e.mode=e.mode||"read";let n=yield window.showDirectoryPicker({id:e.id,startIn:e.startIn,mode:e.mode});return k(n,e.recursive,void 0,e.skipDirectory)}),x={__proto__:null,default:E},S=(u,...p)=>d(null,[u,...p],function*(e,r=[{}],n=null,a=!1,t=null){Array.isArray(r)||(r=[r]),r[0].fileName=r[0].fileName||"Untitled";let i=[],o=null;if(e instanceof Blob&&e.type?o=e.type:e.headers&&e.headers.get("content-type")&&(o=e.headers.get("content-type")),r.forEach((l,f)=>{i[f]={description:l.description||"Files",accept:{}},l.mimeTypes?(f===0&&o&&l.mimeTypes.push(o),l.mimeTypes.map(h=>{i[f].accept[h]=l.extensions||[]})):o?i[f].accept[o]=l.extensions||[]:i[f].accept["*/*"]=l.extensions||[]}),n)try{yield n.getFile()}catch(l){if(n=null,a)throw l}let s=n||(yield window.showSaveFilePicker({suggestedName:r[0].fileName,id:r[0].id,startIn:r[0].startIn,types:i,excludeAcceptAllOption:r[0].excludeAcceptAllOption||!1}));!n&&t&&t(s);let y=yield s.createWritable();return"stream"in e?(yield e.stream().pipeTo(y),s):"body"in e?(yield e.body.pipeTo(y),s):(yield y.write(yield e),yield y.close(),s)}),T={__proto__:null,default:S},I=(...r)=>d(null,[...r],function*(e=[{}]){return Array.isArray(e)||(e=[e]),new Promise((n,a)=>{let t=document.createElement("input");t.type="file";let u=[...e.map(s=>s.mimeTypes||[]),...e.map(s=>s.extensions||[])].join();t.multiple=e[0].multiple||!1,t.accept=u||"",t.style.display="none",document.body.append(t);let p=s=>{typeof i=="function"&&i(),n(s)},i=e[0].legacySetup&&e[0].legacySetup(p,()=>i(a),t),o=()=>{window.removeEventListener("focus",o),t.remove()};t.addEventListener("click",()=>{window.addEventListener("focus",o)}),t.addEventListener("change",()=>{window.removeEventListener("focus",o),t.remove(),p(t.multiple?Array.from(t.files):t.files[0])}),"showPicker"in HTMLInputElement.prototype?t.showPicker():t.click()})}),R={__proto__:null,default:I},j=(...r)=>d(null,[...r],function*(e=[{}]){return Array.isArray(e)||(e=[e]),e[0].recursive=e[0].recursive||!1,new Promise((n,a)=>{let t=document.createElement("input");t.type="file",t.webkitdirectory=!0;let u=i=>{typeof p=="function"&&p(),n(i)},p=e[0].legacySetup&&e[0].legacySetup(u,()=>p(a),t);t.addEventListener("change",()=>{let i=Array.from(t.files);e[0].recursive?e[0].recursive&&e[0].skipDirectory&&(i=i.filter(o=>o.webkitRelativePath.split("/").every(s=>!e[0].skipDirectory({name:s,kind:"directory"})))):i=i.filter(o=>o.webkitRelativePath.split("/").length===2),u(i)}),"showPicker"in HTMLInputElement.prototype?t.showPicker():t.click()})}),F={__proto__:null,default:j},U=(n,...a)=>d(null,[n,...a],function*(e,r={}){Array.isArray(r)&&(r=r[0]);let t=document.createElement("a"),u=e;"body"in e&&(u=yield function(o,s){return d(this,null,function*(){let y=o.getReader(),l=new ReadableStream({start:c=>function w(){return d(this,null,function*(){return y.read().then(({done:m,value:v})=>{if(!m)return c.enqueue(v),w();c.close()})})}()}),f=new Response(l),h=yield f.blob();return y.releaseLock(),new Blob([h],{type:s})})}(e.body,e.headers.get("content-type"))),t.download=r.fileName||"Untitled",t.href=URL.createObjectURL(yield u);let p=()=>{typeof i=="function"&&i()},i=r.legacySetup&&r.legacySetup(p,()=>i(),t);return t.addEventListener("click",()=>{setTimeout(()=>URL.revokeObjectURL(t.href),3e4),p()}),t.click(),null}),M={__proto__:null,default:U};export{H as a};
