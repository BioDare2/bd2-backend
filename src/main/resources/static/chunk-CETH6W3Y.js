import{a as l}from"./chunk-DU6TVA5I.js";import{j as f,k as x}from"./chunk-7IZ7EKZI.js";import{a as u}from"./chunk-HHT4WFKW.js";import{B as a,Da as m,Oa as c,Pa as p,X as n,_ as r,k as o,uc as h}from"./chunk-6AXKXNFK.js";var y=1,S=(()=>{class e{constructor(){this.experimentStream=new o(null),this.id=y++}close(){this.experimentStream.complete()}experiment(){return this.experimentStream}push(t){this.experimentStream.next(t)}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=n({token:e,factory:e.\u0275fac})}}return e})();var d=(()=>{class e{constructor(t,i,s,E,v){this.experimentService=t,this.currentExperiment=i,this.feedback=s,this.titleSetter=E,this.router=v}static{this.\u0275fac=function(i){return new(i||e)(r(f),r(S),r(u),r(l),r(h))}}static{this.\u0275prov=n({token:e,factory:e.\u0275fac})}}return e})();var H=(()=>{class e extends x{constructor(t){super(),this.serviceDependencies=t,this.experimentService=t.experimentService,this.currentExperiment=t.currentExperiment,this.feedback=t.feedback,this.router=t.router,this.titleSetter=t.titleSetter,this.titlePart=""}ngOnInit(){this.subscribeToExperiment()}ngOnDestroy(){this.unsubscribeFromExperiment()}getModel(){return this.assay}updateModel(t){this.assay=t,this.setTitle()}setTitle(){this.titleSetter.setTitle("Exp "+this.assay.id+this.titlePart)}subscribeToExperiment(){this.expSubscription=this.currentExperiment.experiment().pipe(a(t=>!!t)).subscribe(t=>{this.updateModel(t)},t=>this.feedback.error(t),()=>console.log(this.constructor.name+" expSubscription completed"))}refreshModel(){return this.experimentService.getExperiment(this.assay.id).then(t=>(this.currentExperiment.push(t),t))}unsubscribeFromExperiment(){this.expSubscription&&this.expSubscription.unsubscribe()}expHomePath(t){return t=t||this.assay.id,["/experiment",t]}goToExpHome(t){this.router.navigate(this.expHomePath(t))}goToExpEdit(t,i){let s=this.expHomePath(t);s.push("edit"),i?this.router.navigate(s,{fragment:i}):this.router.navigate(s)}static{this.\u0275fac=function(i){return new(i||e)(m(d))}}static{this.\u0275dir=c({type:e,features:[p]})}}return e})();export{S as a,d as b,H as c};
