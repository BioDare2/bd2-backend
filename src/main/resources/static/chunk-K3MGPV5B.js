import{c as q}from"./chunk-ZV7YAFTP.js";import{e as Q}from"./chunk-6UWHHRT4.js";import{F as B,a as R}from"./chunk-LPDAYVF7.js";import{Aa as D,Ab as w,Bb as _,Ca as l,Cb as W,Da as T,Lb as O,Ma as x,Na as V,Nb as j,Sa as f,Wa as p,Xa as k,Y as I,Ya as A,ac as y,bc as b,db as r,ea as u,eb as s,ec as L,fa as g,fb as M,gc as P,jb as h,la as E,mb as m,ob as c,rb as v,tb as N,ub as z,vb as U,zb as a}from"./chunk-Z4WVEEB6.js";var F=class t{static{this.NONE=new t("NONE")}static{this.FILE=new t("FILE")}static{this.MEDIA=new t("MEDIA")}static{this.DATA=new t("DATA")}static{this.TS_DATA=new t("TS_DATA")}static{this.values=[t.NONE,t.FILE,t.MEDIA,t.DATA,t.TS_DATA]}static{this.valuesMap=t.initValuesMap()}constructor(i){this.name=i}static deserialize(i){if(i==null)return null;let e=t.valuesMap.get(i);if(e)return e;let o=+i;if(o<0||o>=t.values.length||Number.isNaN(o))throw new RangeError("Uknown AssetType "+i);return t.values[o]}static initValuesMap(){let i=new Map;return t.values.forEach(e=>i.set(e.name,e)),i}equals(i){return this.name===i.name}toJSON(){return this.name}};var S=class{static deserialize(i){return i.created=q.deserialize(i.created),i}};var C=class t{constructor(){this.assetType=F.NONE,this.versions=[]}get last(){return this.versions[0]}static deserialize(i){let e=new t;return e.id=i.id,e.originalName=i.originalName,e.url=i.url,e.assetType=F.deserialize(i.assetType),i.versions&&(e.versions=i.versions.map(o=>S.deserialize(o))),e}setAll(i){this.id=i.id,this.originalName=i.originalName,this.assetType=i.assetType,this.url=i.url,this.versions=i.versions}};function X(t,i){if(t&1&&(r(0,"div"),a(1),s()),t&2){let e=c(2);l(),w(e.file.last.description)}}function Y(t,i){if(t&1){let e=h();r(0,"li"),a(1),O(2,"date"),r(3,"strong")(4,"a",4),m("click",function(){u(e);let n=c(3);return g(n.recordDownload())}),a(5),s()(),M(6,"br"),a(7),s()}if(t&2){let e=i.$implicit;l(),W(" Version ",e.versionId,". ",j(2,6,e.created.date,"shortDate")," "),l(3),v("href",e.url,D),v("download",e.originalName),l(),w(e.originalName),l(2),_("",e.description," ")}}function Z(t,i){if(t&1&&(r(0,"div")(1,"ul",5),f(2,Y,8,9,"li",6),s()()),t&2){let e=c(2);l(2),p("ngForOf",e.file.versions)}}function $(t,i){if(t&1){let e=h();r(0,"div")(1,"div",1),a(2),r(3,"a",2),m("click",function(){u(e);let n=c();return g(n.showVersions=!n.showVersions)}),r(4,"i",3),a(5,"expand_more"),s()()(),r(6,"h5")(7,"a",4),m("click",function(){u(e);let n=c();return g(n.recordDownload())}),a(8),s()(),f(9,X,2,1,"div",0)(10,Z,3,1,"div",0),s()}if(t&2){let e=c();l(2),_(" ",e.file.versions.length," versions "),l(5),v("href",e.file.url,D),v("download",e.file.last.originalName),l(),w(e.file.last.originalName),l(),p("ngIf",e.file.last.description),l(),p("ngIf",e.showVersions)}}var _e=(()=>{class t{constructor(e){this.analytics=e,this.canEdit=!0,this.showVersions=!1,this.edit=!1,this.model=this.fakeFileAsset()}set model(e){this.file=e}ngOnInit(){}fakeFileAsset(){let o=JSON.parse(`{
      "id" : 2,
      "originalName" : "f2",
      "assetType" : "TS_DATA",
      "versions" : [ {
        "versionId" : 2,
        "localFile" : "cos2",
        "originalName" : "f2",
        "contentType" : "txt",
        "description" : "Some description",
        "created" : [ 2016, 12, 8 ]
      }, {
        "versionId" : 1,
        "localFile" : "cos2",
        "originalName" : "f2",
        "contentType" : "txt",
        "description" : null,
        "created" : [ 2016, 12, 8 ]
      } ]
    }`);return C.deserialize(o)}recordDownload(){this.analytics.fileDownload(this.parentId.toString(),this.file.id)}static{this.\u0275fac=function(o){return new(o||t)(T(R))}}static{this.\u0275cmp=x({type:t,selectors:[["bd2-file-asset-view"]],inputs:{canEdit:"canEdit",parentId:"parentId",model:"model"},standalone:!1,decls:1,vars:1,consts:[[4,"ngIf"],[1,"float-right"],["role","button","aria-label","expand",3,"click"],[1,"material-icons","bd-icon"],[3,"click","href","download"],[1,"list-unstyled"],[4,"ngFor","ngForOf"]],template:function(o,n){o&1&&f(0,$,11,6,"div",0),o&2&&p("ngIf",n.file&&n.file.last)},dependencies:[y,b,L],encapsulation:2})}}return t})();var ne=["inputFieldM"];function oe(t,i){if(t&1){let e=h();r(0,"div",12),a(1),r(2,"button",13),m("click",function(){let n=u(e).$implicit,d=c(2);return g(d.remove(n))}),r(3,"span",14),a(4,"\xD7"),s()()()}if(t&2){let e=i.$implicit;l(),_(" ",e.name," ")}}function le(t,i){if(t&1&&(r(0,"div",9)(1,"div",10)(2,"label"),a(3,"Files:"),s()(),f(4,oe,5,1,"div",11),s()),t&2){let e=c();l(4),p("ngForOf",e.files)}}function re(t,i){if(t&1){let e=h();r(0,"input",15,0),m("change",function(n){u(e);let d=c();return g(d.handleFileSelect(n))}),s()}}function se(t,i){if(t&1){let e=h();r(0,"input",16,0),m("change",function(n){u(e);let d=c();return g(d.handleFileSelect(n))}),s()}}function ae(t,i){if(t&1&&(r(0,"div",17),a(1),s()),t&2){let e=c();l(),_(" Maximum upload size is ",e.sizeLimit,"MB ")}}var Ve=(()=>{class t{constructor(){this.activeColor="green",this.baseColor="#ccc",this.overlayColor="rgba(255,255,255,0.5)",this.blocked=!1,this.multiple=!0,this.noDuplicates=!0,this.autoReset=!1,this.sizeLimit=50,this.uploadFiles=new E,this.selectedFiles=new E,this.dragging=!1,this.loaded=!1,this.sizeError=!1,this.files=[]}ngOnInit(){}reset(){this.files=[],this.inputField&&this.inputField.nativeElement&&(this.inputField.nativeElement.value="")}handleDragEnter(){this.dragging=!0}handleDragLeave(){this.dragging=!1}handleDrop(e){e.preventDefault(),this.dragging=!1,e.dataTransfer&&this.handleFileChange(e.dataTransfer.files)}handleFileSelect(e){e.target&&this.handleFileChange(e.target.files)}handleFileChange(e){let o=this.multiple?e.length:Math.min(1,e.length);this.multiple||(this.files=[]);for(let n=0;n<o;n++){let d=e[n];this.noDuplicates&&this.removeDuplicate(d),this.files.push(d)}this.checkSize(),this.selectedFiles.next(this.files)}remove(e){Q(e,this.files),this.checkSize()}removeDuplicate(e){let o=this.files.find(n=>n.name===e.name);this.remove(o)}checkSize(){let e=0;this.files.map(o=>o.size).forEach(o=>e+=o),e=e/(1024*1024),this.sizeError=e>this.sizeLimit}upload(){this.uploadFiles.next(this.files),this.autoReset&&this.reset()}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275cmp=x({type:t,selectors:[["bd2-file-upload-widget"]],viewQuery:function(o,n){if(o&1&&N(ne,5),o&2){let d;z(d=U())&&(n.inputField=d.first)}},inputs:{activeColor:"activeColor",baseColor:"baseColor",overlayColor:"overlayColor",blocked:"blocked",multiple:"multiple",noDuplicates:"noDuplicates",autoReset:"autoReset",sizeLimit:"sizeLimit"},outputs:{uploadFiles:"uploadFiles",selectedFiles:"selectedFiles"},standalone:!1,decls:13,vars:9,consts:[["inputField",""],["class","clearfix","style","margin-bottom: 1em;",4,"ngIf"],[2,"margin-bottom","1em"],["ondragover","return false;",1,"uploader-zone",3,"dragenter","dragleave","drop"],[1,"material-icons","bd-icon","bd-primary",2,"font-size","400%"],["multiple","","name","inputField","type","file",3,"change",4,"ngIf"],["name","inputField","type","file",3,"change",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],["type","button",1,"btn","btn-primary","btn-sm",3,"click","disabled"],[1,"clearfix",2,"margin-bottom","1em"],[1,""],["class","float-left fileitem",4,"ngFor","ngForOf"],[1,"float-left","fileitem"],["aria-label","Close","type","button",1,"close",2,"margin-left","0.5em",3,"click"],["aria-hidden","true"],["multiple","","name","inputField","type","file",3,"change"],["name","inputField","type","file",3,"change"],[1,"alert","alert-danger"]],template:function(o,n){o&1&&(r(0,"div"),f(1,le,5,1,"div",1),r(2,"div",2)(3,"label",3),m("dragenter",function(){return n.handleDragEnter()})("dragleave",function(){return n.handleDragLeave()})("drop",function(H){return n.handleDrop(H)}),r(4,"i",4),a(5,"cloud_upload"),s(),r(6,"p"),a(7," Drag file(s) or click to select"),s(),f(8,re,2,0,"input",5)(9,se,2,0,"input",6),s()(),f(10,ae,2,1,"div",7),r(11,"button",8),m("click",function(){return n.upload()}),a(12,"Upload selected "),s()()),o&2&&(l(),p("ngIf",n.files.length>0),l(2),k("outline-color",n.dragging?n.activeColor:n.baseColor),A("loaded",n.loaded),l(5),p("ngIf",n.multiple),l(),p("ngIf",!n.multiple),l(),p("ngIf",n.sizeError),l(),p("disabled",n.blocked||n.files.length<1||n.sizeError))},dependencies:[y,b],styles:[".uploader-zone[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}.uploader-zone[_ngcontent-%COMP%]{font-weight:400;-webkit-align-items:center;align-items:center;background-color:#efefef;background-color:#00000005;cursor:pointer;display:-webkit-flex;display:flex;height:100px;-webkit-justify-content:center;justify-content:center;outline:3px dashed #ccc}div.fileitem[_ngcontent-%COMP%]{margin:2px;padding:2px;border:1px solid #efefef;border-radius:4px}"]})}}return t})();var Re=(()=>{class t{static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275mod=V({type:t})}static{this.\u0275inj=I({imports:[P,B]})}}return t})();export{F as a,C as b,_e as c,Ve as d,Re as e};
