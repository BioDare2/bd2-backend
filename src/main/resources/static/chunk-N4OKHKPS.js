import{c as G}from"./chunk-JPGREJS7.js";import{e as J}from"./chunk-BLUZNFO7.js";import{E as Q,a as q}from"./chunk-CF7GQVNH.js";import{Ab as L,Cb as P,Ia as g,Ka as m,La as N,Ma as A,Qb as S,Rb as E,S as V,Ta as s,Ua as d,Ub as R,Va as z,Wb as B,Y as b,Z as T,Za as _,aa as h,ab as f,ba as v,cb as p,fb as x,ha as I,hb as U,ib as O,jb as W,nb as c,ob as y,pb as F,qa as k,qb as j,sa as a,ta as M}from"./chunk-G55OIOE6.js";var l=class l{constructor(e){this.name=e}static deserialize(e){if(e==null)return null;let t=l.valuesMap.get(e);if(t)return t;let i=+e;if(i<0||i>=l.values.length||Number.isNaN(i))throw new RangeError("Uknown AssetType "+e);return l.values[i]}static initValuesMap(){let e=new Map;return l.values.forEach(t=>e.set(t.name,t)),e}equals(e){return this.name===e.name}toJSON(){return this.name}};l.NONE=new l("NONE"),l.FILE=new l("FILE"),l.MEDIA=new l("MEDIA"),l.DATA=new l("DATA"),l.TS_DATA=new l("TS_DATA"),l.values=[l.NONE,l.FILE,l.MEDIA,l.DATA,l.TS_DATA],l.valuesMap=l.initValuesMap();var C=l;var D=class{static deserialize(e){return e.created=G.deserialize(e.created),e}};var w=class n{constructor(){this.assetType=C.NONE,this.versions=[]}get last(){return this.versions[0]}static deserialize(e){let t=new n;return t.id=e.id,t.originalName=e.originalName,t.url=e.url,t.assetType=C.deserialize(e.assetType),e.versions&&(t.versions=e.versions.map(i=>D.deserialize(i))),t}setAll(e){this.id=e.id,this.originalName=e.originalName,this.assetType=e.assetType,this.url=e.url,this.versions=e.versions}};function Z(n,e){if(n&1&&(s(0,"div"),c(1),d()),n&2){let t=p(2);a(),y(t.file.last.description)}}function $(n,e){if(n&1){let t=_();s(0,"li"),c(1),L(2,"date"),s(3,"strong")(4,"a",4),f("click",function(){h(t);let o=p(3);return v(o.recordDownload())}),c(5),d()(),z(6,"br"),c(7),d()}if(n&2){let t=e.$implicit;a(),j(" Version ",t.versionId,". ",P(2,6,t.created.date,"shortDate")," "),a(3),x("href",t.url,k),x("download",t.originalName),a(),y(t.originalName),a(2),F("",t.description," ")}}function ee(n,e){if(n&1&&(s(0,"div")(1,"ul",5),g(2,$,8,9,"li",6),d()()),n&2){let t=p(2);a(2),m("ngForOf",t.file.versions)}}function te(n,e){if(n&1){let t=_();s(0,"div")(1,"div",1),c(2),s(3,"a",2),f("click",function(){h(t);let o=p();return v(o.showVersions=!o.showVersions)}),s(4,"i",3),c(5,"expand_more"),d()()(),s(6,"h5")(7,"a",4),f("click",function(){h(t);let o=p();return v(o.recordDownload())}),c(8),d()(),g(9,Z,2,1,"div",0)(10,ee,3,1,"div",0),d()}if(n&2){let t=p();a(2),F(" ",t.file.versions.length," versions "),a(5),x("href",t.file.url,k),x("download",t.file.last.originalName),a(),y(t.file.last.originalName),a(),m("ngIf",t.file.last.description),a(),m("ngIf",t.showVersions)}}var Fe=(()=>{let e=class e{constructor(i){this.analytics=i,this.canEdit=!0,this.showVersions=!1,this.edit=!1,this.model=this.fakeFileAsset()}set model(i){this.file=i}ngOnInit(){}fakeFileAsset(){let o=JSON.parse(`{
      "id" : 2,
      "originalName" : "f2",
      "assetType" : "TS_DATA",
      "versions" : [ {
        "versionId" : 2,
        "localFile" : "cos2",
        "originalName" : "f2",
        "contentType" : "txt",
        "description" : "Some description",
        "created" : [ 2016, 12, 8 ]
      }, {
        "versionId" : 1,
        "localFile" : "cos2",
        "originalName" : "f2",
        "contentType" : "txt",
        "description" : null,
        "created" : [ 2016, 12, 8 ]
      } ]
    }`);return w.deserialize(o)}recordDownload(){this.analytics.fileDownload(this.parentId.toString(),this.file.id)}};e.\u0275fac=function(o){return new(o||e)(M(q))},e.\u0275cmp=b({type:e,selectors:[["bd2-file-asset-view"]],inputs:{canEdit:"canEdit",parentId:"parentId",model:"model"},decls:1,vars:1,consts:[[4,"ngIf"],[1,"float-right"],["role","button","aria-label","expand",3,"click"],[1,"material-icons","bd-icon"],[3,"click","href","download"],[1,"list-unstyled"],[4,"ngFor","ngForOf"]],template:function(o,r){o&1&&g(0,te,11,6,"div",0),o&2&&m("ngIf",r.file&&r.file.last)},dependencies:[S,E,R],encapsulation:2});let n=e;return n})();var re=["inputFieldM"];function le(n,e){if(n&1){let t=_();s(0,"div",12),c(1),s(2,"button",13),f("click",function(){let o=h(t).$implicit,r=p(2);return v(r.remove(o))}),s(3,"span",14),c(4,"\xD7"),d()()()}if(n&2){let t=e.$implicit;a(),F(" ",t.name," ")}}function ae(n,e){if(n&1&&(s(0,"div",9)(1,"div",10)(2,"label"),c(3,"Files:"),d()(),g(4,le,5,1,"div",11),d()),n&2){let t=p();a(4),m("ngForOf",t.files)}}function se(n,e){if(n&1){let t=_();s(0,"input",15,0),f("change",function(o){h(t);let r=p();return v(r.handleFileSelect(o))}),d()}}function de(n,e){if(n&1){let t=_();s(0,"input",16,0),f("change",function(o){h(t);let r=p();return v(r.handleFileSelect(o))}),d()}}function ce(n,e){if(n&1&&(s(0,"div",17),c(1),d()),n&2){let t=p();a(),F(" Maximum upload size is ",t.sizeLimit,"MB ")}}var Me=(()=>{let e=class e{constructor(){this.activeColor="green",this.baseColor="#ccc",this.overlayColor="rgba(255,255,255,0.5)",this.blocked=!1,this.multiple=!0,this.noDuplicates=!0,this.autoReset=!1,this.sizeLimit=50,this.uploadFiles=new I,this.selectedFiles=new I,this.dragging=!1,this.loaded=!1,this.sizeError=!1,this.files=[]}ngOnInit(){}reset(){this.files=[],this.inputField&&this.inputField.nativeElement&&(this.inputField.nativeElement.value="")}handleDragEnter(){this.dragging=!0}handleDragLeave(){this.dragging=!1}handleDrop(i){i.preventDefault(),this.dragging=!1,i.dataTransfer&&this.handleFileChange(i.dataTransfer.files)}handleFileSelect(i){i.target&&this.handleFileChange(i.target.files)}handleFileChange(i){let o=this.multiple?i.length:Math.min(1,i.length);this.multiple||(this.files=[]);for(let r=0;r<o;r++){let u=i[r];this.noDuplicates&&this.removeDuplicate(u),this.files.push(u)}this.checkSize(),this.selectedFiles.next(this.files)}remove(i){J(i,this.files),this.checkSize()}removeDuplicate(i){let o=this.files.find(r=>r.name===i.name);this.remove(o)}checkSize(){let i=0;this.files.map(o=>o.size).forEach(o=>i+=o),i=i/(1024*1024),this.sizeError=i>this.sizeLimit}upload(){this.uploadFiles.next(this.files),this.autoReset&&this.reset()}};e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=b({type:e,selectors:[["bd2-file-upload-widget"]],viewQuery:function(o,r){if(o&1&&U(re,5),o&2){let u;O(u=W())&&(r.inputField=u.first)}},inputs:{activeColor:"activeColor",baseColor:"baseColor",overlayColor:"overlayColor",blocked:"blocked",multiple:"multiple",noDuplicates:"noDuplicates",autoReset:"autoReset",sizeLimit:"sizeLimit"},outputs:{uploadFiles:"uploadFiles",selectedFiles:"selectedFiles"},decls:13,vars:9,consts:[["inputField",""],["class","clearfix","style","margin-bottom: 1em;",4,"ngIf"],[2,"margin-bottom","1em"],["ondragover","return false;",1,"uploader-zone",3,"dragenter","dragleave","drop"],[1,"material-icons","bd-icon","bd-primary",2,"font-size","400%"],["multiple","","name","inputField","type","file",3,"change",4,"ngIf"],["name","inputField","type","file",3,"change",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],["type","button",1,"btn","btn-primary","btn-sm",3,"click","disabled"],[1,"clearfix",2,"margin-bottom","1em"],[1,""],["class","float-left fileitem",4,"ngFor","ngForOf"],[1,"float-left","fileitem"],["aria-label","Close","type","button",1,"close",2,"margin-left","0.5em",3,"click"],["aria-hidden","true"],["multiple","","name","inputField","type","file",3,"change"],["name","inputField","type","file",3,"change"],[1,"alert","alert-danger"]],template:function(o,r){o&1&&(s(0,"div"),g(1,ae,5,1,"div",1),s(2,"div",2)(3,"label",3),f("dragenter",function(){return r.handleDragEnter()})("dragleave",function(){return r.handleDragLeave()})("drop",function(X){return r.handleDrop(X)}),s(4,"i",4),c(5,"cloud_upload"),d(),s(6,"p"),c(7," Drag file(s) or click to select"),d(),g(8,se,2,0,"input",5)(9,de,2,0,"input",6),d()(),g(10,ce,2,1,"div",7),s(11,"button",8),f("click",function(){return r.upload()}),c(12,"Upload selected "),d()()),o&2&&(a(),m("ngIf",r.files.length>0),a(2),N("outline-color",r.dragging?r.activeColor:r.baseColor),A("loaded",r.loaded),a(5),m("ngIf",r.multiple),a(),m("ngIf",!r.multiple),a(),m("ngIf",r.sizeError),a(),m("disabled",r.blocked||r.files.length<1||r.sizeError))},dependencies:[S,E],styles:[".uploader-zone[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}.uploader-zone[_ngcontent-%COMP%]{font-weight:400;-webkit-align-items:center;align-items:center;background-color:#efefef;background-color:#00000005;cursor:pointer;display:-webkit-flex;display:flex;height:100px;-webkit-justify-content:center;justify-content:center;outline:3px dashed #ccc}div.fileitem[_ngcontent-%COMP%]{margin:2px;padding:2px;border:1px solid #efefef;border-radius:4px}"]});let n=e;return n})();var qe=(()=>{let e=class e{};e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=T({type:e}),e.\u0275inj=V({imports:[B,Q]});let n=e;return n})();export{C as a,w as b,Fe as c,Me as d,qe as e};
