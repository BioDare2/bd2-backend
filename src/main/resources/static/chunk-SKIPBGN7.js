import{a as d}from"./chunk-EDOAR6V4.js";import{Ab as U,Bb as w,Ca as s,Cb as I,Da as v,Lb as c,Ma as m,Mb as p,Na as b,Sa as y,Wa as C,X as u,Y as g,_ as h,ac as k,bc as P,db as n,eb as o,fb as l,fc as x,gc as j,kc as S,ob as A,yc as M,zb as a}from"./chunk-AYJRCA2A.js";var F=(()=>{class t{constructor(e){this.http=e,this.backendUrl=d.backendUrl+"/analytics/data"}getAnalyticsData(){return this.http.get(this.backendUrl)}static{this.\u0275fac=function(i){return new(i||t)(h(S))}}static{this.\u0275prov=u({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function z(t,D){if(t&1&&(n(0,"tr")(1,"td"),a(2),o(),n(3,"td"),a(4),c(5,"number"),o()()),t&2){let e=D.$implicit;s(2),U(e.country),s(2),U(p(5,2,e.activeUsers))}}var _=(()=>{class t{constructor(e){this.googleanalyticsService=e,this.API_KEY=d.googleAnalyticsApiKey,this.topCountries=[]}ngOnInit(){this.fetchAnalyticsData()}fetchAnalyticsData(){this.googleanalyticsService.getAnalyticsData().subscribe(e=>{console.log("API Response:",e),this.topCountries=e.sort((i,r)=>r.activeUsers-i.activeUsers).slice(0,5),this.drawChart(e)},e=>{console.error("Error fetching analytics data:",e)})}drawChart(e){google.charts.load("current",{packages:["geochart"],mapsApiKey:this.API_KEY}),google.charts.setOnLoadCallback(()=>{let i=[["Country","Users"]];e.forEach(E=>{i.push([E.country,E.activeUsers])}),console.log("Chart Data:",i);let r=google.visualization.arrayToDataTable(i),G={colorAxis:{colors:["#9fc5e8","#4374e0"]}};new google.visualization.GeoChart(document.getElementById("chart_div")).draw(r,G)})}static{this.\u0275fac=function(i){return new(i||t)(v(F))}}static{this.\u0275cmp=m({type:t,selectors:[["bd2-google-analytics"]],standalone:!1,decls:18,vars:1,consts:[[1,"row"],[1,"col-sm-8"],["id","chart_div",2,"width","100%","height","400px"],[1,"col-sm-4"],[1,"table","table-striped"],[4,"ngFor","ngForOf"],[1,"text-right"]],template:function(i,r){i&1&&(n(0,"div")(1,"h3"),a(2,"Number of users per country"),o(),n(3,"div",0)(4,"div",1),l(5,"div",2),o(),n(6,"div",3)(7,"table",4)(8,"thead")(9,"tr")(10,"th"),a(11,"Country"),o(),n(12,"th"),a(13,"Active users"),o()()(),n(14,"tbody"),y(15,z,6,4,"tr",5),o()(),n(16,"p",6),a(17,"(last 12 months)"),o()()()()),i&2&&(s(15),C("ngForOf",r.topCountries))},dependencies:[k,x],encapsulation:2})}}return t})();var O=(()=>{class t{constructor(e){this.http=e,this.backendUrl=d.backendUrl+"/usage/get_count"}getUsageStats(){return this.http.get(this.backendUrl)}static{this.\u0275fac=function(i){return new(i||t)(h(S))}}static{this.\u0275prov=u({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function $(t,D){if(t&1&&(n(0,"div"),a(1),c(2,"number"),c(3,"number"),l(4,"br"),a(5),c(6,"number"),c(7,"number"),l(8,"br"),a(9),c(10,"number"),o()),t&2){let e=A();s(),I(" Number of experiments: ",p(2,5,e.usageStats.totalSets)," (",p(3,7,e.usageStats.totalPublicSets)," are public)."),s(4),I(" Number of timeseries: ",p(6,9,e.usageStats.totalSeries)," (",p(7,11,e.usageStats.totalPublicSeries)," are public)."),s(4),w(" Number of registered users: ",p(10,13,e.usageStats.totalUsers),`.
`)}}var B=(()=>{class t{constructor(e){this.usagestatsService=e}ngOnInit(){this.fetchUsageStats()}fetchUsageStats(){this.usagestatsService.getUsageStats().subscribe(e=>{console.log("API Response:",e),this.usageStats=e},e=>{console.error("Error fetching usage stats:",e)})}static{this.\u0275fac=function(i){return new(i||t)(v(O))}}static{this.\u0275cmp=m({type:t,selectors:[["bd2-usage-stats"]],standalone:!1,decls:1,vars:1,consts:[[4,"ngIf"]],template:function(i,r){i&1&&y(0,$,11,15,"div",0),i&2&&C("ngIf",r.usageStats)},dependencies:[P,x],encapsulation:2})}}return t})();var N=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=m({type:t,selectors:[["bd2-usage"]],standalone:!1,decls:6,vars:0,template:function(i,r){i&1&&(n(0,"div")(1,"h2"),a(2,"BioDare2 Usage Data"),o(),l(3,"bd2-usage-stats")(4,"hr")(5,"bd2-google-analytics"),o())},dependencies:[_,B],encapsulation:2})}}return t})();var J=[{path:"usage",component:N}],T=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=b({type:t})}static{this.\u0275inj=g({imports:[M.forChild(J),M]})}}return t})();var ut=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=b({type:t})}static{this.\u0275inj=g({imports:[j,T]})}}return t})();export{ut as a};
