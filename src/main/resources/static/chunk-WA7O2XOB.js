import{h as H}from"./chunk-I5BPRPCG.js";import{g as K}from"./chunk-K5NGWSTH.js";import{F as J,a as G}from"./chunk-2RPFGIFO.js";import{$a as d,Da as N,Db as x,Ha as y,Ia as A,Kb as P,Mb as R,Na as M,Ua as u,Va as h,Wa as S,Xa as E,Y as I,Ya as D,Za as F,_a as s,ab as z,ba as g,ca as _,eb as C,fc as q,gb as m,hb as p,hc as Q,lb as U,mb as W,nb as O,sb as j,tb as L,vb as c,wa as T,wb as k,xb as v,ya as a,yb as B}from"./chunk-EXZ64TUM.js";var r=class r{constructor(e){this.name=e}static deserialize(e){if(e==null)return null;let t=r.valuesMap.get(e);if(t)return t;let i=+e;if(i<0||i>=r.values.length||Number.isNaN(i))throw new RangeError("Uknown AssetType "+e);return r.values[i]}static initValuesMap(){let e=new Map;return r.values.forEach(t=>e.set(t.name,t)),e}equals(e){return this.name===e.name}toJSON(){return this.name}};r.NONE=new r("NONE"),r.FILE=new r("FILE"),r.MEDIA=new r("MEDIA"),r.DATA=new r("DATA"),r.TS_DATA=new r("TS_DATA"),r.values=[r.NONE,r.FILE,r.MEDIA,r.DATA,r.TS_DATA],r.valuesMap=r.initValuesMap();var w=r;var V=class{static deserialize(e){return e.created=H.deserialize(e.created),e}};var b=class n{constructor(){this.assetType=w.NONE,this.versions=[]}get last(){return this.versions[0]}static deserialize(e){let t=new n;return t.id=e.id,t.originalName=e.originalName,t.url=e.url,t.assetType=w.deserialize(e.assetType),e.versions&&(t.versions=e.versions.map(i=>V.deserialize(i))),t}setAll(e){this.id=e.id,this.originalName=e.originalName,this.assetType=e.assetType,this.url=e.url,this.versions=e.versions}};function $(n,e){if(n&1&&(s(0,"div"),c(1),d()),n&2){let t=p(2);a(),k(t.file.last.description)}}function ee(n,e){if(n&1){let t=C();s(0,"li"),c(1),P(2,"date"),s(3,"strong")(4,"a",3),m("click",function(){g(t);let o=p(3);return _(o.recordDownload())}),c(5),d()(),z(6,"br"),c(7),d()}if(n&2){let t=e.$implicit;a(),B(" Version ",t.versionId,". ",R(2,8,t.created.date,"shortDate")," "),a(3),F("href",x(t.url),T)("download",x(t.originalName)),a(),k(t.originalName),a(2),v("",t.description," ")}}function te(n,e){if(n&1&&(s(0,"div")(1,"ul",4),E(2,ee,8,11,"li",null,S),d()()),n&2){let t=p(2);a(2),D(t.file.versions)}}function ie(n,e){if(n&1){let t=C();s(0,"div")(1,"div",0),c(2),s(3,"a",1),m("click",function(){g(t);let o=p();return _(o.showVersions=!o.showVersions)}),s(4,"i",2),c(5,"expand_more"),d()()(),s(6,"h5")(7,"a",3),m("click",function(){g(t);let o=p();return _(o.recordDownload())}),c(8),d()(),u(9,$,2,1,"div"),u(10,te,4,0,"div"),d()}if(n&2){let t=p();a(2),v(" ",t.file.versions.length," versions "),a(5),F("href",x(t.file.url),T)("download",x(t.file.last.originalName)),a(),k(t.file.last.originalName),a(),h(t.file.last.description?9:-1),a(),h(t.showVersions?10:-1)}}var xe=(()=>{let e=class e{constructor(i){this.analytics=i,this.canEdit=!0,this.showVersions=!1,this.edit=!1,this.model=this.fakeFileAsset()}set model(i){this.file=i}ngOnInit(){}fakeFileAsset(){let o=JSON.parse(`{
      "id" : 2,
      "originalName" : "f2",
      "assetType" : "TS_DATA",
      "versions" : [ {
        "versionId" : 2,
        "localFile" : "cos2",
        "originalName" : "f2",
        "contentType" : "txt",
        "description" : "Some description",
        "created" : [ 2016, 12, 8 ]
      }, {
        "versionId" : 1,
        "localFile" : "cos2",
        "originalName" : "f2",
        "contentType" : "txt",
        "description" : null,
        "created" : [ 2016, 12, 8 ]
      } ]
    }`);return b.deserialize(o)}recordDownload(){this.analytics.fileDownload(this.parentId.toString(),this.file.id)}};e.\u0275fac=function(o){return new(o||e)(N(G))},e.\u0275cmp=y({type:e,selectors:[["bd2-file-asset-view"]],inputs:{canEdit:"canEdit",parentId:"parentId",model:"model"},standalone:!1,decls:1,vars:1,consts:[[1,"float-right"],["role","button","aria-label","expand",3,"click"],[1,"material-icons","bd-icon"],[3,"click","href","download"],[1,"list-unstyled"]],template:function(o,l){o&1&&u(0,ie,11,8,"div"),o&2&&h(l.file&&l.file.last?0:-1)},dependencies:[q],encapsulation:2});let n=e;return n})();var re=["inputFieldM"];function ae(n,e){if(n&1){let t=C();s(0,"div",10),c(1),s(2,"button",11),m("click",function(){let o=g(t).$implicit,l=p(2);return _(l.remove(o))}),s(3,"span",12),c(4,"\xD7"),d()()()}if(n&2){let t=e.$implicit;a(),v(" ",t.name," ")}}function se(n,e){if(n&1&&(s(0,"div",1)(1,"div",9)(2,"label"),c(3,"Files:"),d()(),E(4,ae,5,1,"div",10,S),d()),n&2){let t=p();a(4),D(t.files)}}function de(n,e){if(n&1){let t=C();s(0,"input",13,0),m("change",function(o){g(t);let l=p();return _(l.handleFileSelect(o))}),d()}}function ce(n,e){if(n&1){let t=C();s(0,"input",14,0),m("change",function(o){g(t);let l=p();return _(l.handleFileSelect(o))}),d()}}function pe(n,e){if(n&1&&(s(0,"div",7),c(1),d()),n&2){let t=p();a(),v(" Maximum upload size is ",t.sizeLimit,"MB ")}}var Ae=(()=>{let e=class e{constructor(){this.activeColor="green",this.baseColor="#ccc",this.overlayColor="rgba(255,255,255,0.5)",this.blocked=!1,this.multiple=!0,this.noDuplicates=!0,this.autoReset=!1,this.sizeLimit=50,this.uploadFiles=new M,this.selectedFiles=new M,this.dragging=!1,this.loaded=!1,this.sizeError=!1,this.files=[]}ngOnInit(){}reset(){this.files=[],this.inputField&&this.inputField.nativeElement&&(this.inputField.nativeElement.value="")}handleDragEnter(){this.dragging=!0}handleDragLeave(){this.dragging=!1}handleDrop(i){i.preventDefault(),this.dragging=!1,i.dataTransfer&&this.handleFileChange(i.dataTransfer.files)}handleFileSelect(i){i.target&&this.handleFileChange(i.target.files)}handleFileChange(i){let o=this.multiple?i.length:Math.min(1,i.length);this.multiple||(this.files=[]);for(let l=0;l<o;l++){let f=i[l];this.noDuplicates&&this.removeDuplicate(f),this.files.push(f)}this.checkSize(),this.selectedFiles.next(this.files)}remove(i){K(i,this.files),this.checkSize()}removeDuplicate(i){let o=this.files.find(l=>l.name===i.name);this.remove(o)}checkSize(){let i=0;this.files.map(o=>o.size).forEach(o=>i+=o),i=i/(1024*1024),this.sizeError=i>this.sizeLimit}upload(){this.uploadFiles.next(this.files),this.autoReset&&this.reset()}};e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=y({type:e,selectors:[["bd2-file-upload-widget"]],viewQuery:function(o,l){if(o&1&&U(re,5),o&2){let f;W(f=O())&&(l.inputField=f.first)}},inputs:{activeColor:"activeColor",baseColor:"baseColor",overlayColor:"overlayColor",blocked:"blocked",multiple:"multiple",noDuplicates:"noDuplicates",autoReset:"autoReset",sizeLimit:"sizeLimit"},outputs:{uploadFiles:"uploadFiles",selectedFiles:"selectedFiles"},standalone:!1,decls:13,vars:9,consts:[["inputField",""],[1,"clearfix",2,"margin-bottom","1em"],[2,"margin-bottom","1em"],["ondragover","return false;",1,"uploader-zone",3,"dragenter","dragleave","drop"],[1,"material-icons","bd-icon","bd-primary",2,"font-size","400%"],["multiple","","name","inputField","type","file"],["name","inputField","type","file"],[1,"alert","alert-danger"],["type","button",1,"btn","btn-primary","btn-sm",3,"click","disabled"],[1,""],[1,"float-left","fileitem"],["aria-label","Close","type","button",1,"close",2,"margin-left","0.5em",3,"click"],["aria-hidden","true"],["multiple","","name","inputField","type","file",3,"change"],["name","inputField","type","file",3,"change"]],template:function(o,l){o&1&&(s(0,"div"),u(1,se,6,0,"div",1),s(2,"div",2)(3,"label",3),m("dragenter",function(){return l.handleDragEnter()})("dragleave",function(){return l.handleDragLeave()})("drop",function(Z){return l.handleDrop(Z)}),s(4,"i",4),c(5,"cloud_upload"),d(),s(6,"p"),c(7," Drag file(s) or click to select"),d(),u(8,de,2,0,"input",5),u(9,ce,2,0,"input",6),d()(),u(10,pe,2,1,"div",7),s(11,"button",8),m("click",function(){return l.upload()}),c(12,"Upload selected "),d()()),o&2&&(a(),h(l.files.length>0?1:-1),a(2),j("outline-color",l.dragging?l.activeColor:l.baseColor),L("loaded",l.loaded),a(5),h(l.multiple?8:-1),a(),h(l.multiple?-1:9),a(),h(l.sizeError?10:-1),a(),F("disabled",l.blocked||l.files.length<1||l.sizeError))},styles:[".uploader-zone[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}.uploader-zone[_ngcontent-%COMP%]{font-weight:400;-webkit-align-items:center;align-items:center;background-color:#efefef;background-color:#00000005;cursor:pointer;display:-webkit-flex;display:flex;height:100px;-webkit-justify-content:center;justify-content:center;outline:3px dashed #ccc}div.fileitem[_ngcontent-%COMP%]{margin:2px;padding:2px;border:1px solid #efefef;border-radius:4px}"]});let n=e;return n})();var Ge=(()=>{let e=class e{};e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=A({type:e}),e.\u0275inj=I({imports:[Q,J]});let n=e;return n})();export{w as a,b,xe as c,Ae as d,Ge as e};
