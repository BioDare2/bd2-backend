"use strict";(self.webpackChunkbiodare2_ui=self.webpackChunkbiodare2_ui||[]).push([[592],{7424:(O,T,u)=>{u.d(T,{T:()=>l});var e=u(9299),n=u(9300),i=u(1884),f=u(4650),S=u(1481);class l{constructor(m,b,g){if(this.router=m,this.titleService=b,console.log("TitleSetter created"),g)throw new Error("TitleSetterService is already loaded. Activate it in the AppModule only");m.events.pipe((0,n.h)(o=>o instanceof e.m2),(0,i.x)((o,d)=>o.url===d.url)).subscribe(o=>{this.changedURL(o.urlAfterRedirects)},o=>{console.log("Error in router stream")},()=>console.log("Router stream end"))}changedURL(m){const b=this.getTitleFromURL(m);b&&this.setTitle(b)}getTitleFromURL(m){return m.endsWith("welcome")?"Circadian period analysis":m.endsWith("experiments")?"Experiments":m.endsWith("experiments/new")?"New Experiment":m.endsWith("login")?"Login":m.endsWith("account/register")?"Register":m.endsWith("account/edit")?"Account":""}setTitle(m){this.titleService.setTitle("BioDare2 "+m)}}l.\u0275fac=function(m){return new(m||l)(f.LFG(e.F0),f.LFG(S.Dx),f.LFG(l,12))},l.\u0275prov=f.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"})},1547:(O,T,u)=>{u.d(T,{QT:()=>i,fD:()=>e,xE:()=>n});const e=[["about","About","Documentation"],["service","Service Description (T&C)","Service Description (T&C)"],["privacy","Privacy Statement","Privacy Statement"],["faq","Frequently Asked Questions (FAQ)","FAQ"],["timeseries-data","TimeSeries data and formats","Timeseries data"],["period-methods","Methods of period analysis","Period analysis methods"],["detrending","Detrending for period analysis","Detrending and analysis"],["phases","Phase calculation","Phase calculation"]];function n(f){return e.findIndex(S=>S[0]===f)>=0}function i(f){return e.find(S=>S[0]===f)}},5162:(O,T,u)=>{u.d(T,{l:()=>b});var e=u(5412),n=u(1547),i=u(4650),f=u(6895),S=u(5518);function l(g,o){if(1&g&&(i.TgZ(0,"div",6),i._uU(1),i.qZA()),2&g){const d=i.oxw();i.xp6(1),i.Oqu(d.missing)}}function h(g,o){if(1&g&&i._UZ(0,"bd2-static-content",7),2&g){const d=i.oxw();i.Q6J("docName",d.docName)}}class m{constructor(o){const d=o?o.docName:void 0;(0,n.xE)(d)?(this.title=n.fD.find(M=>M[0]===d)[1],this.docName=d,this.missing=void 0):(this.missing="Unknown document: "+d,this.title=this.missing,this.docName=void 0)}ngOnInit(){}}m.\u0275fac=function(o){return new(o||m)(i.Y36(e.WI))},m.\u0275cmp=i.Xpm({type:m,selectors:[["bd2-static-content-dialog"]],decls:8,vars:3,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["class","alert alert-danger","role","alert","type","danger",4,"ngIf"],[3,"docName",4,"ngIf"],["mat-dialog-actions",""],["mat-dialog-close","","tabindex","-1",1,"btn","btn-primary"],["role","alert","type","danger",1,"alert","alert-danger"],[3,"docName"]],template:function(o,d){1&o&&(i.TgZ(0,"h1",0),i._uU(1),i.qZA(),i.TgZ(2,"div",1),i.YNc(3,l,2,1,"div",2),i.YNc(4,h,1,1,"bd2-static-content",3),i.qZA(),i.TgZ(5,"div",4)(6,"button",5),i._uU(7,"Close"),i.qZA()()),2&o&&(i.xp6(1),i.Oqu(d.title),i.xp6(2),i.Q6J("ngIf",d.missing),i.xp6(1),i.Q6J("ngIf",!d.missing))},dependencies:[f.O5,e.ZT,e.uh,e.xY,e.H8,S.$],encapsulation:2});class b{constructor(o){this.dialog=o}show(o){this.dialog.open(m,{data:{docName:o}})}}b.\u0275fac=function(o){return new(o||b)(i.LFG(e.uw))},b.\u0275prov=i.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"})},5518:(O,T,u)=>{u.d(T,{$:()=>b});var e=u(4650),n=u(529),i=u(2843),f=u(7246),S=u(262),l=u(5716);class h{constructor(o){this.http=o}getDocs(o){const d=this.makeOptions();return this.OKTxt(this.http.get("assets/"+o+".html",d)).toPromise()}makeOptions(){return{headers:new n.WM({Accept:"text/html"}),responseType:"text",withCredentials:!0}}OKTxt(o){return o.pipe((0,f.U)(d=>{let M;return M=d.body?d.txt:d,M}),(0,S.K)(this.handleBadResponse))}handleBadResponse(o){let d;return console.error("Response error",o),d=401===o.status?"Bad credentials, locked or not activated account":l.q.extractMessage(o,"No error details"),(0,i._)(d)}}h.\u0275fac=function(o){return new(o||h)(e.LFG(n.eN))},h.\u0275prov=e.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"});var m=u(2160);class b{constructor(o,d){this.contentService=o,this.feedback=d,this.content="loading..."}set docName(o){o&&(this.content="",this.contentService.getDocs(o).then(d=>this.content=d).catch(d=>{this.content="Cannot load: "+d,this.feedback.error(d)}))}ngOnInit(){}}b.\u0275fac=function(o){return new(o||b)(e.Y36(h),e.Y36(m.T))},b.\u0275cmp=e.Xpm({type:b,selectors:[["bd2-static-content"]],inputs:{docName:"docName"},decls:1,vars:1,consts:[[3,"innerHTML"]],template:function(o,d){1&o&&e._UZ(0,"div",0),2&o&&e.Q6J("innerHTML",d.content,e.oJD)},encapsulation:2})},2375:(O,T,u)=>{u.d(T,{Cj:()=>b,Rl:()=>n,W4:()=>i,aF:()=>e,fV:()=>r,hp:()=>h,jF:()=>f,q7:()=>g});class e{constructor(c,A){this._name=c,this._label=A}get name(){return this._name}get label(){return this._label}static get(c){return e.getValuesMap().get(c)}static getValuesMap(){return e.valuesMap||(e.valuesMap=e.initValuesMap()),e.valuesMap}static initValuesMap(){const c=new Map;return e.values.forEach(A=>c.set(A.name,A)),c}toJSON(){return this.name}}e.NLLS=new e("NLLS","FFT NLLS"),e.MFourFit=new e("MFourFit","MFourFit"),e.MESA=new e("MESA","MESA"),e.EPR=new e("EPR","ER Periodogram"),e.EPR_ND=new e("EPR_ND","ER Periodogram (no DT)"),e.LSPR=new e("LSPR","LS Periodogram"),e.SR=new e("SR","Spectrum Resampling"),e.SR_LD=new e("SR_LD","Spectrum Resampling (lin DT)"),e.FAKE=new e("FAKE","Fake method"),e.values=[e.NLLS,e.MFourFit,e.MESA,e.EPR,e.EPR_ND,e.LSPR,e.SR,e.SR_LD,e.FAKE];const n=[e.NLLS,e.MFourFit,e.MESA,e.EPR,e.LSPR,e.SR];class i{isValid(){return!(this.windowStart<0||this.windowEnd<0||this.periodMin<=0||this.periodMax<=0||this.periodMin>this.periodMax||this.windowEnd>0&&this.windowStart>=this.windowEnd||null==this.method||null==this.detrending)}}class f{static sameJob(c,A){return!(!c||!A)&&c.jobId===A.jobId&&c.parentId===A.parentId}static hasFailed(c){return!(!c||this.isFinished(c)||this.isRunning(c))}static isFinished(c){return!(!c||!c.state||"FINISHED"!==c.state&&"SUCCESS"!==c.state)}static isRunning(c){return!(!c||!c.state||"SUBMITTED"!==c.state&&"PROCESSING"!==c.state)}}function h(D,c){switch(c){case"ByFit":case"f":return D.f;case"ByMethod":case"m":return D.m;case"ByFirstPeak":case"p":return D.p;case"ByAvgMax":case"a":return D.a;default:throw new Error("Unknown phase option: "+c)}}class b{static extractState(c){return c.failed?"F":c.ignored?" I":c.attention?"A":""}}function g(D,c,A){if("zero"===c&&"circ"===A)return D.ph2ZCir;if("zero"===c&&"abs"===A)return D.ph2Z;if("dw"===c&&"circ"===A)return D.ph2WCir;if("dw"===c&&"abs"===A)return D.ph2W;throw new Error("Unknown relative/unit combination: "+c+":"+A)}class r{}},1434:(O,T,u)=>{u.d(T,{D:()=>f});var e=u(7246),n=u(4650),i=u(5716);class f{constructor(l){this.BD2REST=l}newPPA(l,h){return this.BD2REST.ppaNew(l.id,h)}getPPAJobs(l){return this.BD2REST.ppaJobs(l.id).pipe((0,e.U)(h=>h.data))}getPPAJob(l,h){return this.BD2REST.ppaJob(l,h)}downloadPPAJob(l,h,m){return this.BD2REST.ppaExportJob(l,h,m)}deletePPAJob(l,h){return this.BD2REST.ppaDeleteJob(l.id,h)}getPPAJobResultsGrouped(l,h){return this.BD2REST.ppaJobResultsGrouped(l,h)}getPPAJobSimpleResults(l,h){return this.BD2REST.ppaJobSimpleResults(l,h)}getPPAForSelect(l,h){return this.BD2REST.ppaForSelect(l,h).then(m=>m.data)}getPPAJobSimpleStats(l,h){return this.BD2REST.ppaJobSimpleStat(l,h)}getPPAResults(l){return this.BD2REST.ppaResults(l.id).then(h=>h.data)}doPPASelection(l,h,m){return this.BD2REST.ppaDoSelection(l,h,m)}exportURL(l){return this.BD2REST.ppaExportURL(l.id)}}f.\u0275fac=function(l){return new(l||f)(n.LFG(i.q))},f.\u0275prov=n.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"})},7529:(O,T,u)=>{u.d(T,{Ah:()=>i,GJ:()=>m,Mn:()=>M,RX:()=>n,T9:()=>l,mM:()=>f,pd:()=>S,v6:()=>e});class e{constructor(s,t){this._name=s,this._label=t}get name(){return this._name}get label(){return this._label}static get(s){return e.getValuesMap().get(s)}static getValuesMap(){return e.valuesMap||(e.valuesMap=e.initValuesMap()),e.valuesMap}static initValuesMap(){const s=new Map;return e.values.forEach(t=>s.set(t.name,t)),s}toJSON(){return this.name}}e.BD2EJTK=new e("BD2EJTK","BD2 eJTK"),e.BD2JTK=new e("BD2JTK","Classic JTK"),e.values=[e.BD2JTK,e.BD2EJTK];const n=[e.BD2JTK,e.BD2EJTK];class i{constructor(s,t){this._name=s,this._label=t}get name(){return this._name}get label(){return this._label}static get(s){return i.getValuesMap().get(s)}static getValuesMap(){return i.valuesMap||(i.valuesMap=i.initValuesMap()),i.valuesMap}static initValuesMap(){const s=new Map;return i.values.forEach(t=>s.set(t.name,t)),s}toJSON(){return this.name}}i.EJTK_CLASSIC=new i("EJTK_CLASSIC","eJTK Classic"),i.BD2_CLASSIC=new i("BD2_CLASSIC","BD2 Classic"),i.BD2_SPREAD=new i("BD2_SPREAD","Period range"),i.COS_1H=new i("COS_1H","Cosine 24h 1h"),i.COS_2H=new i("COS_2H","Cosine 24h 2h"),i.COS_4H=new i("COS_4H","Cosine 24h 4h"),i.values=[i.COS_1H,i.COS_2H,i.COS_4H,i.EJTK_CLASSIC,i.BD2_CLASSIC,i.BD2_SPREAD];const f=[i.COS_1H,i.COS_2H,i.COS_4H,i.EJTK_CLASSIC,i.BD2_CLASSIC],S=[i.COS_1H,i.COS_2H,i.COS_4H];class l{isValid(){return!(this.windowStart<0||this.windowEnd<0||this.periodMin<=0||this.periodMax<=0||this.periodMin>this.periodMax||this.windowEnd>0&&this.windowStart>=this.windowEnd||null==this.method||null==this.preset||null==this.detrending)}}class m{static sameJob(s,t){return!(!s||!t)&&s.jobId===t.jobId&&s.parentId===t.parentId}static hasFailed(s){return!(!s||this.isFinished(s)||this.isRunning(s))}static isFinished(s){return!(!s||!s.jobStatus||"FINISHED"!==s.jobStatus.state&&"SUCCESS"!==s.jobStatus.state)}static isRunning(s){return!!s&&!(!s||!s.jobStatus||"SUBMITTED"!==s.jobStatus.state&&"PROCESSING"!==s.jobStatus.state)}}class M{constructor(s=0,t=!1,a=!1,E=!1){this.pValue=s,this.bhCorrection=t,this.showPattern=a,this.circadian=E}clone(){return new M(this.pValue,this.bhCorrection,this.showPattern,this.circadian)}}},9333:(O,T,u)=>{u.d(T,{o:()=>f});var e=u(7246),n=u(4650),i=u(5716);class f{constructor(l){this.BD2REST=l}newTest(l,h){return this.BD2REST.rhythmicityNew(l.id,h)}getJob(l,h){return this.BD2REST.rhythmicityJob(l,h)}getJobs(l){return this.BD2REST.rhythmicityJobs(l.id).pipe((0,e.U)(h=>h.data))}getResults(l,h){return this.BD2REST.rhythmicityResults(l,h)}exportURL(l){return this.BD2REST.ppaExportURL(l.id)}deleteJob(l,h){return this.BD2REST.rhythmicityDeleteJob(l.id,h)}downloadJob(l,h){return this.BD2REST.rhythmicityExportJob(l,h)}}f.\u0275fac=function(l){return new(l||f)(n.LFG(i.q))},f.\u0275prov=n.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"})},1945:(O,T,u)=>{u.d(T,{Jt:()=>b,Kw:()=>i,Xc:()=>h,kk:()=>n,nl:()=>l,p5:()=>S});var e=u(4200);class n{constructor(o,d,M){this.id=o,this.name=d,this.label=M}static getValuesMap(){return n.valuesMap||(n.valuesMap=n.initValuesMap()),n.valuesMap}static get(o){return n.getValuesMap().get(o)}static initValuesMap(){const o=new Map;return o.set(n.NONE.name,n.NONE),o.set(n.EXCEL_TABLE.name,n.EXCEL_TABLE),o.set(n.TOPCOUNT.name,n.TOPCOUNT),o.set(n.TAB_SEP.name,n.TAB_SEP),o.set(n.COMA_SEP.name,n.COMA_SEP),o}toJSON(){return this.name}}n.NONE=new n(0,"NONE","none"),n.EXCEL_TABLE=new n(1,"EXCEL_TABLE","Excel Table"),n.TOPCOUNT=new n(2,"TOPCOUNT","TopCount"),n.TAB_SEP=new n(3,"TAB_SEP","Tab-separated"),n.COMA_SEP=new n(4,"COMA_SEP","Coma-separated");const i=[n.EXCEL_TABLE,n.TAB_SEP,n.COMA_SEP,n.TOPCOUNT];class f{}class S extends f{constructor(){super(...arguments),this._class_name=".ExcelTSImportParameters"}}class l{}class h{constructor(o=-1,d=-1,M="",v=-1,s=-1,t="",a){this.colIx=o,this.colNumber=d,this.colName=M,this.rowIx=v,this.rowNumber=s,this.rowName=t,this.value=a,this.fake=!1}toJSON(){return{col:this.colNumber,row:this.rowNumber}}isBeforeOrSame(o){return this.colIx<=o.colIx&&this.rowIx<=o.rowIx}hasSameIx(o){return this.colIx===o.colIx&&this.rowIx===o.rowIx}}class m{constructor(){this.inRows=!1,this.timeOffset=0,this.importLabels=!0,this.userLabels=[],this.containsBackgrounds=!1,this.backgroundsLabels=[]}get inLabel(){return this.inRows?"row":"column"}get inLabelNeg(){return this.inRows?"column":"row"}isTimeDefined(){return!(!this.firstTimeCell||!this.timeType||this.timeType==e.ET.IMG_NUMBER&&(!this.imgInterval||+this.imgInterval<=0)||isNaN(Number(this.firstTimeCell.value)))}areLabelsCorrectlySelected(){return!!this.labelsSelection&&this.areLabelsAfterTime()}areLabelsAfterTime(){return!(!this.firstTimeCell||!this.labelsSelection)&&(this.inRows?this.labelsSelection.colNumber<this.firstTimeCell.colNumber&&this.labelsSelection.colNumber>=0:this.labelsSelection.rowNumber<this.firstTimeCell.rowNumber&&this.labelsSelection.rowNumber>=0)}areLabelsCorrectlyAssigned(){return!!this.userLabels&&this.userLabels.filter(o=>!!o).length>0}isDataAfterTime(){return!(!this.firstTimeCell||!this.dataStart)&&(this.inRows?this.dataStart.rowNumber>this.firstTimeCell.rowNumber:this.dataStart.colNumber>this.firstTimeCell.colNumber)}isDataStartCorrectlySelected(){return!!this.dataStart&&this.isDataAfterTime()}isComplete(){if(!this.isTimeDefined())return!1;if(this.importLabels){if(!this.areLabelsCorrectlySelected()||!this.isDataStartCorrectlySelected())return!1}else if(!this.areLabelsCorrectlyAssigned())return!1;return!0}summarizeLabels(o=10){if(!this.userLabels)return"No labels";const d=new Set;for(const M of this.userLabels)if(M&&(d.add(M),d.size>=o)){d.add("...");break}return[...d].join(", ")}}class b extends m{constructor(){super(...arguments),this._class_name=".DataTableImportParameters"}}},4200:(O,T,u)=>{u.d(T,{ET:()=>n,H3:()=>e,Mt:()=>v,T:()=>f,Wr:()=>d,bq:()=>i,jO:()=>l,jh:()=>m,lu:()=>o,xn:()=>g});class e{constructor(t,a,E){this._id=t,this._name=a,this._label=E}get id(){return this._id}get name(){return this._name}get label(){return this._label}static get(t){return e.getValuesMap().get(t)}static getValuesMap(){return e.valuesMap||(e.valuesMap=e.initValuesMap()),e.valuesMap}static initValuesMap(){const t=new Map;return t.set(e.NONE.name,e.NONE),t.set(e.IGNORED.name,e.IGNORED),t.set(e.TIME.name,e.TIME),t.set(e.DATA.name,e.DATA),t.set(e.BACKGROUND.name,e.BACKGROUND),t.set(e.LABEL.name,e.LABEL),t}toJSON(){return this.name}}e.NONE=new e(0,"NONE","NONE"),e.IGNORED=new e(1,"IGNORED","Ignored"),e.TIME=new e(2,"TIME","Time"),e.DATA=new e(3,"DATA","Data"),e.BACKGROUND=new e(4,"BACKGROUND","Background noise"),e.LABEL=new e(5,"LABEL","Label");class n{constructor(t,a,E,r){this._id=t,this._name=a,this._label=E,this._unit=r}get id(){return this._id}get name(){return this._name}get label(){return this._label}get unit(){return this._unit}static get(t){return n.getValuesMap().get(t)}static getValuesMap(){return n.valuesMap||(n.valuesMap=n.initValuesMap()),n.valuesMap}static initValuesMap(){const t=new Map;return t.set(n.NONE.name,n.NONE),t.set(n.TIME_IN_HOURS.name,n.TIME_IN_HOURS),t.set(n.TIME_IN_MINUTES.name,n.TIME_IN_MINUTES),t.set(n.TIME_IN_SECONDS.name,n.TIME_IN_SECONDS),t.set(n.IMG_NUMBER.name,n.IMG_NUMBER),t}toJSON(){return this.name}}n.NONE=new n(0,"NONE","NONE",""),n.TIME_IN_HOURS=new n(1,"TIME_IN_HOURS","time in hours","h"),n.TIME_IN_MINUTES=new n(2,"TIME_IN_MINUTES","time in minutes","m"),n.TIME_IN_SECONDS=new n(3,"TIME_IN_SECONDS","time in seconds","s"),n.IMG_NUMBER=new n(4,"IMG_NUMBER","image nr. (1-based)","img");class i{}class f{constructor(t){this.dataLabel=t}}const S="ABCDEFGHIJKLMNOPQRSTUVWXYZ";function l(s){const t=S.length;if((s-=1)<t)return S[s];if(s<t*t+t){const a=Math.floor(s/t)-1;return S[a]+S[s%t]}if(s<16384){const a=Math.floor(s/(t*t))-1;let E=s%(t*t);const r=Math.floor(E/t)-1;return E=s%t,S[a]+S[r]+S[E]}throw new RangeError("Unsupported column number: "+(s+1))}function m(s){if(s<1||s>96)throw new RangeError("Unsupported topcount column number: "+s);s-=1;const t=Math.floor(s/12);return S[t]+(s%12+1)}class g{constructor(t,a){this.col=t,this.row=a}get numericalLabel(){return this.col+"-"+this.row}get excelLabel(){return l(this.col)+this.row}get columnLetter(){return l(this.col)}get topCountWell(){return S[this.row-1]+this.col}clone(){return new g(this.col,this.row)}}class o{constructor(t,a){this.first=t,this.last=a;const E=this.normalize(t,a);this.first=E[0],this.last=E[1]}get firstCol(){return this.first.col}get lastCol(){return this.last.col}get fullRangeLabel(){return this.isSingleCell()?this.first.excelLabel:this.first.excelLabel+"-"+this.last.excelLabel}get columnRangeLabel(){return this.isSingleCell()?this.first.columnLetter:this.first.columnLetter+"-"+this.last.columnLetter}get topCountRangeLabel(){return this.isSingleCell()?this.first.topCountWell:this.first.topCountWell+"-"+this.last.topCountWell}clone(){return new o(this.first.clone(),this.last.clone())}normalize(t,a){if(t.row<=a.row&&t.col<=a.col)return[t,a];const E=Math.min(t.row,a.row),r=Math.min(t.col,a.col),p=Math.max(t.row,a.row),P=Math.max(t.col,a.col);return[new g(r,E),new g(P,p)]}isSingleCell(){return this.first.row===this.last.row&&this.first.col===this.last.col}size(){return(this.last.col-this.first.col+1)*(this.last.row-this.first.row+1)}}class d{constructor(t,a){this.range=t,this.content=a}get fullRangeLabel(){return this.range.fullRangeLabel}get columnRangeLabel(){return this.range.columnRangeLabel}get topCountRangeLabel(){return this.range.topCountRangeLabel}get firstCol(){return this.range.firstCol}get lastCol(){return this.range.lastCol}clone(){const t=new d(this.range.clone(),this.content);return t.role=this.role,t.details=this.details,t}}class M{constructor(t,a,E,r){this.start=t,this.end=a,this.details=E,this.value=r}get label(){return this.start===this.end?l(this.start):l(this.start)+"-"+l(this.end)}get topcountLabel(){return this.start===this.end?m(this.start):m(this.start)+"-"+m(this.end)}trimEnd(t){if(t<=this.start)return;const a=this.details.clone();return a.range.last.col=t-1,new M(this.start,t-1,a,this.value)}trimBegining(t){if(t>=this.end)return;const a=this.details.clone();return a.range.first.col=t+1,new M(t+1,this.end,a,this.value)}isSimilar(t){return!(this.details.role!==t.details.role||this.value!==t.value)}}class v{constructor(){this.columns=[]}get blocks(){const t=[];let a=1;for(;a<this.columns.length;){const E=this.columns[a];E?(t.push(E),a=E.end+1):a++}return t}details(t){const a=this.columns[t];if(a)return a.details}delete(t){if(0===t.size())return!1;let a=!1;return this.columns[t.firstCol]&&(this.trimPreviousAt(t.firstCol),a=!0),this.columns[t.lastCol]&&(this.trimBehindAt(t.lastCol),a=!0),this.clear(t),a}insert(t,a){if(0===t.range.size())return!1;let E=!1;const r=new M(t.range.first.col,t.range.last.col,t,a);return this.columns[r.start]&&(this.trimPreviousAt(r.start),E=!0),this.columns[r.end]&&(this.trimBehindAt(r.end),E=!0),this.put(r),E}merge(){let t=1;for(;t<this.columns.length;){const a=this.columns[t];if(a)if(this.columns[a.end+1]){const E=this.columns[a.end+1];a.isSimilar(E)?(a.end=E.end,a.details.range.last=E.details.range.last,this.put(a)):t=E.start}else t=a.end+1;else t++}}trimPreviousAt(t){const a=this.columns[t];if(a.start===t)return;const E=a.trimEnd(t);this.put(E)}trimBehindAt(t){const a=this.columns[t];if(a.end===t)return;const E=a.trimBegining(t);this.put(E)}put(t){for(let a=t.start;a<=t.end;a++)this.columns[a]=t}clear(t){for(let a=t.firstCol;a<=t.lastCol;a++)this.columns[a]=void 0}}},4798:(O,T,u)=>{u.d(T,{i:()=>e});class e{constructor(i=1e3,f=3e4,S=3e5,l=2){this.RELOAD_INT=i,this.MAX_RELOAD_INT=f,this.MAX_RELOAD_TIME=S,this.RELOAD_FACTOR=l,l<1&&(this.RELOAD_FACTOR=2)}nextInterval(i){if(this.id!==i?this.reset(i):this.interval<this.MAX_RELOAD_INT&&(this.interval*=this.RELOAD_FACTOR),this.deadline>Date.now())return this.interval}reset(i){this.id=i,this.interval=this.RELOAD_INT,this.deadline=Date.now()+this.MAX_RELOAD_TIME}}},4534:(O,T,u)=>{u.d(T,{v:()=>a});var e=u(9646),n=u(7045),i=u(7579),f=u(1135),S=u(9841),l=u(6451),h=u(8739),m=u(5698),b=u(7246),g=u(8372),o=u(8505),d=u(262),M=u(9300),v=u(1884),s=u(3900);class t{constructor(r=!1){this.removeDebounce=r,this.error$=new i.x,this.isFetching$=new f.X(!1),this.isProcessing$=new f.X(!1),this.dataLength=0,this.page$=new f.X(void 0),this.sort$=new f.X(void 0),this.on$=new f.X(!1),this.refresh$=new i.x,this.input$=new f.X(void 0),this.params$=new f.X(void 0),this.asset$=new f.X(void 0),this.DEBUG=!1,this.dataInputsDebounce=200,this.busyDebounce=50,this.id=t.ids++,this.logMe("created"),this.initAssetsStream(),this.isBusy$=this.initBusyStream(),this.data$=this.initDataStream()}logMe(r,p){this.DEBUG&&(r=this.constructor.name+":"+this.id+" "+r,p?console.log(r,p):console.log(r))}input(r){r&&this.input$.next(r)}params(r){this.params$.next(r)}on(r=!0){this.on$.next(r)}refresh(){this.refresh$.next(!0)}page(r){this.page$.next(r)}sort(r){this.sort$.next(r),this.resetPage()}close(){this.asset$.complete(),this.error$.complete(),this.isFetching$.complete(),this.isProcessing$.complete(),this.input$.complete(),this.params$.complete(),this.on$.complete(),this.refresh$.complete(),this.page$.complete(),this.sort$.complete()}errorToData(r){return(0,e.of)(void 0)}resetPage(){this.page$.pipe((0,m.q)(1)).subscribe(r=>{if(r){const p=new h.kl;p.pageIndex=0,p.pageSize=r.pageSize,this.page(p)}})}initBusyStream(){return this.removeDebounce?(0,S.a)([this.isFetching$,this.isProcessing$]).pipe((0,b.U)(([r,p])=>r||p)):(0,S.a)([this.isFetching$,this.isProcessing$]).pipe((0,g.b)(this.busyDebounce),(0,b.U)(([r,p])=>r||p))}initDataStream(){const r=this.dataMutators();let p;return p=this.removeDebounce?(0,S.a)(r):(0,S.a)(r).pipe((0,g.b)(this.dataInputsDebounce)),p.pipe((0,o.b)(P=>this.logMe("Input for data stream",P)),(0,o.b)(P=>this.isProcessing$.next(!0)),(0,b.U)(([P,D,c,A])=>{this.dataLength=this.assetToDataLength(P,A);const R=this.processSortedPagedData(P,D,c,A);return this.currentSort=D,this.currentPage=c,this.currentParams=A,this.currentData=R,R}),(0,d.K)(P=>(this.error$.next(P),this.errorToData(P))),(0,o.b)(P=>this.isProcessing$.next(!1)))}dataMutators(){return[this.asset$.pipe((0,M.h)(r=>!!r)),this.sort$,this.page$.pipe((0,M.h)(r=>!!r)),this.params$]}initAssetsStream(){this.initAssetsInput().subscribe(r=>this.loadAsset(r),r=>this.error$.next(r))}loadAsset(r){this.isFetching$.next(!0),this.fetchAsset(r).subscribe(p=>{this.isFetching$.next(!1),this.setAsset(p,r)},p=>{this.isFetching$.next(!1),this.error$.next(p)})}setAsset(r,p){this.currentInput=p,this.currentAsset=r,this.asset$.next(r)}initAssetsInput(){const p=(0,S.a)([this.input$,this.on$]).pipe((0,M.h)(([c,A])=>c&&A),(0,b.U)(([c,A])=>c)).pipe((0,v.x)((c,A)=>this.sameInput(c,A))),P=this.refresh$.pipe((0,s.w)(c=>p.pipe((0,m.q)(1))));return(0,l.T)(p,P).pipe((0,o.b)(c=>this.logMe("Assets input",c)))}}t.ids=0;class a extends t{constructor(r=!1){super(r),this.removeDebounce=r}sortingKey(r,p){return P=>P}processData(r,p){return r}errorToData(r){return(0,e.of)([])}processSortedPagedData(r,p,P,D){let c=this.assetToData(r,D);return c=this.sortData(c,p,D),c=this.pageData(c,P,D),c=this.processData(c,D),c}sortData(r,p,P){return p&&p.active&&""!==p.direction?(0,n.Ic)(r,p.direction,this.sortingKey(p,P)):r}pageData(r,p,P){return p?(0,n.sq)(r,p):r}assetToDataLength(r,p){return this.assetToData(r).length}}},239:(O,T,u)=>{u.d(T,{S:()=>M});var e=u(7579),n=u(1135),i=u(9841),f=u(6451),S=u(2805),l=u(9300),h=u(8372),m=u(7246),b=u(1884),g=u(3900),o=u(5698),d=u(8505);class M{constructor(s=!1){this.removeDebounce=s,this.error$=new e.x,this.on$=new n.X(!1),this.refresh$=new e.x,this.input$=new n.X(void 0),this.asset$=new n.X(void 0),this.reloading$=new n.X(!1),this.DEBUG=!1,this.reloadDebounce=50,this.id=M.ids++,this.logMe("created"),this.currentReloadStatus=this.initIntervalsKeeper(),this.finished$=this.asset$.asObservable().pipe((0,l.h)(t=>t&&this.isFinished(t))),this.running$=this.asset$.asObservable().pipe((0,l.h)(t=>t&&this.isRunning(t))),this.failed$=this.asset$.asObservable().pipe((0,l.h)(t=>t&&this.hasFailed(t))),this.all$=this.asset$.asObservable().pipe((0,l.h)(t=>null!=t&&void 0!==t)),this.isReloading$=this.initReloadingStream(),this.initAssetsStream(),this.initReloads()}logMe(s,t){this.DEBUG&&(s=this.constructor.name+":"+this.id+" "+s,t?console.log(s,t):console.log(s))}close(){this.asset$.complete(),this.input$.complete(),this.error$.complete(),this.reloading$.complete(),this.on$.complete(),this.refresh$.complete(),this.reloadSubscription&&this.reloadSubscription.unsubscribe()}input(s){s&&this.input$.next(s)}on(s=!0){this.on$.next(s)}refresh(){this.currentReloadStatus.reset(void 0),this.reloadSubscription&&this.reloadSubscription.unsubscribe(),this.refresh$.next(!0)}initReloadingStream(){return this.removeDebounce?this.reloading$.asObservable():this.reloading$.asObservable().pipe((0,h.b)(this.reloadDebounce))}initAssetsStream(){this.initAssetsInput().subscribe(s=>this.loadAsset(s),s=>this.error$.next(s))}initReloads(){this.running$.subscribe(s=>this.reload(s))}loadAsset(s){this.fetchAsset(s).subscribe(t=>{this.setAsset(t,s)},t=>{this.error$.next(t)})}setAsset(s,t){this.currentInput=t,this.currentAsset=s,this.reloading$.next(this.isRunning(s)),this.asset$.next(s)}initAssetsInput(){const t=(0,i.a)([this.input$,this.on$]).pipe((0,l.h)(([r,p])=>r&&p),(0,m.U)(([r,p])=>r)).pipe((0,b.x)((r,p)=>this.sameInput(r,p))),a=this.refresh$.pipe((0,g.w)(r=>t.pipe((0,o.q)(1))));return(0,f.T)(t,a).pipe((0,d.b)(r=>this.logMe("Assets input",r)))}reload(s){this.reloadSubscription&&this.reloadSubscription.unsubscribe();const t=this.currentReloadStatus.nextInterval(this.assetToId(s));if(!t)return void this.reloading$.next(!1);const a=this.assetToInput(s);this.reloadSubscription=(0,S.H)(t).subscribe(E=>{this.sameInput(a,this.currentInput)?(this.reloadSubscription=void 0,this.loadAsset(a)):console.log("Disabled reload as input has changed")})}}M.ids=0}}]);